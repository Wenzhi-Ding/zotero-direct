/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __reflectGet = Reflect.get;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __superGet = (cls, obj, key) => __reflectGet(__getProtoOf(cls), key, obj);
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MyPlugin
});
module.exports = __toCommonJS(main_exports);
var fs2 = __toESM(require("fs"), 1);

// node_modules/debugout.js/dist/debugout.min.js
var __assign = function() {
  return (__assign = Object.assign || function(t) {
    for (var e, o = 1, i = arguments.length; o < i; o++) for (var r in e = arguments[o]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
    return t;
  }).apply(this, arguments);
};
var debugoutDefaults = { realTimeLoggingOn: true, useTimestamps: false, includeSessionMetadata: true, useLocalStorage: false, recordLogs: true, autoTrim: true, maxLines: 3e3, tailNumLines: 25, maxDepth: 20, logFilename: "debugout.txt", localStorageKey: "debugout.js", indent: "  ", quoteStrings: true };
var Debugout = (function() {
  function t(t2) {
    var e = this;
    this.indent = "  ", this.tailNumLines = 25, this.output = "", this.version = function() {
      return "1.1.0";
    }, this.indentsForDepth = function(t3) {
      return e.indent.repeat(Math.max(t3, 0));
    }, this.trace = function() {
      return console.trace();
    }, this.time = function() {
      return console.time();
    }, this.timeEnd = function() {
      return console.timeEnd();
    };
    var o = __assign(__assign({}, debugoutDefaults), t2);
    for (var i in o) void 0 !== o[i] && (this[i] = o[i]);
    if (this.useLocalStorage && window && window.localStorage) {
      var r = this.load();
      if (r) {
        this.output = r.log, this.startTime = new Date(r.startTime);
        var n = new Date(r.lastLog);
        this.logMetadata("Last session end: " + r.lastLog), this.logMetadata("Last " + this.formatSessionDuration(this.startTime, n)), this.startLog();
      } else this.startLog();
    } else this.useLocalStorage = false, this.startLog();
  }
  return t.prototype.startLog = function() {
    this.startTime = /* @__PURE__ */ new Date(), this.logMetadata("Session started: " + this.formatDate(this.startTime));
  }, t.prototype.recordLog = function() {
    for (var t2 = this, e = [], o = 0; o < arguments.length; o++) e[o] = arguments[o];
    if (this.useTimestamps && (this.output += this.formatDate() + " "), this.output += e.map(function(e2) {
      return t2.stringify(e2);
    }).join(" "), this.output += "\n", this.autoTrim && (this.output = this.trimLog(this.maxLines)), this.useLocalStorage) {
      var i = { startTime: this.startTime, log: this.output, lastLog: /* @__PURE__ */ new Date() };
      window.localStorage.setItem(this.localStorageKey, JSON.stringify(i));
    }
  }, t.prototype.logMetadata = function(t2) {
    this.includeSessionMetadata && (this.output += "---- " + t2 + " ----\n");
  }, t.prototype.log = function() {
    for (var t2 = [], e = 0; e < arguments.length; e++) t2[e] = arguments[e];
    this.realTimeLoggingOn && console.log.apply(console, t2), this.recordLogs && this.recordLog.apply(this, t2);
  }, t.prototype.info = function() {
    for (var t2 = [], e = 0; e < arguments.length; e++) t2[e] = arguments[e];
    this.realTimeLoggingOn && console.info.apply(console, t2), this.recordLogs && (this.output += "[INFO] ", this.recordLog.apply(this, t2));
  }, t.prototype.warn = function() {
    for (var t2 = [], e = 0; e < arguments.length; e++) t2[e] = arguments[e];
    this.realTimeLoggingOn && console.warn.apply(console, t2), this.recordLogs && (this.output += "[WARN] ", this.recordLog.apply(this, t2));
  }, t.prototype.error = function() {
    for (var t2 = [], e = 0; e < arguments.length; e++) t2[e] = arguments[e];
    this.realTimeLoggingOn && console.error.apply(console, t2), this.recordLogs && (this.output += "[ERROR] ", this.recordLog.apply(this, t2));
  }, t.prototype.debug = function() {
    for (var t2 = [], e = 0; e < arguments.length; e++) t2[e] = arguments[e];
    this.realTimeLoggingOn && console.debug.apply(console, t2), this.recordLogs && (this.output += "[DEBUG] ", this.recordLog.apply(this, t2));
  }, t.prototype.getLog = function() {
    var t2 = /* @__PURE__ */ new Date();
    if (this.recordLogs || this.info("Log recording is off"), this.useLocalStorage && window && window.localStorage) {
      var e = this.load();
      e && (this.startTime = new Date(e.startTime), this.output = e.log);
    }
    return this.includeSessionMetadata ? this.output + "---- " + this.formatSessionDuration(this.startTime, t2) + " ----\n" : this.output;
  }, t.prototype.clear = function() {
    this.output = "", this.logMetadata("Session started: " + this.formatDate(this.startTime)), this.logMetadata("Log cleared " + this.formatDate()), this.useLocalStorage && this.save();
  }, t.prototype.tail = function(t2) {
    var e = t2 || this.tailNumLines;
    return this.trimLog(e);
  }, t.prototype.search = function(t2) {
    for (var e = new RegExp(t2, "ig"), o = this.output.split("\n"), i = [], r = 0; r < o.length; r++) {
      var n = "[" + r + "] ";
      o[r].match(e) && i.push(n + o[r].trim());
    }
    var s = i.join("\n");
    return s.length || (s = 'Nothing found for "' + t2 + '".'), s;
  }, t.prototype.slice = function() {
    for (var t2, e = [], o = 0; o < arguments.length; o++) e[o] = arguments[o];
    return (t2 = this.output.split("\n")).slice.apply(t2, e).join("\n");
  }, t.prototype.downloadLog = function() {
    if (window) {
      var t2 = this.getLog(), e = new Blob([t2], { type: "data:text/plain;charset=utf-8" }), o = document.createElement("a");
      o.href = window.URL.createObjectURL(e), o.target = "_blank", o.download = this.logFilename, document.body.appendChild(o), o.click(), document.body.removeChild(o), window.URL.revokeObjectURL(o.href);
    } else console.error("downloadLog only works in the browser");
  }, t.prototype.save = function() {
    var t2 = { startTime: this.startTime, log: this.output, lastLog: /* @__PURE__ */ new Date() };
    window.localStorage.setItem(this.localStorageKey, JSON.stringify(t2));
  }, t.prototype.load = function() {
    var t2 = window.localStorage.getItem(this.localStorageKey);
    return t2 ? JSON.parse(t2) : null;
  }, t.prototype.determineType = function(e) {
    if (null === e) return "null";
    if (void 0 === e) return "undefined";
    var o = typeof e;
    return "object" === o && (o = Array.isArray(e) ? "Array" : e instanceof Date ? "Date" : e instanceof RegExp ? "RegExp" : e instanceof t ? "Debugout" : "Object"), o;
  }, t.prototype.stringifyObject = function(t2, e) {
    void 0 === e && (e = 0);
    var o = "{", i = e;
    if (this.objectSize(t2) > 0) {
      o += "\n", i++;
      var r = 0;
      for (var n in t2) {
        o += this.indentsForDepth(i), o += n + ": ";
        var s = this.stringify(t2[n], i);
        s && (o += s), r < this.objectSize(t2) - 1 && (o += ","), o += "\n", r++;
      }
      i--, o += this.indentsForDepth(i);
    }
    return o += "}";
  }, t.prototype.stringifyArray = function(t2, e) {
    void 0 === e && (e = 0);
    var o = "[", i = e, r = false;
    if (t2.length > 0) {
      i++;
      for (var n = 0; n < t2.length; n++) {
        var s = this.determineType(t2[n]), a = false;
        "Object" === s && this.objectSize(t2[n]) > 0 && (a = true), "Array" === s && t2[n].length > 0 && (a = true), !r && a && (o += "\n");
        var u = this.stringify(t2[n], i);
        u && (a && (o += this.indentsForDepth(i)), o += u, n < t2.length - 1 && (o += ", "), a && (o += "\n")), r = a;
      }
      i--;
    }
    return o += "]";
  }, t.prototype.stringifyFunction = function(t2, e) {
    var o = this;
    void 0 === e && (e = 0);
    var i = e;
    return String(t2).split("\n").map(function(t3) {
      t3.match(/\}/) && i--;
      var e2 = o.indentsForDepth(i) + t3.trim();
      return t3.match(/\{/) && i++, e2;
    }).join("\n");
  }, t.prototype.stringify = function(t2, e) {
    if (void 0 === e && (e = 0), e >= this.maxDepth) return "... (max-depth reached)";
    var o = this.determineType(t2);
    switch (o) {
      case "Object":
        return this.stringifyObject(t2, e);
      case "Array":
        return this.stringifyArray(t2, e);
      case "function":
        return this.stringifyFunction(t2, e);
      case "RegExp":
        return "/" + t2.source + "/" + t2.flags;
      case "Date":
      case "string":
        return this.quoteStrings ? '"' + t2 + '"' : t2 + "";
      case "boolean":
        return t2 ? "true" : "false";
      case "number":
        return t2 + "";
      case "null":
      case "undefined":
        return o;
      case "Debugout":
        return "... (Debugout)";
      default:
        return "?";
    }
  }, t.prototype.trimLog = function(t2) {
    var e = this.output.split("\n");
    return e.pop(), e.length > t2 && (e = e.slice(e.length - t2)), e.join("\n") + "\n";
  }, t.prototype.formatSessionDuration = function(t2, e) {
    var o = e - t2, i = Math.floor(o / 1e3 / 60 / 60), r = ("0" + i).slice(-2);
    o -= 1e3 * i * 60 * 60;
    var n = Math.floor(o / 1e3 / 60), s = ("0" + n).slice(-2);
    o -= 1e3 * n * 60;
    var a = Math.floor(o / 1e3);
    return o -= 1e3 * a, "Session duration: " + r + ":" + s + ":" + ("0" + a).slice(-2);
  }, t.prototype.formatDate = function(t2) {
    return void 0 === t2 && (t2 = /* @__PURE__ */ new Date()), "[" + t2.toISOString() + "]";
  }, t.prototype.objectSize = function(t2) {
    var e = 0;
    for (var o in t2) t2.hasOwnProperty(o) && e++;
    return e;
  }, t;
})();

// src/main.ts
var import_obsidian6 = require("obsidian");

// node_modules/turndown/lib/turndown.browser.es.js
function extend(destination) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];
    for (var key in source) {
      if (source.hasOwnProperty(key)) destination[key] = source[key];
    }
  }
  return destination;
}
function repeat(character, count) {
  return Array(count + 1).join(character);
}
function trimLeadingNewlines(string) {
  return string.replace(/^\n*/, "");
}
function trimTrailingNewlines(string) {
  var indexEnd = string.length;
  while (indexEnd > 0 && string[indexEnd - 1] === "\n") indexEnd--;
  return string.substring(0, indexEnd);
}
function trimNewlines(string) {
  return trimTrailingNewlines(trimLeadingNewlines(string));
}
var blockElements = [
  "ADDRESS",
  "ARTICLE",
  "ASIDE",
  "AUDIO",
  "BLOCKQUOTE",
  "BODY",
  "CANVAS",
  "CENTER",
  "DD",
  "DIR",
  "DIV",
  "DL",
  "DT",
  "FIELDSET",
  "FIGCAPTION",
  "FIGURE",
  "FOOTER",
  "FORM",
  "FRAMESET",
  "H1",
  "H2",
  "H3",
  "H4",
  "H5",
  "H6",
  "HEADER",
  "HGROUP",
  "HR",
  "HTML",
  "ISINDEX",
  "LI",
  "MAIN",
  "MENU",
  "NAV",
  "NOFRAMES",
  "NOSCRIPT",
  "OL",
  "OUTPUT",
  "P",
  "PRE",
  "SECTION",
  "TABLE",
  "TBODY",
  "TD",
  "TFOOT",
  "TH",
  "THEAD",
  "TR",
  "UL"
];
function isBlock(node) {
  return is(node, blockElements);
}
var voidElements = [
  "AREA",
  "BASE",
  "BR",
  "COL",
  "COMMAND",
  "EMBED",
  "HR",
  "IMG",
  "INPUT",
  "KEYGEN",
  "LINK",
  "META",
  "PARAM",
  "SOURCE",
  "TRACK",
  "WBR"
];
function isVoid(node) {
  return is(node, voidElements);
}
function hasVoid(node) {
  return has(node, voidElements);
}
var meaningfulWhenBlankElements = [
  "A",
  "TABLE",
  "THEAD",
  "TBODY",
  "TFOOT",
  "TH",
  "TD",
  "IFRAME",
  "SCRIPT",
  "AUDIO",
  "VIDEO"
];
function isMeaningfulWhenBlank(node) {
  return is(node, meaningfulWhenBlankElements);
}
function hasMeaningfulWhenBlank(node) {
  return has(node, meaningfulWhenBlankElements);
}
function is(node, tagNames) {
  return tagNames.indexOf(node.nodeName) >= 0;
}
function has(node, tagNames) {
  return node.getElementsByTagName && tagNames.some(function(tagName) {
    return node.getElementsByTagName(tagName).length;
  });
}
var rules = {};
rules.paragraph = {
  filter: "p",
  replacement: function(content) {
    return "\n\n" + content + "\n\n";
  }
};
rules.lineBreak = {
  filter: "br",
  replacement: function(content, node, options) {
    return options.br + "\n";
  }
};
rules.heading = {
  filter: ["h1", "h2", "h3", "h4", "h5", "h6"],
  replacement: function(content, node, options) {
    var hLevel = Number(node.nodeName.charAt(1));
    if (options.headingStyle === "setext" && hLevel < 3) {
      var underline = repeat(hLevel === 1 ? "=" : "-", content.length);
      return "\n\n" + content + "\n" + underline + "\n\n";
    } else {
      return "\n\n" + repeat("#", hLevel) + " " + content + "\n\n";
    }
  }
};
rules.blockquote = {
  filter: "blockquote",
  replacement: function(content) {
    content = trimNewlines(content).replace(/^/gm, "> ");
    return "\n\n" + content + "\n\n";
  }
};
rules.list = {
  filter: ["ul", "ol"],
  replacement: function(content, node) {
    var parent = node.parentNode;
    if (parent.nodeName === "LI" && parent.lastElementChild === node) {
      return "\n" + content;
    } else {
      return "\n\n" + content + "\n\n";
    }
  }
};
rules.listItem = {
  filter: "li",
  replacement: function(content, node, options) {
    var prefix = options.bulletListMarker + "   ";
    var parent = node.parentNode;
    if (parent.nodeName === "OL") {
      var start2 = parent.getAttribute("start");
      var index = Array.prototype.indexOf.call(parent.children, node);
      prefix = (start2 ? Number(start2) + index : index + 1) + ".  ";
    }
    var isParagraph = /\n$/.test(content);
    content = trimNewlines(content) + (isParagraph ? "\n" : "");
    content = content.replace(/\n/gm, "\n" + " ".repeat(prefix.length));
    return prefix + content + (node.nextSibling ? "\n" : "");
  }
};
rules.indentedCodeBlock = {
  filter: function(node, options) {
    return options.codeBlockStyle === "indented" && node.nodeName === "PRE" && node.firstChild && node.firstChild.nodeName === "CODE";
  },
  replacement: function(content, node, options) {
    return "\n\n    " + node.firstChild.textContent.replace(/\n/g, "\n    ") + "\n\n";
  }
};
rules.fencedCodeBlock = {
  filter: function(node, options) {
    return options.codeBlockStyle === "fenced" && node.nodeName === "PRE" && node.firstChild && node.firstChild.nodeName === "CODE";
  },
  replacement: function(content, node, options) {
    var className = node.firstChild.getAttribute("class") || "";
    var language = (className.match(/language-(\S+)/) || [null, ""])[1];
    var code = node.firstChild.textContent;
    var fenceChar = options.fence.charAt(0);
    var fenceSize = 3;
    var fenceInCodeRegex = new RegExp("^" + fenceChar + "{3,}", "gm");
    var match;
    while (match = fenceInCodeRegex.exec(code)) {
      if (match[0].length >= fenceSize) {
        fenceSize = match[0].length + 1;
      }
    }
    var fence = repeat(fenceChar, fenceSize);
    return "\n\n" + fence + language + "\n" + code.replace(/\n$/, "") + "\n" + fence + "\n\n";
  }
};
rules.horizontalRule = {
  filter: "hr",
  replacement: function(content, node, options) {
    return "\n\n" + options.hr + "\n\n";
  }
};
rules.inlineLink = {
  filter: function(node, options) {
    return options.linkStyle === "inlined" && node.nodeName === "A" && node.getAttribute("href");
  },
  replacement: function(content, node) {
    var href = node.getAttribute("href");
    if (href) href = href.replace(/([()])/g, "\\$1");
    var title = cleanAttribute(node.getAttribute("title"));
    if (title) title = ' "' + title.replace(/"/g, '\\"') + '"';
    return "[" + content + "](" + href + title + ")";
  }
};
rules.referenceLink = {
  filter: function(node, options) {
    return options.linkStyle === "referenced" && node.nodeName === "A" && node.getAttribute("href");
  },
  replacement: function(content, node, options) {
    var href = node.getAttribute("href");
    var title = cleanAttribute(node.getAttribute("title"));
    if (title) title = ' "' + title + '"';
    var replacement;
    var reference2;
    switch (options.linkReferenceStyle) {
      case "collapsed":
        replacement = "[" + content + "][]";
        reference2 = "[" + content + "]: " + href + title;
        break;
      case "shortcut":
        replacement = "[" + content + "]";
        reference2 = "[" + content + "]: " + href + title;
        break;
      default:
        var id = this.references.length + 1;
        replacement = "[" + content + "][" + id + "]";
        reference2 = "[" + id + "]: " + href + title;
    }
    this.references.push(reference2);
    return replacement;
  },
  references: [],
  append: function(options) {
    var references = "";
    if (this.references.length) {
      references = "\n\n" + this.references.join("\n") + "\n\n";
      this.references = [];
    }
    return references;
  }
};
rules.emphasis = {
  filter: ["em", "i"],
  replacement: function(content, node, options) {
    if (!content.trim()) return "";
    return options.emDelimiter + content + options.emDelimiter;
  }
};
rules.strong = {
  filter: ["strong", "b"],
  replacement: function(content, node, options) {
    if (!content.trim()) return "";
    return options.strongDelimiter + content + options.strongDelimiter;
  }
};
rules.code = {
  filter: function(node) {
    var hasSiblings = node.previousSibling || node.nextSibling;
    var isCodeBlock = node.parentNode.nodeName === "PRE" && !hasSiblings;
    return node.nodeName === "CODE" && !isCodeBlock;
  },
  replacement: function(content) {
    if (!content) return "";
    content = content.replace(/\r?\n|\r/g, " ");
    var extraSpace = /^`|^ .*?[^ ].* $|`$/.test(content) ? " " : "";
    var delimiter = "`";
    var matches = content.match(/`+/gm) || [];
    while (matches.indexOf(delimiter) !== -1) delimiter = delimiter + "`";
    return delimiter + extraSpace + content + extraSpace + delimiter;
  }
};
rules.image = {
  filter: "img",
  replacement: function(content, node) {
    var alt = cleanAttribute(node.getAttribute("alt"));
    var src = node.getAttribute("src") || "";
    var title = cleanAttribute(node.getAttribute("title"));
    var titlePart = title ? ' "' + title + '"' : "";
    return src ? "![" + alt + "](" + src + titlePart + ")" : "";
  }
};
function cleanAttribute(attribute) {
  return attribute ? attribute.replace(/(\n+\s*)+/g, "\n") : "";
}
function Rules(options) {
  this.options = options;
  this._keep = [];
  this._remove = [];
  this.blankRule = {
    replacement: options.blankReplacement
  };
  this.keepReplacement = options.keepReplacement;
  this.defaultRule = {
    replacement: options.defaultReplacement
  };
  this.array = [];
  for (var key in options.rules) this.array.push(options.rules[key]);
}
Rules.prototype = {
  add: function(key, rule) {
    this.array.unshift(rule);
  },
  keep: function(filter) {
    this._keep.unshift({
      filter,
      replacement: this.keepReplacement
    });
  },
  remove: function(filter) {
    this._remove.unshift({
      filter,
      replacement: function() {
        return "";
      }
    });
  },
  forNode: function(node) {
    if (node.isBlank) return this.blankRule;
    var rule;
    if (rule = findRule(this.array, node, this.options)) return rule;
    if (rule = findRule(this._keep, node, this.options)) return rule;
    if (rule = findRule(this._remove, node, this.options)) return rule;
    return this.defaultRule;
  },
  forEach: function(fn2) {
    for (var i = 0; i < this.array.length; i++) fn2(this.array[i], i);
  }
};
function findRule(rules2, node, options) {
  for (var i = 0; i < rules2.length; i++) {
    var rule = rules2[i];
    if (filterValue(rule, node, options)) return rule;
  }
  return void 0;
}
function filterValue(rule, node, options) {
  var filter = rule.filter;
  if (typeof filter === "string") {
    if (filter === node.nodeName.toLowerCase()) return true;
  } else if (Array.isArray(filter)) {
    if (filter.indexOf(node.nodeName.toLowerCase()) > -1) return true;
  } else if (typeof filter === "function") {
    if (filter.call(rule, node, options)) return true;
  } else {
    throw new TypeError("`filter` needs to be a string, array, or function");
  }
}
function collapseWhitespace(options) {
  var element = options.element;
  var isBlock2 = options.isBlock;
  var isVoid2 = options.isVoid;
  var isPre = options.isPre || function(node2) {
    return node2.nodeName === "PRE";
  };
  if (!element.firstChild || isPre(element)) return;
  var prevText = null;
  var keepLeadingWs = false;
  var prev = null;
  var node = next(prev, element, isPre);
  while (node !== element) {
    if (node.nodeType === 3 || node.nodeType === 4) {
      var text = node.data.replace(/[ \r\n\t]+/g, " ");
      if ((!prevText || / $/.test(prevText.data)) && !keepLeadingWs && text[0] === " ") {
        text = text.substr(1);
      }
      if (!text) {
        node = remove(node);
        continue;
      }
      node.data = text;
      prevText = node;
    } else if (node.nodeType === 1) {
      if (isBlock2(node) || node.nodeName === "BR") {
        if (prevText) {
          prevText.data = prevText.data.replace(/ $/, "");
        }
        prevText = null;
        keepLeadingWs = false;
      } else if (isVoid2(node) || isPre(node)) {
        prevText = null;
        keepLeadingWs = true;
      } else if (prevText) {
        keepLeadingWs = false;
      }
    } else {
      node = remove(node);
      continue;
    }
    var nextNode = next(prev, node, isPre);
    prev = node;
    node = nextNode;
  }
  if (prevText) {
    prevText.data = prevText.data.replace(/ $/, "");
    if (!prevText.data) {
      remove(prevText);
    }
  }
}
function remove(node) {
  var next2 = node.nextSibling || node.parentNode;
  node.parentNode.removeChild(node);
  return next2;
}
function next(prev, current, isPre) {
  if (prev && prev.parentNode === current || isPre(current)) {
    return current.nextSibling || current.parentNode;
  }
  return current.firstChild || current.nextSibling || current.parentNode;
}
var root = typeof window !== "undefined" ? window : {};
function canParseHTMLNatively() {
  var Parser = root.DOMParser;
  var canParse = false;
  try {
    if (new Parser().parseFromString("", "text/html")) {
      canParse = true;
    }
  } catch (e) {
  }
  return canParse;
}
function createHTMLParser() {
  var Parser = function() {
  };
  {
    if (shouldUseActiveX()) {
      Parser.prototype.parseFromString = function(string) {
        var doc = new window.ActiveXObject("htmlfile");
        doc.designMode = "on";
        doc.open();
        doc.write(string);
        doc.close();
        return doc;
      };
    } else {
      Parser.prototype.parseFromString = function(string) {
        var doc = document.implementation.createHTMLDocument("");
        doc.open();
        doc.write(string);
        doc.close();
        return doc;
      };
    }
  }
  return Parser;
}
function shouldUseActiveX() {
  var useActiveX = false;
  try {
    document.implementation.createHTMLDocument("").open();
  } catch (e) {
    if (root.ActiveXObject) useActiveX = true;
  }
  return useActiveX;
}
var HTMLParser = canParseHTMLNatively() ? root.DOMParser : createHTMLParser();
function RootNode(input, options) {
  var root2;
  if (typeof input === "string") {
    var doc = htmlParser().parseFromString(
      // DOM parsers arrange elements in the <head> and <body>.
      // Wrapping in a custom element ensures elements are reliably arranged in
      // a single element.
      '<x-turndown id="turndown-root">' + input + "</x-turndown>",
      "text/html"
    );
    root2 = doc.getElementById("turndown-root");
  } else {
    root2 = input.cloneNode(true);
  }
  collapseWhitespace({
    element: root2,
    isBlock,
    isVoid,
    isPre: options.preformattedCode ? isPreOrCode : null
  });
  return root2;
}
var _htmlParser;
function htmlParser() {
  _htmlParser = _htmlParser || new HTMLParser();
  return _htmlParser;
}
function isPreOrCode(node) {
  return node.nodeName === "PRE" || node.nodeName === "CODE";
}
function Node(node, options) {
  node.isBlock = isBlock(node);
  node.isCode = node.nodeName === "CODE" || node.parentNode.isCode;
  node.isBlank = isBlank(node);
  node.flankingWhitespace = flankingWhitespace(node, options);
  return node;
}
function isBlank(node) {
  return !isVoid(node) && !isMeaningfulWhenBlank(node) && /^\s*$/i.test(node.textContent) && !hasVoid(node) && !hasMeaningfulWhenBlank(node);
}
function flankingWhitespace(node, options) {
  if (node.isBlock || options.preformattedCode && node.isCode) {
    return { leading: "", trailing: "" };
  }
  var edges = edgeWhitespace(node.textContent);
  if (edges.leadingAscii && isFlankedByWhitespace("left", node, options)) {
    edges.leading = edges.leadingNonAscii;
  }
  if (edges.trailingAscii && isFlankedByWhitespace("right", node, options)) {
    edges.trailing = edges.trailingNonAscii;
  }
  return { leading: edges.leading, trailing: edges.trailing };
}
function edgeWhitespace(string) {
  var m = string.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);
  return {
    leading: m[1],
    // whole string for whitespace-only strings
    leadingAscii: m[2],
    leadingNonAscii: m[3],
    trailing: m[4],
    // empty for whitespace-only strings
    trailingNonAscii: m[5],
    trailingAscii: m[6]
  };
}
function isFlankedByWhitespace(side, node, options) {
  var sibling;
  var regExp;
  var isFlanked;
  if (side === "left") {
    sibling = node.previousSibling;
    regExp = / $/;
  } else {
    sibling = node.nextSibling;
    regExp = /^ /;
  }
  if (sibling) {
    if (sibling.nodeType === 3) {
      isFlanked = regExp.test(sibling.nodeValue);
    } else if (options.preformattedCode && sibling.nodeName === "CODE") {
      isFlanked = false;
    } else if (sibling.nodeType === 1 && !isBlock(sibling)) {
      isFlanked = regExp.test(sibling.textContent);
    }
  }
  return isFlanked;
}
var reduce = Array.prototype.reduce;
var escapes = [
  [/\\/g, "\\\\"],
  [/\*/g, "\\*"],
  [/^-/g, "\\-"],
  [/^\+ /g, "\\+ "],
  [/^(=+)/g, "\\$1"],
  [/^(#{1,6}) /g, "\\$1 "],
  [/`/g, "\\`"],
  [/^~~~/g, "\\~~~"],
  [/\[/g, "\\["],
  [/\]/g, "\\]"],
  [/^>/g, "\\>"],
  [/_/g, "\\_"],
  [/^(\d+)\. /g, "$1\\. "]
];
function TurndownService(options) {
  if (!(this instanceof TurndownService)) return new TurndownService(options);
  var defaults = {
    rules,
    headingStyle: "setext",
    hr: "* * *",
    bulletListMarker: "*",
    codeBlockStyle: "indented",
    fence: "```",
    emDelimiter: "_",
    strongDelimiter: "**",
    linkStyle: "inlined",
    linkReferenceStyle: "full",
    br: "  ",
    preformattedCode: false,
    blankReplacement: function(content, node) {
      return node.isBlock ? "\n\n" : "";
    },
    keepReplacement: function(content, node) {
      return node.isBlock ? "\n\n" + node.outerHTML + "\n\n" : node.outerHTML;
    },
    defaultReplacement: function(content, node) {
      return node.isBlock ? "\n\n" + content + "\n\n" : content;
    }
  };
  this.options = extend({}, defaults, options);
  this.rules = new Rules(this.options);
}
TurndownService.prototype = {
  /**
   * The entry point for converting a string or DOM node to Markdown
   * @public
   * @param {String|HTMLElement} input The string or DOM node to convert
   * @returns A Markdown representation of the input
   * @type String
   */
  turndown: function(input) {
    if (!canConvert(input)) {
      throw new TypeError(
        input + " is not a string, or an element/document/fragment node."
      );
    }
    if (input === "") return "";
    var output = process.call(this, new RootNode(input, this.options));
    return postProcess.call(this, output);
  },
  /**
   * Add one or more plugins
   * @public
   * @param {Function|Array} plugin The plugin or array of plugins to add
   * @returns The Turndown instance for chaining
   * @type Object
   */
  use: function(plugin) {
    if (Array.isArray(plugin)) {
      for (var i = 0; i < plugin.length; i++) this.use(plugin[i]);
    } else if (typeof plugin === "function") {
      plugin(this);
    } else {
      throw new TypeError("plugin must be a Function or an Array of Functions");
    }
    return this;
  },
  /**
   * Adds a rule
   * @public
   * @param {String} key The unique key of the rule
   * @param {Object} rule The rule
   * @returns The Turndown instance for chaining
   * @type Object
   */
  addRule: function(key, rule) {
    this.rules.add(key, rule);
    return this;
  },
  /**
   * Keep a node (as HTML) that matches the filter
   * @public
   * @param {String|Array|Function} filter The unique key of the rule
   * @returns The Turndown instance for chaining
   * @type Object
   */
  keep: function(filter) {
    this.rules.keep(filter);
    return this;
  },
  /**
   * Remove a node that matches the filter
   * @public
   * @param {String|Array|Function} filter The unique key of the rule
   * @returns The Turndown instance for chaining
   * @type Object
   */
  remove: function(filter) {
    this.rules.remove(filter);
    return this;
  },
  /**
   * Escapes Markdown syntax
   * @public
   * @param {String} string The string to escape
   * @returns A string with Markdown syntax escaped
   * @type String
   */
  escape: function(string) {
    return escapes.reduce(function(accumulator, escape) {
      return accumulator.replace(escape[0], escape[1]);
    }, string);
  }
};
function process(parentNode) {
  var self = this;
  return reduce.call(parentNode.childNodes, function(output, node) {
    node = new Node(node, self.options);
    var replacement = "";
    if (node.nodeType === 3) {
      replacement = node.isCode ? node.nodeValue : self.escape(node.nodeValue);
    } else if (node.nodeType === 1) {
      replacement = replacementForNode.call(self, node);
    }
    return join(output, replacement);
  }, "");
}
function postProcess(output) {
  var self = this;
  this.rules.forEach(function(rule) {
    if (typeof rule.append === "function") {
      output = join(output, rule.append(self.options));
    }
  });
  return output.replace(/^[\t\r\n]+/, "").replace(/[\t\r\n\s]+$/, "");
}
function replacementForNode(node) {
  var rule = this.rules.forNode(node);
  var content = process.call(this, node);
  var whitespace = node.flankingWhitespace;
  if (whitespace.leading || whitespace.trailing) content = content.trim();
  return whitespace.leading + rule.replacement(content, node, this.options) + whitespace.trailing;
}
function join(output, replacement) {
  var s1 = trimTrailingNewlines(output);
  var s2 = trimLeadingNewlines(replacement);
  var nls = Math.max(output.length - s1.length, replacement.length - s2.length);
  var separator = "\n\n".substring(0, nls);
  return s1 + separator + s2;
}
function canConvert(input) {
  return input != null && (typeof input === "string" || input.nodeType && (input.nodeType === 1 || input.nodeType === 9 || input.nodeType === 11));
}

// src/constants.ts
var templatePlain = "# {{title}}\n\n## Metadata\n- **CiteKey**: {{citekey}}\n - **Type**: {{itemType}}\n - **Title**: {{title}}, \n - **Author**: {{author}};  \n- **Editor**: {{editor}};  \n- **Translator**: {{translator}}\n- **Publisher**: {{publisher}},\n- **Location**: {{place}},\n- **Series**: {{series}}\n- **Series Number**: {{seriesNumber}}\n- **Journal**: {{publicationTitle}}, \n- **Volume**: {{volume}},\n- **Issue**: {{issue}}\n- **Pages**: {{pages}}\n- **Year**: {{year}} \n- **DOI**: {{DOI}}\n- **ISSN**: {{ISSN}}\n- **ISBN**: {{ISBN}}\n\n## Abstract\n{{abstractNote}}\n## Files and Links\n- **Url**: {{url}}\n- **Uri**: {{uri}}\n- **Eprint**: {{eprint}}\n- **File**: {{file}}\n- **Local Library**: [Zotero]({{localLibraryLink}})\n\n## Tags and Collections\n- **Keywords**: {{keywordsAll}}\n- **Collections**: {{collectionsParent}}\n\n\n----\n\n## Comments\n{{UserNotes}}\n\n\n----\n\n## Extracted Annotations\n{{PDFNotes}}";
var templateAdmonition = "# {{title}}\n\n``` ad-info\ntitle: Metadata\n- **CiteKey**: {{citekey}}\n- **Type**: {{itemType}}\n- **Author**: {{author}}\n- **Editor**: {{editor}}\n- **Translator**: {{translator}}\n- **Publisher**: {{publisher}}\n- **Location**: {{place}}\n- **Series**: {{series}}\n- **Series Number**: {{seriesNumber}}\n- **Journal**: {{publicationTitle}}\n- **Volume**: {{volume}}\n- **Issue**: {{issue}}\n- **Pages**: {{pages}}\n- **Year**: {{year}} \n- **DOI**: {{DOI}}\n- **ISSN**: {{ISSN}}\n- **ISBN**: {{ISBN}}\n```\n```ad-quote\ntitle: Abstract\n{{abstractNote}}\n```\n```ad-abstract\ntitle: Files and Links\n- **Url**: {{url}}\n- **Uri**: {{uri}}\n- **Eprint**: {{eprint}}\n- **File**: {{file}}\n- **Local Library**: [Zotero]({{localLibraryLink}})\n```\n```ad-note\ntitle: Tags and Collections\n- **Keywords**: {{keywordsAll}}\n- **Collections**: {{collectionsParent}}\n```\n\n----\n\n## Comments\n{{UserNotes}}\n\n\n----\n\n## Extracted Annotations\n{{PDFNotes}}";
var DEFAULT_SETTINGS = {
  bibPath: "",
  templateContent: templatePlain,
  templateType: "Admonition",
  lastUpdateDate: /* @__PURE__ */ new Date("1995-12-17T03:24:00"),
  updateLibrary: "Only update existing notes",
  exportPath: "",
  exportTitle: "{{citeKey}}",
  missingfield: "Leave placeholder",
  saveManualEdits: "Save Entire Note",
  saveManualEditsStart: "",
  saveManualEditsEnd: "",
  isDoubleSpaced: true,
  multipleFieldsDivider: ";",
  nameFormat: "{{lastName}}, {{firstName}}",
  debugMode: false,
  missingfieldreplacement: "NA"
};
var TEMPLATE_REG = /\{\{[^}]+\}\}/g;
var TEMPLATE_BRACKET_REG = /\[\[\{\{[^}]+\}\}\]\]/g;

// src/modal.ts
var fs = __toESM(require("fs"), 1);
var import_obsidian2 = require("obsidian");

// src/utils.ts
var import_obsidian = require("obsidian");
var import_path = __toESM(require("path"), 1);
function replaceAllTemplates(entriesArray, note, selectedEntry) {
  let copy = note.slice();
  for (let z = 0; z < entriesArray.length; z++) {
    const KW = entriesArray[z];
    const KW_Brackets = "{{" + KW + "}}";
    copy = replaceTemplate(
      copy,
      KW_Brackets,
      `${selectedEntry[KW]}`
    );
  }
  return copy;
}
function escapeRegExp(stringAdd) {
  return stringAdd.replace(/[.*+\-?^${}()|[\]\\]/g, "\\$&");
}
function replaceTemplate(stringAdd, find, replace) {
  return stringAdd.replace(new RegExp(escapeRegExp(find), "g"), replace);
}
var makeWiki = (str) => "[[" + str + "]]";
var makeQuotes = (str) => '"' + str + '"';
var makeTags = (str) => "#" + str;
var createAuthorKey = (creators) => {
  const authorKey = [];
  const editorKey = [];
  let authorKeyFixed = "";
  let editorKeyFixed = "";
  for (let creatorindex = 0; creatorindex < creators.length; creatorindex++) {
    const creator = creators[creatorindex];
    if (creator.creatorType === "author") {
      if (creator.hasOwnProperty("name")) {
        authorKey.push(creator.name);
      } else if (creator.hasOwnProperty("lastName") && creator.hasOwnProperty("firstName")) {
        authorKey.push(creator.lastName);
      } else if (creator.hasOwnProperty("lastName") && !creator.hasOwnProperty("firstName")) {
        authorKey.push(creator.lastName);
      } else if (!creator.hasOwnProperty("lastName") && creator.hasOwnProperty("firstName")) {
        authorKey.push(creator.firstName);
      }
    } else if (creator.creatorType === "editor") {
      if (creator.hasOwnProperty("name")) {
        editorKey.push(creator.name);
      } else if (creator.hasOwnProperty("lastName") && creator.hasOwnProperty("firstName")) {
        editorKey.push(creator.lastName);
      } else if (creator.hasOwnProperty("lastName") && !creator.hasOwnProperty("firstName")) {
        editorKey.push(creator.lastName);
      } else if (!creator.hasOwnProperty("lastName") && creator.hasOwnProperty("firstName")) {
        editorKey.push(creator.firstName);
      }
    }
  }
  if (authorKey.length == 1) {
    authorKeyFixed = authorKey[0];
  }
  if (authorKey.length == 2) {
    authorKeyFixed = authorKey[0] + " and " + authorKey[1];
  }
  if (authorKey.length == 3) {
    authorKeyFixed = authorKey[0] + ", " + authorKey[1] + " and " + authorKey[2];
  }
  if (authorKey.length > 3) {
    authorKeyFixed = authorKey[0] + " et al.";
  }
  if (authorKey.length > 0) {
    return authorKeyFixed;
  }
  if (editorKey.length == 1) {
    editorKeyFixed = editorKey[0];
  }
  if (editorKey.length == 2) {
    editorKeyFixed = editorKey[0] + " and " + editorKey[1];
  }
  if (editorKey.length == 3) {
    editorKeyFixed = editorKey[0] + ", " + editorKey[1] + " and " + editorKey[2];
  }
  if (authorKey.length > 3) {
    editorKeyFixed = editorKey[0] + " et al.";
  }
  if (editorKey.length > 0) {
    return editorKeyFixed;
  }
};
var createAuthorKeyFullName = (creators) => {
  const authorKey = [];
  const authorKeyReverse = [];
  const editorKey = [];
  const editorKeyReverse = [];
  let authorKeyFixed = "";
  let editorKeyFixed = "";
  for (let creatorindex = 0; creatorindex < creators.length; creatorindex++) {
    const creator = creators[creatorindex];
    if (creator.creatorType === "author") {
      if (creator.hasOwnProperty("name")) {
        authorKey.push(creator.name);
      } else if (creator.hasOwnProperty("lastName") && creator.hasOwnProperty("firstName")) {
        authorKey.push(creator.lastName + ", " + creator.firstName);
        authorKeyReverse.push(creator.firstName + " " + creator.lastName);
      } else if (creator.hasOwnProperty("lastName") && !creator.hasOwnProperty("firstName")) {
        authorKey.push(creator.lastName);
      } else if (!creator.hasOwnProperty("lastName") && creator.hasOwnProperty("firstName")) {
        authorKey.push(creator.firstName);
      }
    } else if (creator.creatorType === "editor") {
      if (creator.hasOwnProperty("name")) {
        editorKey.push(creator.name);
      } else if (creator.hasOwnProperty("lastName") && creator.hasOwnProperty("firstName")) {
        editorKey.push(creator.lastName + ", " + creator.firstName);
        editorKeyReverse.push(creator.firstName + " " + creator.lastName);
      } else if (creator.hasOwnProperty("lastName") && !creator.hasOwnProperty("firstName")) {
        editorKey.push(creator.lastName);
      } else if (!creator.hasOwnProperty("lastName") && creator.hasOwnProperty("firstName")) {
        editorKey.push(creator.firstName);
      }
    }
  }
  if (authorKey.length == 1) {
    authorKeyFixed = authorKey[0];
  }
  if (authorKey.length == 2) {
    authorKeyFixed = authorKey[0] + " and " + authorKeyReverse[1];
  }
  if (authorKey.length == 3) {
    authorKeyFixed = authorKey[0] + ", " + authorKeyReverse[1] + " and " + authorKeyReverse[2];
  }
  if (authorKey.length > 3) {
    authorKeyFixed = authorKey[0] + " et al.";
  }
  if (authorKey.length > 0) {
    return authorKeyFixed;
  }
  if (editorKey.length == 1) {
    editorKeyFixed = editorKey[0];
  }
  if (editorKey.length == 2) {
    editorKeyFixed = editorKey[0] + " and " + editorKeyReverse[1];
  }
  if (editorKey.length == 3) {
    editorKeyFixed = editorKey[0] + ", " + editorKeyReverse[1] + " and " + editorKeyReverse[2];
  }
  if (authorKey.length > 3) {
    editorKeyFixed = editorKey[0] + " et al.";
  }
  if (editorKey.length > 0) {
    return editorKeyFixed;
  }
};
var createAuthorKeyInitials = (creators) => {
  const authorKey = [];
  const editorKey = [];
  let authorKeyFixed = "";
  let editorKeyFixed = "";
  for (let creatorindex = 0; creatorindex < creators.length; creatorindex++) {
    const creator = creators[creatorindex];
    if (creator.creatorType === "author") {
      if (creator.hasOwnProperty("name")) {
        authorKey.push(creator.name);
      } else if (creator.hasOwnProperty("lastName") && creator.hasOwnProperty("firstName")) {
        authorKey.push(creator.lastName + ", " + creator.firstName.substring(0, 1) + ".");
      } else if (creator.hasOwnProperty("lastName") && !creator.hasOwnProperty("firstName")) {
        authorKey.push(creator.lastName);
      } else if (!creator.hasOwnProperty("lastName") && creator.hasOwnProperty("firstName")) {
        authorKey.push(creator.firstName);
      }
    } else if (creator.creatorType === "editor") {
      if (creator.hasOwnProperty("name")) {
        editorKey.push(creator.name);
      } else if (creator.hasOwnProperty("lastName") && creator.hasOwnProperty("firstName")) {
        editorKey.push(creator.lastName + ", " + creator.firstName.substring(0, 1) + ".");
      } else if (creator.hasOwnProperty("lastName") && !creator.hasOwnProperty("firstName")) {
        editorKey.push(creator.lastName);
      } else if (!creator.hasOwnProperty("lastName") && creator.hasOwnProperty("firstName")) {
        editorKey.push(creator.firstName);
      }
    }
  }
  if (authorKey.length == 1) {
    authorKeyFixed = authorKey[0];
  }
  if (authorKey.length == 2) {
    authorKeyFixed = authorKey[0] + " and " + authorKey[1];
  }
  if (authorKey.length == 3) {
    authorKeyFixed = authorKey[0] + ", " + authorKey[1] + " and " + authorKey[2];
  }
  if (authorKey.length > 3) {
    authorKeyFixed = authorKey[0] + " et al.";
  }
  if (authorKey.length > 0) {
    return authorKeyFixed;
  }
  if (editorKey.length == 1) {
    editorKeyFixed = editorKey[0];
  }
  if (editorKey.length == 2) {
    editorKeyFixed = editorKey[0] + " and " + editorKey[1];
  }
  if (editorKey.length == 3) {
    editorKeyFixed = editorKey[0] + ", " + editorKey[1] + " and " + editorKey[2];
  }
  if (authorKey.length > 3) {
    editorKeyFixed = editorKey[0] + " et al.";
  }
  if (editorKey.length > 0) {
    return editorKeyFixed;
  }
};
function orderByDateModified(a, b) {
  if (a.dateModified > b.dateModified) {
    return -1;
  }
  if (a.dateModified < b.dateModified) {
    return 1;
  }
  return 0;
}
function formatCreatorsName(creator, nameCustom) {
  if (creator.hasOwnProperty("name")) {
    nameCustom = creator.name;
    nameCustom = nameCustom.trim();
    return nameCustom;
  } else if (creator.hasOwnProperty("lastName") && creator.hasOwnProperty("firstName")) {
    nameCustom = nameCustom.replace("{{lastName}}", creator.lastName);
    nameCustom = nameCustom.replace("{{firstName}}", creator.firstName);
    const getInitials = function(string) {
      let names = string.split(" "), initials = names[0].substring(0, 1).toUpperCase() + ".";
      if (names.length > 1) {
        initials += names[names.length - 1].substring(0, 1).toUpperCase() + ".";
      }
      return initials;
    };
    nameCustom = nameCustom.replace("{{firstNameInitials}}", getInitials(creator.firstName));
    nameCustom = nameCustom.trim();
    return nameCustom;
  } else if (creator.hasOwnProperty("lastName") && !creator.hasOwnProperty("firstName")) {
    nameCustom = nameCustom.replace("{{lastName}}", creator.lastName);
    nameCustom = nameCustom.replace("; {{firstName}}", creator.firstName);
    nameCustom = nameCustom.replace(", {{firstName}}", creator.firstName);
    nameCustom = nameCustom.replace("{{firstName}}", "");
    nameCustom = nameCustom.trim();
    return nameCustom;
  } else if (!creator.hasOwnProperty("lastName") && creator.hasOwnProperty("firstName")) {
    nameCustom = nameCustom.replace("; {{lastName}}", creator.firstName);
    nameCustom = nameCustom.replace(", {{lastName}}", creator.firstName);
    nameCustom = nameCustom.replace("{{lastName}}", "");
    nameCustom = nameCustom.replace("{{firstName}}", creator.firstName);
    nameCustom = nameCustom.trim();
    return nameCustom;
  }
}
var createCreatorList = (creators, typeCreator, note, divider, nameFormat) => {
  const creatorList = [];
  for (let creatorindex = 0; creatorindex < creators.length; creatorindex++) {
    const creator = creators[creatorindex];
    if (creator.creatorType === typeCreator) {
      creatorList.push(formatCreatorsName(creator, nameFormat));
    }
  }
  const creatorListBracket = creatorList.map(makeWiki);
  const creatorListQuotes = creatorList.map(makeQuotes);
  if (divider.slice(-1) !== " ") {
    divider = divider + " ";
  }
  if (creatorList.length == 0) {
    return note;
  } else {
    note = replaceTemplate(
      note,
      `[[{{${typeCreator}}}]]`,
      creatorListBracket.join(divider)
    );
    note = replaceTemplate(
      note,
      `"{{${typeCreator}}}"`,
      creatorListQuotes.join(divider)
    );
    note = replaceTemplate(
      note,
      `{{${typeCreator}}}`,
      creatorList.join(divider)
    );
    return note;
  }
};
var createCreatorAllList = (creators, note, divider, nameFormat) => {
  const creatorList = [];
  for (let creatorindex = 0; creatorindex < creators.length; creatorindex++) {
    const creator = creators[creatorindex];
    creatorList.push(formatCreatorsName(creator, nameFormat));
  }
  const creatorListBracket = creatorList.map(makeWiki);
  const creatorListQuotes = creatorList.map(makeQuotes);
  if (divider.slice(-1) !== " ") {
    divider = divider + " ";
  }
  if (creatorList.length == 0) {
    return note;
  } else {
    note = replaceTemplate(
      note,
      `[[{{creator}}]]`,
      creatorListBracket.join(divider)
    );
    note = replaceTemplate(
      note,
      `"{{creator}}"`,
      creatorListQuotes.join(divider)
    );
    note = replaceTemplate(note, `{{creator}}`, creatorList.join(divider));
    note = replaceTemplate(note, `{{Creator}}`, creatorList.join(divider));
    return note;
  }
};
function replaceMissingFields(note, missingfield, missingfieldreplacement) {
  let copy = note.slice();
  if (missingfield === "Replace with custom text") {
    copy = copy.replace(TEMPLATE_BRACKET_REG, missingfieldreplacement).trim();
    copy = copy.replace(TEMPLATE_REG, missingfieldreplacement).trim();
  } else if (missingfield === "Remove (entire row)") {
    const lines = copy.split(/\r?\n/);
    for (let j = 0; j < lines.length; j++) {
      if (lines[j].match(TEMPLATE_REG)) {
        lines.splice(j, 1);
        j--;
      }
    }
    copy = lines.join("\n");
  }
  copy = copy.replace("```ad-quote\ntitle: Abstract\n```\n", "");
  copy = copy.replace(
    "```ad-abstract\ntitle: Files and Links\n```\n",
    ""
  );
  copy = copy.replace(
    "```ad-note\ntitle: Tags and Collections\n```\n",
    ""
  );
  copy = copy.replace(
    "## Abstract\n\n## Files and Links\n",
    "## Files and Links\n"
  );
  copy = copy.replace(
    "## Files and Links\n\n## Tags and Collections\n",
    "## Tags and Collections\n"
  );
  copy = copy.replace("## Tags and Collections\n\n", "\n");
  return copy;
}
function createLocalFileLink(reference2) {
  if (reference2.attachments.length == 0) return "{{localFile}}";
  const filesList = [];
  for (let attachmentindex = 0; attachmentindex < reference2.attachments.length; attachmentindex++) {
    if (reference2.attachments[attachmentindex].itemType !== "attachment")
      continue;
    if (reference2.attachments[attachmentindex].path == void 0) {
      reference2.attachments[attachmentindex].path = "";
    }
    const selectedfile = "[" + reference2.attachments[attachmentindex].title + "](file:///" + // added an extra "/" to make it work on Linux
    encodeURI(reference2.attachments[attachmentindex].path.replaceAll(" ", " ")) + ")";
    filesList.push(selectedfile);
  }
  const filesListString = filesList.join("; ");
  return filesListString;
}
function createLocalFilePathLink(reference2) {
  if (reference2.attachments.length == 0) return "{{localFilePathLink}}";
  const filesPathList = [];
  for (let attachmentindex = 0; attachmentindex < reference2.attachments.length; attachmentindex++) {
    if (reference2.attachments[attachmentindex].itemType !== "attachment")
      continue;
    if (reference2.attachments[attachmentindex].select == void 0) {
      reference2.attachments[attachmentindex].select = "";
    }
    const selectedFilePath = "[" + reference2.attachments[attachmentindex].title + "](" + encodeURI(reference2.attachments[attachmentindex].select) + ")";
    filesPathList.push(selectedFilePath);
  }
  const filesPathListString = filesPathList.join("; ");
  return filesPathListString;
}
function createZoteroReaderPathLink(reference2) {
  if (reference2.attachments.length == 0) return "{{localFilePathLink}}";
  const filesPathList = [];
  for (let attachmentindex = 0; attachmentindex < reference2.attachments.length; attachmentindex++) {
    if (reference2.attachments[attachmentindex].itemType !== "attachment")
      continue;
    if (reference2.attachments[attachmentindex].select == void 0) {
      reference2.attachments[attachmentindex].select = "";
    }
    const selectedFilePath = "[" + reference2.attachments[attachmentindex].title + "](" + encodeURI(reference2.attachments[attachmentindex].select).replace(
      "select",
      "open-pdf"
    ) + ")";
    filesPathList.push(selectedFilePath);
  }
  const filesPathListString = filesPathList.join("; ");
  return filesPathListString;
}
function createNoteTitle(selectedEntry, exportTitle, exportPath) {
  exportTitle = exportTitle.replace("{{citeKey}}", selectedEntry.citationKey);
  exportTitle = exportTitle.replace("{{citationKey}}", selectedEntry.citationKey);
  exportTitle = exportTitle.replace("{{citationkey}}", selectedEntry.citationKey);
  exportTitle = exportTitle.replace("{{citekey}}", selectedEntry.citationKey);
  exportTitle = exportTitle.replace("{{citekey}}", selectedEntry.citationKey);
  exportTitle = exportTitle.replace("{{title}}", selectedEntry.title);
  exportTitle = exportTitle.replace("{{author}}", selectedEntry.authorKey);
  exportTitle = exportTitle.replace("{{authors}}", selectedEntry.authorKey);
  exportTitle = exportTitle.replace("{{authorInitials}}", selectedEntry.authorKeyInitials);
  exportTitle = exportTitle.replace("{{authorsInitials}}", selectedEntry.authorKeyInitials);
  exportTitle = exportTitle.replace("{{authorFullName}}", selectedEntry.authorKeyFullName);
  exportTitle = exportTitle.replace("{{authorsFullName}}", selectedEntry.authorKeyFullName);
  exportTitle = exportTitle.replace("{{year}}", selectedEntry.year);
  exportTitle = exportTitle.replace("{{date}}", selectedEntry.year);
  exportTitle = exportTitle.replace(/[/\\?%*:|"<>]/g, "");
  const vaultPath = this.app.vault.adapter.getBasePath();
  const exportPathFull = import_path.default.normalize(
    vaultPath + "/" + exportPath + "/" + exportTitle + ".md"
  );
  return exportPathFull;
}
function replaceTagList(selectedEntry, arrayExtractedKeywords, metadata, divider) {
  selectedEntry.zoteroTags = [];
  if (selectedEntry.tags.length > 0) {
    for (let indexTag = 0; indexTag < selectedEntry.tags.length; indexTag++) {
      selectedEntry.zoteroTags.push(selectedEntry.tags[indexTag].tag);
    }
  }
  if (divider.slice(-1) !== " ") {
    divider = divider + " ";
  }
  const tagsZotero = selectedEntry.zoteroTags.sort();
  const tagsPDF = arrayExtractedKeywords.sort();
  const tagsCombined = tagsZotero.concat(tagsPDF).sort();
  if (tagsZotero.length > 0) {
    const tagsZoteroBracket = tagsZotero.map(makeWiki);
    metadata = replaceTemplate(
      metadata,
      `[[{{keywordsZotero}}]]`,
      String(tagsZoteroBracket.join(divider))
    );
    const tagsZoteroQuotes = tagsZotero.map(makeQuotes);
    metadata = replaceTemplate(
      metadata,
      `"{{keywordsZotero}}"`,
      String(tagsZoteroQuotes.join(divider))
    );
    const tagsZoteroTags = tagsZotero.map(makeTags);
    metadata = replaceTemplate(
      metadata,
      `#{{keywordsZotero}}`,
      String(tagsZoteroTags.join(divider))
    );
    metadata = replaceTemplate(
      metadata,
      `{{keywordsZotero}}`,
      String(tagsZotero.join(divider))
    );
  }
  if (tagsPDF.length > 0) {
    const tagsPDFBracket = tagsPDF.map(makeWiki);
    metadata = replaceTemplate(
      metadata,
      `[[{{keywordsPDF}}]]`,
      String(tagsPDFBracket.join(divider))
    );
    const tagsPDFQuotes = tagsPDF.map(makeQuotes);
    metadata = replaceTemplate(
      metadata,
      `"{{keywordsPDF}}"`,
      String(tagsPDFQuotes.join(divider))
    );
    const tagsPDFTags = tagsPDF.map(makeTags);
    metadata = replaceTemplate(
      metadata,
      `#{{keywordsPDF}}`,
      String(tagsPDFTags.join(divider))
    );
    metadata = replaceTemplate(
      metadata,
      `{{keywordsPDF}}`,
      String(tagsPDF.join(divider))
    );
  }
  if (tagsCombined.length > 0) {
    const tagsCombinedBracket = tagsCombined.map(makeWiki);
    metadata = replaceTemplate(
      metadata,
      `[[{{keywords}}]]`,
      String(tagsCombinedBracket.join(divider))
    );
    metadata = replaceTemplate(
      metadata,
      `[[{{keywordsAll}}]]`,
      String(tagsCombinedBracket.join(divider))
    );
    const tagsCombinedQuotes = tagsCombined.map(makeQuotes);
    metadata = replaceTemplate(
      metadata,
      `"{{keywordsAll}}"`,
      String(tagsCombinedQuotes.join(divider))
    );
    metadata = replaceTemplate(
      metadata,
      `"{{keywords}}"`,
      String(tagsCombinedQuotes.join(divider))
    );
    const tagsCombinedTags = tagsCombined.map(makeTags);
    metadata = replaceTemplate(
      metadata,
      `#{{keywordsAll}}`,
      String(tagsCombinedTags.join(divider))
    );
    metadata = replaceTemplate(
      metadata,
      `#{{keywords}}`,
      String(tagsCombinedTags.join(divider))
    );
    metadata = replaceTemplate(
      metadata,
      `{{keywordsAll}}`,
      String(tagsCombined.join(divider))
    );
    metadata = replaceTemplate(
      metadata,
      `{{keywords}}`,
      String(tagsCombined.join(divider))
    );
  }
  if (selectedEntry.zoteroTags.length == 0) {
    metadata = metadata.replace("# Tags\n", "");
    metadata = metadata.replace("## Tags\n", "");
    metadata = metadata.replace("### Tags\n", "");
  }
  return metadata;
}
function openSelectedNote(selectedEntry, exportTitle, exportPath) {
  const noteTitleFull = createNoteTitle(
    selectedEntry,
    exportTitle,
    exportPath
    //this.zoteroBuildWindows
  );
  const noteTitleShort = noteTitleFull.replace(
    (0, import_obsidian.normalizePath)(this.app.vault.adapter.getBasePath()) + "/",
    ""
  );
  const myFile = this.app.vault.getAbstractFileByPath(noteTitleShort);
  this.app.workspace.getUnpinnedLeaf().openFile(myFile);
}
function parseCiteKeyFromNoteName(noteName, format) {
  const match = format.match("{{citeKey}}");
  if (match != null) {
    const regExp = format.substring(
      match.index != 0 ? match.index - 1 : match.index,
      match.index + match[0].length + 1
    ).replace("{{citeKey}}", "(s*[a-zA-Z0-9]+s*)");
    return noteName.match(regExp)[1];
  }
}

// src/modal.ts
var fuzzySelectEntryFromJson = class _fuzzySelectEntryFromJson extends import_obsidian2.FuzzySuggestModal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  // Function used to move the cursor in the search bar when the modal is launched
  focusInput() {
    document.getElementsByClassName("prompt-input")[0].focus();
  }
  onOpen() {
    return __async(this, null, function* () {
      if (import_obsidian2.Platform.isDesktopApp) {
        this.focusInput();
      }
      const jsonPath = this.app.vault.adapter.getBasePath() + "/" + this.plugin.settings.bibPath;
      if (!fs.existsSync(jsonPath)) {
        new import_obsidian2.Notice("No BetterBibTex Json file found at " + jsonPath);
      }
      const rawdata = fs.readFileSync(
        this.app.vault.adapter.getBasePath() + "/" + this.plugin.settings.bibPath
      );
      const data = JSON.parse(rawdata.toString());
      const bibtexArray = [];
      for (let index = 0; index < data.items.length; index++) {
        const selectedEntry = data.items[index];
        const bibtexArrayItem = {};
        if (selectedEntry.hasOwnProperty("citationKey") == false) continue;
        bibtexArrayItem.citationKey = selectedEntry.citationKey;
        bibtexArrayItem.title = selectedEntry.title;
        bibtexArrayItem.date = selectedEntry.date;
        if (selectedEntry.hasOwnProperty("date")) {
          selectedEntry.year = selectedEntry.date.match(/\d\d\d\d/gm);
          bibtexArrayItem.date = selectedEntry.year;
        }
        bibtexArrayItem.authorKey = createAuthorKey(selectedEntry.creators);
        bibtexArrayItem.dateModified = selectedEntry.dateModified;
        bibtexArrayItem.inlineReference = bibtexArrayItem.authorKey + ", (" + bibtexArrayItem.date + "), '" + bibtexArrayItem.title + "'\n" + bibtexArrayItem.citationKey;
        bibtexArray.push(bibtexArrayItem);
      }
      bibtexArray.sort(orderByDateModified);
      this.allCitationKeys = bibtexArray.map((a) => a.citationKey);
      const selectLibrary = {
        inlineReference: "Entire Library: " + this.plugin.settings.bibPath,
        citationKey: "Entire Library",
        authorKey: "",
        id: 0,
        year: "",
        itemType: "",
        date: "",
        dateModified: "",
        itemKey: "",
        title: "",
        citationFull: "",
        citationInLine: "",
        citationShort: "",
        localLibraryLink: "",
        creators: [],
        // added the missing properties
        itemID: 0,
        file: "",
        localLibrary: "",
        select: "",
        attachments: [],
        notes: [],
        tags: [],
        zoteroTags: []
      };
      bibtexArray.unshift(selectLibrary);
      this.selectArray = bibtexArray;
      yield this.updateSuggestions();
      this.data = data;
    });
  }
  // Returns all available suggestions.
  getItems() {
    return this.selectArray;
  }
  // Renders each suggestion item.
  getItemText(referenceSelected) {
    return referenceSelected.inlineReference;
  }
  updateSuggestions() {
    return __async(this, null, function* () {
      yield __superGet(_fuzzySelectEntryFromJson.prototype, this, "updateSuggestions").call(this);
    });
  }
  // Perform action on the selected suggestion.
  onChooseItem(referenceSelected, evt) {
    return __async(this, null, function* () {
      let citeKeyToBeProcessed = [];
      if (referenceSelected.citationKey === "Entire Library") {
        console.log("all library selected");
        citeKeyToBeProcessed = citeKeyToBeProcessed.concat(
          this.allCitationKeys
        );
      } else {
        citeKeyToBeProcessed.push(referenceSelected.citationKey);
      }
      for (let indexNoteToBeProcessed = 0; indexNoteToBeProcessed < citeKeyToBeProcessed.length; indexNoteToBeProcessed++) {
        const indexSelectedReference = this.data.items.findIndex(
          (item) => item.citationKey === citeKeyToBeProcessed[indexNoteToBeProcessed]
        );
        const selectedEntry = this.data.items[indexSelectedReference];
        this.plugin.createNote(selectedEntry, this.data);
        if (indexNoteToBeProcessed == citeKeyToBeProcessed.length - 1) {
          openSelectedNote(
            selectedEntry,
            this.plugin.settings.exportTitle,
            this.plugin.settings.exportPath
          );
        }
      }
    });
  }
};
var updateLibrary = class extends import_obsidian2.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    console.log("Updating Zotero library");
    const jsonPath = this.app.vault.adapter.getBasePath() + "/" + this.plugin.settings.bibPath;
    if (!fs.existsSync(jsonPath)) {
      new import_obsidian2.Notice("No BetterBibTex Json file found at " + jsonPath);
    }
    const rawdata = fs.readFileSync(
      this.app.vault.adapter.getBasePath() + "/" + this.plugin.settings.bibPath
    );
    const data = JSON.parse(rawdata.toString());
    const bibtexArray = [];
    const lastUpdate = new Date(this.plugin.settings.lastUpdateDate);
    for (let index = 0; index < data.items.length; index++) {
      const selectedEntry = data.items[index];
      const bibtexArrayItem = {};
      if (selectedEntry.hasOwnProperty("citationKey") == false) continue;
      bibtexArrayItem.citationKey = selectedEntry.citationKey;
      const noteDateModifiedArray = [];
      noteDateModifiedArray.push(selectedEntry.dateModified);
      for (let index2 = 0; index2 < selectedEntry.notes.length; index2++) {
        noteDateModifiedArray.push(selectedEntry.notes[index2].dateModified);
        noteDateModifiedArray.sort(
          (firstElement, secondElement) => {
            if (firstElement > secondElement) {
              return -1;
            }
            if (firstElement < secondElement) {
              return 1;
            }
            return 0;
          }
        );
      }
      const datemodified = new Date(noteDateModifiedArray[0]);
      if (datemodified < lastUpdate) continue;
      if (this.plugin.settings.updateLibrary === "Only update existing notes" && !fs.existsSync(
        createNoteTitle(
          selectedEntry,
          this.plugin.settings.exportTitle,
          this.plugin.settings.exportPath
        )
      ))
        continue;
      this.plugin.createNote(selectedEntry, data);
      bibtexArray.push(selectedEntry.citationKey);
    }
    new import_obsidian2.Notice("Updated " + bibtexArray.length + " entries");
    this.plugin.settings.lastUpdateDate = /* @__PURE__ */ new Date();
    this.plugin.saveSettings();
  }
  onClose() {
  }
};

// src/settings.ts
var import_obsidian5 = require("obsidian");

// src/suggesters/FolderSuggester.ts
var import_obsidian4 = require("obsidian");

// src/suggesters/suggest.ts
var import_obsidian3 = require("obsidian");

// node_modules/@popperjs/core/lib/enums.js
var top = "top";
var bottom = "bottom";
var right = "right";
var left = "left";
var auto = "auto";
var basePlacements = [top, bottom, right, left];
var start = "start";
var end = "end";
var clippingParents = "clippingParents";
var viewport = "viewport";
var popper = "popper";
var reference = "reference";
var variationPlacements = /* @__PURE__ */ basePlacements.reduce(function(acc, placement) {
  return acc.concat([placement + "-" + start, placement + "-" + end]);
}, []);
var placements = /* @__PURE__ */ [].concat(basePlacements, [auto]).reduce(function(acc, placement) {
  return acc.concat([placement, placement + "-" + start, placement + "-" + end]);
}, []);
var beforeRead = "beforeRead";
var read = "read";
var afterRead = "afterRead";
var beforeMain = "beforeMain";
var main = "main";
var afterMain = "afterMain";
var beforeWrite = "beforeWrite";
var write = "write";
var afterWrite = "afterWrite";
var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];

// node_modules/@popperjs/core/lib/dom-utils/getNodeName.js
function getNodeName(element) {
  return element ? (element.nodeName || "").toLowerCase() : null;
}

// node_modules/@popperjs/core/lib/dom-utils/getWindow.js
function getWindow(node) {
  if (node == null) {
    return window;
  }
  if (node.toString() !== "[object Window]") {
    var ownerDocument = node.ownerDocument;
    return ownerDocument ? ownerDocument.defaultView || window : window;
  }
  return node;
}

// node_modules/@popperjs/core/lib/dom-utils/instanceOf.js
function isElement(node) {
  var OwnElement = getWindow(node).Element;
  return node instanceof OwnElement || node instanceof Element;
}
function isHTMLElement(node) {
  var OwnElement = getWindow(node).HTMLElement;
  return node instanceof OwnElement || node instanceof HTMLElement;
}
function isShadowRoot(node) {
  if (typeof ShadowRoot === "undefined") {
    return false;
  }
  var OwnElement = getWindow(node).ShadowRoot;
  return node instanceof OwnElement || node instanceof ShadowRoot;
}

// node_modules/@popperjs/core/lib/modifiers/applyStyles.js
function applyStyles(_ref) {
  var state = _ref.state;
  Object.keys(state.elements).forEach(function(name) {
    var style = state.styles[name] || {};
    var attributes = state.attributes[name] || {};
    var element = state.elements[name];
    if (!isHTMLElement(element) || !getNodeName(element)) {
      return;
    }
    Object.assign(element.style, style);
    Object.keys(attributes).forEach(function(name2) {
      var value = attributes[name2];
      if (value === false) {
        element.removeAttribute(name2);
      } else {
        element.setAttribute(name2, value === true ? "" : value);
      }
    });
  });
}
function effect(_ref2) {
  var state = _ref2.state;
  var initialStyles = {
    popper: {
      position: state.options.strategy,
      left: "0",
      top: "0",
      margin: "0"
    },
    arrow: {
      position: "absolute"
    },
    reference: {}
  };
  Object.assign(state.elements.popper.style, initialStyles.popper);
  state.styles = initialStyles;
  if (state.elements.arrow) {
    Object.assign(state.elements.arrow.style, initialStyles.arrow);
  }
  return function() {
    Object.keys(state.elements).forEach(function(name) {
      var element = state.elements[name];
      var attributes = state.attributes[name] || {};
      var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]);
      var style = styleProperties.reduce(function(style2, property) {
        style2[property] = "";
        return style2;
      }, {});
      if (!isHTMLElement(element) || !getNodeName(element)) {
        return;
      }
      Object.assign(element.style, style);
      Object.keys(attributes).forEach(function(attribute) {
        element.removeAttribute(attribute);
      });
    });
  };
}
var applyStyles_default = {
  name: "applyStyles",
  enabled: true,
  phase: "write",
  fn: applyStyles,
  effect,
  requires: ["computeStyles"]
};

// node_modules/@popperjs/core/lib/utils/getBasePlacement.js
function getBasePlacement(placement) {
  return placement.split("-")[0];
}

// node_modules/@popperjs/core/lib/utils/math.js
var max = Math.max;
var min = Math.min;
var round = Math.round;

// node_modules/@popperjs/core/lib/utils/userAgent.js
function getUAString() {
  var uaData = navigator.userAgentData;
  if (uaData != null && uaData.brands && Array.isArray(uaData.brands)) {
    return uaData.brands.map(function(item) {
      return item.brand + "/" + item.version;
    }).join(" ");
  }
  return navigator.userAgent;
}

// node_modules/@popperjs/core/lib/dom-utils/isLayoutViewport.js
function isLayoutViewport() {
  return !/^((?!chrome|android).)*safari/i.test(getUAString());
}

// node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js
function getBoundingClientRect(element, includeScale, isFixedStrategy) {
  if (includeScale === void 0) {
    includeScale = false;
  }
  if (isFixedStrategy === void 0) {
    isFixedStrategy = false;
  }
  var clientRect = element.getBoundingClientRect();
  var scaleX = 1;
  var scaleY = 1;
  if (includeScale && isHTMLElement(element)) {
    scaleX = element.offsetWidth > 0 ? round(clientRect.width) / element.offsetWidth || 1 : 1;
    scaleY = element.offsetHeight > 0 ? round(clientRect.height) / element.offsetHeight || 1 : 1;
  }
  var _ref = isElement(element) ? getWindow(element) : window, visualViewport = _ref.visualViewport;
  var addVisualOffsets = !isLayoutViewport() && isFixedStrategy;
  var x = (clientRect.left + (addVisualOffsets && visualViewport ? visualViewport.offsetLeft : 0)) / scaleX;
  var y = (clientRect.top + (addVisualOffsets && visualViewport ? visualViewport.offsetTop : 0)) / scaleY;
  var width = clientRect.width / scaleX;
  var height = clientRect.height / scaleY;
  return {
    width,
    height,
    top: y,
    right: x + width,
    bottom: y + height,
    left: x,
    x,
    y
  };
}

// node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js
function getLayoutRect(element) {
  var clientRect = getBoundingClientRect(element);
  var width = element.offsetWidth;
  var height = element.offsetHeight;
  if (Math.abs(clientRect.width - width) <= 1) {
    width = clientRect.width;
  }
  if (Math.abs(clientRect.height - height) <= 1) {
    height = clientRect.height;
  }
  return {
    x: element.offsetLeft,
    y: element.offsetTop,
    width,
    height
  };
}

// node_modules/@popperjs/core/lib/dom-utils/contains.js
function contains(parent, child) {
  var rootNode = child.getRootNode && child.getRootNode();
  if (parent.contains(child)) {
    return true;
  } else if (rootNode && isShadowRoot(rootNode)) {
    var next2 = child;
    do {
      if (next2 && parent.isSameNode(next2)) {
        return true;
      }
      next2 = next2.parentNode || next2.host;
    } while (next2);
  }
  return false;
}

// node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js
function getComputedStyle(element) {
  return getWindow(element).getComputedStyle(element);
}

// node_modules/@popperjs/core/lib/dom-utils/isTableElement.js
function isTableElement(element) {
  return ["table", "td", "th"].indexOf(getNodeName(element)) >= 0;
}

// node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js
function getDocumentElement(element) {
  return ((isElement(element) ? element.ownerDocument : (
    // $FlowFixMe[prop-missing]
    element.document
  )) || window.document).documentElement;
}

// node_modules/@popperjs/core/lib/dom-utils/getParentNode.js
function getParentNode(element) {
  if (getNodeName(element) === "html") {
    return element;
  }
  return (
    // this is a quicker (but less type safe) way to save quite some bytes from the bundle
    // $FlowFixMe[incompatible-return]
    // $FlowFixMe[prop-missing]
    element.assignedSlot || // step into the shadow DOM of the parent of a slotted node
    element.parentNode || // DOM Element detected
    (isShadowRoot(element) ? element.host : null) || // ShadowRoot detected
    // $FlowFixMe[incompatible-call]: HTMLElement is a Node
    getDocumentElement(element)
  );
}

// node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js
function getTrueOffsetParent(element) {
  if (!isHTMLElement(element) || // https://github.com/popperjs/popper-core/issues/837
  getComputedStyle(element).position === "fixed") {
    return null;
  }
  return element.offsetParent;
}
function getContainingBlock(element) {
  var isFirefox = /firefox/i.test(getUAString());
  var isIE = /Trident/i.test(getUAString());
  if (isIE && isHTMLElement(element)) {
    var elementCss = getComputedStyle(element);
    if (elementCss.position === "fixed") {
      return null;
    }
  }
  var currentNode = getParentNode(element);
  if (isShadowRoot(currentNode)) {
    currentNode = currentNode.host;
  }
  while (isHTMLElement(currentNode) && ["html", "body"].indexOf(getNodeName(currentNode)) < 0) {
    var css = getComputedStyle(currentNode);
    if (css.transform !== "none" || css.perspective !== "none" || css.contain === "paint" || ["transform", "perspective"].indexOf(css.willChange) !== -1 || isFirefox && css.willChange === "filter" || isFirefox && css.filter && css.filter !== "none") {
      return currentNode;
    } else {
      currentNode = currentNode.parentNode;
    }
  }
  return null;
}
function getOffsetParent(element) {
  var window2 = getWindow(element);
  var offsetParent = getTrueOffsetParent(element);
  while (offsetParent && isTableElement(offsetParent) && getComputedStyle(offsetParent).position === "static") {
    offsetParent = getTrueOffsetParent(offsetParent);
  }
  if (offsetParent && (getNodeName(offsetParent) === "html" || getNodeName(offsetParent) === "body" && getComputedStyle(offsetParent).position === "static")) {
    return window2;
  }
  return offsetParent || getContainingBlock(element) || window2;
}

// node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js
function getMainAxisFromPlacement(placement) {
  return ["top", "bottom"].indexOf(placement) >= 0 ? "x" : "y";
}

// node_modules/@popperjs/core/lib/utils/within.js
function within(min2, value, max2) {
  return max(min2, min(value, max2));
}
function withinMaxClamp(min2, value, max2) {
  var v = within(min2, value, max2);
  return v > max2 ? max2 : v;
}

// node_modules/@popperjs/core/lib/utils/getFreshSideObject.js
function getFreshSideObject() {
  return {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0
  };
}

// node_modules/@popperjs/core/lib/utils/mergePaddingObject.js
function mergePaddingObject(paddingObject) {
  return Object.assign({}, getFreshSideObject(), paddingObject);
}

// node_modules/@popperjs/core/lib/utils/expandToHashMap.js
function expandToHashMap(value, keys) {
  return keys.reduce(function(hashMap, key) {
    hashMap[key] = value;
    return hashMap;
  }, {});
}

// node_modules/@popperjs/core/lib/modifiers/arrow.js
var toPaddingObject = function toPaddingObject2(padding, state) {
  padding = typeof padding === "function" ? padding(Object.assign({}, state.rects, {
    placement: state.placement
  })) : padding;
  return mergePaddingObject(typeof padding !== "number" ? padding : expandToHashMap(padding, basePlacements));
};
function arrow(_ref) {
  var _state$modifiersData$;
  var state = _ref.state, name = _ref.name, options = _ref.options;
  var arrowElement = state.elements.arrow;
  var popperOffsets2 = state.modifiersData.popperOffsets;
  var basePlacement = getBasePlacement(state.placement);
  var axis = getMainAxisFromPlacement(basePlacement);
  var isVertical = [left, right].indexOf(basePlacement) >= 0;
  var len = isVertical ? "height" : "width";
  if (!arrowElement || !popperOffsets2) {
    return;
  }
  var paddingObject = toPaddingObject(options.padding, state);
  var arrowRect = getLayoutRect(arrowElement);
  var minProp = axis === "y" ? top : left;
  var maxProp = axis === "y" ? bottom : right;
  var endDiff = state.rects.reference[len] + state.rects.reference[axis] - popperOffsets2[axis] - state.rects.popper[len];
  var startDiff = popperOffsets2[axis] - state.rects.reference[axis];
  var arrowOffsetParent = getOffsetParent(arrowElement);
  var clientSize = arrowOffsetParent ? axis === "y" ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;
  var centerToReference = endDiff / 2 - startDiff / 2;
  var min2 = paddingObject[minProp];
  var max2 = clientSize - arrowRect[len] - paddingObject[maxProp];
  var center = clientSize / 2 - arrowRect[len] / 2 + centerToReference;
  var offset2 = within(min2, center, max2);
  var axisProp = axis;
  state.modifiersData[name] = (_state$modifiersData$ = {}, _state$modifiersData$[axisProp] = offset2, _state$modifiersData$.centerOffset = offset2 - center, _state$modifiersData$);
}
function effect2(_ref2) {
  var state = _ref2.state, options = _ref2.options;
  var _options$element = options.element, arrowElement = _options$element === void 0 ? "[data-popper-arrow]" : _options$element;
  if (arrowElement == null) {
    return;
  }
  if (typeof arrowElement === "string") {
    arrowElement = state.elements.popper.querySelector(arrowElement);
    if (!arrowElement) {
      return;
    }
  }
  if (!contains(state.elements.popper, arrowElement)) {
    return;
  }
  state.elements.arrow = arrowElement;
}
var arrow_default = {
  name: "arrow",
  enabled: true,
  phase: "main",
  fn: arrow,
  effect: effect2,
  requires: ["popperOffsets"],
  requiresIfExists: ["preventOverflow"]
};

// node_modules/@popperjs/core/lib/utils/getVariation.js
function getVariation(placement) {
  return placement.split("-")[1];
}

// node_modules/@popperjs/core/lib/modifiers/computeStyles.js
var unsetSides = {
  top: "auto",
  right: "auto",
  bottom: "auto",
  left: "auto"
};
function roundOffsetsByDPR(_ref, win) {
  var x = _ref.x, y = _ref.y;
  var dpr = win.devicePixelRatio || 1;
  return {
    x: round(x * dpr) / dpr || 0,
    y: round(y * dpr) / dpr || 0
  };
}
function mapToStyles(_ref2) {
  var _Object$assign2;
  var popper2 = _ref2.popper, popperRect = _ref2.popperRect, placement = _ref2.placement, variation = _ref2.variation, offsets = _ref2.offsets, position = _ref2.position, gpuAcceleration = _ref2.gpuAcceleration, adaptive = _ref2.adaptive, roundOffsets = _ref2.roundOffsets, isFixed = _ref2.isFixed;
  var _offsets$x = offsets.x, x = _offsets$x === void 0 ? 0 : _offsets$x, _offsets$y = offsets.y, y = _offsets$y === void 0 ? 0 : _offsets$y;
  var _ref3 = typeof roundOffsets === "function" ? roundOffsets({
    x,
    y
  }) : {
    x,
    y
  };
  x = _ref3.x;
  y = _ref3.y;
  var hasX = offsets.hasOwnProperty("x");
  var hasY = offsets.hasOwnProperty("y");
  var sideX = left;
  var sideY = top;
  var win = window;
  if (adaptive) {
    var offsetParent = getOffsetParent(popper2);
    var heightProp = "clientHeight";
    var widthProp = "clientWidth";
    if (offsetParent === getWindow(popper2)) {
      offsetParent = getDocumentElement(popper2);
      if (getComputedStyle(offsetParent).position !== "static" && position === "absolute") {
        heightProp = "scrollHeight";
        widthProp = "scrollWidth";
      }
    }
    offsetParent = offsetParent;
    if (placement === top || (placement === left || placement === right) && variation === end) {
      sideY = bottom;
      var offsetY = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.height : (
        // $FlowFixMe[prop-missing]
        offsetParent[heightProp]
      );
      y -= offsetY - popperRect.height;
      y *= gpuAcceleration ? 1 : -1;
    }
    if (placement === left || (placement === top || placement === bottom) && variation === end) {
      sideX = right;
      var offsetX = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.width : (
        // $FlowFixMe[prop-missing]
        offsetParent[widthProp]
      );
      x -= offsetX - popperRect.width;
      x *= gpuAcceleration ? 1 : -1;
    }
  }
  var commonStyles = Object.assign({
    position
  }, adaptive && unsetSides);
  var _ref4 = roundOffsets === true ? roundOffsetsByDPR({
    x,
    y
  }, getWindow(popper2)) : {
    x,
    y
  };
  x = _ref4.x;
  y = _ref4.y;
  if (gpuAcceleration) {
    var _Object$assign;
    return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? "0" : "", _Object$assign[sideX] = hasX ? "0" : "", _Object$assign.transform = (win.devicePixelRatio || 1) <= 1 ? "translate(" + x + "px, " + y + "px)" : "translate3d(" + x + "px, " + y + "px, 0)", _Object$assign));
  }
  return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + "px" : "", _Object$assign2[sideX] = hasX ? x + "px" : "", _Object$assign2.transform = "", _Object$assign2));
}
function computeStyles(_ref5) {
  var state = _ref5.state, options = _ref5.options;
  var _options$gpuAccelerat = options.gpuAcceleration, gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat, _options$adaptive = options.adaptive, adaptive = _options$adaptive === void 0 ? true : _options$adaptive, _options$roundOffsets = options.roundOffsets, roundOffsets = _options$roundOffsets === void 0 ? true : _options$roundOffsets;
  var commonStyles = {
    placement: getBasePlacement(state.placement),
    variation: getVariation(state.placement),
    popper: state.elements.popper,
    popperRect: state.rects.popper,
    gpuAcceleration,
    isFixed: state.options.strategy === "fixed"
  };
  if (state.modifiersData.popperOffsets != null) {
    state.styles.popper = Object.assign({}, state.styles.popper, mapToStyles(Object.assign({}, commonStyles, {
      offsets: state.modifiersData.popperOffsets,
      position: state.options.strategy,
      adaptive,
      roundOffsets
    })));
  }
  if (state.modifiersData.arrow != null) {
    state.styles.arrow = Object.assign({}, state.styles.arrow, mapToStyles(Object.assign({}, commonStyles, {
      offsets: state.modifiersData.arrow,
      position: "absolute",
      adaptive: false,
      roundOffsets
    })));
  }
  state.attributes.popper = Object.assign({}, state.attributes.popper, {
    "data-popper-placement": state.placement
  });
}
var computeStyles_default = {
  name: "computeStyles",
  enabled: true,
  phase: "beforeWrite",
  fn: computeStyles,
  data: {}
};

// node_modules/@popperjs/core/lib/modifiers/eventListeners.js
var passive = {
  passive: true
};
function effect3(_ref) {
  var state = _ref.state, instance = _ref.instance, options = _ref.options;
  var _options$scroll = options.scroll, scroll = _options$scroll === void 0 ? true : _options$scroll, _options$resize = options.resize, resize = _options$resize === void 0 ? true : _options$resize;
  var window2 = getWindow(state.elements.popper);
  var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);
  if (scroll) {
    scrollParents.forEach(function(scrollParent) {
      scrollParent.addEventListener("scroll", instance.update, passive);
    });
  }
  if (resize) {
    window2.addEventListener("resize", instance.update, passive);
  }
  return function() {
    if (scroll) {
      scrollParents.forEach(function(scrollParent) {
        scrollParent.removeEventListener("scroll", instance.update, passive);
      });
    }
    if (resize) {
      window2.removeEventListener("resize", instance.update, passive);
    }
  };
}
var eventListeners_default = {
  name: "eventListeners",
  enabled: true,
  phase: "write",
  fn: function fn() {
  },
  effect: effect3,
  data: {}
};

// node_modules/@popperjs/core/lib/utils/getOppositePlacement.js
var hash = {
  left: "right",
  right: "left",
  bottom: "top",
  top: "bottom"
};
function getOppositePlacement(placement) {
  return placement.replace(/left|right|bottom|top/g, function(matched) {
    return hash[matched];
  });
}

// node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js
var hash2 = {
  start: "end",
  end: "start"
};
function getOppositeVariationPlacement(placement) {
  return placement.replace(/start|end/g, function(matched) {
    return hash2[matched];
  });
}

// node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js
function getWindowScroll(node) {
  var win = getWindow(node);
  var scrollLeft = win.pageXOffset;
  var scrollTop = win.pageYOffset;
  return {
    scrollLeft,
    scrollTop
  };
}

// node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js
function getWindowScrollBarX(element) {
  return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;
}

// node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js
function getViewportRect(element, strategy) {
  var win = getWindow(element);
  var html = getDocumentElement(element);
  var visualViewport = win.visualViewport;
  var width = html.clientWidth;
  var height = html.clientHeight;
  var x = 0;
  var y = 0;
  if (visualViewport) {
    width = visualViewport.width;
    height = visualViewport.height;
    var layoutViewport = isLayoutViewport();
    if (layoutViewport || !layoutViewport && strategy === "fixed") {
      x = visualViewport.offsetLeft;
      y = visualViewport.offsetTop;
    }
  }
  return {
    width,
    height,
    x: x + getWindowScrollBarX(element),
    y
  };
}

// node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js
function getDocumentRect(element) {
  var _element$ownerDocumen;
  var html = getDocumentElement(element);
  var winScroll = getWindowScroll(element);
  var body = (_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body;
  var width = max(html.scrollWidth, html.clientWidth, body ? body.scrollWidth : 0, body ? body.clientWidth : 0);
  var height = max(html.scrollHeight, html.clientHeight, body ? body.scrollHeight : 0, body ? body.clientHeight : 0);
  var x = -winScroll.scrollLeft + getWindowScrollBarX(element);
  var y = -winScroll.scrollTop;
  if (getComputedStyle(body || html).direction === "rtl") {
    x += max(html.clientWidth, body ? body.clientWidth : 0) - width;
  }
  return {
    width,
    height,
    x,
    y
  };
}

// node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js
function isScrollParent(element) {
  var _getComputedStyle = getComputedStyle(element), overflow = _getComputedStyle.overflow, overflowX = _getComputedStyle.overflowX, overflowY = _getComputedStyle.overflowY;
  return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);
}

// node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js
function getScrollParent(node) {
  if (["html", "body", "#document"].indexOf(getNodeName(node)) >= 0) {
    return node.ownerDocument.body;
  }
  if (isHTMLElement(node) && isScrollParent(node)) {
    return node;
  }
  return getScrollParent(getParentNode(node));
}

// node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js
function listScrollParents(element, list) {
  var _element$ownerDocumen;
  if (list === void 0) {
    list = [];
  }
  var scrollParent = getScrollParent(element);
  var isBody = scrollParent === ((_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body);
  var win = getWindow(scrollParent);
  var target = isBody ? [win].concat(win.visualViewport || [], isScrollParent(scrollParent) ? scrollParent : []) : scrollParent;
  var updatedList = list.concat(target);
  return isBody ? updatedList : (
    // $FlowFixMe[incompatible-call]: isBody tells us target will be an HTMLElement here
    updatedList.concat(listScrollParents(getParentNode(target)))
  );
}

// node_modules/@popperjs/core/lib/utils/rectToClientRect.js
function rectToClientRect(rect) {
  return Object.assign({}, rect, {
    left: rect.x,
    top: rect.y,
    right: rect.x + rect.width,
    bottom: rect.y + rect.height
  });
}

// node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js
function getInnerBoundingClientRect(element, strategy) {
  var rect = getBoundingClientRect(element, false, strategy === "fixed");
  rect.top = rect.top + element.clientTop;
  rect.left = rect.left + element.clientLeft;
  rect.bottom = rect.top + element.clientHeight;
  rect.right = rect.left + element.clientWidth;
  rect.width = element.clientWidth;
  rect.height = element.clientHeight;
  rect.x = rect.left;
  rect.y = rect.top;
  return rect;
}
function getClientRectFromMixedType(element, clippingParent, strategy) {
  return clippingParent === viewport ? rectToClientRect(getViewportRect(element, strategy)) : isElement(clippingParent) ? getInnerBoundingClientRect(clippingParent, strategy) : rectToClientRect(getDocumentRect(getDocumentElement(element)));
}
function getClippingParents(element) {
  var clippingParents2 = listScrollParents(getParentNode(element));
  var canEscapeClipping = ["absolute", "fixed"].indexOf(getComputedStyle(element).position) >= 0;
  var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;
  if (!isElement(clipperElement)) {
    return [];
  }
  return clippingParents2.filter(function(clippingParent) {
    return isElement(clippingParent) && contains(clippingParent, clipperElement) && getNodeName(clippingParent) !== "body";
  });
}
function getClippingRect(element, boundary, rootBoundary, strategy) {
  var mainClippingParents = boundary === "clippingParents" ? getClippingParents(element) : [].concat(boundary);
  var clippingParents2 = [].concat(mainClippingParents, [rootBoundary]);
  var firstClippingParent = clippingParents2[0];
  var clippingRect = clippingParents2.reduce(function(accRect, clippingParent) {
    var rect = getClientRectFromMixedType(element, clippingParent, strategy);
    accRect.top = max(rect.top, accRect.top);
    accRect.right = min(rect.right, accRect.right);
    accRect.bottom = min(rect.bottom, accRect.bottom);
    accRect.left = max(rect.left, accRect.left);
    return accRect;
  }, getClientRectFromMixedType(element, firstClippingParent, strategy));
  clippingRect.width = clippingRect.right - clippingRect.left;
  clippingRect.height = clippingRect.bottom - clippingRect.top;
  clippingRect.x = clippingRect.left;
  clippingRect.y = clippingRect.top;
  return clippingRect;
}

// node_modules/@popperjs/core/lib/utils/computeOffsets.js
function computeOffsets(_ref) {
  var reference2 = _ref.reference, element = _ref.element, placement = _ref.placement;
  var basePlacement = placement ? getBasePlacement(placement) : null;
  var variation = placement ? getVariation(placement) : null;
  var commonX = reference2.x + reference2.width / 2 - element.width / 2;
  var commonY = reference2.y + reference2.height / 2 - element.height / 2;
  var offsets;
  switch (basePlacement) {
    case top:
      offsets = {
        x: commonX,
        y: reference2.y - element.height
      };
      break;
    case bottom:
      offsets = {
        x: commonX,
        y: reference2.y + reference2.height
      };
      break;
    case right:
      offsets = {
        x: reference2.x + reference2.width,
        y: commonY
      };
      break;
    case left:
      offsets = {
        x: reference2.x - element.width,
        y: commonY
      };
      break;
    default:
      offsets = {
        x: reference2.x,
        y: reference2.y
      };
  }
  var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;
  if (mainAxis != null) {
    var len = mainAxis === "y" ? "height" : "width";
    switch (variation) {
      case start:
        offsets[mainAxis] = offsets[mainAxis] - (reference2[len] / 2 - element[len] / 2);
        break;
      case end:
        offsets[mainAxis] = offsets[mainAxis] + (reference2[len] / 2 - element[len] / 2);
        break;
      default:
    }
  }
  return offsets;
}

// node_modules/@popperjs/core/lib/utils/detectOverflow.js
function detectOverflow(state, options) {
  if (options === void 0) {
    options = {};
  }
  var _options = options, _options$placement = _options.placement, placement = _options$placement === void 0 ? state.placement : _options$placement, _options$strategy = _options.strategy, strategy = _options$strategy === void 0 ? state.strategy : _options$strategy, _options$boundary = _options.boundary, boundary = _options$boundary === void 0 ? clippingParents : _options$boundary, _options$rootBoundary = _options.rootBoundary, rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary, _options$elementConte = _options.elementContext, elementContext = _options$elementConte === void 0 ? popper : _options$elementConte, _options$altBoundary = _options.altBoundary, altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary, _options$padding = _options.padding, padding = _options$padding === void 0 ? 0 : _options$padding;
  var paddingObject = mergePaddingObject(typeof padding !== "number" ? padding : expandToHashMap(padding, basePlacements));
  var altContext = elementContext === popper ? reference : popper;
  var popperRect = state.rects.popper;
  var element = state.elements[altBoundary ? altContext : elementContext];
  var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary, strategy);
  var referenceClientRect = getBoundingClientRect(state.elements.reference);
  var popperOffsets2 = computeOffsets({
    reference: referenceClientRect,
    element: popperRect,
    strategy: "absolute",
    placement
  });
  var popperClientRect = rectToClientRect(Object.assign({}, popperRect, popperOffsets2));
  var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect;
  var overflowOffsets = {
    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,
    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,
    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,
    right: elementClientRect.right - clippingClientRect.right + paddingObject.right
  };
  var offsetData = state.modifiersData.offset;
  if (elementContext === popper && offsetData) {
    var offset2 = offsetData[placement];
    Object.keys(overflowOffsets).forEach(function(key) {
      var multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;
      var axis = [top, bottom].indexOf(key) >= 0 ? "y" : "x";
      overflowOffsets[key] += offset2[axis] * multiply;
    });
  }
  return overflowOffsets;
}

// node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js
function computeAutoPlacement(state, options) {
  if (options === void 0) {
    options = {};
  }
  var _options = options, placement = _options.placement, boundary = _options.boundary, rootBoundary = _options.rootBoundary, padding = _options.padding, flipVariations = _options.flipVariations, _options$allowedAutoP = _options.allowedAutoPlacements, allowedAutoPlacements = _options$allowedAutoP === void 0 ? placements : _options$allowedAutoP;
  var variation = getVariation(placement);
  var placements2 = variation ? flipVariations ? variationPlacements : variationPlacements.filter(function(placement2) {
    return getVariation(placement2) === variation;
  }) : basePlacements;
  var allowedPlacements = placements2.filter(function(placement2) {
    return allowedAutoPlacements.indexOf(placement2) >= 0;
  });
  if (allowedPlacements.length === 0) {
    allowedPlacements = placements2;
  }
  var overflows = allowedPlacements.reduce(function(acc, placement2) {
    acc[placement2] = detectOverflow(state, {
      placement: placement2,
      boundary,
      rootBoundary,
      padding
    })[getBasePlacement(placement2)];
    return acc;
  }, {});
  return Object.keys(overflows).sort(function(a, b) {
    return overflows[a] - overflows[b];
  });
}

// node_modules/@popperjs/core/lib/modifiers/flip.js
function getExpandedFallbackPlacements(placement) {
  if (getBasePlacement(placement) === auto) {
    return [];
  }
  var oppositePlacement = getOppositePlacement(placement);
  return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];
}
function flip(_ref) {
  var state = _ref.state, options = _ref.options, name = _ref.name;
  if (state.modifiersData[name]._skip) {
    return;
  }
  var _options$mainAxis = options.mainAxis, checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis, _options$altAxis = options.altAxis, checkAltAxis = _options$altAxis === void 0 ? true : _options$altAxis, specifiedFallbackPlacements = options.fallbackPlacements, padding = options.padding, boundary = options.boundary, rootBoundary = options.rootBoundary, altBoundary = options.altBoundary, _options$flipVariatio = options.flipVariations, flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio, allowedAutoPlacements = options.allowedAutoPlacements;
  var preferredPlacement = state.options.placement;
  var basePlacement = getBasePlacement(preferredPlacement);
  var isBasePlacement = basePlacement === preferredPlacement;
  var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));
  var placements2 = [preferredPlacement].concat(fallbackPlacements).reduce(function(acc, placement2) {
    return acc.concat(getBasePlacement(placement2) === auto ? computeAutoPlacement(state, {
      placement: placement2,
      boundary,
      rootBoundary,
      padding,
      flipVariations,
      allowedAutoPlacements
    }) : placement2);
  }, []);
  var referenceRect = state.rects.reference;
  var popperRect = state.rects.popper;
  var checksMap = /* @__PURE__ */ new Map();
  var makeFallbackChecks = true;
  var firstFittingPlacement = placements2[0];
  for (var i = 0; i < placements2.length; i++) {
    var placement = placements2[i];
    var _basePlacement = getBasePlacement(placement);
    var isStartVariation = getVariation(placement) === start;
    var isVertical = [top, bottom].indexOf(_basePlacement) >= 0;
    var len = isVertical ? "width" : "height";
    var overflow = detectOverflow(state, {
      placement,
      boundary,
      rootBoundary,
      altBoundary,
      padding
    });
    var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom : top;
    if (referenceRect[len] > popperRect[len]) {
      mainVariationSide = getOppositePlacement(mainVariationSide);
    }
    var altVariationSide = getOppositePlacement(mainVariationSide);
    var checks = [];
    if (checkMainAxis) {
      checks.push(overflow[_basePlacement] <= 0);
    }
    if (checkAltAxis) {
      checks.push(overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0);
    }
    if (checks.every(function(check) {
      return check;
    })) {
      firstFittingPlacement = placement;
      makeFallbackChecks = false;
      break;
    }
    checksMap.set(placement, checks);
  }
  if (makeFallbackChecks) {
    var numberOfChecks = flipVariations ? 3 : 1;
    var _loop = function _loop2(_i2) {
      var fittingPlacement = placements2.find(function(placement2) {
        var checks2 = checksMap.get(placement2);
        if (checks2) {
          return checks2.slice(0, _i2).every(function(check) {
            return check;
          });
        }
      });
      if (fittingPlacement) {
        firstFittingPlacement = fittingPlacement;
        return "break";
      }
    };
    for (var _i = numberOfChecks; _i > 0; _i--) {
      var _ret = _loop(_i);
      if (_ret === "break") break;
    }
  }
  if (state.placement !== firstFittingPlacement) {
    state.modifiersData[name]._skip = true;
    state.placement = firstFittingPlacement;
    state.reset = true;
  }
}
var flip_default = {
  name: "flip",
  enabled: true,
  phase: "main",
  fn: flip,
  requiresIfExists: ["offset"],
  data: {
    _skip: false
  }
};

// node_modules/@popperjs/core/lib/modifiers/hide.js
function getSideOffsets(overflow, rect, preventedOffsets) {
  if (preventedOffsets === void 0) {
    preventedOffsets = {
      x: 0,
      y: 0
    };
  }
  return {
    top: overflow.top - rect.height - preventedOffsets.y,
    right: overflow.right - rect.width + preventedOffsets.x,
    bottom: overflow.bottom - rect.height + preventedOffsets.y,
    left: overflow.left - rect.width - preventedOffsets.x
  };
}
function isAnySideFullyClipped(overflow) {
  return [top, right, bottom, left].some(function(side) {
    return overflow[side] >= 0;
  });
}
function hide(_ref) {
  var state = _ref.state, name = _ref.name;
  var referenceRect = state.rects.reference;
  var popperRect = state.rects.popper;
  var preventedOffsets = state.modifiersData.preventOverflow;
  var referenceOverflow = detectOverflow(state, {
    elementContext: "reference"
  });
  var popperAltOverflow = detectOverflow(state, {
    altBoundary: true
  });
  var referenceClippingOffsets = getSideOffsets(referenceOverflow, referenceRect);
  var popperEscapeOffsets = getSideOffsets(popperAltOverflow, popperRect, preventedOffsets);
  var isReferenceHidden = isAnySideFullyClipped(referenceClippingOffsets);
  var hasPopperEscaped = isAnySideFullyClipped(popperEscapeOffsets);
  state.modifiersData[name] = {
    referenceClippingOffsets,
    popperEscapeOffsets,
    isReferenceHidden,
    hasPopperEscaped
  };
  state.attributes.popper = Object.assign({}, state.attributes.popper, {
    "data-popper-reference-hidden": isReferenceHidden,
    "data-popper-escaped": hasPopperEscaped
  });
}
var hide_default = {
  name: "hide",
  enabled: true,
  phase: "main",
  requiresIfExists: ["preventOverflow"],
  fn: hide
};

// node_modules/@popperjs/core/lib/modifiers/offset.js
function distanceAndSkiddingToXY(placement, rects, offset2) {
  var basePlacement = getBasePlacement(placement);
  var invertDistance = [left, top].indexOf(basePlacement) >= 0 ? -1 : 1;
  var _ref = typeof offset2 === "function" ? offset2(Object.assign({}, rects, {
    placement
  })) : offset2, skidding = _ref[0], distance = _ref[1];
  skidding = skidding || 0;
  distance = (distance || 0) * invertDistance;
  return [left, right].indexOf(basePlacement) >= 0 ? {
    x: distance,
    y: skidding
  } : {
    x: skidding,
    y: distance
  };
}
function offset(_ref2) {
  var state = _ref2.state, options = _ref2.options, name = _ref2.name;
  var _options$offset = options.offset, offset2 = _options$offset === void 0 ? [0, 0] : _options$offset;
  var data = placements.reduce(function(acc, placement) {
    acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset2);
    return acc;
  }, {});
  var _data$state$placement = data[state.placement], x = _data$state$placement.x, y = _data$state$placement.y;
  if (state.modifiersData.popperOffsets != null) {
    state.modifiersData.popperOffsets.x += x;
    state.modifiersData.popperOffsets.y += y;
  }
  state.modifiersData[name] = data;
}
var offset_default = {
  name: "offset",
  enabled: true,
  phase: "main",
  requires: ["popperOffsets"],
  fn: offset
};

// node_modules/@popperjs/core/lib/modifiers/popperOffsets.js
function popperOffsets(_ref) {
  var state = _ref.state, name = _ref.name;
  state.modifiersData[name] = computeOffsets({
    reference: state.rects.reference,
    element: state.rects.popper,
    strategy: "absolute",
    placement: state.placement
  });
}
var popperOffsets_default = {
  name: "popperOffsets",
  enabled: true,
  phase: "read",
  fn: popperOffsets,
  data: {}
};

// node_modules/@popperjs/core/lib/utils/getAltAxis.js
function getAltAxis(axis) {
  return axis === "x" ? "y" : "x";
}

// node_modules/@popperjs/core/lib/modifiers/preventOverflow.js
function preventOverflow(_ref) {
  var state = _ref.state, options = _ref.options, name = _ref.name;
  var _options$mainAxis = options.mainAxis, checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis, _options$altAxis = options.altAxis, checkAltAxis = _options$altAxis === void 0 ? false : _options$altAxis, boundary = options.boundary, rootBoundary = options.rootBoundary, altBoundary = options.altBoundary, padding = options.padding, _options$tether = options.tether, tether = _options$tether === void 0 ? true : _options$tether, _options$tetherOffset = options.tetherOffset, tetherOffset = _options$tetherOffset === void 0 ? 0 : _options$tetherOffset;
  var overflow = detectOverflow(state, {
    boundary,
    rootBoundary,
    padding,
    altBoundary
  });
  var basePlacement = getBasePlacement(state.placement);
  var variation = getVariation(state.placement);
  var isBasePlacement = !variation;
  var mainAxis = getMainAxisFromPlacement(basePlacement);
  var altAxis = getAltAxis(mainAxis);
  var popperOffsets2 = state.modifiersData.popperOffsets;
  var referenceRect = state.rects.reference;
  var popperRect = state.rects.popper;
  var tetherOffsetValue = typeof tetherOffset === "function" ? tetherOffset(Object.assign({}, state.rects, {
    placement: state.placement
  })) : tetherOffset;
  var normalizedTetherOffsetValue = typeof tetherOffsetValue === "number" ? {
    mainAxis: tetherOffsetValue,
    altAxis: tetherOffsetValue
  } : Object.assign({
    mainAxis: 0,
    altAxis: 0
  }, tetherOffsetValue);
  var offsetModifierState = state.modifiersData.offset ? state.modifiersData.offset[state.placement] : null;
  var data = {
    x: 0,
    y: 0
  };
  if (!popperOffsets2) {
    return;
  }
  if (checkMainAxis) {
    var _offsetModifierState$;
    var mainSide = mainAxis === "y" ? top : left;
    var altSide = mainAxis === "y" ? bottom : right;
    var len = mainAxis === "y" ? "height" : "width";
    var offset2 = popperOffsets2[mainAxis];
    var min2 = offset2 + overflow[mainSide];
    var max2 = offset2 - overflow[altSide];
    var additive = tether ? -popperRect[len] / 2 : 0;
    var minLen = variation === start ? referenceRect[len] : popperRect[len];
    var maxLen = variation === start ? -popperRect[len] : -referenceRect[len];
    var arrowElement = state.elements.arrow;
    var arrowRect = tether && arrowElement ? getLayoutRect(arrowElement) : {
      width: 0,
      height: 0
    };
    var arrowPaddingObject = state.modifiersData["arrow#persistent"] ? state.modifiersData["arrow#persistent"].padding : getFreshSideObject();
    var arrowPaddingMin = arrowPaddingObject[mainSide];
    var arrowPaddingMax = arrowPaddingObject[altSide];
    var arrowLen = within(0, referenceRect[len], arrowRect[len]);
    var minOffset = isBasePlacement ? referenceRect[len] / 2 - additive - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis : minLen - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis;
    var maxOffset = isBasePlacement ? -referenceRect[len] / 2 + additive + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis : maxLen + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis;
    var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);
    var clientOffset = arrowOffsetParent ? mainAxis === "y" ? arrowOffsetParent.clientTop || 0 : arrowOffsetParent.clientLeft || 0 : 0;
    var offsetModifierValue = (_offsetModifierState$ = offsetModifierState == null ? void 0 : offsetModifierState[mainAxis]) != null ? _offsetModifierState$ : 0;
    var tetherMin = offset2 + minOffset - offsetModifierValue - clientOffset;
    var tetherMax = offset2 + maxOffset - offsetModifierValue;
    var preventedOffset = within(tether ? min(min2, tetherMin) : min2, offset2, tether ? max(max2, tetherMax) : max2);
    popperOffsets2[mainAxis] = preventedOffset;
    data[mainAxis] = preventedOffset - offset2;
  }
  if (checkAltAxis) {
    var _offsetModifierState$2;
    var _mainSide = mainAxis === "x" ? top : left;
    var _altSide = mainAxis === "x" ? bottom : right;
    var _offset = popperOffsets2[altAxis];
    var _len = altAxis === "y" ? "height" : "width";
    var _min = _offset + overflow[_mainSide];
    var _max = _offset - overflow[_altSide];
    var isOriginSide = [top, left].indexOf(basePlacement) !== -1;
    var _offsetModifierValue = (_offsetModifierState$2 = offsetModifierState == null ? void 0 : offsetModifierState[altAxis]) != null ? _offsetModifierState$2 : 0;
    var _tetherMin = isOriginSide ? _min : _offset - referenceRect[_len] - popperRect[_len] - _offsetModifierValue + normalizedTetherOffsetValue.altAxis;
    var _tetherMax = isOriginSide ? _offset + referenceRect[_len] + popperRect[_len] - _offsetModifierValue - normalizedTetherOffsetValue.altAxis : _max;
    var _preventedOffset = tether && isOriginSide ? withinMaxClamp(_tetherMin, _offset, _tetherMax) : within(tether ? _tetherMin : _min, _offset, tether ? _tetherMax : _max);
    popperOffsets2[altAxis] = _preventedOffset;
    data[altAxis] = _preventedOffset - _offset;
  }
  state.modifiersData[name] = data;
}
var preventOverflow_default = {
  name: "preventOverflow",
  enabled: true,
  phase: "main",
  fn: preventOverflow,
  requiresIfExists: ["offset"]
};

// node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js
function getHTMLElementScroll(element) {
  return {
    scrollLeft: element.scrollLeft,
    scrollTop: element.scrollTop
  };
}

// node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js
function getNodeScroll(node) {
  if (node === getWindow(node) || !isHTMLElement(node)) {
    return getWindowScroll(node);
  } else {
    return getHTMLElementScroll(node);
  }
}

// node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js
function isElementScaled(element) {
  var rect = element.getBoundingClientRect();
  var scaleX = round(rect.width) / element.offsetWidth || 1;
  var scaleY = round(rect.height) / element.offsetHeight || 1;
  return scaleX !== 1 || scaleY !== 1;
}
function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {
  if (isFixed === void 0) {
    isFixed = false;
  }
  var isOffsetParentAnElement = isHTMLElement(offsetParent);
  var offsetParentIsScaled = isHTMLElement(offsetParent) && isElementScaled(offsetParent);
  var documentElement = getDocumentElement(offsetParent);
  var rect = getBoundingClientRect(elementOrVirtualElement, offsetParentIsScaled, isFixed);
  var scroll = {
    scrollLeft: 0,
    scrollTop: 0
  };
  var offsets = {
    x: 0,
    y: 0
  };
  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {
    if (getNodeName(offsetParent) !== "body" || // https://github.com/popperjs/popper-core/issues/1078
    isScrollParent(documentElement)) {
      scroll = getNodeScroll(offsetParent);
    }
    if (isHTMLElement(offsetParent)) {
      offsets = getBoundingClientRect(offsetParent, true);
      offsets.x += offsetParent.clientLeft;
      offsets.y += offsetParent.clientTop;
    } else if (documentElement) {
      offsets.x = getWindowScrollBarX(documentElement);
    }
  }
  return {
    x: rect.left + scroll.scrollLeft - offsets.x,
    y: rect.top + scroll.scrollTop - offsets.y,
    width: rect.width,
    height: rect.height
  };
}

// node_modules/@popperjs/core/lib/utils/orderModifiers.js
function order(modifiers) {
  var map = /* @__PURE__ */ new Map();
  var visited = /* @__PURE__ */ new Set();
  var result = [];
  modifiers.forEach(function(modifier) {
    map.set(modifier.name, modifier);
  });
  function sort(modifier) {
    visited.add(modifier.name);
    var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);
    requires.forEach(function(dep) {
      if (!visited.has(dep)) {
        var depModifier = map.get(dep);
        if (depModifier) {
          sort(depModifier);
        }
      }
    });
    result.push(modifier);
  }
  modifiers.forEach(function(modifier) {
    if (!visited.has(modifier.name)) {
      sort(modifier);
    }
  });
  return result;
}
function orderModifiers(modifiers) {
  var orderedModifiers = order(modifiers);
  return modifierPhases.reduce(function(acc, phase) {
    return acc.concat(orderedModifiers.filter(function(modifier) {
      return modifier.phase === phase;
    }));
  }, []);
}

// node_modules/@popperjs/core/lib/utils/debounce.js
function debounce(fn2) {
  var pending;
  return function() {
    if (!pending) {
      pending = new Promise(function(resolve) {
        Promise.resolve().then(function() {
          pending = void 0;
          resolve(fn2());
        });
      });
    }
    return pending;
  };
}

// node_modules/@popperjs/core/lib/utils/mergeByName.js
function mergeByName(modifiers) {
  var merged = modifiers.reduce(function(merged2, current) {
    var existing = merged2[current.name];
    merged2[current.name] = existing ? Object.assign({}, existing, current, {
      options: Object.assign({}, existing.options, current.options),
      data: Object.assign({}, existing.data, current.data)
    }) : current;
    return merged2;
  }, {});
  return Object.keys(merged).map(function(key) {
    return merged[key];
  });
}

// node_modules/@popperjs/core/lib/createPopper.js
var DEFAULT_OPTIONS = {
  placement: "bottom",
  modifiers: [],
  strategy: "absolute"
};
function areValidElements() {
  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }
  return !args.some(function(element) {
    return !(element && typeof element.getBoundingClientRect === "function");
  });
}
function popperGenerator(generatorOptions) {
  if (generatorOptions === void 0) {
    generatorOptions = {};
  }
  var _generatorOptions = generatorOptions, _generatorOptions$def = _generatorOptions.defaultModifiers, defaultModifiers2 = _generatorOptions$def === void 0 ? [] : _generatorOptions$def, _generatorOptions$def2 = _generatorOptions.defaultOptions, defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;
  return function createPopper2(reference2, popper2, options) {
    if (options === void 0) {
      options = defaultOptions;
    }
    var state = {
      placement: "bottom",
      orderedModifiers: [],
      options: Object.assign({}, DEFAULT_OPTIONS, defaultOptions),
      modifiersData: {},
      elements: {
        reference: reference2,
        popper: popper2
      },
      attributes: {},
      styles: {}
    };
    var effectCleanupFns = [];
    var isDestroyed = false;
    var instance = {
      state,
      setOptions: function setOptions(setOptionsAction) {
        var options2 = typeof setOptionsAction === "function" ? setOptionsAction(state.options) : setOptionsAction;
        cleanupModifierEffects();
        state.options = Object.assign({}, defaultOptions, state.options, options2);
        state.scrollParents = {
          reference: isElement(reference2) ? listScrollParents(reference2) : reference2.contextElement ? listScrollParents(reference2.contextElement) : [],
          popper: listScrollParents(popper2)
        };
        var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers2, state.options.modifiers)));
        state.orderedModifiers = orderedModifiers.filter(function(m) {
          return m.enabled;
        });
        runModifierEffects();
        return instance.update();
      },
      // Sync update  it will always be executed, even if not necessary. This
      // is useful for low frequency updates where sync behavior simplifies the
      // logic.
      // For high frequency updates (e.g. `resize` and `scroll` events), always
      // prefer the async Popper#update method
      forceUpdate: function forceUpdate() {
        if (isDestroyed) {
          return;
        }
        var _state$elements = state.elements, reference3 = _state$elements.reference, popper3 = _state$elements.popper;
        if (!areValidElements(reference3, popper3)) {
          return;
        }
        state.rects = {
          reference: getCompositeRect(reference3, getOffsetParent(popper3), state.options.strategy === "fixed"),
          popper: getLayoutRect(popper3)
        };
        state.reset = false;
        state.placement = state.options.placement;
        state.orderedModifiers.forEach(function(modifier) {
          return state.modifiersData[modifier.name] = Object.assign({}, modifier.data);
        });
        for (var index = 0; index < state.orderedModifiers.length; index++) {
          if (state.reset === true) {
            state.reset = false;
            index = -1;
            continue;
          }
          var _state$orderedModifie = state.orderedModifiers[index], fn2 = _state$orderedModifie.fn, _state$orderedModifie2 = _state$orderedModifie.options, _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2, name = _state$orderedModifie.name;
          if (typeof fn2 === "function") {
            state = fn2({
              state,
              options: _options,
              name,
              instance
            }) || state;
          }
        }
      },
      // Async and optimistically optimized update  it will not be executed if
      // not necessary (debounced to run at most once-per-tick)
      update: debounce(function() {
        return new Promise(function(resolve) {
          instance.forceUpdate();
          resolve(state);
        });
      }),
      destroy: function destroy() {
        cleanupModifierEffects();
        isDestroyed = true;
      }
    };
    if (!areValidElements(reference2, popper2)) {
      return instance;
    }
    instance.setOptions(options).then(function(state2) {
      if (!isDestroyed && options.onFirstUpdate) {
        options.onFirstUpdate(state2);
      }
    });
    function runModifierEffects() {
      state.orderedModifiers.forEach(function(_ref) {
        var name = _ref.name, _ref$options = _ref.options, options2 = _ref$options === void 0 ? {} : _ref$options, effect4 = _ref.effect;
        if (typeof effect4 === "function") {
          var cleanupFn = effect4({
            state,
            name,
            instance,
            options: options2
          });
          var noopFn = function noopFn2() {
          };
          effectCleanupFns.push(cleanupFn || noopFn);
        }
      });
    }
    function cleanupModifierEffects() {
      effectCleanupFns.forEach(function(fn2) {
        return fn2();
      });
      effectCleanupFns = [];
    }
    return instance;
  };
}

// node_modules/@popperjs/core/lib/popper.js
var defaultModifiers = [eventListeners_default, popperOffsets_default, computeStyles_default, applyStyles_default, offset_default, flip_default, preventOverflow_default, arrow_default, hide_default];
var createPopper = /* @__PURE__ */ popperGenerator({
  defaultModifiers
});

// src/suggesters/suggest.ts
var wrapAround = (value, size) => {
  return (value % size + size) % size;
};
var Suggest = class {
  constructor(owner, containerEl, scope) {
    this.owner = owner;
    this.containerEl = containerEl;
    containerEl.on(
      "click",
      ".suggestion-item",
      this.onSuggestionClick.bind(this)
    );
    containerEl.on(
      "mousemove",
      ".suggestion-item",
      this.onSuggestionMouseover.bind(this)
    );
    scope.register([], "ArrowUp", (event) => {
      if (!event.isComposing) {
        this.setSelectedItem(this.selectedItem - 1, true);
        return false;
      }
    });
    scope.register([], "ArrowDown", (event) => {
      if (!event.isComposing) {
        this.setSelectedItem(this.selectedItem + 1, true);
        return false;
      }
    });
    scope.register([], "Enter", (event) => {
      if (!event.isComposing) {
        this.useSelectedItem(event);
        return false;
      }
    });
  }
  onSuggestionClick(event, el) {
    event.preventDefault();
    const item = this.suggestions.indexOf(el);
    this.setSelectedItem(item, false);
    this.useSelectedItem(event);
  }
  onSuggestionMouseover(_event, el) {
    const item = this.suggestions.indexOf(el);
    this.setSelectedItem(item, false);
  }
  setSuggestions(values) {
    this.containerEl.empty();
    const suggestionEls = [];
    values.forEach((value) => {
      const suggestionEl = this.containerEl.createDiv("suggestion-item");
      this.owner.renderSuggestion(value, suggestionEl);
      suggestionEls.push(suggestionEl);
    });
    this.values = values;
    this.suggestions = suggestionEls;
    this.setSelectedItem(0, false);
  }
  useSelectedItem(event) {
    const currentValue = this.values[this.selectedItem];
    if (currentValue) {
      this.owner.selectSuggestion(currentValue, event);
    }
  }
  setSelectedItem(selectedIndex, scrollIntoView) {
    const normalizedIndex = wrapAround(
      selectedIndex,
      this.suggestions.length
    );
    const prevSelectedSuggestion = this.suggestions[this.selectedItem];
    const selectedSuggestion = this.suggestions[normalizedIndex];
    prevSelectedSuggestion == null ? void 0 : prevSelectedSuggestion.removeClass("is-selected");
    selectedSuggestion == null ? void 0 : selectedSuggestion.addClass("is-selected");
    this.selectedItem = normalizedIndex;
    if (scrollIntoView) {
      selectedSuggestion.scrollIntoView(false);
    }
  }
};
var TextInputSuggest = class {
  constructor(app, inputEl) {
    this.app = app;
    this.inputEl = inputEl;
    this.scope = new import_obsidian3.Scope();
    this.suggestEl = createDiv("suggestion-container");
    const suggestion = this.suggestEl.createDiv("suggestion");
    this.suggest = new Suggest(this, suggestion, this.scope);
    this.scope.register([], "Escape", this.close.bind(this));
    this.inputEl.addEventListener("input", this.onInputChanged.bind(this));
    this.inputEl.addEventListener("focus", this.onInputChanged.bind(this));
    this.inputEl.addEventListener("blur", this.close.bind(this));
    this.suggestEl.on(
      "mousedown",
      ".suggestion-container",
      (event) => {
        event.preventDefault();
      }
    );
  }
  onInputChanged() {
    const inputStr = this.inputEl.value;
    const suggestions = this.getSuggestions(inputStr);
    if (!suggestions) {
      this.close();
      return;
    }
    if (suggestions.length > 0) {
      this.suggest.setSuggestions(suggestions);
      this.open(this.app.dom.appContainerEl, this.inputEl);
    } else {
      this.close();
    }
  }
  open(container, inputEl) {
    this.app.keymap.pushScope(this.scope);
    container.appendChild(this.suggestEl);
    this.popper = createPopper(inputEl, this.suggestEl, {
      placement: "bottom-start",
      modifiers: [
        {
          name: "sameWidth",
          enabled: true,
          fn: ({ state, instance }) => {
            const targetWidth = `${state.rects.reference.width}px`;
            if (state.styles.popper.width === targetWidth) {
              return;
            }
            state.styles.popper.width = targetWidth;
            instance.update();
          },
          phase: "beforeWrite",
          requires: ["computeStyles"]
        }
      ]
    });
  }
  close() {
    this.app.keymap.popScope(this.scope);
    this.suggest.setSuggestions([]);
    if (this.popper) this.popper.destroy();
    this.suggestEl.detach();
  }
};

// src/suggesters/FolderSuggester.ts
var FolderSuggest = class extends TextInputSuggest {
  getSuggestions(inputStr) {
    const abstractFiles = this.app.vault.getAllLoadedFiles();
    const folders = [];
    const lowerCaseInputStr = inputStr.toLowerCase();
    abstractFiles.forEach((folder) => {
      if (folder instanceof import_obsidian4.TFolder && folder.path.toLowerCase().contains(lowerCaseInputStr)) {
        folders.push(folder);
      }
    });
    return folders;
  }
  renderSuggestion(file, el) {
    el.setText(file.path);
  }
  selectSuggestion(file) {
    this.inputEl.value = file.path;
    this.inputEl.trigger("input");
    this.close();
  }
};

// src/settings.ts
var SettingTab = class extends import_obsidian5.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl, plugin } = this;
    const { settings } = plugin;
    containerEl.empty();
    containerEl.createEl("h1", { text: "BibNotes Formatter (for Zotero) " });
    containerEl.createEl("h2", { text: "Import Library" });
    new import_obsidian5.Setting(containerEl).setName("BetterBibTex Json File").setDesc("Add relative path from the vault folder to the *BetterBibTex Json* file to be imported. For instance, add `library.json` if the file (library.json) is in the root folder. Instead, if the file is in a subfolder, specify first the subfolder followed by the name of the file (e.g. 'zotero/library.json' if the json file is located in a subfolder of your vault called 'zotero') ").addText(
      (text) => text.setPlaceholder("/path/to/BetterBibTex.json").setValue(settings.bibPath).onChange((value) => __async(this, null, function* () {
        console.log("Path Bib: " + value);
        settings.bibPath = value;
        yield plugin.saveSettings();
      }))
    );
    containerEl.createEl("h2", { text: "Export Notes" });
    new import_obsidian5.Setting(containerEl).setName("Export Path").setDesc("Add the relative path to the folder inside your vault where the notes will be exported").addSearch((cb) => {
      new FolderSuggest(this.app, cb.inputEl);
      cb.setPlaceholder("Example: folder1/folder2").setValue(this.plugin.settings.exportPath).onChange((new_folder) => __async(this, null, function* () {
        settings.exportPath = new_folder;
        yield plugin.saveSettings();
      }));
    });
    new import_obsidian5.Setting(containerEl).setName("Note Title").setDesc("Select the format of the title of the note. Possible values include: {{citeKey}}, {{title}}, {{author}},{{authorInitials}}, {{authorFullName}} {{year}}").addText(
      (text) => text.setPlaceholder("{{citeKey}}").setValue(settings.exportTitle).onChange((value) => __async(this, null, function* () {
        settings.exportTitle = value;
        yield plugin.saveSettings();
      }))
    );
    new import_obsidian5.Setting(containerEl).setName("Select Template").setDesc(
      "Select one of the default templates or provide a custom one."
    ).addDropdown(
      (d) => {
        d.addOption("Plain", "Plain");
        d.addOption("Admonition", "Admonition");
        d.addOption("Custom", "Custom Template");
        d.setValue(settings.templateType);
        d.onChange(
          (v) => __async(this, null, function* () {
            settings.templateType = v;
            yield plugin.saveSettings();
            this.display();
          })
        );
      }
    );
    if (settings.templateType === "Custom") {
      new import_obsidian5.Setting(containerEl).setName("Custom Template").addTextArea((text) => {
        text.inputEl.rows = 10;
        text.inputEl.style.width = "100%";
        text.setValue(settings.templateContent).onChange(
          (value) => __async(this, null, function* () {
            settings.templateContent = value;
            yield plugin.saveSettings();
          })
        );
      });
    }
    new import_obsidian5.Setting(containerEl).setName("Missing Fields").setDesc(
      "Fields that are present in the template but missing from the selected field."
    ).addDropdown((d) => {
      d.addOption("Leave placeholder", "Leave placeholder");
      d.addOption("Remove (entire row)", "Remove (entire row)");
      d.addOption("Replace with custom text", "Replace with custom text");
      d.setValue(settings.missingfield);
      d.onChange(
        (v) => __async(this, null, function* () {
          settings.missingfield = v;
          yield plugin.saveSettings();
          this.display();
        })
      );
    });
    if (settings.missingfield === "Replace with custom text") {
      new import_obsidian5.Setting(containerEl).setName("Replacement for missing fields").addText(
        (text) => text.setValue(settings.missingfieldreplacement).onChange((value) => __async(this, null, function* () {
          settings.missingfieldreplacement = value;
          yield plugin.saveSettings();
        }))
      );
    }
    new import_obsidian5.Setting(containerEl).setName("Multiple Entries Divider").setDesc("Type the character or expression that should separate multiple values when found in the same field (e.g. authors, editors, tags, collections).").addTextArea(
      (text) => text.setValue(settings.multipleFieldsDivider).onChange(
        (value) => __async(this, null, function* () {
          settings.multipleFieldsDivider = value;
          yield plugin.saveSettings();
        })
      )
    );
    new import_obsidian5.Setting(containerEl).setName("Format Names").setDesc("Specify how the names of the authors/editors should be exported. Accepted values are {{firstName}}, {{lastName}} and {{firstNameInitials}}").addTextArea(
      (text) => text.setValue(settings.nameFormat).onChange(
        (value) => __async(this, null, function* () {
          settings.nameFormat = value;
          yield plugin.saveSettings();
        })
      )
    );
    new import_obsidian5.Setting(containerEl).setName("Save Manual Edits").setDesc(
      'Select "Yes" to preserve the manual edits made to the previously extracted note (e.g. block references, comments added manually, fixed typos) when this is updated. Select "No" to overwrite any manual change to the extracted annotation when this is updated.'
    ).addDropdown((d) => {
      d.addOption("Save Entire Note", "Save Entire Note");
      d.addOption("Select Section", "Select Section");
      d.addOption("Overwrite Entire Note", "Overwrite Entire Note");
      d.setValue(settings.saveManualEdits);
      d.onChange(
        (v) => __async(this, null, function* () {
          settings.saveManualEdits = v;
          yield plugin.saveSettings();
          this.display();
        })
      );
    });
    if (settings.saveManualEdits == "Select Section") {
      new import_obsidian5.Setting(containerEl).setName("Start - Save Manual Edits").setDesc(
        "Define string (e.g. '## Notes') in the template starting from where updating the note will not overwrite the existing text. If field is left empty, the value will be set to the beginning of the note"
      ).addText(
        (text) => text.setValue(settings.saveManualEditsStart).onChange((value) => __async(this, null, function* () {
          settings.saveManualEditsStart = value;
          yield plugin.saveSettings();
        }))
      );
      if (settings.saveManualEdits) {
        new import_obsidian5.Setting(containerEl).setName("End - Save Manual Edits").setDesc(
          "Define string (e.g. '## Notes') in the template until where updating the note will not overwrite the existing text. If field is left empty, the value will be set to the end of the note"
        ).addText(
          (text) => text.setValue(settings.saveManualEditsEnd).onChange((value) => __async(this, null, function* () {
            settings.saveManualEditsEnd = value;
            yield plugin.saveSettings();
          }))
        );
      }
    }
    containerEl.createEl("h2", { text: "Update Library" });
    new import_obsidian5.Setting(containerEl).setName("Update Existing/All Notes").setDesc(
      "Select whether to create new notes that are missing from Obsidian but present/modified within Zotero when runing the Update Library command"
    ).addDropdown((d) => {
      d.addOption("Only update existing notes", "Only existing notes");
      d.addOption("Create new notes when missing", "Create new notes when missing");
      d.setValue(settings.updateLibrary);
      d.onChange(
        (v) => __async(this, null, function* () {
          settings.updateLibrary = v;
          yield plugin.saveSettings();
        })
      );
    });
  }
};

// src/main.ts
var MyPlugin = class extends import_obsidian6.Plugin {
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      this.addSettingTab(new SettingTab(this.app, this));
      this.addCommand({
        id: "importSelectedJson-modal",
        name: "Create/Update Literature Note",
        callback: () => {
          new fuzzySelectEntryFromJson(this.app, this).open();
        }
      });
      this.addCommand({
        id: "updateLibrary-modal",
        name: "Update Library",
        callback: () => {
          new updateLibrary(this.app, this).open();
        }
      });
      this.addCommand({
        id: "updateCurrentNote",
        name: "Update Current Note",
        callback: () => {
          this.updateCurrentNote();
        }
      });
    });
  }
  onunload() {
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign(
        {},
        DEFAULT_SETTINGS,
        yield this.loadData()
      );
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
  parseMetadata(selectedEntry, templateOriginal) {
    const template = templateOriginal;
    let note = template;
    note = createCreatorList(
      selectedEntry.creators,
      "author",
      note,
      this.settings.multipleFieldsDivider,
      this.settings.nameFormat
    );
    note = createCreatorList(
      selectedEntry.creators,
      "editor",
      note,
      this.settings.multipleFieldsDivider,
      this.settings.nameFormat
    );
    note = createCreatorAllList(
      selectedEntry.creators,
      note,
      this.settings.multipleFieldsDivider,
      this.settings.nameFormat
    );
    if (selectedEntry.hasOwnProperty("date")) {
      selectedEntry.year = selectedEntry.date.match(/\d\d\d\d/gm) + "";
    }
    if (selectedEntry.hasOwnProperty("select")) {
      selectedEntry.localLibrary = "[Zotero](" + selectedEntry.select + ")";
      selectedEntry.localLibraryLink = selectedEntry.select;
    }
    selectedEntry.citeKey = selectedEntry.citationKey;
    if (selectedEntry.itemType == "journalArticle") {
      selectedEntry.itemType = "Journal Article";
    }
    if (selectedEntry.itemType == "report") {
      selectedEntry.itemType = "Report";
    }
    if (selectedEntry.itemType == "bookSection") {
      selectedEntry.itemType = "Book Section";
    }
    if (selectedEntry.itemType == "newspaperArticle") {
      selectedEntry.itemType = "Newspaper Article";
    }
    if (selectedEntry.itemType == "book") {
      selectedEntry.itemType = "Book";
    }
    selectedEntry.itemType = selectedEntry.itemType.charAt(0).toUpperCase() + selectedEntry.itemType.slice(1);
    selectedEntry.citationInLine = createAuthorKey(selectedEntry.creators) + " (" + selectedEntry.year + ")";
    selectedEntry.citationInLine = selectedEntry.citationInLine.replace("()", "");
    selectedEntry.citationInLineInitials = createAuthorKeyInitials(selectedEntry.creators) + " (" + selectedEntry.year + ")";
    selectedEntry.citationInLineInitials = selectedEntry.citationInLineInitials.replace("()", "");
    selectedEntry.citationInLineFullName = createAuthorKeyFullName(selectedEntry.creators) + " (" + selectedEntry.year + ")";
    selectedEntry.citationInLineFullName = selectedEntry.citationInLineFullName.replace("()", "");
    if (selectedEntry.itemType == "Journal Article") {
      selectedEntry.citationShort = selectedEntry.citationInLine + " '" + selectedEntry.title + "'";
      selectedEntry.citationFull = selectedEntry.citationShort + ", *" + selectedEntry.publicationTitle + "*, " + selectedEntry.volume + "(" + selectedEntry.issue + "), pp. " + selectedEntry.pages + ".";
      selectedEntry.citationFull = selectedEntry.citationFull.replace("() ", "");
      selectedEntry.citationShort = selectedEntry.citationShort.replace("** ", "");
      selectedEntry.citationFull = selectedEntry.citationFull.replace("** ", "");
      selectedEntry.citationFull = selectedEntry.citationFull.replace("pp. ", "");
    }
    selectedEntry.file = createLocalFileLink(selectedEntry);
    selectedEntry.filePath = createLocalFilePathLink(selectedEntry);
    console.log(selectedEntry.filePath);
    selectedEntry.zoteroReaderLink = createZoteroReaderPathLink(selectedEntry);
    console.log(selectedEntry.zoteroReaderLink);
    const entriesArray = Object.keys(selectedEntry);
    note = replaceAllTemplates(entriesArray, note, selectedEntry);
    note = note.replace(/```/g, "HEREISAPLACEHOLDERFORBACKTICK");
    note = note.replace(/`/g, "'");
    note = note.replace(/HEREISAPLACEHOLDERFORBACKTICK/g, "```");
    note = note.replace(
      "```ad-quote\ntitle: Abstract\n```\n",
      ""
    );
    note = note.replace(
      "```ad-abstract\ntitle: Files and Links\n```\n",
      ""
    );
    note = note.replace(
      "```ad-note\ntitle: Tags and Collections\n```",
      ""
    );
    return note;
  }
  parseCollection(selectedEntry, data, metadata) {
    const exportedCollections = data.collections;
    const selectedID = selectedEntry.itemID;
    let collectionArray = [];
    const collectionParentCode = [];
    let collectionParentArray = [];
    const collectionParentParent = [];
    const collectionKeys = Object.keys(exportedCollections);
    for (let indexCollection = 0; indexCollection < collectionKeys.length; indexCollection++) {
      const collectionName = exportedCollections[collectionKeys[indexCollection]].name;
      const collectionItem = exportedCollections[collectionKeys[indexCollection]].items;
      const collectionParent = exportedCollections[collectionKeys[indexCollection]].parent;
      if (collectionItem.includes(selectedID)) {
        collectionArray.push(collectionName);
        collectionParentCode.push(collectionParent);
      }
    }
    if (collectionParentCode.length > 0) {
      for (let indexCollection = 0; indexCollection < collectionKeys.length; indexCollection++) {
        if (collectionParentCode.includes(
          exportedCollections[collectionKeys[indexCollection]].key
        )) {
          collectionParentArray.push(
            exportedCollections[collectionKeys[indexCollection]].name
          );
        }
      }
    }
    if (collectionParentParent.length > 0) {
      for (let indexCollection = 0; indexCollection < collectionKeys.length; indexCollection++) {
        if (collectionParentParent.includes(
          exportedCollections[collectionKeys[indexCollection]].key
        )) {
          collectionParentArray.push(
            exportedCollections[collectionKeys[indexCollection]].name
          );
        }
      }
    }
    collectionParentArray = collectionParentArray.concat(collectionArray);
    collectionArray = collectionArray.sort();
    collectionParentArray = collectionParentArray.sort();
    let divider = this.settings.multipleFieldsDivider;
    if (divider.slice(-1) !== " ") {
      divider = divider + " ";
    }
    if (collectionArray.length > 0) {
      const collectionArrayBraket = collectionArray.map(makeWiki);
      metadata = replaceTemplate(
        metadata,
        `[[{{collections}}]]`,
        String(collectionArrayBraket.join(divider))
      );
      const collectionArrayQuotes = collectionArray.map(makeQuotes);
      metadata = replaceTemplate(
        metadata,
        `"{{collections}}"`,
        String(collectionArrayQuotes.join(divider))
      );
      const collectionArrayTags = collectionArray.map(makeTags);
      metadata = replaceTemplate(
        metadata,
        `#{{collections}}`,
        String(collectionArrayTags.join(divider))
      );
      metadata = replaceTemplate(
        metadata,
        `{{collections}}`,
        String(collectionArray.join(divider))
      );
    }
    if (collectionParentArray.length > 0) {
      const collectionParentArrayBraket = collectionParentArray.map(makeWiki);
      metadata = replaceTemplate(
        metadata,
        `[[{{collectionsParent}}]]`,
        String(collectionParentArrayBraket.join(divider))
      );
      const collectionParentArrayQuotes = collectionParentArray.map(makeQuotes);
      metadata = replaceTemplate(
        metadata,
        `"{{collectionsParent}}"`,
        String(collectionParentArrayQuotes.join(divider))
      );
      const collectionParentArrayTags = collectionParentArray.map(makeTags);
      metadata = replaceTemplate(
        metadata,
        `#{{collectionsParent}}`,
        String(collectionParentArrayTags.join(divider))
      );
      metadata = replaceTemplate(
        metadata,
        `{{collectionsParent}}`,
        String(collectionParentArray.join(divider))
      );
    }
    return metadata;
  }
  // Function to extract the notes added manually
  // Function to import the right template
  importTemplate() {
    let template = templatePlain;
    if (this.settings.templateType === "Plain") {
      template = templatePlain;
    } else if (this.settings.templateType === "Admonition") {
      template = templateAdmonition;
    } else if (this.settings.templateType === "Custom") {
      template = this.settings.templateContent;
    }
    return template;
  }
  compareOldNewNote(existingNote, newNote, authorKey) {
    const newLineRegex = RegExp(/\n/gm);
    const positionNewLine = [];
    let match = void 0;
    while (match = newLineRegex.exec(existingNote)) {
      positionNewLine.push(match.index);
    }
    const positionOldNote = [0];
    const newNoteInsertText = [];
    const newNoteInsertPosition = [];
    const newNoteArray = newNote.split("\n");
    for (let indexLines = 0; indexLines < newNoteArray.length; indexLines++) {
      let segmentWhole = "";
      let segmentFirstHalf = "";
      let segmentSecondHalf = "";
      let segmentFirstQuarter = "";
      let segmentSecondQuarter = "";
      let segmentThirdQuarter = "";
      let segmentFourthQuarter = "";
      const positionArray = [-1];
      let selectedNewLine = newNoteArray[indexLines];
      selectedNewLine = selectedNewLine.trim();
      selectedNewLine = selectedNewLine.replace(/^- /gm, "");
      selectedNewLine = selectedNewLine.replace(/^> /gm, "");
      selectedNewLine = selectedNewLine.replace(/^=/gm, "");
      selectedNewLine = selectedNewLine.replace(/^\**/gm, "");
      selectedNewLine = selectedNewLine.replace(/^\*/gm, "");
      selectedNewLine = selectedNewLine.replace(/^"/gm, "");
      const authorKey_Zotero = new RegExp(
        "\\(" + authorKey + ", \\d+, p. \\d+\\)$"
      );
      const authorKey_Zotfile = new RegExp(
        "\\(" + authorKey + " \\d+:\\d+\\)$"
      );
      selectedNewLine = selectedNewLine.replace(authorKey_Zotero, "");
      selectedNewLine = selectedNewLine.replace(authorKey_Zotfile, "");
      selectedNewLine = selectedNewLine.replace(/=$/gm, "");
      selectedNewLine = selectedNewLine.replace(/\**$/gm, "");
      selectedNewLine = selectedNewLine.replace(/\*$/gm, "");
      selectedNewLine = selectedNewLine.replace(/"$/gm, "");
      if (selectedNewLine == void 0) {
        continue;
      }
      const lengthExistingLine = selectedNewLine.length;
      if (lengthExistingLine === 0) {
        continue;
      }
      if (lengthExistingLine > 1 && lengthExistingLine < 30) {
        segmentWhole = selectedNewLine;
        positionArray.push(existingNote.indexOf(segmentWhole));
      } else if (lengthExistingLine >= 30 && lengthExistingLine < 150) {
        segmentFirstHalf = selectedNewLine.substring(
          0,
          lengthExistingLine / 2
        );
        positionArray.push(existingNote.indexOf(segmentFirstHalf));
        segmentSecondHalf = selectedNewLine.substring(
          lengthExistingLine / 2 + 1,
          lengthExistingLine
        );
        positionArray.push(existingNote.indexOf(segmentSecondHalf));
      } else if (lengthExistingLine >= 150) {
        segmentFirstQuarter = selectedNewLine.substring(
          0,
          lengthExistingLine / 4
        );
        positionArray.push(existingNote.indexOf(segmentFirstQuarter));
        segmentSecondQuarter = selectedNewLine.substring(
          lengthExistingLine / 4 + 1,
          lengthExistingLine / 2
        );
        positionArray.push(existingNote.indexOf(segmentSecondQuarter));
        segmentThirdQuarter = selectedNewLine.substring(
          lengthExistingLine / 2 + 1,
          3 * lengthExistingLine / 4
        );
        positionArray.push(existingNote.indexOf(segmentThirdQuarter));
        segmentFourthQuarter = selectedNewLine.substring(
          3 * lengthExistingLine / 4 + 1,
          lengthExistingLine
        );
        positionArray.push(existingNote.indexOf(segmentFourthQuarter));
      }
      if (Math.max(...positionArray) > -1) {
        const positionOldNoteMax = Math.max(...positionArray);
        positionOldNote.push(positionOldNoteMax);
      }
      if (Math.max(...positionArray) === -1) {
        const positionOldNoteMax = Math.max(...positionOldNote);
        newNoteInsertText.push(newNoteArray[indexLines]);
        newNoteInsertPosition.push(
          positionNewLine.filter((pos) => pos > positionOldNoteMax)[0]
        );
      }
    }
    let doubleSpaceAdd = "";
    if (this.settings.isDoubleSpaced) {
      doubleSpaceAdd = "\n";
    }
    for (let indexNoteElements = newNoteInsertText.length - 1; indexNoteElements >= 0; indexNoteElements--) {
      const insertText = newNoteInsertText[indexNoteElements];
      const insertPosition = newNoteInsertPosition[indexNoteElements];
      existingNote = existingNote.slice(0, insertPosition) + doubleSpaceAdd + "\n" + insertText + existingNote.slice(insertPosition);
    }
    if (this.settings.saveManualEdits == "Save Entire Note") {
      return existingNote;
    }
    if (this.settings.saveManualEdits == "Select Section") {
      const startSave = this.settings.saveManualEditsStart;
      const endSave = this.settings.saveManualEditsEnd;
      let startSaveOld = 0;
      if (startSave !== "") {
        startSaveOld = existingNote.indexOf(startSave);
      }
      if (startSaveOld < 0) {
        startSaveOld = 0;
      }
      let endSaveOld = existingNote.length;
      if (endSave !== "") {
        endSaveOld = existingNote.indexOf(endSave) + endSave.length;
      }
      if (endSaveOld < 0) {
        endSaveOld = existingNote.length;
      }
      const existingNotePreserved = existingNote.substring(
        startSaveOld,
        endSaveOld
      );
      let startSaveNew = 0;
      if (startSave !== "") {
        startSaveNew = newNote.indexOf(startSave);
      }
      if (startSaveNew < 0) {
        startSaveNew = 0;
      }
      let endSaveNew = newNote.length;
      if (endSave !== "") {
        endSaveNew = newNote.indexOf(endSave) + endSave.length;
      }
      if (endSaveNew < 0) {
        endSaveNew = newNote.length;
      }
      const newNotePreservedBefore = newNote.substring(0, startSaveNew);
      const newNotePreservedAfter = newNote.substring(
        endSaveNew,
        newNote.length
      );
      const newNoteCombined = newNotePreservedBefore + existingNotePreserved + newNotePreservedAfter;
      return newNoteCombined;
    }
  }
  createNote(selectedEntry, data) {
    const authorKey = createAuthorKey(selectedEntry.creators);
    selectedEntry.authorKey = authorKey;
    selectedEntry.authorKeyInitials = createAuthorKeyInitials(selectedEntry.creators);
    selectedEntry.authorKeyFullName = createAuthorKeyFullName(selectedEntry.creators);
    let bugout = new Debugout({ realTimeLoggingOn: false });
    if (this.settings.debugMode === true) {
      bugout = new Debugout({ realTimeLoggingOn: true });
    }
    const templateNote = this.importTemplate();
    bugout.log("Template: \n" + templateNote);
    let litnote = this.parseMetadata(selectedEntry, templateNote);
    bugout.log(selectedEntry);
    litnote = this.parseCollection(selectedEntry, data, litnote);
    const noteTitleFull = createNoteTitle(
      selectedEntry,
      this.settings.exportTitle,
      this.settings.exportPath
    );
    litnote = replaceTagList(
      selectedEntry,
      [],
      litnote,
      this.settings.multipleFieldsDivider
    );
    const missingFieldSetting = this.settings.missingfield;
    litnote = replaceMissingFields(
      litnote,
      missingFieldSetting,
      this.settings.missingfieldreplacement
    );
    if (this.settings.saveManualEdits !== "Overwrite Entire Note" && fs2.existsSync(noteTitleFull)) {
      const existingNoteAll = String(fs2.readFileSync(noteTitleFull));
      litnote = this.compareOldNewNote(
        existingNoteAll,
        litnote,
        authorKey
      );
    }
    bugout.log("NoteTitleFull: " + noteTitleFull);
    bugout.log("Final Note: " + litnote);
    bugout.log(this.settings);
    if (this.settings.debugMode === true) {
      bugout.downloadLog();
    }
    fs2.writeFile(noteTitleFull, litnote, function(err) {
      if (err) console.log(err);
    });
    new import_obsidian6.Notice(`Imported ${selectedEntry.citationKey}!`);
  }
  updateCurrentNote() {
    console.log("Updating Current Note");
    const jsonPath = this.app.vault.adapter.getBasePath() + "/" + this.settings.bibPath;
    if (!fs2.existsSync(jsonPath)) {
      new import_obsidian6.Notice("No BetterBibTex Json file found at " + jsonPath);
    }
    const rawdata = fs2.readFileSync(
      this.app.vault.adapter.getBasePath() + "/" + this.settings.bibPath
    );
    const data = JSON.parse(rawdata.toString());
    const currentNoteName = this.app.workspace.getActiveFile().name;
    const noteTitleFormat = this.settings.exportTitle + ".md";
    const citeKey = parseCiteKeyFromNoteName(currentNoteName, noteTitleFormat);
    if (citeKey != null) {
      const entryIndex = data.items.findIndex(
        (item) => item.citationKey === citeKey
      );
      if (entryIndex != -1) {
        const currentEntry = data.items[entryIndex];
        this.createNote(currentEntry, data);
        new import_obsidian6.Notice("Current Note " + currentNoteName + " updated");
      } else {
        new import_obsidian6.Notice("Current Note " + currentNoteName + " not found in the library");
      }
    } else {
      new import_obsidian6.Notice("Cannot find citeKey from Current Note:" + currentNoteName);
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAibm9kZV9tb2R1bGVzL2RlYnVnb3V0LmpzL2Rpc3QvZGVidWdvdXQubWluLmpzIiwgIm5vZGVfbW9kdWxlcy90dXJuZG93bi9saWIvdHVybmRvd24uYnJvd3Nlci5lcy5qcyIsICJzcmMvY29uc3RhbnRzLnRzIiwgInNyYy9tb2RhbC50cyIsICJzcmMvdXRpbHMudHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9zdWdnZXN0ZXJzL0ZvbGRlclN1Z2dlc3Rlci50cyIsICJzcmMvc3VnZ2VzdGVycy9zdWdnZXN0LnRzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZW51bXMuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0Tm9kZU5hbWUuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0V2luZG93LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2luc3RhbmNlT2YuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9tb2RpZmllcnMvYXBwbHlTdHlsZXMuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9nZXRCYXNlUGxhY2VtZW50LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvbWF0aC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL3VzZXJBZ2VudC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9pc0xheW91dFZpZXdwb3J0LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldEJvdW5kaW5nQ2xpZW50UmVjdC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRMYXlvdXRSZWN0LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2NvbnRhaW5zLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldENvbXB1dGVkU3R5bGUuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvaXNUYWJsZUVsZW1lbnQuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0RG9jdW1lbnRFbGVtZW50LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldFBhcmVudE5vZGUuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0T2Zmc2V0UGFyZW50LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvd2l0aGluLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZ2V0RnJlc2hTaWRlT2JqZWN0LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvbWVyZ2VQYWRkaW5nT2JqZWN0LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZXhwYW5kVG9IYXNoTWFwLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvbW9kaWZpZXJzL2Fycm93LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZ2V0VmFyaWF0aW9uLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvbW9kaWZpZXJzL2NvbXB1dGVTdHlsZXMuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9tb2RpZmllcnMvZXZlbnRMaXN0ZW5lcnMuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9nZXRPcHBvc2l0ZVBsYWNlbWVudC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2dldE9wcG9zaXRlVmFyaWF0aW9uUGxhY2VtZW50LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldFdpbmRvd1Njcm9sbC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRXaW5kb3dTY3JvbGxCYXJYLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldFZpZXdwb3J0UmVjdC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXREb2N1bWVudFJlY3QuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvaXNTY3JvbGxQYXJlbnQuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0U2Nyb2xsUGFyZW50LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2xpc3RTY3JvbGxQYXJlbnRzLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvcmVjdFRvQ2xpZW50UmVjdC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRDbGlwcGluZ1JlY3QuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9jb21wdXRlT2Zmc2V0cy5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2RldGVjdE92ZXJmbG93LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvY29tcHV0ZUF1dG9QbGFjZW1lbnQuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9tb2RpZmllcnMvZmxpcC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9oaWRlLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvbW9kaWZpZXJzL29mZnNldC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9wb3BwZXJPZmZzZXRzLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZ2V0QWx0QXhpcy5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9wcmV2ZW50T3ZlcmZsb3cuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0SFRNTEVsZW1lbnRTY3JvbGwuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0Tm9kZVNjcm9sbC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRDb21wb3NpdGVSZWN0LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvb3JkZXJNb2RpZmllcnMuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9kZWJvdW5jZS5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL21lcmdlQnlOYW1lLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvY3JlYXRlUG9wcGVyLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvcG9wcGVyLmpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvLyBJbXBvcnQgZnNcclxuaW1wb3J0ICogYXMgZnMgZnJvbSBcImZzXCI7XHJcbmltcG9ydCB7IERlYnVnb3V0IH0gZnJvbSBcImRlYnVnb3V0LmpzXCI7XHJcblxyXG5pbXBvcnQgeyBQbHVnaW4sIE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5cclxuaW1wb3J0ICd0dXJuZG93bidcclxuXHJcbmltcG9ydCB7XHJcblx0REVGQVVMVF9TRVRUSU5HUyxcclxuXHR0ZW1wbGF0ZUFkbW9uaXRpb24sXHJcblx0dGVtcGxhdGVQbGFpbixcclxufSBmcm9tIFwiLi9jb25zdGFudHNcIjtcclxuXHJcbi8vSW1wb3J0IG1vZGFscyBmcm9tIC9tb2RhbC50c1xyXG5pbXBvcnQgeyBmdXp6eVNlbGVjdEVudHJ5RnJvbUpzb24sIHVwZGF0ZUxpYnJhcnkgfSBmcm9tIFwiLi9tb2RhbFwiO1xyXG5cclxuLy9JbXBvcnQgc2FtcGxlIHNldHRpbmdzIGZyb20gL3NldHRpbmdzLnRzXHJcbmltcG9ydCB7IFNldHRpbmdUYWIgfSBmcm9tIFwiLi9zZXR0aW5nc1wiO1xyXG5pbXBvcnQge1xyXG5cdE15UGx1Z2luU2V0dGluZ3MsXHJcblx0UmVmZXJlbmNlLFxyXG5cdENvbGxlY3Rpb24sXHJcbn0gZnJvbSBcIi4vdHlwZXNcIjtcclxuXHJcbmltcG9ydCB7XHJcblx0Y3JlYXRlQXV0aG9yS2V5LFxyXG5cdGNyZWF0ZUxvY2FsRmlsZUxpbmssXHJcblx0Y3JlYXRlTG9jYWxGaWxlUGF0aExpbmssXHJcblx0Y3JlYXRlWm90ZXJvUmVhZGVyUGF0aExpbmssXHJcblx0Y3JlYXRlQ3JlYXRvckxpc3QsXHJcblx0Y3JlYXRlTm90ZVRpdGxlLFxyXG5cdG1ha2VXaWtpLFxyXG5cdG1ha2VRdW90ZXMsXHJcblx0cmVwbGFjZUFsbFRlbXBsYXRlcyxcclxuXHRyZXBsYWNlTWlzc2luZ0ZpZWxkcyxcclxuXHRyZXBsYWNlVGFnTGlzdCxcclxuXHRyZXBsYWNlVGVtcGxhdGUsXHJcblx0bWFrZVRhZ3MsXHJcblx0Y3JlYXRlQ3JlYXRvckFsbExpc3QsXHJcblx0Y3JlYXRlQXV0aG9yS2V5SW5pdGlhbHMsXHJcblx0Y3JlYXRlQXV0aG9yS2V5RnVsbE5hbWUsXHJcblx0cGFyc2VDaXRlS2V5RnJvbU5vdGVOYW1lLFxyXG59IGZyb20gXCIuL3V0aWxzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNeVBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcblx0c2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3M7XHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblxyXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cclxuXHRcdC8vQWRkIENvbW1hbmQgdG8gU2VsZWN0IGEgc2luZ2xlIEVudHJ5IGZyb20gQmliIGZpbGUgdmlhIFNRTFxyXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6IFwiaW1wb3J0U2VsZWN0ZWRKc29uLW1vZGFsXCIsXHJcblx0XHRcdG5hbWU6IFwiQ3JlYXRlL1VwZGF0ZSBMaXRlcmF0dXJlIE5vdGVcIixcclxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcclxuXHRcdFx0XHRuZXcgZnV6enlTZWxlY3RFbnRyeUZyb21Kc29uKHRoaXMuYXBwLCB0aGlzKS5vcGVuKCk7XHJcblx0XHRcdH0sXHJcblx0XHR9KTtcclxuXHJcblx0XHQvL0FkZCBDb21tYW5kIHRvIFNlbGVjdCBhIHNpbmdsZSBFbnRyeSBmcm9tIEJpYiBmaWxlIHZpYSBTUUxcclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiBcInVwZGF0ZUxpYnJhcnktbW9kYWxcIixcclxuXHRcdFx0bmFtZTogXCJVcGRhdGUgTGlicmFyeVwiLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0XHRcdG5ldyB1cGRhdGVMaWJyYXJ5KHRoaXMuYXBwLCB0aGlzKS5vcGVuKCk7XHJcblx0XHRcdH0sXHJcblx0XHR9KTtcclxuXHJcblx0XHQvL0FkZCBDb21tYW5kIHRvIFVwZGF0ZSB0aGUgY3VycmVudCBhY3RpdmUgbm90ZVxyXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6IFwidXBkYXRlQ3VycmVudE5vdGVcIixcclxuXHRcdFx0bmFtZTogXCJVcGRhdGUgQ3VycmVudCBOb3RlXCIsXHJcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy51cGRhdGVDdXJyZW50Tm90ZSgpO1xyXG5cdFx0XHR9LFxyXG5cdFx0fSk7XHJcblxyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7IH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oXHJcblx0XHRcdHt9LFxyXG5cdFx0XHRERUZBVUxUX1NFVFRJTkdTLFxyXG5cdFx0XHRhd2FpdCB0aGlzLmxvYWREYXRhKClcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG5cdH1cclxuXHJcblx0cGFyc2VNZXRhZGF0YShzZWxlY3RlZEVudHJ5OiBSZWZlcmVuY2UsIHRlbXBsYXRlT3JpZ2luYWw6IHN0cmluZykge1xyXG5cdFx0Ly8gQ3JlYXRlIE5vdGUgZnJvbSBUZW1wbGF0ZVxyXG5cdFx0Y29uc3QgdGVtcGxhdGUgPSB0ZW1wbGF0ZU9yaWdpbmFsO1xyXG5cclxuXHRcdC8vQ3JlYXRlIE5vdGVcclxuXHRcdGxldCBub3RlID0gdGVtcGxhdGU7XHJcblxyXG5cdFx0Ly9SZXBsYWNlIHRoZSBhdXRob3Ivc1xyXG5cclxuXHRcdG5vdGUgPSBjcmVhdGVDcmVhdG9yTGlzdChcclxuXHRcdFx0c2VsZWN0ZWRFbnRyeS5jcmVhdG9ycyxcclxuXHRcdFx0XCJhdXRob3JcIixcclxuXHRcdFx0bm90ZSxcclxuXHRcdFx0dGhpcy5zZXR0aW5ncy5tdWx0aXBsZUZpZWxkc0RpdmlkZXIsXHJcblx0XHRcdHRoaXMuc2V0dGluZ3MubmFtZUZvcm1hdFxyXG5cdFx0KTtcclxuXHRcdC8vUmVwbGFjZSB0aGUgZWRpdG9yL3NcclxuXHRcdG5vdGUgPSBjcmVhdGVDcmVhdG9yTGlzdChcclxuXHRcdFx0c2VsZWN0ZWRFbnRyeS5jcmVhdG9ycyxcclxuXHRcdFx0XCJlZGl0b3JcIixcclxuXHRcdFx0bm90ZSxcclxuXHRcdFx0dGhpcy5zZXR0aW5ncy5tdWx0aXBsZUZpZWxkc0RpdmlkZXIsXHJcblx0XHRcdHRoaXMuc2V0dGluZ3MubmFtZUZvcm1hdFxyXG5cdFx0KTtcclxuXHJcblx0XHQvL1JlcGxhY2UgdGhlIGNyZWF0b3JzIChhdXRob3JzK2VkaXRvcnMrZXZlcnlib2R5ZWxzZSlcclxuXHRcdG5vdGUgPSBjcmVhdGVDcmVhdG9yQWxsTGlzdChcclxuXHRcdFx0c2VsZWN0ZWRFbnRyeS5jcmVhdG9ycyxcclxuXHRcdFx0bm90ZSxcclxuXHRcdFx0dGhpcy5zZXR0aW5ncy5tdWx0aXBsZUZpZWxkc0RpdmlkZXIsXHJcblx0XHRcdHRoaXMuc2V0dGluZ3MubmFtZUZvcm1hdFxyXG5cdFx0KTtcclxuXHJcblx0XHQvL0NyZWF0ZSBmaWVsZCB5ZWFyXHJcblx0XHRpZiAoc2VsZWN0ZWRFbnRyeS5oYXNPd25Qcm9wZXJ0eShcImRhdGVcIikpIHtcclxuXHRcdFx0c2VsZWN0ZWRFbnRyeS55ZWFyID0gc2VsZWN0ZWRFbnRyeS5kYXRlLm1hdGNoKC9cXGRcXGRcXGRcXGQvZ20pICsgXCJcIjtcclxuXHRcdH1cclxuXHRcdC8vQ3JlYXRlIGZpZWxkIFpvdGVyb0xvY2FsTGlicmFyeVxyXG5cdFx0aWYgKHNlbGVjdGVkRW50cnkuaGFzT3duUHJvcGVydHkoXCJzZWxlY3RcIikpIHtcclxuXHRcdFx0c2VsZWN0ZWRFbnRyeS5sb2NhbExpYnJhcnkgPVxyXG5cdFx0XHRcdFwiW1pvdGVyb10oXCIgKyBzZWxlY3RlZEVudHJ5LnNlbGVjdCArIFwiKVwiO1xyXG5cdFx0XHRzZWxlY3RlZEVudHJ5LmxvY2FsTGlicmFyeUxpbmsgPSBzZWxlY3RlZEVudHJ5LnNlbGVjdDtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0Ly9DcmVhdGUgY2l0ZWtleVxyXG5cdFx0c2VsZWN0ZWRFbnRyeS5jaXRlS2V5ID0gc2VsZWN0ZWRFbnRyeS5jaXRhdGlvbktleVxyXG5cclxuXHRcdC8vRml4IGl0ZW1UeXBlXHJcblx0XHRpZiAoc2VsZWN0ZWRFbnRyeS5pdGVtVHlwZSA9PSBcImpvdXJuYWxBcnRpY2xlXCIpIHsgc2VsZWN0ZWRFbnRyeS5pdGVtVHlwZSA9IFwiSm91cm5hbCBBcnRpY2xlXCIgfVxyXG5cdFx0aWYgKHNlbGVjdGVkRW50cnkuaXRlbVR5cGUgPT0gXCJyZXBvcnRcIikgeyBzZWxlY3RlZEVudHJ5Lml0ZW1UeXBlID0gXCJSZXBvcnRcIiB9XHJcblx0XHRpZiAoc2VsZWN0ZWRFbnRyeS5pdGVtVHlwZSA9PSBcImJvb2tTZWN0aW9uXCIpIHsgc2VsZWN0ZWRFbnRyeS5pdGVtVHlwZSA9IFwiQm9vayBTZWN0aW9uXCIgfVxyXG5cdFx0aWYgKHNlbGVjdGVkRW50cnkuaXRlbVR5cGUgPT0gXCJuZXdzcGFwZXJBcnRpY2xlXCIpIHsgc2VsZWN0ZWRFbnRyeS5pdGVtVHlwZSA9IFwiTmV3c3BhcGVyIEFydGljbGVcIiB9XHJcblx0XHRpZiAoc2VsZWN0ZWRFbnRyeS5pdGVtVHlwZSA9PSBcImJvb2tcIikgeyBzZWxlY3RlZEVudHJ5Lml0ZW1UeXBlID0gXCJCb29rXCIgfVxyXG5cdFx0Ly9DYXBpdGFsaXplIHRoZSBmaXJzdCBsZXR0ZXJcclxuXHRcdHNlbGVjdGVkRW50cnkuaXRlbVR5cGUgPSBzZWxlY3RlZEVudHJ5Lml0ZW1UeXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc2VsZWN0ZWRFbnRyeS5pdGVtVHlwZS5zbGljZSgxKTtcclxuXHJcblxyXG5cdFx0Ly8gQ3JlYXRlIGluLWxpbmUgY2l0YXRpb24gKGUuZy4gQ29sbGllciwgTGFwb3J0ZSBhbmQgU2Vhd3JpZ2h0ICgyMDA5KSlcclxuXHRcdHNlbGVjdGVkRW50cnkuY2l0YXRpb25JbkxpbmUgPSBjcmVhdGVBdXRob3JLZXkoc2VsZWN0ZWRFbnRyeS5jcmVhdG9ycykgK1xyXG5cdFx0XHRcIiBcIiArXHJcblx0XHRcdFwiKFwiICtcclxuXHRcdFx0c2VsZWN0ZWRFbnRyeS55ZWFyICtcclxuXHRcdFx0XCIpXCJcclxuXHRcdHNlbGVjdGVkRW50cnkuY2l0YXRpb25JbkxpbmUgPSBzZWxlY3RlZEVudHJ5LmNpdGF0aW9uSW5MaW5lLnJlcGxhY2UoXCIoKVwiLCBcIlwiKVxyXG5cclxuXHJcblx0XHQvLyBDcmVhdGUgaW4tbGluZSBjaXRhdGlvbiB3aXRoIGluaXRpYWxzIChlLmcuIENvbGxpZXIsIEQuLCBMYXBvcnRlLCBKLiBhbmQgU2Vhd3JpZ2h0LCBKLiAoMjAwOSkpXHJcblx0XHRzZWxlY3RlZEVudHJ5LmNpdGF0aW9uSW5MaW5lSW5pdGlhbHMgPSBjcmVhdGVBdXRob3JLZXlJbml0aWFscyhzZWxlY3RlZEVudHJ5LmNyZWF0b3JzKSArXHJcblx0XHRcdFwiIFwiICtcclxuXHRcdFx0XCIoXCIgK1xyXG5cdFx0XHRzZWxlY3RlZEVudHJ5LnllYXIgK1xyXG5cdFx0XHRcIilcIlxyXG5cdFx0c2VsZWN0ZWRFbnRyeS5jaXRhdGlvbkluTGluZUluaXRpYWxzID0gc2VsZWN0ZWRFbnRyeS5jaXRhdGlvbkluTGluZUluaXRpYWxzLnJlcGxhY2UoXCIoKVwiLCBcIlwiKVxyXG5cclxuXHRcdC8vIENyZWF0ZSBpbi1saW5lIGNpdGF0aW9uIHdpdGggaW5pdGlhbHMgKGUuZy4gQ29sbGllciwgRC4sIExhcG9ydGUsIEouIGFuZCBTZWF3cmlnaHQsIEouICgyMDA5KSlcclxuXHRcdHNlbGVjdGVkRW50cnkuY2l0YXRpb25JbkxpbmVGdWxsTmFtZSA9IGNyZWF0ZUF1dGhvcktleUZ1bGxOYW1lKHNlbGVjdGVkRW50cnkuY3JlYXRvcnMpICtcclxuXHRcdFx0XCIgXCIgK1xyXG5cdFx0XHRcIihcIiArXHJcblx0XHRcdHNlbGVjdGVkRW50cnkueWVhciArXHJcblx0XHRcdFwiKVwiXHJcblx0XHRzZWxlY3RlZEVudHJ5LmNpdGF0aW9uSW5MaW5lRnVsbE5hbWUgPSBzZWxlY3RlZEVudHJ5LmNpdGF0aW9uSW5MaW5lRnVsbE5hbWUucmVwbGFjZShcIigpXCIsIFwiXCIpXHJcblxyXG5cdFx0Ly8gUmVwbGFjZSBzaG9ydCBhbmQgZnVsbCBjaXRhdGlvblxyXG5cdFx0aWYgKHNlbGVjdGVkRW50cnkuaXRlbVR5cGUgPT0gXCJKb3VybmFsIEFydGljbGVcIikge1xyXG5cdFx0XHRzZWxlY3RlZEVudHJ5LmNpdGF0aW9uU2hvcnQgPSBzZWxlY3RlZEVudHJ5LmNpdGF0aW9uSW5MaW5lICtcclxuXHRcdFx0XHRcIiBcIiArXHJcblx0XHRcdFx0XCInXCIgK1xyXG5cdFx0XHRcdHNlbGVjdGVkRW50cnkudGl0bGUgK1xyXG5cdFx0XHRcdFwiJ1wiO1xyXG5cdFx0XHRzZWxlY3RlZEVudHJ5LmNpdGF0aW9uRnVsbCA9IHNlbGVjdGVkRW50cnkuY2l0YXRpb25TaG9ydCArXHJcblx0XHRcdFx0XCIsIFwiICtcclxuXHRcdFx0XHRcIipcIiArXHJcblx0XHRcdFx0c2VsZWN0ZWRFbnRyeS5wdWJsaWNhdGlvblRpdGxlICtcclxuXHRcdFx0XHRcIipcIiArXHJcblx0XHRcdFx0XCIsIFwiICtcclxuXHRcdFx0XHRzZWxlY3RlZEVudHJ5LnZvbHVtZSArXHJcblx0XHRcdFx0XCIoXCIgK1xyXG5cdFx0XHRcdHNlbGVjdGVkRW50cnkuaXNzdWUgK1xyXG5cdFx0XHRcdFwiKSwgXCIgK1xyXG5cdFx0XHRcdFwicHAuIFwiICtcclxuXHRcdFx0XHRzZWxlY3RlZEVudHJ5LnBhZ2VzICtcclxuXHRcdFx0XHRcIi5cIlxyXG5cclxuXHRcdFx0c2VsZWN0ZWRFbnRyeS5jaXRhdGlvbkZ1bGwgPSBzZWxlY3RlZEVudHJ5LmNpdGF0aW9uRnVsbC5yZXBsYWNlKFwiKCkgXCIsIFwiXCIpXHJcblx0XHRcdHNlbGVjdGVkRW50cnkuY2l0YXRpb25TaG9ydCA9IHNlbGVjdGVkRW50cnkuY2l0YXRpb25TaG9ydC5yZXBsYWNlKFwiKiogXCIsIFwiXCIpXHJcblx0XHRcdHNlbGVjdGVkRW50cnkuY2l0YXRpb25GdWxsID0gc2VsZWN0ZWRFbnRyeS5jaXRhdGlvbkZ1bGwucmVwbGFjZShcIioqIFwiLCBcIlwiKVxyXG5cdFx0XHRzZWxlY3RlZEVudHJ5LmNpdGF0aW9uRnVsbCA9IHNlbGVjdGVkRW50cnkuY2l0YXRpb25GdWxsLnJlcGxhY2UoXCJwcC4gXCIsIFwiXCIpXHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdC8vY3JlYXRlIGZpZWxkIGZpbGVcclxuXHRcdHNlbGVjdGVkRW50cnkuZmlsZSA9IGNyZWF0ZUxvY2FsRmlsZUxpbmsoc2VsZWN0ZWRFbnRyeSk7XHJcblx0XHQvL2NyZWF0ZSBmaWVsZCBwYXRoIGZpZWxkXHJcblx0XHRzZWxlY3RlZEVudHJ5LmZpbGVQYXRoID0gY3JlYXRlTG9jYWxGaWxlUGF0aExpbmsoc2VsZWN0ZWRFbnRyeSk7XHJcblx0XHQvL2NyZWF0ZSBab3Rlcm8gcmVhZGVyIHBhdGggZmllbGRcclxuXHRcdGNvbnNvbGUubG9nKHNlbGVjdGVkRW50cnkuZmlsZVBhdGgpXHJcblx0XHRzZWxlY3RlZEVudHJ5LnpvdGVyb1JlYWRlckxpbmsgPSBjcmVhdGVab3Rlcm9SZWFkZXJQYXRoTGluayhzZWxlY3RlZEVudHJ5KTtcclxuXHRcdGNvbnNvbGUubG9nKHNlbGVjdGVkRW50cnkuem90ZXJvUmVhZGVyTGluaylcclxuXHJcblxyXG5cclxuXHRcdC8vIENyZWF0ZSBhbiBhcnJheSB3aXRoIGFsbCB0aGUgZmllbGRzXHJcblx0XHRjb25zdCBlbnRyaWVzQXJyYXkgPSBPYmplY3Qua2V5cyhzZWxlY3RlZEVudHJ5KTtcclxuXHJcblxyXG5cdFx0Ly9yZXBsYWNlIHRoZSBzaW5nbGUtdmFsdWUgcGxhY2Vob2xkZXJzIHdpdGggdGhlIHZhbHVlIG9mIHRoZSBmaWVsZFxyXG5cdFx0bm90ZSA9IHJlcGxhY2VBbGxUZW1wbGF0ZXMoZW50cmllc0FycmF5LCBub3RlLCBzZWxlY3RlZEVudHJ5KTtcclxuXHJcblxyXG5cclxuXHRcdC8vcmVtb3ZlIHNpbmdsZSBiYWNrdGlja3MgYnV0IHJldGFpbiB0cmlwbGUgYmFja3RpY2tzXHJcblx0XHRub3RlID0gbm90ZS5yZXBsYWNlKC9gYGAvZywgXCJIRVJFSVNBUExBQ0VIT0xERVJGT1JCQUNLVElDS1wiKTtcclxuXHRcdG5vdGUgPSBub3RlLnJlcGxhY2UoL2AvZywgXCInXCIpO1xyXG5cdFx0bm90ZSA9IG5vdGUucmVwbGFjZSgvSEVSRUlTQVBMQUNFSE9MREVSRk9SQkFDS1RJQ0svZywgXCJgYGBcIik7XHJcblxyXG5cdFx0Ly8gLy9pZiB0aGUgYWJzdHJhY3QgaXMgbWlzc2luZywgZGVsZXRlIEFic3RyYWN0IGhlYWRpbmdzXHJcblxyXG5cdFx0bm90ZSA9IG5vdGUucmVwbGFjZShcclxuXHRcdFx0XCJgYGBhZC1xdW90ZVxcblwiICsgXCJ0aXRsZTogQWJzdHJhY3RcXG5cIiArIFwiYGBgXFxuXCIsXHJcblx0XHRcdFwiXCJcclxuXHRcdCk7XHJcblx0XHRub3RlID0gbm90ZS5yZXBsYWNlKFxyXG5cdFx0XHRcImBgYGFkLWFic3RyYWN0XFxuXCIgKyBcInRpdGxlOiBGaWxlcyBhbmQgTGlua3NcXG5cIiArIFwiYGBgXFxuXCIsXHJcblx0XHRcdFwiXCJcclxuXHRcdCk7XHJcblx0XHRub3RlID0gbm90ZS5yZXBsYWNlKFxyXG5cdFx0XHRcImBgYGFkLW5vdGVcXG5cIiArIFwidGl0bGU6IFRhZ3MgYW5kIENvbGxlY3Rpb25zXFxuXCIgKyBcImBgYFwiLFxyXG5cdFx0XHRcIlwiXHJcblx0XHQpO1xyXG5cclxuXHRcdC8vIFJldHVybiB0aGUgbWV0YWRhdGFcclxuXHRcdHJldHVybiBub3RlO1xyXG5cdH1cclxuXHJcblx0cGFyc2VDb2xsZWN0aW9uKFxyXG5cdFx0c2VsZWN0ZWRFbnRyeTogUmVmZXJlbmNlLFxyXG5cdFx0ZGF0YTogeyBjb2xsZWN0aW9uczogQ29sbGVjdGlvbltdIH0sXHJcblx0XHRtZXRhZGF0YTogc3RyaW5nXHJcblx0KSB7XHJcblx0XHQvL0NyZWF0ZSBvYmplY3Qgd2l0aCBhbGwgdGhlIGNvbGxlY3Rpb25zXHJcblx0XHRjb25zdCBleHBvcnRlZENvbGxlY3Rpb25zOiBDb2xsZWN0aW9uW10gPSBkYXRhLmNvbGxlY3Rpb25zO1xyXG5cclxuXHRcdC8vaWRlbnRpZnkgdGhlIElEIG9mIHRoZSBpdGVtXHJcblx0XHRjb25zdCBzZWxlY3RlZElEID0gc2VsZWN0ZWRFbnRyeS5pdGVtSUQ7XHJcblxyXG5cdFx0Ly9DcmVhdGUgZW1wdHkgYXJyYXkgdG8gc3RvcmUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNvbGxlY3Rpb25zIG9mIHRoZSBpdGVtXHJcblx0XHRsZXQgY29sbGVjdGlvbkFycmF5OiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuXHRcdC8vQ3JlYXRlIGVtcHR5IGFycmF5IHRvIHN0b3JlIGluZm9ybWF0aW9uIGFib3V0IHRoZSBwYXJlbnQgb2YgdGhlIGNvbGxlY3Rpb25zIG9mIHRoZSBpdGVtXHJcblx0XHRjb25zdCBjb2xsZWN0aW9uUGFyZW50Q29kZTogc3RyaW5nW10gPSBbXTtcclxuXHRcdGxldCBjb2xsZWN0aW9uUGFyZW50QXJyYXk6IHN0cmluZ1tdID0gW107XHJcblx0XHRjb25zdCBjb2xsZWN0aW9uUGFyZW50UGFyZW50OiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuXHRcdC8vaWRlbnRpZnkgdGhlIG51bWJlciBvZiBjb2xsZWN0aW9ucyBpbiB0aGUgZGF0YVxyXG5cdFx0Y29uc3QgY29sbGVjdGlvbktleXM6IHN0cmluZ1tdID0gT2JqZWN0LmtleXMoZXhwb3J0ZWRDb2xsZWN0aW9ucyk7XHJcblxyXG5cdFx0Ly9sb29wIHRocm91Z2ggdGhlIGNvbGxlY3Rpb25zIGFuZCBzZWFyY2ggZm9yIHRoZSBJRCBvZiB0aGUgc2VsZWN0ZWQgcmVmZXJlbmNlXHJcblx0XHRmb3IgKFxyXG5cdFx0XHRsZXQgaW5kZXhDb2xsZWN0aW9uID0gMDtcclxuXHRcdFx0aW5kZXhDb2xsZWN0aW9uIDwgY29sbGVjdGlvbktleXMubGVuZ3RoO1xyXG5cdFx0XHRpbmRleENvbGxlY3Rpb24rK1xyXG5cdFx0KSB7XHJcblx0XHRcdGNvbnN0IGNvbGxlY3Rpb25OYW1lID1cclxuXHRcdFx0XHRleHBvcnRlZENvbGxlY3Rpb25zW2NvbGxlY3Rpb25LZXlzW2luZGV4Q29sbGVjdGlvbl1dLm5hbWU7XHJcblx0XHRcdGNvbnN0IGNvbGxlY3Rpb25JdGVtID1cclxuXHRcdFx0XHRleHBvcnRlZENvbGxlY3Rpb25zW2NvbGxlY3Rpb25LZXlzW2luZGV4Q29sbGVjdGlvbl1dLml0ZW1zO1xyXG5cdFx0XHRjb25zdCBjb2xsZWN0aW9uUGFyZW50ID1cclxuXHRcdFx0XHRleHBvcnRlZENvbGxlY3Rpb25zW2NvbGxlY3Rpb25LZXlzW2luZGV4Q29sbGVjdGlvbl1dLnBhcmVudDtcclxuXHRcdFx0aWYgKGNvbGxlY3Rpb25JdGVtLmluY2x1ZGVzKHNlbGVjdGVkSUQpKSB7XHJcblx0XHRcdFx0Y29sbGVjdGlvbkFycmF5LnB1c2goY29sbGVjdGlvbk5hbWUpO1xyXG5cdFx0XHRcdGNvbGxlY3Rpb25QYXJlbnRDb2RlLnB1c2goY29sbGVjdGlvblBhcmVudCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvL2xvb3AgdGhyb3VnaCB0aGUgY29sbGVjdGlvbnMgYW5kIHNlYXJjaCBmb3IgdGhlIG5hbWUgb2YgdGhlIHBhcmVudCBjb2xsZWN0aW9uXHJcblx0XHRpZiAoY29sbGVjdGlvblBhcmVudENvZGUubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRmb3IgKFxyXG5cdFx0XHRcdGxldCBpbmRleENvbGxlY3Rpb24gPSAwO1xyXG5cdFx0XHRcdGluZGV4Q29sbGVjdGlvbiA8IGNvbGxlY3Rpb25LZXlzLmxlbmd0aDtcclxuXHRcdFx0XHRpbmRleENvbGxlY3Rpb24rK1xyXG5cdFx0XHQpIHtcclxuXHRcdFx0XHRpZiAoXHJcblx0XHRcdFx0XHRjb2xsZWN0aW9uUGFyZW50Q29kZS5pbmNsdWRlcyhcclxuXHRcdFx0XHRcdFx0ZXhwb3J0ZWRDb2xsZWN0aW9uc1tjb2xsZWN0aW9uS2V5c1tpbmRleENvbGxlY3Rpb25dXS5rZXlcclxuXHRcdFx0XHRcdClcclxuXHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdGNvbGxlY3Rpb25QYXJlbnRBcnJheS5wdXNoKFxyXG5cdFx0XHRcdFx0XHRleHBvcnRlZENvbGxlY3Rpb25zW2NvbGxlY3Rpb25LZXlzW2luZGV4Q29sbGVjdGlvbl1dXHJcblx0XHRcdFx0XHRcdFx0Lm5hbWVcclxuXHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly9sb29wIHRocm91Z2ggdGhlIGNvbGxlY3Rpb25zIGFuZCBzZWFyY2ggZm9yIHRoZSBuYW1lIG9mIHRoZSBncmFuZHBhcmVudCBjb2xsZWN0aW9uXHJcblx0XHRpZiAoY29sbGVjdGlvblBhcmVudFBhcmVudC5sZW5ndGggPiAwKSB7XHJcblx0XHRcdGZvciAoXHJcblx0XHRcdFx0bGV0IGluZGV4Q29sbGVjdGlvbiA9IDA7XHJcblx0XHRcdFx0aW5kZXhDb2xsZWN0aW9uIDwgY29sbGVjdGlvbktleXMubGVuZ3RoO1xyXG5cdFx0XHRcdGluZGV4Q29sbGVjdGlvbisrXHJcblx0XHRcdCkge1xyXG5cdFx0XHRcdGlmIChcclxuXHRcdFx0XHRcdGNvbGxlY3Rpb25QYXJlbnRQYXJlbnQuaW5jbHVkZXMoXHJcblx0XHRcdFx0XHRcdGV4cG9ydGVkQ29sbGVjdGlvbnNbY29sbGVjdGlvbktleXNbaW5kZXhDb2xsZWN0aW9uXV0ua2V5XHJcblx0XHRcdFx0XHQpXHJcblx0XHRcdFx0KSB7XHJcblx0XHRcdFx0XHRjb2xsZWN0aW9uUGFyZW50QXJyYXkucHVzaChcclxuXHRcdFx0XHRcdFx0ZXhwb3J0ZWRDb2xsZWN0aW9uc1tjb2xsZWN0aW9uS2V5c1tpbmRleENvbGxlY3Rpb25dXVxyXG5cdFx0XHRcdFx0XHRcdC5uYW1lXHJcblx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vQWRkIENvbGxlY3Rpb24gdG8gQ29sbGVjdGlvbiBQYXJlbnRcclxuXHRcdGNvbGxlY3Rpb25QYXJlbnRBcnJheSA9IGNvbGxlY3Rpb25QYXJlbnRBcnJheS5jb25jYXQoY29sbGVjdGlvbkFycmF5KTtcclxuXHJcblx0XHQvL1NvcnQgdGhlIGNvbGxlY3Rpb25zIGluIGFscGhhYmV0aWNhbCBvcmRlclxyXG5cdFx0Y29sbGVjdGlvbkFycmF5ID0gY29sbGVjdGlvbkFycmF5LnNvcnQoKTtcclxuXHRcdGNvbGxlY3Rpb25QYXJlbnRBcnJheSA9IGNvbGxlY3Rpb25QYXJlbnRBcnJheS5zb3J0KCk7XHJcblxyXG5cdFx0Ly9hZGQgYSBzcGFjZSBhZnRlciB0aGUgZGl2aWRlZCBpZiBpdCBpcyBub3QgcHJlc2VudFxyXG5cdFx0bGV0IGRpdmlkZXIgPSB0aGlzLnNldHRpbmdzLm11bHRpcGxlRmllbGRzRGl2aWRlcjtcclxuXHRcdGlmIChkaXZpZGVyLnNsaWNlKC0xKSAhPT0gXCIgXCIpIHtcclxuXHRcdFx0ZGl2aWRlciA9IGRpdmlkZXIgKyBcIiBcIjtcclxuXHRcdH1cclxuXHJcblx0XHQvL1JlcGxhY2UgdGhlIGtleXdvcmRzIGluIHRoZSBtZXRhZGF0YVxyXG5cdFx0aWYgKGNvbGxlY3Rpb25BcnJheS5sZW5ndGggPiAwKSB7XHJcblx0XHRcdGNvbnN0IGNvbGxlY3Rpb25BcnJheUJyYWtldCA9IGNvbGxlY3Rpb25BcnJheS5tYXAobWFrZVdpa2kpO1xyXG5cdFx0XHRtZXRhZGF0YSA9IHJlcGxhY2VUZW1wbGF0ZShcclxuXHRcdFx0XHRtZXRhZGF0YSxcclxuXHRcdFx0XHRgW1t7e2NvbGxlY3Rpb25zfX1dXWAsXHJcblx0XHRcdFx0U3RyaW5nKGNvbGxlY3Rpb25BcnJheUJyYWtldC5qb2luKGRpdmlkZXIpKVxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdFx0Y29uc3QgY29sbGVjdGlvbkFycmF5UXVvdGVzID0gY29sbGVjdGlvbkFycmF5Lm1hcChtYWtlUXVvdGVzKTtcclxuXHRcdFx0bWV0YWRhdGEgPSByZXBsYWNlVGVtcGxhdGUoXHJcblx0XHRcdFx0bWV0YWRhdGEsXHJcblx0XHRcdFx0YFwie3tjb2xsZWN0aW9uc319XCJgLFxyXG5cdFx0XHRcdFN0cmluZyhjb2xsZWN0aW9uQXJyYXlRdW90ZXMuam9pbihkaXZpZGVyKSlcclxuXHRcdFx0KTtcclxuXHJcblx0XHRcdGNvbnN0IGNvbGxlY3Rpb25BcnJheVRhZ3MgPSBjb2xsZWN0aW9uQXJyYXkubWFwKG1ha2VUYWdzKTtcclxuXHRcdFx0bWV0YWRhdGEgPSByZXBsYWNlVGVtcGxhdGUoXHJcblx0XHRcdFx0bWV0YWRhdGEsXHJcblx0XHRcdFx0YCN7e2NvbGxlY3Rpb25zfX1gLFxyXG5cdFx0XHRcdFN0cmluZyhjb2xsZWN0aW9uQXJyYXlUYWdzLmpvaW4oZGl2aWRlcikpXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0XHRtZXRhZGF0YSA9IHJlcGxhY2VUZW1wbGF0ZShcclxuXHRcdFx0XHRtZXRhZGF0YSxcclxuXHRcdFx0XHRge3tjb2xsZWN0aW9uc319YCxcclxuXHRcdFx0XHRTdHJpbmcoY29sbGVjdGlvbkFycmF5LmpvaW4oZGl2aWRlcikpXHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKGNvbGxlY3Rpb25QYXJlbnRBcnJheS5sZW5ndGggPiAwKSB7XHJcblx0XHRcdGNvbnN0IGNvbGxlY3Rpb25QYXJlbnRBcnJheUJyYWtldCA9XHJcblx0XHRcdFx0Y29sbGVjdGlvblBhcmVudEFycmF5Lm1hcChtYWtlV2lraSk7XHJcblx0XHRcdG1ldGFkYXRhID0gcmVwbGFjZVRlbXBsYXRlKFxyXG5cdFx0XHRcdG1ldGFkYXRhLFxyXG5cdFx0XHRcdGBbW3t7Y29sbGVjdGlvbnNQYXJlbnR9fV1dYCxcclxuXHRcdFx0XHRTdHJpbmcoY29sbGVjdGlvblBhcmVudEFycmF5QnJha2V0LmpvaW4oZGl2aWRlcikpXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0XHRjb25zdCBjb2xsZWN0aW9uUGFyZW50QXJyYXlRdW90ZXMgPVxyXG5cdFx0XHRcdGNvbGxlY3Rpb25QYXJlbnRBcnJheS5tYXAobWFrZVF1b3Rlcyk7XHJcblx0XHRcdG1ldGFkYXRhID0gcmVwbGFjZVRlbXBsYXRlKFxyXG5cdFx0XHRcdG1ldGFkYXRhLFxyXG5cdFx0XHRcdGBcInt7Y29sbGVjdGlvbnNQYXJlbnR9fVwiYCxcclxuXHRcdFx0XHRTdHJpbmcoY29sbGVjdGlvblBhcmVudEFycmF5UXVvdGVzLmpvaW4oZGl2aWRlcikpXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0XHRjb25zdCBjb2xsZWN0aW9uUGFyZW50QXJyYXlUYWdzID1cclxuXHRcdFx0XHRjb2xsZWN0aW9uUGFyZW50QXJyYXkubWFwKG1ha2VUYWdzKTtcclxuXHRcdFx0bWV0YWRhdGEgPSByZXBsYWNlVGVtcGxhdGUoXHJcblx0XHRcdFx0bWV0YWRhdGEsXHJcblx0XHRcdFx0YCN7e2NvbGxlY3Rpb25zUGFyZW50fX1gLFxyXG5cdFx0XHRcdFN0cmluZyhjb2xsZWN0aW9uUGFyZW50QXJyYXlUYWdzLmpvaW4oZGl2aWRlcikpXHJcblx0XHRcdCk7XHJcblx0XHRcdG1ldGFkYXRhID0gcmVwbGFjZVRlbXBsYXRlKFxyXG5cdFx0XHRcdG1ldGFkYXRhLFxyXG5cdFx0XHRcdGB7e2NvbGxlY3Rpb25zUGFyZW50fX1gLFxyXG5cdFx0XHRcdFN0cmluZyhjb2xsZWN0aW9uUGFyZW50QXJyYXkuam9pbihkaXZpZGVyKSlcclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBtZXRhZGF0YTtcclxuXHR9XHJcblxyXG5cdC8vIEZ1bmN0aW9uIHRvIGV4dHJhY3QgdGhlIG5vdGVzIGFkZGVkIG1hbnVhbGx5XHJcblxyXG5cdC8vIEZ1bmN0aW9uIHRvIGltcG9ydCB0aGUgcmlnaHQgdGVtcGxhdGVcclxuXHJcblx0aW1wb3J0VGVtcGxhdGUoKSB7XHJcblx0XHRsZXQgdGVtcGxhdGUgPSB0ZW1wbGF0ZVBsYWluO1xyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MudGVtcGxhdGVUeXBlID09PSBcIlBsYWluXCIpIHtcclxuXHRcdFx0dGVtcGxhdGUgPSB0ZW1wbGF0ZVBsYWluO1xyXG5cdFx0fSBlbHNlIGlmICh0aGlzLnNldHRpbmdzLnRlbXBsYXRlVHlwZSA9PT0gXCJBZG1vbml0aW9uXCIpIHtcclxuXHRcdFx0dGVtcGxhdGUgPSB0ZW1wbGF0ZUFkbW9uaXRpb247XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMuc2V0dGluZ3MudGVtcGxhdGVUeXBlID09PSBcIkN1c3RvbVwiKSB7XHJcblx0XHRcdHRlbXBsYXRlID0gdGhpcy5zZXR0aW5ncy50ZW1wbGF0ZUNvbnRlbnQ7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRlbXBsYXRlO1xyXG5cdH1cclxuXHJcblx0Y29tcGFyZU9sZE5ld05vdGUoXHJcblx0XHRleGlzdGluZ05vdGU6IHN0cmluZyxcclxuXHRcdG5ld05vdGU6IHN0cmluZyxcclxuXHRcdGF1dGhvcktleTogc3RyaW5nXHJcblx0KSB7XHJcblx0XHQvL0ZpbmQgdGhlIHBvc2l0aW9uIG9mIHRoZSBsaW5lIGJyZWFrcyBpbiB0aGUgb2xkIG5vdGVcclxuXHRcdGNvbnN0IG5ld0xpbmVSZWdleCA9IFJlZ0V4cCgvXFxuL2dtKTtcclxuXHRcdGNvbnN0IHBvc2l0aW9uTmV3TGluZTogbnVtYmVyW10gPSBbXTtcclxuXHRcdGxldCBtYXRjaCA9IHVuZGVmaW5lZDtcclxuXHRcdHdoaWxlICgobWF0Y2ggPSBuZXdMaW5lUmVnZXguZXhlYyhleGlzdGluZ05vdGUpKSkge1xyXG5cdFx0XHRwb3NpdGlvbk5ld0xpbmUucHVzaChtYXRjaC5pbmRleCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly9DcmVhdGUgYW4gYXJyYXkgdG8gcmVjb3JkIHdoZXJlIGluIHRoZSBvbGQgbm90ZSB0aGUgbWF0Y2hlcyB3aXRoIHRoZSBuZXcgbm90ZSBhcmUgZm91bmRcclxuXHRcdGNvbnN0IHBvc2l0aW9uT2xkTm90ZTogbnVtYmVyW10gPSBbMF07XHJcblx0XHQvL0NyZWF0ZSBhbiBhcnJheSB0byByZWNvcmQgd2hpY2ggc2VudGVuY2VzIG9mIHRoZSBuZXcgbm90ZSBuZWVkIHRvIGJlIHN0b3JlZCBpbiB0aGUgb2xkIG5vdGUgYW5kIHRoZWlyIHBvc2l0aW9uIGluIHRoZSBvbGQgbm90ZVxyXG5cdFx0Y29uc3QgbmV3Tm90ZUluc2VydFRleHQ6IHN0cmluZ1tdID0gW107XHJcblx0XHRjb25zdCBuZXdOb3RlSW5zZXJ0UG9zaXRpb246IG51bWJlcltdID0gW107XHJcblxyXG5cdFx0Ly9TcGxpdCB0aGUgbmV3IG5vdGUgaW50byBzZW50ZW5jZXNcclxuXHRcdGNvbnN0IG5ld05vdGVBcnJheSA9IG5ld05vdGUuc3BsaXQoXCJcXG5cIik7XHJcblxyXG5cdFx0Ly9SZW1vdmUgbWFya2Rvd24gZm9ybWF0dGluZyBmcm9tIHRoZSBiZWdpbm5pbmcgYW5kIGVuZCBvZiBlYWNoIGxpbmVcclxuXHJcblx0XHQvL2xvb3AgdGhyb3VnaCBlYWNoIG9mIHRoZSBsaW5lcyBleHRyYWN0ZWQgaW4gdGhlIG5vdGVcclxuXHRcdGZvciAoXHJcblx0XHRcdGxldCBpbmRleExpbmVzID0gMDtcclxuXHRcdFx0aW5kZXhMaW5lcyA8IG5ld05vdGVBcnJheS5sZW5ndGg7XHJcblx0XHRcdGluZGV4TGluZXMrK1xyXG5cdFx0KSB7XHJcblx0XHRcdGxldCBzZWdtZW50V2hvbGUgPSBcIlwiO1xyXG5cdFx0XHRsZXQgc2VnbWVudEZpcnN0SGFsZiA9IFwiXCI7XHJcblx0XHRcdGxldCBzZWdtZW50U2Vjb25kSGFsZiA9IFwiXCI7XHJcblx0XHRcdGxldCBzZWdtZW50Rmlyc3RRdWFydGVyID0gXCJcIjtcclxuXHRcdFx0bGV0IHNlZ21lbnRTZWNvbmRRdWFydGVyID0gXCJcIjtcclxuXHRcdFx0bGV0IHNlZ21lbnRUaGlyZFF1YXJ0ZXIgPSBcIlwiO1xyXG5cdFx0XHRsZXQgc2VnbWVudEZvdXJ0aFF1YXJ0ZXIgPSBcIlwiO1xyXG5cdFx0XHQvL0NyZWF0ZSBhbiBhcnJheSB0byByZWNvcmQgd2hlcmUgaW4gdGhlIG9sZCBub3RlIHRoZSBtYXRjaGVzIHdpdGggdGhlIG5ldyBub3RlIGFyZSBmb3VuZFxyXG5cdFx0XHRjb25zdCBwb3NpdGlvbkFycmF5OiBudW1iZXJbXSA9IFstMV07XHJcblxyXG5cdFx0XHQvLyBTZWxlY3QgdGhlIGxpbmUgdG8gYmUgc2VhcmNoZWRcclxuXHJcblx0XHRcdC8vUmVtb3ZlIGZvcm1hdHRpbmcgYWRkZWQgYnkgYmlibm90ZXMgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgbGluZVxyXG5cdFx0XHRsZXQgc2VsZWN0ZWROZXdMaW5lID0gbmV3Tm90ZUFycmF5W2luZGV4TGluZXNdO1xyXG5cdFx0XHRzZWxlY3RlZE5ld0xpbmUgPSBzZWxlY3RlZE5ld0xpbmUudHJpbSgpO1xyXG5cdFx0XHRzZWxlY3RlZE5ld0xpbmUgPSBzZWxlY3RlZE5ld0xpbmUucmVwbGFjZSgvXi0gL2dtLCBcIlwiKTtcclxuXHRcdFx0c2VsZWN0ZWROZXdMaW5lID0gc2VsZWN0ZWROZXdMaW5lLnJlcGxhY2UoL14+IC9nbSwgXCJcIik7XHJcblx0XHRcdHNlbGVjdGVkTmV3TGluZSA9IHNlbGVjdGVkTmV3TGluZS5yZXBsYWNlKC9ePS9nbSwgXCJcIik7XHJcblx0XHRcdHNlbGVjdGVkTmV3TGluZSA9IHNlbGVjdGVkTmV3TGluZS5yZXBsYWNlKC9eXFwqKi9nbSwgXCJcIik7XHJcblx0XHRcdHNlbGVjdGVkTmV3TGluZSA9IHNlbGVjdGVkTmV3TGluZS5yZXBsYWNlKC9eXFwqL2dtLCBcIlwiKTtcclxuXHRcdFx0c2VsZWN0ZWROZXdMaW5lID0gc2VsZWN0ZWROZXdMaW5lLnJlcGxhY2UoL15cIi9nbSwgXCJcIik7XHJcblxyXG5cdFx0XHQvL1JlbW92ZSB0aGUgYXV0aG9ya2V5IGF0IHRoZSBlbmQgb2YgdGhlIGxpbmVcclxuXHRcdFx0Y29uc3QgYXV0aG9yS2V5X1pvdGVybyA9IG5ldyBSZWdFeHAoXHJcblx0XHRcdFx0XCJcXFxcKFwiICsgYXV0aG9yS2V5ICsgXCIsIFxcXFxkKywgcC4gXFxcXGQrXFxcXCkkXCJcclxuXHRcdFx0KTtcclxuXHRcdFx0Y29uc3QgYXV0aG9yS2V5X1pvdGZpbGUgPSBuZXcgUmVnRXhwKFxyXG5cdFx0XHRcdFwiXFxcXChcIiArIGF1dGhvcktleSArIFwiIFxcXFxkKzpcXFxcZCtcXFxcKSRcIlxyXG5cdFx0XHQpO1xyXG5cdFx0XHRzZWxlY3RlZE5ld0xpbmUgPSBzZWxlY3RlZE5ld0xpbmUucmVwbGFjZShhdXRob3JLZXlfWm90ZXJvLCBcIlwiKTtcclxuXHRcdFx0c2VsZWN0ZWROZXdMaW5lID0gc2VsZWN0ZWROZXdMaW5lLnJlcGxhY2UoYXV0aG9yS2V5X1pvdGZpbGUsIFwiXCIpO1xyXG5cclxuXHRcdFx0Ly9SZW1vdmUgZm9ybWF0dGluZyBhZGRlZCBieSBiaWJub3RlcyBhdCB0aGUgZW5kIG9mIHRoZSBsaW5lXHJcblx0XHRcdHNlbGVjdGVkTmV3TGluZSA9IHNlbGVjdGVkTmV3TGluZS5yZXBsYWNlKC89JC9nbSwgXCJcIik7XHJcblx0XHRcdHNlbGVjdGVkTmV3TGluZSA9IHNlbGVjdGVkTmV3TGluZS5yZXBsYWNlKC9cXCoqJC9nbSwgXCJcIik7XHJcblx0XHRcdHNlbGVjdGVkTmV3TGluZSA9IHNlbGVjdGVkTmV3TGluZS5yZXBsYWNlKC9cXCokL2dtLCBcIlwiKTtcclxuXHRcdFx0c2VsZWN0ZWROZXdMaW5lID0gc2VsZWN0ZWROZXdMaW5lLnJlcGxhY2UoL1wiJC9nbSwgXCJcIik7XHJcblxyXG5cdFx0XHQvL0NhbGN1bGF0ZSB0aGUgbGVuZ3RoIG9mIHRoZSBoaWdobGlnaHRlZCB0ZXh0XHJcblx0XHRcdGlmIChzZWxlY3RlZE5ld0xpbmUgPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGNvbnN0IGxlbmd0aEV4aXN0aW5nTGluZSA9IHNlbGVjdGVkTmV3TGluZS5sZW5ndGg7XHJcblx0XHRcdC8vQ2FsY3VsYXRlIHRoZSBsZW5ndGggb2YgdGhlIGNvbW1lbnQgdGV4dFxyXG5cdFx0XHRpZiAobGVuZ3RoRXhpc3RpbmdMaW5lID09PSAwKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vQ0hFQ0sgVEhFIFBSRVNFTkNFIE9GIFRIRSBISUdITElHSFRFRCBURVhUIElOIFRIRSBFWElTVElORyBPTkVcclxuXHJcblx0XHRcdC8vQ2hlY2sgaWYgdGhlIGVudGlyZSBsaW5lIChvciBwYXJ0IG9mIHRoZSBsaW5lIGZvciBsb25nZXIgbGluZXMpIGFyZSBmb3VuZCBpbiB0aGUgZXhpc3Rpbmcgbm90ZVxyXG5cdFx0XHRpZiAobGVuZ3RoRXhpc3RpbmdMaW5lID4gMSAmJiBsZW5ndGhFeGlzdGluZ0xpbmUgPCAzMCkge1xyXG5cdFx0XHRcdHNlZ21lbnRXaG9sZSA9IHNlbGVjdGVkTmV3TGluZTtcclxuXHRcdFx0XHRwb3NpdGlvbkFycmF5LnB1c2goZXhpc3RpbmdOb3RlLmluZGV4T2Yoc2VnbWVudFdob2xlKSk7XHJcblx0XHRcdH0gZWxzZSBpZiAobGVuZ3RoRXhpc3RpbmdMaW5lID49IDMwICYmIGxlbmd0aEV4aXN0aW5nTGluZSA8IDE1MCkge1xyXG5cdFx0XHRcdHNlZ21lbnRGaXJzdEhhbGYgPSBzZWxlY3RlZE5ld0xpbmUuc3Vic3RyaW5nKFxyXG5cdFx0XHRcdFx0MCxcclxuXHRcdFx0XHRcdGxlbmd0aEV4aXN0aW5nTGluZSAvIDJcclxuXHRcdFx0XHQpO1xyXG5cdFx0XHRcdHBvc2l0aW9uQXJyYXkucHVzaChleGlzdGluZ05vdGUuaW5kZXhPZihzZWdtZW50Rmlyc3RIYWxmKSk7XHJcblxyXG5cdFx0XHRcdHNlZ21lbnRTZWNvbmRIYWxmID0gc2VsZWN0ZWROZXdMaW5lLnN1YnN0cmluZyhcclxuXHRcdFx0XHRcdGxlbmd0aEV4aXN0aW5nTGluZSAvIDIgKyAxLFxyXG5cdFx0XHRcdFx0bGVuZ3RoRXhpc3RpbmdMaW5lXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0XHRwb3NpdGlvbkFycmF5LnB1c2goZXhpc3RpbmdOb3RlLmluZGV4T2Yoc2VnbWVudFNlY29uZEhhbGYpKTtcclxuXHRcdFx0fSBlbHNlIGlmIChsZW5ndGhFeGlzdGluZ0xpbmUgPj0gMTUwKSB7XHJcblx0XHRcdFx0c2VnbWVudEZpcnN0UXVhcnRlciA9IHNlbGVjdGVkTmV3TGluZS5zdWJzdHJpbmcoXHJcblx0XHRcdFx0XHQwLFxyXG5cdFx0XHRcdFx0bGVuZ3RoRXhpc3RpbmdMaW5lIC8gNFxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdFx0cG9zaXRpb25BcnJheS5wdXNoKGV4aXN0aW5nTm90ZS5pbmRleE9mKHNlZ21lbnRGaXJzdFF1YXJ0ZXIpKTtcclxuXHJcblx0XHRcdFx0c2VnbWVudFNlY29uZFF1YXJ0ZXIgPSBzZWxlY3RlZE5ld0xpbmUuc3Vic3RyaW5nKFxyXG5cdFx0XHRcdFx0bGVuZ3RoRXhpc3RpbmdMaW5lIC8gNCArIDEsXHJcblx0XHRcdFx0XHRsZW5ndGhFeGlzdGluZ0xpbmUgLyAyXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0XHRwb3NpdGlvbkFycmF5LnB1c2goZXhpc3RpbmdOb3RlLmluZGV4T2Yoc2VnbWVudFNlY29uZFF1YXJ0ZXIpKTtcclxuXHJcblx0XHRcdFx0c2VnbWVudFRoaXJkUXVhcnRlciA9IHNlbGVjdGVkTmV3TGluZS5zdWJzdHJpbmcoXHJcblx0XHRcdFx0XHRsZW5ndGhFeGlzdGluZ0xpbmUgLyAyICsgMSxcclxuXHRcdFx0XHRcdCgzICogbGVuZ3RoRXhpc3RpbmdMaW5lKSAvIDRcclxuXHRcdFx0XHQpO1xyXG5cdFx0XHRcdHBvc2l0aW9uQXJyYXkucHVzaChleGlzdGluZ05vdGUuaW5kZXhPZihzZWdtZW50VGhpcmRRdWFydGVyKSk7XHJcblxyXG5cdFx0XHRcdHNlZ21lbnRGb3VydGhRdWFydGVyID0gc2VsZWN0ZWROZXdMaW5lLnN1YnN0cmluZyhcclxuXHRcdFx0XHRcdCgzICogbGVuZ3RoRXhpc3RpbmdMaW5lKSAvIDQgKyAxLFxyXG5cdFx0XHRcdFx0bGVuZ3RoRXhpc3RpbmdMaW5lXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0XHRwb3NpdGlvbkFycmF5LnB1c2goZXhpc3RpbmdOb3RlLmluZGV4T2Yoc2VnbWVudEZvdXJ0aFF1YXJ0ZXIpKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gaWYgYSBtYXRjaCBpZiBmb3VuZCB3aXRoIHRoZSBvbGQgbm90ZSwgc2V0IGZvdW5kT2xkIHRvIFRSVUVcclxuXHRcdFx0aWYgKE1hdGgubWF4KC4uLnBvc2l0aW9uQXJyYXkpID4gLTEpIHtcclxuXHRcdFx0XHQvL3JlY29yZCB0aGUgcG9zaXRpb24gb2YgdGhlIGZvdW5kIGxpbmUgaW4gdGhlIG9sZCBub3RlXHJcblx0XHRcdFx0Y29uc3QgcG9zaXRpb25PbGROb3RlTWF4ID0gTWF0aC5tYXgoLi4ucG9zaXRpb25BcnJheSk7XHJcblx0XHRcdFx0cG9zaXRpb25PbGROb3RlLnB1c2gocG9zaXRpb25PbGROb3RlTWF4KTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBpZiBhIG1hdGNoIGlmIG5vdCBmb3VuZCB3aXRoIHRoZSBvbGQgbm90ZSwgc2V0IGZvdW5kT2xkIHRvIEZBTFNFIGFuZCBzZXQgcG9zaXRpb25PbGQgdG8gdGhlIHBvc2l0aW9uIGluIHRoZSBvbGQgbm90ZSB3aGVyZSB0aGUgbGluZSBicmVhayBpcyBmb3VuZFxyXG5cdFx0XHRpZiAoTWF0aC5tYXgoLi4ucG9zaXRpb25BcnJheSkgPT09IC0xKSB7XHJcblx0XHRcdFx0Y29uc3QgcG9zaXRpb25PbGROb3RlTWF4ID0gTWF0aC5tYXgoLi4ucG9zaXRpb25PbGROb3RlKTtcclxuXHRcdFx0XHRuZXdOb3RlSW5zZXJ0VGV4dC5wdXNoKG5ld05vdGVBcnJheVtpbmRleExpbmVzXSk7XHJcblx0XHRcdFx0bmV3Tm90ZUluc2VydFBvc2l0aW9uLnB1c2goXHJcblx0XHRcdFx0XHRwb3NpdGlvbk5ld0xpbmUuZmlsdGVyKChwb3MpID0+IHBvcyA+IHBvc2l0aW9uT2xkTm90ZU1heClbMF1cclxuXHRcdFx0XHQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IGRvdWJsZVNwYWNlQWRkID0gXCJcIjtcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmlzRG91YmxlU3BhY2VkKSB7XHJcblx0XHRcdGRvdWJsZVNwYWNlQWRkID0gXCJcXG5cIjtcclxuXHRcdH1cclxuXHJcblx0XHQvL0FkZCB0aGUgbmV3IGFubm90YXRpb25zIGludG8gdGhlIG9sZCBub3RlXHJcblx0XHRmb3IgKFxyXG5cdFx0XHRsZXQgaW5kZXhOb3RlRWxlbWVudHMgPSBuZXdOb3RlSW5zZXJ0VGV4dC5sZW5ndGggLSAxO1xyXG5cdFx0XHRpbmRleE5vdGVFbGVtZW50cyA+PSAwO1xyXG5cdFx0XHRpbmRleE5vdGVFbGVtZW50cy0tXHJcblx0XHQpIHtcclxuXHRcdFx0Y29uc3QgaW5zZXJ0VGV4dCA9IG5ld05vdGVJbnNlcnRUZXh0W2luZGV4Tm90ZUVsZW1lbnRzXTtcclxuXHRcdFx0Y29uc3QgaW5zZXJ0UG9zaXRpb24gPSBuZXdOb3RlSW5zZXJ0UG9zaXRpb25baW5kZXhOb3RlRWxlbWVudHNdO1xyXG5cdFx0XHRleGlzdGluZ05vdGUgPVxyXG5cdFx0XHRcdGV4aXN0aW5nTm90ZS5zbGljZSgwLCBpbnNlcnRQb3NpdGlvbikgK1xyXG5cdFx0XHRcdGRvdWJsZVNwYWNlQWRkICtcclxuXHRcdFx0XHRcIlxcblwiICtcclxuXHRcdFx0XHRpbnNlcnRUZXh0ICtcclxuXHRcdFx0XHRleGlzdGluZ05vdGUuc2xpY2UoaW5zZXJ0UG9zaXRpb24pO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2F2ZU1hbnVhbEVkaXRzID09IFwiU2F2ZSBFbnRpcmUgTm90ZVwiKSB7XHJcblx0XHRcdHJldHVybiBleGlzdGluZ05vdGU7XHJcblx0XHR9XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5zYXZlTWFudWFsRWRpdHMgPT0gXCJTZWxlY3QgU2VjdGlvblwiKSB7XHJcblx0XHRcdC8vaWRlbnRpZnkgdGhlIGtleXdvcmQgbWFya2luZyB0aGUgYmVnaW5uaW5nIGFuZCB0aGUgZW5kIG9mIHRoZSBzZWN0aW9uIG5vdCB0byBiZSBvdmVyd3JpdHRlblxyXG5cdFx0XHRjb25zdCBzdGFydFNhdmUgPSB0aGlzLnNldHRpbmdzLnNhdmVNYW51YWxFZGl0c1N0YXJ0O1xyXG5cdFx0XHRjb25zdCBlbmRTYXZlID0gdGhpcy5zZXR0aW5ncy5zYXZlTWFudWFsRWRpdHNFbmQ7XHJcblxyXG5cdFx0XHQvL2lkZW50aWZ5IHRoZSBrZXl3b3JkIGlkZW50aWZ5aW5nIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHNlY3Rpb24gdG8gYmUgcHJlc2VydmVkIGlzIGVtcHR5LCB0aGUgcG9zaXRpb24gaXMgdGhlIGJlZ2lubmluZyBvZiB0aGUgc3RyaW5nLiBPdGhlcndpc2UgZmluZCB0aGUgbWF0Y2ggaW4gdGhlIHRleHRcclxuXHRcdFx0bGV0IHN0YXJ0U2F2ZU9sZCA9IDA7XHJcblx0XHRcdGlmIChzdGFydFNhdmUgIT09IFwiXCIpIHtcclxuXHRcdFx0XHRzdGFydFNhdmVPbGQgPSBleGlzdGluZ05vdGUuaW5kZXhPZihzdGFydFNhdmUpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChzdGFydFNhdmVPbGQgPCAwKSB7XHJcblx0XHRcdFx0c3RhcnRTYXZlT2xkID0gMDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly9pZGVudGlmeSB0aGUga2V5d29yZCBpZGVudGlmeWluZyB0aGUgZW5kIG9mIHRoZSBzZWN0aW9uIHRvIGJlIHByZXNlcnZlZC4gSWYgaXMgZW1wdHksIHRoZSBwb3NpdGlvbiBpcyB0aGUgZW5kIG9mIHRoZSBzdHJpbmcuIE90aGVyd2lzZSBmaW5kIHRoZSBtYXRjaCBpbiB0aGUgdGV4dFxyXG5cdFx0XHRsZXQgZW5kU2F2ZU9sZDogbnVtYmVyID0gZXhpc3RpbmdOb3RlLmxlbmd0aDtcclxuXHRcdFx0aWYgKGVuZFNhdmUgIT09IFwiXCIpIHtcclxuXHRcdFx0XHRlbmRTYXZlT2xkID0gZXhpc3RpbmdOb3RlLmluZGV4T2YoZW5kU2F2ZSkgKyBlbmRTYXZlLmxlbmd0aDtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoZW5kU2F2ZU9sZCA8IDApIHtcclxuXHRcdFx0XHRlbmRTYXZlT2xkID0gZXhpc3RpbmdOb3RlLmxlbmd0aDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly9GaW5kIHRoZSBzZWN0aW9ucyBvZiB0aGUgZXhpc3Rpbmcgbm90ZSB0byBiZSBwcmVzZXJ2ZWRcclxuXHRcdFx0Y29uc3QgZXhpc3RpbmdOb3RlUHJlc2VydmVkID0gZXhpc3RpbmdOb3RlLnN1YnN0cmluZyhcclxuXHRcdFx0XHRzdGFydFNhdmVPbGQsXHJcblx0XHRcdFx0ZW5kU2F2ZU9sZFxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdFx0Ly9pZGVudGlmeSB0aGUga2V5d29yZCBpZGVudGlmeWluZyB0aGUgYmVnaW5uaW5nIG9mIHRoZSBzZWN0aW9uIHRvIGJlIHByZXNlcnZlZCBpcyBlbXB0eSwgdGhlIHBvc2l0aW9uIGlzIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHN0cmluZy4gT3RoZXJ3aXNlIGZpbmQgdGhlIG1hdGNoIGluIHRoZSB0ZXh0XHJcblx0XHRcdGxldCBzdGFydFNhdmVOZXcgPSAwO1xyXG5cdFx0XHRpZiAoc3RhcnRTYXZlICE9PSBcIlwiKSB7XHJcblx0XHRcdFx0c3RhcnRTYXZlTmV3ID0gbmV3Tm90ZS5pbmRleE9mKHN0YXJ0U2F2ZSk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHN0YXJ0U2F2ZU5ldyA8IDApIHtcclxuXHRcdFx0XHRzdGFydFNhdmVOZXcgPSAwO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvL2lkZW50aWZ5IHRoZSBrZXl3b3JkIGlkZW50aWZ5aW5nIHRoZSBlYmQgb2YgdGhlIHNlY3Rpb24gdG8gYmUgcHJlc2VydmVkIGlzIGVtcHR5LCB0aGUgcG9zaXRpb24gaXMgdGhlIGVuZCBvZiB0aGUgc3RyaW5nLiBPdGhlcndpc2UgZmluZCB0aGUgbWF0Y2ggaW4gdGhlIHRleHRcclxuXHRcdFx0bGV0IGVuZFNhdmVOZXc6IG51bWJlciA9IG5ld05vdGUubGVuZ3RoO1xyXG5cdFx0XHRpZiAoZW5kU2F2ZSAhPT0gXCJcIikge1xyXG5cdFx0XHRcdGVuZFNhdmVOZXcgPSBuZXdOb3RlLmluZGV4T2YoZW5kU2F2ZSkgKyBlbmRTYXZlLmxlbmd0aDtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoZW5kU2F2ZU5ldyA8IDApIHtcclxuXHRcdFx0XHRlbmRTYXZlTmV3ID0gbmV3Tm90ZS5sZW5ndGg7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vRmluZCB0aGUgc2VjdGlvbnMgb2YgdGhlIGV4aXN0aW5nIG5vdGUgYmVmb3JlIHRoZSBvbmUgdG8gYmUgcHJlc2VydmVkXHJcblx0XHRcdGNvbnN0IG5ld05vdGVQcmVzZXJ2ZWRCZWZvcmUgPSBuZXdOb3RlLnN1YnN0cmluZygwLCBzdGFydFNhdmVOZXcpO1xyXG5cdFx0XHQvL0ZpbmQgdGhlIHNlY3Rpb25zIG9mIHRoZSBleGlzdGluZyBub3RlIGFmdGVyIHRoZSBvbmUgdG8gYmUgcHJlc2VydmVkXHJcblx0XHRcdGNvbnN0IG5ld05vdGVQcmVzZXJ2ZWRBZnRlciA9IG5ld05vdGUuc3Vic3RyaW5nKFxyXG5cdFx0XHRcdGVuZFNhdmVOZXcsXHJcblx0XHRcdFx0bmV3Tm90ZS5sZW5ndGhcclxuXHRcdFx0KTtcclxuXHJcblx0XHRcdGNvbnN0IG5ld05vdGVDb21iaW5lZCA9XHJcblx0XHRcdFx0bmV3Tm90ZVByZXNlcnZlZEJlZm9yZSArXHJcblx0XHRcdFx0ZXhpc3RpbmdOb3RlUHJlc2VydmVkICtcclxuXHRcdFx0XHRuZXdOb3RlUHJlc2VydmVkQWZ0ZXI7XHJcblxyXG5cdFx0XHRyZXR1cm4gbmV3Tm90ZUNvbWJpbmVkO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Y3JlYXRlTm90ZShcclxuXHRcdHNlbGVjdGVkRW50cnk6IFJlZmVyZW5jZSxcclxuXHRcdGRhdGE6IHtcclxuXHRcdFx0Y29sbGVjdGlvbnM6IFJlY29yZDxzdHJpbmcsIG5ldmVyPiB8IENvbGxlY3Rpb25bXTtcclxuXHRcdFx0Y29uZmlnPzogUmVjb3JkPHN0cmluZywgbmV2ZXI+O1xyXG5cdFx0XHRpdGVtcz86IFJlZmVyZW5jZVtdO1xyXG5cdFx0XHR2ZXJzaW9uPzogc3RyaW5nO1xyXG5cdFx0fVxyXG5cdCkge1xyXG5cdFx0Ly9FeHRyYWN0IHRoZSByZWZlcmVuY2Ugd2l0aGluIGJyYWNrZXQgdG8gZmFjaWxpYXRlIGNvbXBhcmlzb25cclxuXHRcdGNvbnN0IGF1dGhvcktleSA9IGNyZWF0ZUF1dGhvcktleShzZWxlY3RlZEVudHJ5LmNyZWF0b3JzKTtcclxuXHRcdC8vc2V0IHRoZSBhdXRob3JrZXkgZmllbGQgKHdpdGggb3Igd2l0aG91dCBmaXJzdCBuYW1lKSBvbiB0aGUgZW50cnkgdG8gdXNlIHdoZW4gY3JlYXRpbmcgdGhlIHRpdGxlIGFuZCB0byByZXBsYWNlIGluIHRoZSB0ZW1wbGF0ZVxyXG5cdFx0c2VsZWN0ZWRFbnRyeS5hdXRob3JLZXkgPSBhdXRob3JLZXk7XHJcblx0XHRzZWxlY3RlZEVudHJ5LmF1dGhvcktleUluaXRpYWxzID0gY3JlYXRlQXV0aG9yS2V5SW5pdGlhbHMoc2VsZWN0ZWRFbnRyeS5jcmVhdG9ycylcclxuXHRcdHNlbGVjdGVkRW50cnkuYXV0aG9yS2V5RnVsbE5hbWUgPSBjcmVhdGVBdXRob3JLZXlGdWxsTmFtZShzZWxlY3RlZEVudHJ5LmNyZWF0b3JzKVxyXG5cclxuXHJcblxyXG5cdFx0Ly9jcmVhdGUgYnVnb3V0IHRvIHN0b3JlIGFuZCBleHBvcnQgbG9ncyBpbiBhIGZpbGVcclxuXHRcdGxldCBidWdvdXQgPSBuZXcgRGVidWdvdXQoeyByZWFsVGltZUxvZ2dpbmdPbjogZmFsc2UgfSk7XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUgPT09IHRydWUpIHtcclxuXHRcdFx0YnVnb3V0ID0gbmV3IERlYnVnb3V0KHsgcmVhbFRpbWVMb2dnaW5nT246IHRydWUgfSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly9Mb2FkIFRlbXBsYXRlXHJcblx0XHRjb25zdCB0ZW1wbGF0ZU5vdGUgPSB0aGlzLmltcG9ydFRlbXBsYXRlKCk7XHJcblx0XHRidWdvdXQubG9nKFwiVGVtcGxhdGU6IFxcblwiICsgdGVtcGxhdGVOb3RlKTtcclxuXHJcblx0XHQvL0NyZWF0ZSB0aGUgbWV0YWRhdGFcclxuXHRcdGxldCBsaXRub3RlOiBzdHJpbmcgPSB0aGlzLnBhcnNlTWV0YWRhdGEoc2VsZWN0ZWRFbnRyeSwgdGVtcGxhdGVOb3RlKTtcclxuXHRcdGJ1Z291dC5sb2coc2VsZWN0ZWRFbnRyeSk7XHJcblxyXG5cdFx0Ly9FeHRyYWN0IHRoZSBsaXN0IG9mIGNvbGxlY3Rpb25zXHJcblx0XHRsaXRub3RlID0gdGhpcy5wYXJzZUNvbGxlY3Rpb24oc2VsZWN0ZWRFbnRyeSwgZGF0YSwgbGl0bm90ZSk7XHJcblxyXG5cclxuXHRcdC8vRGVmaW5lIHRoZSBuYW1lIGFuZCBmdWxsIHBhdGggb2YgdGhlIGZpbGUgdG8gYmUgZXhwb3J0ZWRcclxuXHRcdGNvbnN0IG5vdGVUaXRsZUZ1bGwgPSBjcmVhdGVOb3RlVGl0bGUoXHJcblx0XHRcdHNlbGVjdGVkRW50cnksXHJcblx0XHRcdHRoaXMuc2V0dGluZ3MuZXhwb3J0VGl0bGUsXHJcblx0XHRcdHRoaXMuc2V0dGluZ3MuZXhwb3J0UGF0aFxyXG5cdFx0KTtcclxuXHRcdC8vIEpvaW4gdGhlIHRhZ3MgaW4gdGhlIG1ldGFkYXRhIHdpdGggdGhlIHRhZ3MgZXh0cmFjdGVkIGluIHRoZSB0ZXh0IGFuZCByZXBsYWNlIHRoZW0gaW4gdGhlIHRleHRcclxuXHRcdGxpdG5vdGUgPSByZXBsYWNlVGFnTGlzdChcclxuXHRcdFx0c2VsZWN0ZWRFbnRyeSxcclxuXHRcdFx0W10sXHJcblx0XHRcdGxpdG5vdGUsXHJcblx0XHRcdHRoaXMuc2V0dGluZ3MubXVsdGlwbGVGaWVsZHNEaXZpZGVyXHJcblx0XHQpO1xyXG5cclxuXHRcdC8vZGVsZXRlIHRoZSBtaXNzaW5nIGZpZWxkcyBpbiB0aGUgbWV0YWRhdGFcclxuXHRcdGNvbnN0IG1pc3NpbmdGaWVsZFNldHRpbmcgPSB0aGlzLnNldHRpbmdzLm1pc3NpbmdmaWVsZDtcclxuXHRcdGxpdG5vdGUgPSByZXBsYWNlTWlzc2luZ0ZpZWxkcyhcclxuXHRcdFx0bGl0bm90ZSxcclxuXHRcdFx0bWlzc2luZ0ZpZWxkU2V0dGluZyxcclxuXHRcdFx0dGhpcy5zZXR0aW5ncy5taXNzaW5nZmllbGRyZXBsYWNlbWVudFxyXG5cdFx0KTtcclxuXHRcdC8vIENvbXBhcmUgb2xkIG5vdGUgYW5kIG5ldyBub3RlXHJcblx0XHRpZiAoXHJcblx0XHRcdHRoaXMuc2V0dGluZ3Muc2F2ZU1hbnVhbEVkaXRzICE9PSBcIk92ZXJ3cml0ZSBFbnRpcmUgTm90ZVwiICYmXHJcblx0XHRcdGZzLmV4aXN0c1N5bmMobm90ZVRpdGxlRnVsbClcclxuXHRcdCkge1xyXG5cdFx0XHQvL0NoZWNrIGlmIHRoZSBzZXR0aW5ncyBpbiBzZXR0aW5ncy5zYXZlTWFudWFsRWRpdHMgYXJlIFRSVUUuIEluIHRoYXQgY2FzZSBjb21wYXJlIGV4aXN0aW5nIGZpbGUgd2l0aCBuZXcgbm90ZXMuIElmIGZhbHNlIGRvbid0IGxvb2sgYXQgZXhpc3Rpbmcgbm90ZVxyXG5cdFx0XHQvL0NoZWNrIGlmIGFuIG9sZCB2ZXJzaW9uIGV4aXN0cy4gSWYgdGhlIG9sZCB2ZXJzaW9uIGhhcyBhbm5vdGF0aW9ucyB0aGVuIGFkZCB0aGUgbmV3IGFubm90YXRpb24gdG8gdGhlIG9sZCBhbm5vdGFpdG9uXHJcblxyXG5cdFx0XHRjb25zdCBleGlzdGluZ05vdGVBbGwgPSBTdHJpbmcoZnMucmVhZEZpbGVTeW5jKG5vdGVUaXRsZUZ1bGwpKTtcclxuXHJcblxyXG5cdFx0XHRsaXRub3RlID0gdGhpcy5jb21wYXJlT2xkTmV3Tm90ZShcclxuXHRcdFx0XHRleGlzdGluZ05vdGVBbGwsXHJcblx0XHRcdFx0bGl0bm90ZSxcclxuXHRcdFx0XHRhdXRob3JLZXlcclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHJcblx0XHQvL0V4cG9ydCB0aGUgZmlsZVxyXG5cdFx0YnVnb3V0LmxvZyhcIk5vdGVUaXRsZUZ1bGw6IFwiICsgbm90ZVRpdGxlRnVsbCk7XHJcblx0XHRidWdvdXQubG9nKFwiRmluYWwgTm90ZTogXCIgKyBsaXRub3RlKTtcclxuXHRcdGJ1Z291dC5sb2codGhpcy5zZXR0aW5ncyk7XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUgPT09IHRydWUpIHtcclxuXHRcdFx0YnVnb3V0LmRvd25sb2FkTG9nKCk7XHJcblx0XHR9XHJcblx0XHRmcy53cml0ZUZpbGUobm90ZVRpdGxlRnVsbCwgbGl0bm90ZSwgZnVuY3Rpb24gKGVycikge1xyXG5cdFx0XHRpZiAoZXJyKSBjb25zb2xlLmxvZyhlcnIpO1xyXG5cdFx0fSk7XHJcblx0XHRuZXcgTm90aWNlKGBJbXBvcnRlZCAke3NlbGVjdGVkRW50cnkuY2l0YXRpb25LZXl9IWApO1xyXG5cdH1cclxuXHJcblx0dXBkYXRlQ3VycmVudE5vdGUoKXtcclxuXHRcdGNvbnNvbGUubG9nKFwiVXBkYXRpbmcgQ3VycmVudCBOb3RlXCIpO1xyXG5cclxuXHRcdC8vIENoZWNrIGlmIHRoZSBqc29uIGZpbGUgZXhpc3RzXHJcblx0XHRjb25zdCBqc29uUGF0aCA9IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZ2V0QmFzZVBhdGgoKSArIFwiL1wiICsgdGhpcy5zZXR0aW5ncy5iaWJQYXRoXHJcblx0XHRpZiAoIWZzLmV4aXN0c1N5bmMoanNvblBhdGgpKSB7IG5ldyBOb3RpY2UoXCJObyBCZXR0ZXJCaWJUZXggSnNvbiBmaWxlIGZvdW5kIGF0IFwiICsganNvblBhdGgpIH1cclxuXHJcblx0XHRjb25zdCByYXdkYXRhID0gZnMucmVhZEZpbGVTeW5jKFxyXG5cdFx0XHR0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmdldEJhc2VQYXRoKCkgK1xyXG5cdFx0XHRcIi9cIiArXHJcblx0XHRcdHRoaXMuc2V0dGluZ3MuYmliUGF0aFxyXG5cdFx0KTtcclxuXHRcdGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHJhd2RhdGEudG9TdHJpbmcoKSk7IC8vIHJhd2RhdGEgaXMgYSBidWZmZXIsIGNvbnZlcnRlZCB0byBzdHJpblxyXG5cclxuXHRcdC8vIEZpbmQgdGhlIGNpdGVLZXkgb2YgY3VycmVudCBub3RlIGluIGZpbGUgbmFtZVxyXG5cdFx0Y29uc3QgY3VycmVudE5vdGVOYW1lID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKS5uYW1lXHJcblx0XHRjb25zdCBub3RlVGl0bGVGb3JtYXQgPSB0aGlzLnNldHRpbmdzLmV4cG9ydFRpdGxlKycubWQnXHJcblxyXG5cdFx0Y29uc3QgY2l0ZUtleSA9IHBhcnNlQ2l0ZUtleUZyb21Ob3RlTmFtZShjdXJyZW50Tm90ZU5hbWUsIG5vdGVUaXRsZUZvcm1hdCk7XHJcblx0XHJcblx0XHRpZiAoY2l0ZUtleSAhPSBudWxsKXtcclxuXHRcdFx0Ly8gZmluZCBlbnRyeSBpbiBsaWJyYXJ5IHVzaW5nIGNpdGVLZXlcclxuXHRcdFx0Y29uc3QgZW50cnlJbmRleCA9IGRhdGEuaXRlbXMuZmluZEluZGV4KFxyXG5cdFx0XHRcdChpdGVtOiB7IGNpdGF0aW9uS2V5OiBzdHJpbmcgfSkgPT5cclxuXHRcdFx0XHRcdGl0ZW0uY2l0YXRpb25LZXkgPT09XHJcblx0XHRcdFx0XHRjaXRlS2V5XHJcblx0XHRcdCk7XHJcblx0XHRcdGlmIChlbnRyeUluZGV4IT0tMSl7XHJcblx0XHRcdFx0Ly8gdXBkYXRlIGN1cnJlbnQgbm90ZVxyXG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRFbnRyeTpSZWZlcmVuY2UgPSBkYXRhLml0ZW1zW2VudHJ5SW5kZXhdXHJcblx0XHRcdFx0dGhpcy5jcmVhdGVOb3RlKGN1cnJlbnRFbnRyeSwgZGF0YSk7XHJcblx0XHRcdFx0bmV3IE5vdGljZShcIkN1cnJlbnQgTm90ZSBcIiArIGN1cnJlbnROb3RlTmFtZSArIFwiIHVwZGF0ZWRcIik7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZXtcclxuXHRcdFx0XHRuZXcgTm90aWNlKFwiQ3VycmVudCBOb3RlIFwiICsgY3VycmVudE5vdGVOYW1lICsgXCIgbm90IGZvdW5kIGluIHRoZSBsaWJyYXJ5XCIpO1xyXG5cdFx0XHR9XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0bmV3IE5vdGljZShcIkNhbm5vdCBmaW5kIGNpdGVLZXkgZnJvbSBDdXJyZW50IE5vdGU6XCIgKyBjdXJyZW50Tm90ZU5hbWUpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCAidmFyIF9fYXNzaWduPXRoaXMmJnRoaXMuX19hc3NpZ258fGZ1bmN0aW9uKCl7cmV0dXJuKF9fYXNzaWduPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxvPTEsaT1hcmd1bWVudHMubGVuZ3RoO288aTtvKyspZm9yKHZhciByIGluIGU9YXJndW1lbnRzW29dKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdH0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZGVidWdvdXREZWZhdWx0cz17cmVhbFRpbWVMb2dnaW5nT246ITAsdXNlVGltZXN0YW1wczohMSxpbmNsdWRlU2Vzc2lvbk1ldGFkYXRhOiEwLHVzZUxvY2FsU3RvcmFnZTohMSxyZWNvcmRMb2dzOiEwLGF1dG9UcmltOiEwLG1heExpbmVzOjNlMyx0YWlsTnVtTGluZXM6MjUsbWF4RGVwdGg6MjAsbG9nRmlsZW5hbWU6XCJkZWJ1Z291dC50eHRcIixsb2NhbFN0b3JhZ2VLZXk6XCJkZWJ1Z291dC5qc1wiLGluZGVudDpcIiAgXCIscXVvdGVTdHJpbmdzOiEwfSxEZWJ1Z291dD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dmFyIGU9dGhpczt0aGlzLmluZGVudD1cIiAgXCIsdGhpcy50YWlsTnVtTGluZXM9MjUsdGhpcy5vdXRwdXQ9XCJcIix0aGlzLnZlcnNpb249ZnVuY3Rpb24oKXtyZXR1cm5cIjEuMS4wXCJ9LHRoaXMuaW5kZW50c0ZvckRlcHRoPWZ1bmN0aW9uKHQpe3JldHVybiBlLmluZGVudC5yZXBlYXQoTWF0aC5tYXgodCwwKSl9LHRoaXMudHJhY2U9ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS50cmFjZSgpfSx0aGlzLnRpbWU9ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS50aW1lKCl9LHRoaXMudGltZUVuZD1mdW5jdGlvbigpe3JldHVybiBjb25zb2xlLnRpbWVFbmQoKX07dmFyIG89X19hc3NpZ24oX19hc3NpZ24oe30sZGVidWdvdXREZWZhdWx0cyksdCk7Zm9yKHZhciBpIGluIG8pdm9pZCAwIT09b1tpXSYmKHRoaXNbaV09b1tpXSk7aWYodGhpcy51c2VMb2NhbFN0b3JhZ2UmJndpbmRvdyYmd2luZG93LmxvY2FsU3RvcmFnZSl7dmFyIHI9dGhpcy5sb2FkKCk7aWYocil7dGhpcy5vdXRwdXQ9ci5sb2csdGhpcy5zdGFydFRpbWU9bmV3IERhdGUoci5zdGFydFRpbWUpO3ZhciBuPW5ldyBEYXRlKHIubGFzdExvZyk7dGhpcy5sb2dNZXRhZGF0YShcIkxhc3Qgc2Vzc2lvbiBlbmQ6IFwiK3IubGFzdExvZyksdGhpcy5sb2dNZXRhZGF0YShcIkxhc3QgXCIrdGhpcy5mb3JtYXRTZXNzaW9uRHVyYXRpb24odGhpcy5zdGFydFRpbWUsbikpLHRoaXMuc3RhcnRMb2coKX1lbHNlIHRoaXMuc3RhcnRMb2coKX1lbHNlIHRoaXMudXNlTG9jYWxTdG9yYWdlPSExLHRoaXMuc3RhcnRMb2coKX1yZXR1cm4gdC5wcm90b3R5cGUuc3RhcnRMb2c9ZnVuY3Rpb24oKXt0aGlzLnN0YXJ0VGltZT1uZXcgRGF0ZSx0aGlzLmxvZ01ldGFkYXRhKFwiU2Vzc2lvbiBzdGFydGVkOiBcIit0aGlzLmZvcm1hdERhdGUodGhpcy5zdGFydFRpbWUpKX0sdC5wcm90b3R5cGUucmVjb3JkTG9nPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMsZT1bXSxvPTA7bzxhcmd1bWVudHMubGVuZ3RoO28rKyllW29dPWFyZ3VtZW50c1tvXTtpZih0aGlzLnVzZVRpbWVzdGFtcHMmJih0aGlzLm91dHB1dCs9dGhpcy5mb3JtYXREYXRlKCkrXCIgXCIpLHRoaXMub3V0cHV0Kz1lLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdC5zdHJpbmdpZnkoZSl9KS5qb2luKFwiIFwiKSx0aGlzLm91dHB1dCs9XCJcXG5cIix0aGlzLmF1dG9UcmltJiYodGhpcy5vdXRwdXQ9dGhpcy50cmltTG9nKHRoaXMubWF4TGluZXMpKSx0aGlzLnVzZUxvY2FsU3RvcmFnZSl7dmFyIGk9e3N0YXJ0VGltZTp0aGlzLnN0YXJ0VGltZSxsb2c6dGhpcy5vdXRwdXQsbGFzdExvZzpuZXcgRGF0ZX07d2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMubG9jYWxTdG9yYWdlS2V5LEpTT04uc3RyaW5naWZ5KGkpKX19LHQucHJvdG90eXBlLmxvZ01ldGFkYXRhPWZ1bmN0aW9uKHQpe3RoaXMuaW5jbHVkZVNlc3Npb25NZXRhZGF0YSYmKHRoaXMub3V0cHV0Kz1cIi0tLS0gXCIrdCtcIiAtLS0tXFxuXCIpfSx0LnByb3RvdHlwZS5sb2c9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07dGhpcy5yZWFsVGltZUxvZ2dpbmdPbiYmY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSx0KSx0aGlzLnJlY29yZExvZ3MmJnRoaXMucmVjb3JkTG9nLmFwcGx5KHRoaXMsdCl9LHQucHJvdG90eXBlLmluZm89ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07dGhpcy5yZWFsVGltZUxvZ2dpbmdPbiYmY29uc29sZS5pbmZvLmFwcGx5KGNvbnNvbGUsdCksdGhpcy5yZWNvcmRMb2dzJiYodGhpcy5vdXRwdXQrPVwiW0lORk9dIFwiLHRoaXMucmVjb3JkTG9nLmFwcGx5KHRoaXMsdCkpfSx0LnByb3RvdHlwZS53YXJuPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3RoaXMucmVhbFRpbWVMb2dnaW5nT24mJmNvbnNvbGUud2Fybi5hcHBseShjb25zb2xlLHQpLHRoaXMucmVjb3JkTG9ncyYmKHRoaXMub3V0cHV0Kz1cIltXQVJOXSBcIix0aGlzLnJlY29yZExvZy5hcHBseSh0aGlzLHQpKX0sdC5wcm90b3R5cGUuZXJyb3I9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07dGhpcy5yZWFsVGltZUxvZ2dpbmdPbiYmY29uc29sZS5lcnJvci5hcHBseShjb25zb2xlLHQpLHRoaXMucmVjb3JkTG9ncyYmKHRoaXMub3V0cHV0Kz1cIltFUlJPUl0gXCIsdGhpcy5yZWNvcmRMb2cuYXBwbHkodGhpcyx0KSl9LHQucHJvdG90eXBlLmRlYnVnPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3RoaXMucmVhbFRpbWVMb2dnaW5nT24mJmNvbnNvbGUuZGVidWcuYXBwbHkoY29uc29sZSx0KSx0aGlzLnJlY29yZExvZ3MmJih0aGlzLm91dHB1dCs9XCJbREVCVUddIFwiLHRoaXMucmVjb3JkTG9nLmFwcGx5KHRoaXMsdCkpfSx0LnByb3RvdHlwZS5nZXRMb2c9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgRGF0ZTtpZih0aGlzLnJlY29yZExvZ3N8fHRoaXMuaW5mbyhcIkxvZyByZWNvcmRpbmcgaXMgb2ZmXCIpLHRoaXMudXNlTG9jYWxTdG9yYWdlJiZ3aW5kb3cmJndpbmRvdy5sb2NhbFN0b3JhZ2Upe3ZhciBlPXRoaXMubG9hZCgpO2UmJih0aGlzLnN0YXJ0VGltZT1uZXcgRGF0ZShlLnN0YXJ0VGltZSksdGhpcy5vdXRwdXQ9ZS5sb2cpfXJldHVybiB0aGlzLmluY2x1ZGVTZXNzaW9uTWV0YWRhdGE/dGhpcy5vdXRwdXQrXCItLS0tIFwiK3RoaXMuZm9ybWF0U2Vzc2lvbkR1cmF0aW9uKHRoaXMuc3RhcnRUaW1lLHQpK1wiIC0tLS1cXG5cIjp0aGlzLm91dHB1dH0sdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLm91dHB1dD1cIlwiLHRoaXMubG9nTWV0YWRhdGEoXCJTZXNzaW9uIHN0YXJ0ZWQ6IFwiK3RoaXMuZm9ybWF0RGF0ZSh0aGlzLnN0YXJ0VGltZSkpLHRoaXMubG9nTWV0YWRhdGEoXCJMb2cgY2xlYXJlZCBcIit0aGlzLmZvcm1hdERhdGUoKSksdGhpcy51c2VMb2NhbFN0b3JhZ2UmJnRoaXMuc2F2ZSgpfSx0LnByb3RvdHlwZS50YWlsPWZ1bmN0aW9uKHQpe3ZhciBlPXR8fHRoaXMudGFpbE51bUxpbmVzO3JldHVybiB0aGlzLnRyaW1Mb2coZSl9LHQucHJvdG90eXBlLnNlYXJjaD1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IFJlZ0V4cCh0LFwiaWdcIiksbz10aGlzLm91dHB1dC5zcGxpdChcIlxcblwiKSxpPVtdLHI9MDtyPG8ubGVuZ3RoO3IrKyl7dmFyIG49XCJbXCIrcitcIl0gXCI7b1tyXS5tYXRjaChlKSYmaS5wdXNoKG4rb1tyXS50cmltKCkpfXZhciBzPWkuam9pbihcIlxcblwiKTtyZXR1cm4gcy5sZW5ndGh8fChzPSdOb3RoaW5nIGZvdW5kIGZvciBcIicrdCsnXCIuJyksc30sdC5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24oKXtmb3IodmFyIHQsZT1bXSxvPTA7bzxhcmd1bWVudHMubGVuZ3RoO28rKyllW29dPWFyZ3VtZW50c1tvXTtyZXR1cm4odD10aGlzLm91dHB1dC5zcGxpdChcIlxcblwiKSkuc2xpY2UuYXBwbHkodCxlKS5qb2luKFwiXFxuXCIpfSx0LnByb3RvdHlwZS5kb3dubG9hZExvZz1mdW5jdGlvbigpe2lmKHdpbmRvdyl7dmFyIHQ9dGhpcy5nZXRMb2coKSxlPW5ldyBCbG9iKFt0XSx7dHlwZTpcImRhdGE6dGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04XCJ9KSxvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO28uaHJlZj13aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChlKSxvLnRhcmdldD1cIl9ibGFua1wiLG8uZG93bmxvYWQ9dGhpcy5sb2dGaWxlbmFtZSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG8pLG8uY2xpY2soKSxkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG8pLHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKG8uaHJlZil9ZWxzZSBjb25zb2xlLmVycm9yKFwiZG93bmxvYWRMb2cgb25seSB3b3JrcyBpbiB0aGUgYnJvd3NlclwiKX0sdC5wcm90b3R5cGUuc2F2ZT1mdW5jdGlvbigpe3ZhciB0PXtzdGFydFRpbWU6dGhpcy5zdGFydFRpbWUsbG9nOnRoaXMub3V0cHV0LGxhc3RMb2c6bmV3IERhdGV9O3dpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLmxvY2FsU3RvcmFnZUtleSxKU09OLnN0cmluZ2lmeSh0KSl9LHQucHJvdG90eXBlLmxvYWQ9ZnVuY3Rpb24oKXt2YXIgdD13aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5sb2NhbFN0b3JhZ2VLZXkpO3JldHVybiB0P0pTT04ucGFyc2UodCk6bnVsbH0sdC5wcm90b3R5cGUuZGV0ZXJtaW5lVHlwZT1mdW5jdGlvbihlKXtpZihudWxsPT09ZSlyZXR1cm5cIm51bGxcIjtpZih2b2lkIDA9PT1lKXJldHVyblwidW5kZWZpbmVkXCI7dmFyIG89dHlwZW9mIGU7cmV0dXJuXCJvYmplY3RcIj09PW8mJihvPUFycmF5LmlzQXJyYXkoZSk/XCJBcnJheVwiOmUgaW5zdGFuY2VvZiBEYXRlP1wiRGF0ZVwiOmUgaW5zdGFuY2VvZiBSZWdFeHA/XCJSZWdFeHBcIjplIGluc3RhbmNlb2YgdD9cIkRlYnVnb3V0XCI6XCJPYmplY3RcIiksb30sdC5wcm90b3R5cGUuc3RyaW5naWZ5T2JqZWN0PWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9MCk7dmFyIG89XCJ7XCIsaT1lO2lmKHRoaXMub2JqZWN0U2l6ZSh0KT4wKXtvKz1cIlxcblwiLGkrKzt2YXIgcj0wO2Zvcih2YXIgbiBpbiB0KXtvKz10aGlzLmluZGVudHNGb3JEZXB0aChpKSxvKz1uK1wiOiBcIjt2YXIgcz10aGlzLnN0cmluZ2lmeSh0W25dLGkpO3MmJihvKz1zKSxyPHRoaXMub2JqZWN0U2l6ZSh0KS0xJiYobys9XCIsXCIpLG8rPVwiXFxuXCIscisrfWktLSxvKz10aGlzLmluZGVudHNGb3JEZXB0aChpKX1yZXR1cm4gbys9XCJ9XCJ9LHQucHJvdG90eXBlLnN0cmluZ2lmeUFycmF5PWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9MCk7dmFyIG89XCJbXCIsaT1lLHI9ITE7aWYodC5sZW5ndGg+MCl7aSsrO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcz10aGlzLmRldGVybWluZVR5cGUodFtuXSksYT0hMTtcIk9iamVjdFwiPT09cyYmdGhpcy5vYmplY3RTaXplKHRbbl0pPjAmJihhPSEwKSxcIkFycmF5XCI9PT1zJiZ0W25dLmxlbmd0aD4wJiYoYT0hMCksIXImJmEmJihvKz1cIlxcblwiKTt2YXIgdT10aGlzLnN0cmluZ2lmeSh0W25dLGkpO3UmJihhJiYobys9dGhpcy5pbmRlbnRzRm9yRGVwdGgoaSkpLG8rPXUsbjx0Lmxlbmd0aC0xJiYobys9XCIsIFwiKSxhJiYobys9XCJcXG5cIikpLHI9YX1pLS19cmV0dXJuIG8rPVwiXVwifSx0LnByb3RvdHlwZS5zdHJpbmdpZnlGdW5jdGlvbj1mdW5jdGlvbih0LGUpe3ZhciBvPXRoaXM7dm9pZCAwPT09ZSYmKGU9MCk7dmFyIGk9ZTtyZXR1cm4gU3RyaW5nKHQpLnNwbGl0KFwiXFxuXCIpLm1hcChmdW5jdGlvbih0KXt0Lm1hdGNoKC9cXH0vKSYmaS0tO3ZhciBlPW8uaW5kZW50c0ZvckRlcHRoKGkpK3QudHJpbSgpO3JldHVybiB0Lm1hdGNoKC9cXHsvKSYmaSsrLGV9KS5qb2luKFwiXFxuXCIpfSx0LnByb3RvdHlwZS5zdHJpbmdpZnk9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT1lJiYoZT0wKSxlPj10aGlzLm1heERlcHRoKXJldHVyblwiLi4uIChtYXgtZGVwdGggcmVhY2hlZClcIjt2YXIgbz10aGlzLmRldGVybWluZVR5cGUodCk7c3dpdGNoKG8pe2Nhc2VcIk9iamVjdFwiOnJldHVybiB0aGlzLnN0cmluZ2lmeU9iamVjdCh0LGUpO2Nhc2VcIkFycmF5XCI6cmV0dXJuIHRoaXMuc3RyaW5naWZ5QXJyYXkodCxlKTtjYXNlXCJmdW5jdGlvblwiOnJldHVybiB0aGlzLnN0cmluZ2lmeUZ1bmN0aW9uKHQsZSk7Y2FzZVwiUmVnRXhwXCI6cmV0dXJuXCIvXCIrdC5zb3VyY2UrXCIvXCIrdC5mbGFncztjYXNlXCJEYXRlXCI6Y2FzZVwic3RyaW5nXCI6cmV0dXJuIHRoaXMucXVvdGVTdHJpbmdzPydcIicrdCsnXCInOnQrXCJcIjtjYXNlXCJib29sZWFuXCI6cmV0dXJuIHQ/XCJ0cnVlXCI6XCJmYWxzZVwiO2Nhc2VcIm51bWJlclwiOnJldHVybiB0K1wiXCI7Y2FzZVwibnVsbFwiOmNhc2VcInVuZGVmaW5lZFwiOnJldHVybiBvO2Nhc2VcIkRlYnVnb3V0XCI6cmV0dXJuXCIuLi4gKERlYnVnb3V0KVwiO2RlZmF1bHQ6cmV0dXJuXCI/XCJ9fSx0LnByb3RvdHlwZS50cmltTG9nPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMub3V0cHV0LnNwbGl0KFwiXFxuXCIpO3JldHVybiBlLnBvcCgpLGUubGVuZ3RoPnQmJihlPWUuc2xpY2UoZS5sZW5ndGgtdCkpLGUuam9pbihcIlxcblwiKStcIlxcblwifSx0LnByb3RvdHlwZS5mb3JtYXRTZXNzaW9uRHVyYXRpb249ZnVuY3Rpb24odCxlKXt2YXIgbz1lLXQsaT1NYXRoLmZsb29yKG8vMWUzLzYwLzYwKSxyPShcIjBcIitpKS5zbGljZSgtMik7by09MWUzKmkqNjAqNjA7dmFyIG49TWF0aC5mbG9vcihvLzFlMy82MCkscz0oXCIwXCIrbikuc2xpY2UoLTIpO28tPTFlMypuKjYwO3ZhciBhPU1hdGguZmxvb3Ioby8xZTMpO3JldHVybiBvLT0xZTMqYSxcIlNlc3Npb24gZHVyYXRpb246IFwiK3IrXCI6XCIrcytcIjpcIisoXCIwXCIrYSkuc2xpY2UoLTIpfSx0LnByb3RvdHlwZS5mb3JtYXREYXRlPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD1uZXcgRGF0ZSksXCJbXCIrdC50b0lTT1N0cmluZygpK1wiXVwifSx0LnByb3RvdHlwZS5vYmplY3RTaXplPWZ1bmN0aW9uKHQpe3ZhciBlPTA7Zm9yKHZhciBvIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShvKSYmZSsrO3JldHVybiBlfSx0fSgpO2V4cG9ydHtEZWJ1Z291dH07IiwgImZ1bmN0aW9uIGV4dGVuZCAoZGVzdGluYXRpb24pIHtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xuICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkoa2V5KSkgZGVzdGluYXRpb25ba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZGVzdGluYXRpb25cbn1cblxuZnVuY3Rpb24gcmVwZWF0IChjaGFyYWN0ZXIsIGNvdW50KSB7XG4gIHJldHVybiBBcnJheShjb3VudCArIDEpLmpvaW4oY2hhcmFjdGVyKVxufVxuXG5mdW5jdGlvbiB0cmltTGVhZGluZ05ld2xpbmVzIChzdHJpbmcpIHtcbiAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9eXFxuKi8sICcnKVxufVxuXG5mdW5jdGlvbiB0cmltVHJhaWxpbmdOZXdsaW5lcyAoc3RyaW5nKSB7XG4gIC8vIGF2b2lkIG1hdGNoLWF0LWVuZCByZWdleHAgYm90dGxlbmVjaywgc2VlICMzNzBcbiAgdmFyIGluZGV4RW5kID0gc3RyaW5nLmxlbmd0aDtcbiAgd2hpbGUgKGluZGV4RW5kID4gMCAmJiBzdHJpbmdbaW5kZXhFbmQgLSAxXSA9PT0gJ1xcbicpIGluZGV4RW5kLS07XG4gIHJldHVybiBzdHJpbmcuc3Vic3RyaW5nKDAsIGluZGV4RW5kKVxufVxuXG5mdW5jdGlvbiB0cmltTmV3bGluZXMgKHN0cmluZykge1xuICByZXR1cm4gdHJpbVRyYWlsaW5nTmV3bGluZXModHJpbUxlYWRpbmdOZXdsaW5lcyhzdHJpbmcpKVxufVxuXG52YXIgYmxvY2tFbGVtZW50cyA9IFtcbiAgJ0FERFJFU1MnLCAnQVJUSUNMRScsICdBU0lERScsICdBVURJTycsICdCTE9DS1FVT1RFJywgJ0JPRFknLCAnQ0FOVkFTJyxcbiAgJ0NFTlRFUicsICdERCcsICdESVInLCAnRElWJywgJ0RMJywgJ0RUJywgJ0ZJRUxEU0VUJywgJ0ZJR0NBUFRJT04nLCAnRklHVVJFJyxcbiAgJ0ZPT1RFUicsICdGT1JNJywgJ0ZSQU1FU0VUJywgJ0gxJywgJ0gyJywgJ0gzJywgJ0g0JywgJ0g1JywgJ0g2JywgJ0hFQURFUicsXG4gICdIR1JPVVAnLCAnSFInLCAnSFRNTCcsICdJU0lOREVYJywgJ0xJJywgJ01BSU4nLCAnTUVOVScsICdOQVYnLCAnTk9GUkFNRVMnLFxuICAnTk9TQ1JJUFQnLCAnT0wnLCAnT1VUUFVUJywgJ1AnLCAnUFJFJywgJ1NFQ1RJT04nLCAnVEFCTEUnLCAnVEJPRFknLCAnVEQnLFxuICAnVEZPT1QnLCAnVEgnLCAnVEhFQUQnLCAnVFInLCAnVUwnXG5dO1xuXG5mdW5jdGlvbiBpc0Jsb2NrIChub2RlKSB7XG4gIHJldHVybiBpcyhub2RlLCBibG9ja0VsZW1lbnRzKVxufVxuXG52YXIgdm9pZEVsZW1lbnRzID0gW1xuICAnQVJFQScsICdCQVNFJywgJ0JSJywgJ0NPTCcsICdDT01NQU5EJywgJ0VNQkVEJywgJ0hSJywgJ0lNRycsICdJTlBVVCcsXG4gICdLRVlHRU4nLCAnTElOSycsICdNRVRBJywgJ1BBUkFNJywgJ1NPVVJDRScsICdUUkFDSycsICdXQlInXG5dO1xuXG5mdW5jdGlvbiBpc1ZvaWQgKG5vZGUpIHtcbiAgcmV0dXJuIGlzKG5vZGUsIHZvaWRFbGVtZW50cylcbn1cblxuZnVuY3Rpb24gaGFzVm9pZCAobm9kZSkge1xuICByZXR1cm4gaGFzKG5vZGUsIHZvaWRFbGVtZW50cylcbn1cblxudmFyIG1lYW5pbmdmdWxXaGVuQmxhbmtFbGVtZW50cyA9IFtcbiAgJ0EnLCAnVEFCTEUnLCAnVEhFQUQnLCAnVEJPRFknLCAnVEZPT1QnLCAnVEgnLCAnVEQnLCAnSUZSQU1FJywgJ1NDUklQVCcsXG4gICdBVURJTycsICdWSURFTydcbl07XG5cbmZ1bmN0aW9uIGlzTWVhbmluZ2Z1bFdoZW5CbGFuayAobm9kZSkge1xuICByZXR1cm4gaXMobm9kZSwgbWVhbmluZ2Z1bFdoZW5CbGFua0VsZW1lbnRzKVxufVxuXG5mdW5jdGlvbiBoYXNNZWFuaW5nZnVsV2hlbkJsYW5rIChub2RlKSB7XG4gIHJldHVybiBoYXMobm9kZSwgbWVhbmluZ2Z1bFdoZW5CbGFua0VsZW1lbnRzKVxufVxuXG5mdW5jdGlvbiBpcyAobm9kZSwgdGFnTmFtZXMpIHtcbiAgcmV0dXJuIHRhZ05hbWVzLmluZGV4T2Yobm9kZS5ub2RlTmFtZSkgPj0gMFxufVxuXG5mdW5jdGlvbiBoYXMgKG5vZGUsIHRhZ05hbWVzKSB7XG4gIHJldHVybiAoXG4gICAgbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSAmJlxuICAgIHRhZ05hbWVzLnNvbWUoZnVuY3Rpb24gKHRhZ05hbWUpIHtcbiAgICAgIHJldHVybiBub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZ05hbWUpLmxlbmd0aFxuICAgIH0pXG4gIClcbn1cblxudmFyIHJ1bGVzID0ge307XG5cbnJ1bGVzLnBhcmFncmFwaCA9IHtcbiAgZmlsdGVyOiAncCcsXG5cbiAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgcmV0dXJuICdcXG5cXG4nICsgY29udGVudCArICdcXG5cXG4nXG4gIH1cbn07XG5cbnJ1bGVzLmxpbmVCcmVhayA9IHtcbiAgZmlsdGVyOiAnYnInLFxuXG4gIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAoY29udGVudCwgbm9kZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBvcHRpb25zLmJyICsgJ1xcbidcbiAgfVxufTtcblxucnVsZXMuaGVhZGluZyA9IHtcbiAgZmlsdGVyOiBbJ2gxJywgJ2gyJywgJ2gzJywgJ2g0JywgJ2g1JywgJ2g2J10sXG5cbiAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChjb250ZW50LCBub2RlLCBvcHRpb25zKSB7XG4gICAgdmFyIGhMZXZlbCA9IE51bWJlcihub2RlLm5vZGVOYW1lLmNoYXJBdCgxKSk7XG5cbiAgICBpZiAob3B0aW9ucy5oZWFkaW5nU3R5bGUgPT09ICdzZXRleHQnICYmIGhMZXZlbCA8IDMpIHtcbiAgICAgIHZhciB1bmRlcmxpbmUgPSByZXBlYXQoKGhMZXZlbCA9PT0gMSA/ICc9JyA6ICctJyksIGNvbnRlbnQubGVuZ3RoKTtcbiAgICAgIHJldHVybiAoXG4gICAgICAgICdcXG5cXG4nICsgY29udGVudCArICdcXG4nICsgdW5kZXJsaW5lICsgJ1xcblxcbidcbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICdcXG5cXG4nICsgcmVwZWF0KCcjJywgaExldmVsKSArICcgJyArIGNvbnRlbnQgKyAnXFxuXFxuJ1xuICAgIH1cbiAgfVxufTtcblxucnVsZXMuYmxvY2txdW90ZSA9IHtcbiAgZmlsdGVyOiAnYmxvY2txdW90ZScsXG5cbiAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgY29udGVudCA9IHRyaW1OZXdsaW5lcyhjb250ZW50KS5yZXBsYWNlKC9eL2dtLCAnPiAnKTtcbiAgICByZXR1cm4gJ1xcblxcbicgKyBjb250ZW50ICsgJ1xcblxcbidcbiAgfVxufTtcblxucnVsZXMubGlzdCA9IHtcbiAgZmlsdGVyOiBbJ3VsJywgJ29sJ10sXG5cbiAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChjb250ZW50LCBub2RlKSB7XG4gICAgdmFyIHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICBpZiAocGFyZW50Lm5vZGVOYW1lID09PSAnTEknICYmIHBhcmVudC5sYXN0RWxlbWVudENoaWxkID09PSBub2RlKSB7XG4gICAgICByZXR1cm4gJ1xcbicgKyBjb250ZW50XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAnXFxuXFxuJyArIGNvbnRlbnQgKyAnXFxuXFxuJ1xuICAgIH1cbiAgfVxufTtcblxucnVsZXMubGlzdEl0ZW0gPSB7XG4gIGZpbHRlcjogJ2xpJyxcblxuICByZXBsYWNlbWVudDogZnVuY3Rpb24gKGNvbnRlbnQsIG5vZGUsIG9wdGlvbnMpIHtcbiAgICB2YXIgcHJlZml4ID0gb3B0aW9ucy5idWxsZXRMaXN0TWFya2VyICsgJyAgICc7XG4gICAgdmFyIHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICBpZiAocGFyZW50Lm5vZGVOYW1lID09PSAnT0wnKSB7XG4gICAgICB2YXIgc3RhcnQgPSBwYXJlbnQuZ2V0QXR0cmlidXRlKCdzdGFydCcpO1xuICAgICAgdmFyIGluZGV4ID0gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChwYXJlbnQuY2hpbGRyZW4sIG5vZGUpO1xuICAgICAgcHJlZml4ID0gKHN0YXJ0ID8gTnVtYmVyKHN0YXJ0KSArIGluZGV4IDogaW5kZXggKyAxKSArICcuICAnO1xuICAgIH1cbiAgICB2YXIgaXNQYXJhZ3JhcGggPSAvXFxuJC8udGVzdChjb250ZW50KTtcbiAgICBjb250ZW50ID0gdHJpbU5ld2xpbmVzKGNvbnRlbnQpICsgKGlzUGFyYWdyYXBoID8gJ1xcbicgOiAnJyk7XG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvXFxuL2dtLCAnXFxuJyArICcgJy5yZXBlYXQocHJlZml4Lmxlbmd0aCkpOyAvLyBpbmRlbnRcbiAgICByZXR1cm4gKFxuICAgICAgcHJlZml4ICsgY29udGVudCArIChub2RlLm5leHRTaWJsaW5nID8gJ1xcbicgOiAnJylcbiAgICApXG4gIH1cbn07XG5cbnJ1bGVzLmluZGVudGVkQ29kZUJsb2NrID0ge1xuICBmaWx0ZXI6IGZ1bmN0aW9uIChub2RlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIG9wdGlvbnMuY29kZUJsb2NrU3R5bGUgPT09ICdpbmRlbnRlZCcgJiZcbiAgICAgIG5vZGUubm9kZU5hbWUgPT09ICdQUkUnICYmXG4gICAgICBub2RlLmZpcnN0Q2hpbGQgJiZcbiAgICAgIG5vZGUuZmlyc3RDaGlsZC5ub2RlTmFtZSA9PT0gJ0NPREUnXG4gICAgKVxuICB9LFxuXG4gIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAoY29udGVudCwgbm9kZSwgb3B0aW9ucykge1xuICAgIHJldHVybiAoXG4gICAgICAnXFxuXFxuICAgICcgK1xuICAgICAgbm9kZS5maXJzdENoaWxkLnRleHRDb250ZW50LnJlcGxhY2UoL1xcbi9nLCAnXFxuICAgICcpICtcbiAgICAgICdcXG5cXG4nXG4gICAgKVxuICB9XG59O1xuXG5ydWxlcy5mZW5jZWRDb2RlQmxvY2sgPSB7XG4gIGZpbHRlcjogZnVuY3Rpb24gKG5vZGUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gKFxuICAgICAgb3B0aW9ucy5jb2RlQmxvY2tTdHlsZSA9PT0gJ2ZlbmNlZCcgJiZcbiAgICAgIG5vZGUubm9kZU5hbWUgPT09ICdQUkUnICYmXG4gICAgICBub2RlLmZpcnN0Q2hpbGQgJiZcbiAgICAgIG5vZGUuZmlyc3RDaGlsZC5ub2RlTmFtZSA9PT0gJ0NPREUnXG4gICAgKVxuICB9LFxuXG4gIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAoY29udGVudCwgbm9kZSwgb3B0aW9ucykge1xuICAgIHZhciBjbGFzc05hbWUgPSBub2RlLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnO1xuICAgIHZhciBsYW5ndWFnZSA9IChjbGFzc05hbWUubWF0Y2goL2xhbmd1YWdlLShcXFMrKS8pIHx8IFtudWxsLCAnJ10pWzFdO1xuICAgIHZhciBjb2RlID0gbm9kZS5maXJzdENoaWxkLnRleHRDb250ZW50O1xuXG4gICAgdmFyIGZlbmNlQ2hhciA9IG9wdGlvbnMuZmVuY2UuY2hhckF0KDApO1xuICAgIHZhciBmZW5jZVNpemUgPSAzO1xuICAgIHZhciBmZW5jZUluQ29kZVJlZ2V4ID0gbmV3IFJlZ0V4cCgnXicgKyBmZW5jZUNoYXIgKyAnezMsfScsICdnbScpO1xuXG4gICAgdmFyIG1hdGNoO1xuICAgIHdoaWxlICgobWF0Y2ggPSBmZW5jZUluQ29kZVJlZ2V4LmV4ZWMoY29kZSkpKSB7XG4gICAgICBpZiAobWF0Y2hbMF0ubGVuZ3RoID49IGZlbmNlU2l6ZSkge1xuICAgICAgICBmZW5jZVNpemUgPSBtYXRjaFswXS5sZW5ndGggKyAxO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBmZW5jZSA9IHJlcGVhdChmZW5jZUNoYXIsIGZlbmNlU2l6ZSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgJ1xcblxcbicgKyBmZW5jZSArIGxhbmd1YWdlICsgJ1xcbicgK1xuICAgICAgY29kZS5yZXBsYWNlKC9cXG4kLywgJycpICtcbiAgICAgICdcXG4nICsgZmVuY2UgKyAnXFxuXFxuJ1xuICAgIClcbiAgfVxufTtcblxucnVsZXMuaG9yaXpvbnRhbFJ1bGUgPSB7XG4gIGZpbHRlcjogJ2hyJyxcblxuICByZXBsYWNlbWVudDogZnVuY3Rpb24gKGNvbnRlbnQsIG5vZGUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gJ1xcblxcbicgKyBvcHRpb25zLmhyICsgJ1xcblxcbidcbiAgfVxufTtcblxucnVsZXMuaW5saW5lTGluayA9IHtcbiAgZmlsdGVyOiBmdW5jdGlvbiAobm9kZSwgb3B0aW9ucykge1xuICAgIHJldHVybiAoXG4gICAgICBvcHRpb25zLmxpbmtTdHlsZSA9PT0gJ2lubGluZWQnICYmXG4gICAgICBub2RlLm5vZGVOYW1lID09PSAnQScgJiZcbiAgICAgIG5vZGUuZ2V0QXR0cmlidXRlKCdocmVmJylcbiAgICApXG4gIH0sXG5cbiAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChjb250ZW50LCBub2RlKSB7XG4gICAgdmFyIGhyZWYgPSBub2RlLmdldEF0dHJpYnV0ZSgnaHJlZicpO1xuICAgIGlmIChocmVmKSBocmVmID0gaHJlZi5yZXBsYWNlKC8oWygpXSkvZywgJ1xcXFwkMScpO1xuICAgIHZhciB0aXRsZSA9IGNsZWFuQXR0cmlidXRlKG5vZGUuZ2V0QXR0cmlidXRlKCd0aXRsZScpKTtcbiAgICBpZiAodGl0bGUpIHRpdGxlID0gJyBcIicgKyB0aXRsZS5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJykgKyAnXCInO1xuICAgIHJldHVybiAnWycgKyBjb250ZW50ICsgJ10oJyArIGhyZWYgKyB0aXRsZSArICcpJ1xuICB9XG59O1xuXG5ydWxlcy5yZWZlcmVuY2VMaW5rID0ge1xuICBmaWx0ZXI6IGZ1bmN0aW9uIChub2RlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIG9wdGlvbnMubGlua1N0eWxlID09PSAncmVmZXJlbmNlZCcgJiZcbiAgICAgIG5vZGUubm9kZU5hbWUgPT09ICdBJyAmJlxuICAgICAgbm9kZS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKVxuICAgIClcbiAgfSxcblxuICByZXBsYWNlbWVudDogZnVuY3Rpb24gKGNvbnRlbnQsIG5vZGUsIG9wdGlvbnMpIHtcbiAgICB2YXIgaHJlZiA9IG5vZGUuZ2V0QXR0cmlidXRlKCdocmVmJyk7XG4gICAgdmFyIHRpdGxlID0gY2xlYW5BdHRyaWJ1dGUobm9kZS5nZXRBdHRyaWJ1dGUoJ3RpdGxlJykpO1xuICAgIGlmICh0aXRsZSkgdGl0bGUgPSAnIFwiJyArIHRpdGxlICsgJ1wiJztcbiAgICB2YXIgcmVwbGFjZW1lbnQ7XG4gICAgdmFyIHJlZmVyZW5jZTtcblxuICAgIHN3aXRjaCAob3B0aW9ucy5saW5rUmVmZXJlbmNlU3R5bGUpIHtcbiAgICAgIGNhc2UgJ2NvbGxhcHNlZCc6XG4gICAgICAgIHJlcGxhY2VtZW50ID0gJ1snICsgY29udGVudCArICddW10nO1xuICAgICAgICByZWZlcmVuY2UgPSAnWycgKyBjb250ZW50ICsgJ106ICcgKyBocmVmICsgdGl0bGU7XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdzaG9ydGN1dCc6XG4gICAgICAgIHJlcGxhY2VtZW50ID0gJ1snICsgY29udGVudCArICddJztcbiAgICAgICAgcmVmZXJlbmNlID0gJ1snICsgY29udGVudCArICddOiAnICsgaHJlZiArIHRpdGxlO1xuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdmFyIGlkID0gdGhpcy5yZWZlcmVuY2VzLmxlbmd0aCArIDE7XG4gICAgICAgIHJlcGxhY2VtZW50ID0gJ1snICsgY29udGVudCArICddWycgKyBpZCArICddJztcbiAgICAgICAgcmVmZXJlbmNlID0gJ1snICsgaWQgKyAnXTogJyArIGhyZWYgKyB0aXRsZTtcbiAgICB9XG5cbiAgICB0aGlzLnJlZmVyZW5jZXMucHVzaChyZWZlcmVuY2UpO1xuICAgIHJldHVybiByZXBsYWNlbWVudFxuICB9LFxuXG4gIHJlZmVyZW5jZXM6IFtdLFxuXG4gIGFwcGVuZDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICB2YXIgcmVmZXJlbmNlcyA9ICcnO1xuICAgIGlmICh0aGlzLnJlZmVyZW5jZXMubGVuZ3RoKSB7XG4gICAgICByZWZlcmVuY2VzID0gJ1xcblxcbicgKyB0aGlzLnJlZmVyZW5jZXMuam9pbignXFxuJykgKyAnXFxuXFxuJztcbiAgICAgIHRoaXMucmVmZXJlbmNlcyA9IFtdOyAvLyBSZXNldCByZWZlcmVuY2VzXG4gICAgfVxuICAgIHJldHVybiByZWZlcmVuY2VzXG4gIH1cbn07XG5cbnJ1bGVzLmVtcGhhc2lzID0ge1xuICBmaWx0ZXI6IFsnZW0nLCAnaSddLFxuXG4gIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAoY29udGVudCwgbm9kZSwgb3B0aW9ucykge1xuICAgIGlmICghY29udGVudC50cmltKCkpIHJldHVybiAnJ1xuICAgIHJldHVybiBvcHRpb25zLmVtRGVsaW1pdGVyICsgY29udGVudCArIG9wdGlvbnMuZW1EZWxpbWl0ZXJcbiAgfVxufTtcblxucnVsZXMuc3Ryb25nID0ge1xuICBmaWx0ZXI6IFsnc3Ryb25nJywgJ2InXSxcblxuICByZXBsYWNlbWVudDogZnVuY3Rpb24gKGNvbnRlbnQsIG5vZGUsIG9wdGlvbnMpIHtcbiAgICBpZiAoIWNvbnRlbnQudHJpbSgpKSByZXR1cm4gJydcbiAgICByZXR1cm4gb3B0aW9ucy5zdHJvbmdEZWxpbWl0ZXIgKyBjb250ZW50ICsgb3B0aW9ucy5zdHJvbmdEZWxpbWl0ZXJcbiAgfVxufTtcblxucnVsZXMuY29kZSA9IHtcbiAgZmlsdGVyOiBmdW5jdGlvbiAobm9kZSkge1xuICAgIHZhciBoYXNTaWJsaW5ncyA9IG5vZGUucHJldmlvdXNTaWJsaW5nIHx8IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgdmFyIGlzQ29kZUJsb2NrID0gbm9kZS5wYXJlbnROb2RlLm5vZGVOYW1lID09PSAnUFJFJyAmJiAhaGFzU2libGluZ3M7XG5cbiAgICByZXR1cm4gbm9kZS5ub2RlTmFtZSA9PT0gJ0NPREUnICYmICFpc0NvZGVCbG9ja1xuICB9LFxuXG4gIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAoY29udGVudCkge1xuICAgIGlmICghY29udGVudCkgcmV0dXJuICcnXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvXFxyP1xcbnxcXHIvZywgJyAnKTtcblxuICAgIHZhciBleHRyYVNwYWNlID0gL15gfF4gLio/W14gXS4qICR8YCQvLnRlc3QoY29udGVudCkgPyAnICcgOiAnJztcbiAgICB2YXIgZGVsaW1pdGVyID0gJ2AnO1xuICAgIHZhciBtYXRjaGVzID0gY29udGVudC5tYXRjaCgvYCsvZ20pIHx8IFtdO1xuICAgIHdoaWxlIChtYXRjaGVzLmluZGV4T2YoZGVsaW1pdGVyKSAhPT0gLTEpIGRlbGltaXRlciA9IGRlbGltaXRlciArICdgJztcblxuICAgIHJldHVybiBkZWxpbWl0ZXIgKyBleHRyYVNwYWNlICsgY29udGVudCArIGV4dHJhU3BhY2UgKyBkZWxpbWl0ZXJcbiAgfVxufTtcblxucnVsZXMuaW1hZ2UgPSB7XG4gIGZpbHRlcjogJ2ltZycsXG5cbiAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChjb250ZW50LCBub2RlKSB7XG4gICAgdmFyIGFsdCA9IGNsZWFuQXR0cmlidXRlKG5vZGUuZ2V0QXR0cmlidXRlKCdhbHQnKSk7XG4gICAgdmFyIHNyYyA9IG5vZGUuZ2V0QXR0cmlidXRlKCdzcmMnKSB8fCAnJztcbiAgICB2YXIgdGl0bGUgPSBjbGVhbkF0dHJpYnV0ZShub2RlLmdldEF0dHJpYnV0ZSgndGl0bGUnKSk7XG4gICAgdmFyIHRpdGxlUGFydCA9IHRpdGxlID8gJyBcIicgKyB0aXRsZSArICdcIicgOiAnJztcbiAgICByZXR1cm4gc3JjID8gJyFbJyArIGFsdCArICddJyArICcoJyArIHNyYyArIHRpdGxlUGFydCArICcpJyA6ICcnXG4gIH1cbn07XG5cbmZ1bmN0aW9uIGNsZWFuQXR0cmlidXRlIChhdHRyaWJ1dGUpIHtcbiAgcmV0dXJuIGF0dHJpYnV0ZSA/IGF0dHJpYnV0ZS5yZXBsYWNlKC8oXFxuK1xccyopKy9nLCAnXFxuJykgOiAnJ1xufVxuXG4vKipcbiAqIE1hbmFnZXMgYSBjb2xsZWN0aW9uIG9mIHJ1bGVzIHVzZWQgdG8gY29udmVydCBIVE1MIHRvIE1hcmtkb3duXG4gKi9cblxuZnVuY3Rpb24gUnVsZXMgKG9wdGlvbnMpIHtcbiAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgdGhpcy5fa2VlcCA9IFtdO1xuICB0aGlzLl9yZW1vdmUgPSBbXTtcblxuICB0aGlzLmJsYW5rUnVsZSA9IHtcbiAgICByZXBsYWNlbWVudDogb3B0aW9ucy5ibGFua1JlcGxhY2VtZW50XG4gIH07XG5cbiAgdGhpcy5rZWVwUmVwbGFjZW1lbnQgPSBvcHRpb25zLmtlZXBSZXBsYWNlbWVudDtcblxuICB0aGlzLmRlZmF1bHRSdWxlID0ge1xuICAgIHJlcGxhY2VtZW50OiBvcHRpb25zLmRlZmF1bHRSZXBsYWNlbWVudFxuICB9O1xuXG4gIHRoaXMuYXJyYXkgPSBbXTtcbiAgZm9yICh2YXIga2V5IGluIG9wdGlvbnMucnVsZXMpIHRoaXMuYXJyYXkucHVzaChvcHRpb25zLnJ1bGVzW2tleV0pO1xufVxuXG5SdWxlcy5wcm90b3R5cGUgPSB7XG4gIGFkZDogZnVuY3Rpb24gKGtleSwgcnVsZSkge1xuICAgIHRoaXMuYXJyYXkudW5zaGlmdChydWxlKTtcbiAgfSxcblxuICBrZWVwOiBmdW5jdGlvbiAoZmlsdGVyKSB7XG4gICAgdGhpcy5fa2VlcC51bnNoaWZ0KHtcbiAgICAgIGZpbHRlcjogZmlsdGVyLFxuICAgICAgcmVwbGFjZW1lbnQ6IHRoaXMua2VlcFJlcGxhY2VtZW50XG4gICAgfSk7XG4gIH0sXG5cbiAgcmVtb3ZlOiBmdW5jdGlvbiAoZmlsdGVyKSB7XG4gICAgdGhpcy5fcmVtb3ZlLnVuc2hpZnQoe1xuICAgICAgZmlsdGVyOiBmaWx0ZXIsXG4gICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJydcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBmb3JOb2RlOiBmdW5jdGlvbiAobm9kZSkge1xuICAgIGlmIChub2RlLmlzQmxhbmspIHJldHVybiB0aGlzLmJsYW5rUnVsZVxuICAgIHZhciBydWxlO1xuXG4gICAgaWYgKChydWxlID0gZmluZFJ1bGUodGhpcy5hcnJheSwgbm9kZSwgdGhpcy5vcHRpb25zKSkpIHJldHVybiBydWxlXG4gICAgaWYgKChydWxlID0gZmluZFJ1bGUodGhpcy5fa2VlcCwgbm9kZSwgdGhpcy5vcHRpb25zKSkpIHJldHVybiBydWxlXG4gICAgaWYgKChydWxlID0gZmluZFJ1bGUodGhpcy5fcmVtb3ZlLCBub2RlLCB0aGlzLm9wdGlvbnMpKSkgcmV0dXJuIHJ1bGVcblxuICAgIHJldHVybiB0aGlzLmRlZmF1bHRSdWxlXG4gIH0sXG5cbiAgZm9yRWFjaDogZnVuY3Rpb24gKGZuKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmFycmF5Lmxlbmd0aDsgaSsrKSBmbih0aGlzLmFycmF5W2ldLCBpKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gZmluZFJ1bGUgKHJ1bGVzLCBub2RlLCBvcHRpb25zKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcnVsZSA9IHJ1bGVzW2ldO1xuICAgIGlmIChmaWx0ZXJWYWx1ZShydWxlLCBub2RlLCBvcHRpb25zKSkgcmV0dXJuIHJ1bGVcbiAgfVxuICByZXR1cm4gdm9pZCAwXG59XG5cbmZ1bmN0aW9uIGZpbHRlclZhbHVlIChydWxlLCBub2RlLCBvcHRpb25zKSB7XG4gIHZhciBmaWx0ZXIgPSBydWxlLmZpbHRlcjtcbiAgaWYgKHR5cGVvZiBmaWx0ZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgaWYgKGZpbHRlciA9PT0gbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSByZXR1cm4gdHJ1ZVxuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZmlsdGVyKSkge1xuICAgIGlmIChmaWx0ZXIuaW5kZXhPZihub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpID4gLTEpIHJldHVybiB0cnVlXG4gIH0gZWxzZSBpZiAodHlwZW9mIGZpbHRlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGlmIChmaWx0ZXIuY2FsbChydWxlLCBub2RlLCBvcHRpb25zKSkgcmV0dXJuIHRydWVcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdgZmlsdGVyYCBuZWVkcyB0byBiZSBhIHN0cmluZywgYXJyYXksIG9yIGZ1bmN0aW9uJylcbiAgfVxufVxuXG4vKipcbiAqIFRoZSBjb2xsYXBzZVdoaXRlc3BhY2UgZnVuY3Rpb24gaXMgYWRhcHRlZCBmcm9tIGNvbGxhcHNlLXdoaXRlc3BhY2VcbiAqIGJ5IEx1YyBUaGV2ZW5hcmQuXG4gKlxuICogVGhlIE1JVCBMaWNlbnNlIChNSVQpXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE0IEx1YyBUaGV2ZW5hcmQgPGx1Y3RoZXZlbmFyZEBnbWFpbC5jb20+XG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuICogb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuICogaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuICogdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuICogY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4gKiBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4gKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuICogQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbiAqIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbiAqIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG4vKipcbiAqIGNvbGxhcHNlV2hpdGVzcGFjZShvcHRpb25zKSByZW1vdmVzIGV4dHJhbmVvdXMgd2hpdGVzcGFjZSBmcm9tIGFuIHRoZSBnaXZlbiBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cbmZ1bmN0aW9uIGNvbGxhcHNlV2hpdGVzcGFjZSAob3B0aW9ucykge1xuICB2YXIgZWxlbWVudCA9IG9wdGlvbnMuZWxlbWVudDtcbiAgdmFyIGlzQmxvY2sgPSBvcHRpb25zLmlzQmxvY2s7XG4gIHZhciBpc1ZvaWQgPSBvcHRpb25zLmlzVm9pZDtcbiAgdmFyIGlzUHJlID0gb3B0aW9ucy5pc1ByZSB8fCBmdW5jdGlvbiAobm9kZSkge1xuICAgIHJldHVybiBub2RlLm5vZGVOYW1lID09PSAnUFJFJ1xuICB9O1xuXG4gIGlmICghZWxlbWVudC5maXJzdENoaWxkIHx8IGlzUHJlKGVsZW1lbnQpKSByZXR1cm5cblxuICB2YXIgcHJldlRleHQgPSBudWxsO1xuICB2YXIga2VlcExlYWRpbmdXcyA9IGZhbHNlO1xuXG4gIHZhciBwcmV2ID0gbnVsbDtcbiAgdmFyIG5vZGUgPSBuZXh0KHByZXYsIGVsZW1lbnQsIGlzUHJlKTtcblxuICB3aGlsZSAobm9kZSAhPT0gZWxlbWVudCkge1xuICAgIGlmIChub2RlLm5vZGVUeXBlID09PSAzIHx8IG5vZGUubm9kZVR5cGUgPT09IDQpIHsgLy8gTm9kZS5URVhUX05PREUgb3IgTm9kZS5DREFUQV9TRUNUSU9OX05PREVcbiAgICAgIHZhciB0ZXh0ID0gbm9kZS5kYXRhLnJlcGxhY2UoL1sgXFxyXFxuXFx0XSsvZywgJyAnKTtcblxuICAgICAgaWYgKCghcHJldlRleHQgfHwgLyAkLy50ZXN0KHByZXZUZXh0LmRhdGEpKSAmJlxuICAgICAgICAgICFrZWVwTGVhZGluZ1dzICYmIHRleHRbMF0gPT09ICcgJykge1xuICAgICAgICB0ZXh0ID0gdGV4dC5zdWJzdHIoMSk7XG4gICAgICB9XG5cbiAgICAgIC8vIGB0ZXh0YCBtaWdodCBiZSBlbXB0eSBhdCB0aGlzIHBvaW50LlxuICAgICAgaWYgKCF0ZXh0KSB7XG4gICAgICAgIG5vZGUgPSByZW1vdmUobm9kZSk7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIG5vZGUuZGF0YSA9IHRleHQ7XG5cbiAgICAgIHByZXZUZXh0ID0gbm9kZTtcbiAgICB9IGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT09IDEpIHsgLy8gTm9kZS5FTEVNRU5UX05PREVcbiAgICAgIGlmIChpc0Jsb2NrKG5vZGUpIHx8IG5vZGUubm9kZU5hbWUgPT09ICdCUicpIHtcbiAgICAgICAgaWYgKHByZXZUZXh0KSB7XG4gICAgICAgICAgcHJldlRleHQuZGF0YSA9IHByZXZUZXh0LmRhdGEucmVwbGFjZSgvICQvLCAnJyk7XG4gICAgICAgIH1cblxuICAgICAgICBwcmV2VGV4dCA9IG51bGw7XG4gICAgICAgIGtlZXBMZWFkaW5nV3MgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoaXNWb2lkKG5vZGUpIHx8IGlzUHJlKG5vZGUpKSB7XG4gICAgICAgIC8vIEF2b2lkIHRyaW1taW5nIHNwYWNlIGFyb3VuZCBub24tYmxvY2ssIG5vbi1CUiB2b2lkIGVsZW1lbnRzIGFuZCBpbmxpbmUgUFJFLlxuICAgICAgICBwcmV2VGV4dCA9IG51bGw7XG4gICAgICAgIGtlZXBMZWFkaW5nV3MgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChwcmV2VGV4dCkge1xuICAgICAgICAvLyBEcm9wIHByb3RlY3Rpb24gaWYgc2V0IHByZXZpb3VzbHkuXG4gICAgICAgIGtlZXBMZWFkaW5nV3MgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbm9kZSA9IHJlbW92ZShub2RlKTtcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgdmFyIG5leHROb2RlID0gbmV4dChwcmV2LCBub2RlLCBpc1ByZSk7XG4gICAgcHJldiA9IG5vZGU7XG4gICAgbm9kZSA9IG5leHROb2RlO1xuICB9XG5cbiAgaWYgKHByZXZUZXh0KSB7XG4gICAgcHJldlRleHQuZGF0YSA9IHByZXZUZXh0LmRhdGEucmVwbGFjZSgvICQvLCAnJyk7XG4gICAgaWYgKCFwcmV2VGV4dC5kYXRhKSB7XG4gICAgICByZW1vdmUocHJldlRleHQpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIHJlbW92ZShub2RlKSByZW1vdmVzIHRoZSBnaXZlbiBub2RlIGZyb20gdGhlIERPTSBhbmQgcmV0dXJucyB0aGVcbiAqIG5leHQgbm9kZSBpbiB0aGUgc2VxdWVuY2UuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtOb2RlfSBub2RlXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZSAobm9kZSkge1xuICB2YXIgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmcgfHwgbm9kZS5wYXJlbnROb2RlO1xuXG4gIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcblxuICByZXR1cm4gbmV4dFxufVxuXG4vKipcbiAqIG5leHQocHJldiwgY3VycmVudCwgaXNQcmUpIHJldHVybnMgdGhlIG5leHQgbm9kZSBpbiB0aGUgc2VxdWVuY2UsIGdpdmVuIHRoZVxuICogY3VycmVudCBhbmQgcHJldmlvdXMgbm9kZXMuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBwcmV2XG4gKiBAcGFyYW0ge05vZGV9IGN1cnJlbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGlzUHJlXG4gKiBAcmV0dXJuIHtOb2RlfVxuICovXG5mdW5jdGlvbiBuZXh0IChwcmV2LCBjdXJyZW50LCBpc1ByZSkge1xuICBpZiAoKHByZXYgJiYgcHJldi5wYXJlbnROb2RlID09PSBjdXJyZW50KSB8fCBpc1ByZShjdXJyZW50KSkge1xuICAgIHJldHVybiBjdXJyZW50Lm5leHRTaWJsaW5nIHx8IGN1cnJlbnQucGFyZW50Tm9kZVxuICB9XG5cbiAgcmV0dXJuIGN1cnJlbnQuZmlyc3RDaGlsZCB8fCBjdXJyZW50Lm5leHRTaWJsaW5nIHx8IGN1cnJlbnQucGFyZW50Tm9kZVxufVxuXG4vKlxuICogU2V0IHVwIHdpbmRvdyBmb3IgTm9kZS5qc1xuICovXG5cbnZhciByb290ID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDoge30pO1xuXG4vKlxuICogUGFyc2luZyBIVE1MIHN0cmluZ3NcbiAqL1xuXG5mdW5jdGlvbiBjYW5QYXJzZUhUTUxOYXRpdmVseSAoKSB7XG4gIHZhciBQYXJzZXIgPSByb290LkRPTVBhcnNlcjtcbiAgdmFyIGNhblBhcnNlID0gZmFsc2U7XG5cbiAgLy8gQWRhcHRlZCBmcm9tIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tLzExMjkwMzFcbiAgLy8gRmlyZWZveC9PcGVyYS9JRSB0aHJvdyBlcnJvcnMgb24gdW5zdXBwb3J0ZWQgdHlwZXNcbiAgdHJ5IHtcbiAgICAvLyBXZWJLaXQgcmV0dXJucyBudWxsIG9uIHVuc3VwcG9ydGVkIHR5cGVzXG4gICAgaWYgKG5ldyBQYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoJycsICd0ZXh0L2h0bWwnKSkge1xuICAgICAgY2FuUGFyc2UgPSB0cnVlO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge31cblxuICByZXR1cm4gY2FuUGFyc2Vcbn1cblxuZnVuY3Rpb24gY3JlYXRlSFRNTFBhcnNlciAoKSB7XG4gIHZhciBQYXJzZXIgPSBmdW5jdGlvbiAoKSB7fTtcblxuICB7XG4gICAgaWYgKHNob3VsZFVzZUFjdGl2ZVgoKSkge1xuICAgICAgUGFyc2VyLnByb3RvdHlwZS5wYXJzZUZyb21TdHJpbmcgPSBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgICAgIHZhciBkb2MgPSBuZXcgd2luZG93LkFjdGl2ZVhPYmplY3QoJ2h0bWxmaWxlJyk7XG4gICAgICAgIGRvYy5kZXNpZ25Nb2RlID0gJ29uJzsgLy8gZGlzYWJsZSBvbi1wYWdlIHNjcmlwdHNcbiAgICAgICAgZG9jLm9wZW4oKTtcbiAgICAgICAgZG9jLndyaXRlKHN0cmluZyk7XG4gICAgICAgIGRvYy5jbG9zZSgpO1xuICAgICAgICByZXR1cm4gZG9jXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBQYXJzZXIucHJvdG90eXBlLnBhcnNlRnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgICAgICAgdmFyIGRvYyA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgnJyk7XG4gICAgICAgIGRvYy5vcGVuKCk7XG4gICAgICAgIGRvYy53cml0ZShzdHJpbmcpO1xuICAgICAgICBkb2MuY2xvc2UoKTtcbiAgICAgICAgcmV0dXJuIGRvY1xuICAgICAgfTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFBhcnNlclxufVxuXG5mdW5jdGlvbiBzaG91bGRVc2VBY3RpdmVYICgpIHtcbiAgdmFyIHVzZUFjdGl2ZVggPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoJycpLm9wZW4oKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChyb290LkFjdGl2ZVhPYmplY3QpIHVzZUFjdGl2ZVggPSB0cnVlO1xuICB9XG4gIHJldHVybiB1c2VBY3RpdmVYXG59XG5cbnZhciBIVE1MUGFyc2VyID0gY2FuUGFyc2VIVE1MTmF0aXZlbHkoKSA/IHJvb3QuRE9NUGFyc2VyIDogY3JlYXRlSFRNTFBhcnNlcigpO1xuXG5mdW5jdGlvbiBSb290Tm9kZSAoaW5wdXQsIG9wdGlvbnMpIHtcbiAgdmFyIHJvb3Q7XG4gIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFyIGRvYyA9IGh0bWxQYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoXG4gICAgICAvLyBET00gcGFyc2VycyBhcnJhbmdlIGVsZW1lbnRzIGluIHRoZSA8aGVhZD4gYW5kIDxib2R5Pi5cbiAgICAgIC8vIFdyYXBwaW5nIGluIGEgY3VzdG9tIGVsZW1lbnQgZW5zdXJlcyBlbGVtZW50cyBhcmUgcmVsaWFibHkgYXJyYW5nZWQgaW5cbiAgICAgIC8vIGEgc2luZ2xlIGVsZW1lbnQuXG4gICAgICAnPHgtdHVybmRvd24gaWQ9XCJ0dXJuZG93bi1yb290XCI+JyArIGlucHV0ICsgJzwveC10dXJuZG93bj4nLFxuICAgICAgJ3RleHQvaHRtbCdcbiAgICApO1xuICAgIHJvb3QgPSBkb2MuZ2V0RWxlbWVudEJ5SWQoJ3R1cm5kb3duLXJvb3QnKTtcbiAgfSBlbHNlIHtcbiAgICByb290ID0gaW5wdXQuY2xvbmVOb2RlKHRydWUpO1xuICB9XG4gIGNvbGxhcHNlV2hpdGVzcGFjZSh7XG4gICAgZWxlbWVudDogcm9vdCxcbiAgICBpc0Jsb2NrOiBpc0Jsb2NrLFxuICAgIGlzVm9pZDogaXNWb2lkLFxuICAgIGlzUHJlOiBvcHRpb25zLnByZWZvcm1hdHRlZENvZGUgPyBpc1ByZU9yQ29kZSA6IG51bGxcbiAgfSk7XG5cbiAgcmV0dXJuIHJvb3Rcbn1cblxudmFyIF9odG1sUGFyc2VyO1xuZnVuY3Rpb24gaHRtbFBhcnNlciAoKSB7XG4gIF9odG1sUGFyc2VyID0gX2h0bWxQYXJzZXIgfHwgbmV3IEhUTUxQYXJzZXIoKTtcbiAgcmV0dXJuIF9odG1sUGFyc2VyXG59XG5cbmZ1bmN0aW9uIGlzUHJlT3JDb2RlIChub2RlKSB7XG4gIHJldHVybiBub2RlLm5vZGVOYW1lID09PSAnUFJFJyB8fCBub2RlLm5vZGVOYW1lID09PSAnQ09ERSdcbn1cblxuZnVuY3Rpb24gTm9kZSAobm9kZSwgb3B0aW9ucykge1xuICBub2RlLmlzQmxvY2sgPSBpc0Jsb2NrKG5vZGUpO1xuICBub2RlLmlzQ29kZSA9IG5vZGUubm9kZU5hbWUgPT09ICdDT0RFJyB8fCBub2RlLnBhcmVudE5vZGUuaXNDb2RlO1xuICBub2RlLmlzQmxhbmsgPSBpc0JsYW5rKG5vZGUpO1xuICBub2RlLmZsYW5raW5nV2hpdGVzcGFjZSA9IGZsYW5raW5nV2hpdGVzcGFjZShub2RlLCBvcHRpb25zKTtcbiAgcmV0dXJuIG5vZGVcbn1cblxuZnVuY3Rpb24gaXNCbGFuayAobm9kZSkge1xuICByZXR1cm4gKFxuICAgICFpc1ZvaWQobm9kZSkgJiZcbiAgICAhaXNNZWFuaW5nZnVsV2hlbkJsYW5rKG5vZGUpICYmXG4gICAgL15cXHMqJC9pLnRlc3Qobm9kZS50ZXh0Q29udGVudCkgJiZcbiAgICAhaGFzVm9pZChub2RlKSAmJlxuICAgICFoYXNNZWFuaW5nZnVsV2hlbkJsYW5rKG5vZGUpXG4gIClcbn1cblxuZnVuY3Rpb24gZmxhbmtpbmdXaGl0ZXNwYWNlIChub2RlLCBvcHRpb25zKSB7XG4gIGlmIChub2RlLmlzQmxvY2sgfHwgKG9wdGlvbnMucHJlZm9ybWF0dGVkQ29kZSAmJiBub2RlLmlzQ29kZSkpIHtcbiAgICByZXR1cm4geyBsZWFkaW5nOiAnJywgdHJhaWxpbmc6ICcnIH1cbiAgfVxuXG4gIHZhciBlZGdlcyA9IGVkZ2VXaGl0ZXNwYWNlKG5vZGUudGV4dENvbnRlbnQpO1xuXG4gIC8vIGFiYW5kb24gbGVhZGluZyBBU0NJSSBXUyBpZiBsZWZ0LWZsYW5rZWQgYnkgQVNDSUkgV1NcbiAgaWYgKGVkZ2VzLmxlYWRpbmdBc2NpaSAmJiBpc0ZsYW5rZWRCeVdoaXRlc3BhY2UoJ2xlZnQnLCBub2RlLCBvcHRpb25zKSkge1xuICAgIGVkZ2VzLmxlYWRpbmcgPSBlZGdlcy5sZWFkaW5nTm9uQXNjaWk7XG4gIH1cblxuICAvLyBhYmFuZG9uIHRyYWlsaW5nIEFTQ0lJIFdTIGlmIHJpZ2h0LWZsYW5rZWQgYnkgQVNDSUkgV1NcbiAgaWYgKGVkZ2VzLnRyYWlsaW5nQXNjaWkgJiYgaXNGbGFua2VkQnlXaGl0ZXNwYWNlKCdyaWdodCcsIG5vZGUsIG9wdGlvbnMpKSB7XG4gICAgZWRnZXMudHJhaWxpbmcgPSBlZGdlcy50cmFpbGluZ05vbkFzY2lpO1xuICB9XG5cbiAgcmV0dXJuIHsgbGVhZGluZzogZWRnZXMubGVhZGluZywgdHJhaWxpbmc6IGVkZ2VzLnRyYWlsaW5nIH1cbn1cblxuZnVuY3Rpb24gZWRnZVdoaXRlc3BhY2UgKHN0cmluZykge1xuICB2YXIgbSA9IHN0cmluZy5tYXRjaCgvXigoWyBcXHRcXHJcXG5dKikoXFxzKikpKD86KD89XFxTKVtcXHNcXFNdKlxcUyk/KChcXHMqPykoWyBcXHRcXHJcXG5dKikpJC8pO1xuICByZXR1cm4ge1xuICAgIGxlYWRpbmc6IG1bMV0sIC8vIHdob2xlIHN0cmluZyBmb3Igd2hpdGVzcGFjZS1vbmx5IHN0cmluZ3NcbiAgICBsZWFkaW5nQXNjaWk6IG1bMl0sXG4gICAgbGVhZGluZ05vbkFzY2lpOiBtWzNdLFxuICAgIHRyYWlsaW5nOiBtWzRdLCAvLyBlbXB0eSBmb3Igd2hpdGVzcGFjZS1vbmx5IHN0cmluZ3NcbiAgICB0cmFpbGluZ05vbkFzY2lpOiBtWzVdLFxuICAgIHRyYWlsaW5nQXNjaWk6IG1bNl1cbiAgfVxufVxuXG5mdW5jdGlvbiBpc0ZsYW5rZWRCeVdoaXRlc3BhY2UgKHNpZGUsIG5vZGUsIG9wdGlvbnMpIHtcbiAgdmFyIHNpYmxpbmc7XG4gIHZhciByZWdFeHA7XG4gIHZhciBpc0ZsYW5rZWQ7XG5cbiAgaWYgKHNpZGUgPT09ICdsZWZ0Jykge1xuICAgIHNpYmxpbmcgPSBub2RlLnByZXZpb3VzU2libGluZztcbiAgICByZWdFeHAgPSAvICQvO1xuICB9IGVsc2Uge1xuICAgIHNpYmxpbmcgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgIHJlZ0V4cCA9IC9eIC87XG4gIH1cblxuICBpZiAoc2libGluZykge1xuICAgIGlmIChzaWJsaW5nLm5vZGVUeXBlID09PSAzKSB7XG4gICAgICBpc0ZsYW5rZWQgPSByZWdFeHAudGVzdChzaWJsaW5nLm5vZGVWYWx1ZSk7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLnByZWZvcm1hdHRlZENvZGUgJiYgc2libGluZy5ub2RlTmFtZSA9PT0gJ0NPREUnKSB7XG4gICAgICBpc0ZsYW5rZWQgPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKHNpYmxpbmcubm9kZVR5cGUgPT09IDEgJiYgIWlzQmxvY2soc2libGluZykpIHtcbiAgICAgIGlzRmxhbmtlZCA9IHJlZ0V4cC50ZXN0KHNpYmxpbmcudGV4dENvbnRlbnQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gaXNGbGFua2VkXG59XG5cbnZhciByZWR1Y2UgPSBBcnJheS5wcm90b3R5cGUucmVkdWNlO1xudmFyIGVzY2FwZXMgPSBbXG4gIFsvXFxcXC9nLCAnXFxcXFxcXFwnXSxcbiAgWy9cXCovZywgJ1xcXFwqJ10sXG4gIFsvXi0vZywgJ1xcXFwtJ10sXG4gIFsvXlxcKyAvZywgJ1xcXFwrICddLFxuICBbL14oPSspL2csICdcXFxcJDEnXSxcbiAgWy9eKCN7MSw2fSkgL2csICdcXFxcJDEgJ10sXG4gIFsvYC9nLCAnXFxcXGAnXSxcbiAgWy9efn5+L2csICdcXFxcfn5+J10sXG4gIFsvXFxbL2csICdcXFxcWyddLFxuICBbL1xcXS9nLCAnXFxcXF0nXSxcbiAgWy9ePi9nLCAnXFxcXD4nXSxcbiAgWy9fL2csICdcXFxcXyddLFxuICBbL14oXFxkKylcXC4gL2csICckMVxcXFwuICddXG5dO1xuXG5mdW5jdGlvbiBUdXJuZG93blNlcnZpY2UgKG9wdGlvbnMpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFR1cm5kb3duU2VydmljZSkpIHJldHVybiBuZXcgVHVybmRvd25TZXJ2aWNlKG9wdGlvbnMpXG5cbiAgdmFyIGRlZmF1bHRzID0ge1xuICAgIHJ1bGVzOiBydWxlcyxcbiAgICBoZWFkaW5nU3R5bGU6ICdzZXRleHQnLFxuICAgIGhyOiAnKiAqIConLFxuICAgIGJ1bGxldExpc3RNYXJrZXI6ICcqJyxcbiAgICBjb2RlQmxvY2tTdHlsZTogJ2luZGVudGVkJyxcbiAgICBmZW5jZTogJ2BgYCcsXG4gICAgZW1EZWxpbWl0ZXI6ICdfJyxcbiAgICBzdHJvbmdEZWxpbWl0ZXI6ICcqKicsXG4gICAgbGlua1N0eWxlOiAnaW5saW5lZCcsXG4gICAgbGlua1JlZmVyZW5jZVN0eWxlOiAnZnVsbCcsXG4gICAgYnI6ICcgICcsXG4gICAgcHJlZm9ybWF0dGVkQ29kZTogZmFsc2UsXG4gICAgYmxhbmtSZXBsYWNlbWVudDogZnVuY3Rpb24gKGNvbnRlbnQsIG5vZGUpIHtcbiAgICAgIHJldHVybiBub2RlLmlzQmxvY2sgPyAnXFxuXFxuJyA6ICcnXG4gICAgfSxcbiAgICBrZWVwUmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChjb250ZW50LCBub2RlKSB7XG4gICAgICByZXR1cm4gbm9kZS5pc0Jsb2NrID8gJ1xcblxcbicgKyBub2RlLm91dGVySFRNTCArICdcXG5cXG4nIDogbm9kZS5vdXRlckhUTUxcbiAgICB9LFxuICAgIGRlZmF1bHRSZXBsYWNlbWVudDogZnVuY3Rpb24gKGNvbnRlbnQsIG5vZGUpIHtcbiAgICAgIHJldHVybiBub2RlLmlzQmxvY2sgPyAnXFxuXFxuJyArIGNvbnRlbnQgKyAnXFxuXFxuJyA6IGNvbnRlbnRcbiAgICB9XG4gIH07XG4gIHRoaXMub3B0aW9ucyA9IGV4dGVuZCh7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xuICB0aGlzLnJ1bGVzID0gbmV3IFJ1bGVzKHRoaXMub3B0aW9ucyk7XG59XG5cblR1cm5kb3duU2VydmljZS5wcm90b3R5cGUgPSB7XG4gIC8qKlxuICAgKiBUaGUgZW50cnkgcG9pbnQgZm9yIGNvbnZlcnRpbmcgYSBzdHJpbmcgb3IgRE9NIG5vZGUgdG8gTWFya2Rvd25cbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1N0cmluZ3xIVE1MRWxlbWVudH0gaW5wdXQgVGhlIHN0cmluZyBvciBET00gbm9kZSB0byBjb252ZXJ0XG4gICAqIEByZXR1cm5zIEEgTWFya2Rvd24gcmVwcmVzZW50YXRpb24gb2YgdGhlIGlucHV0XG4gICAqIEB0eXBlIFN0cmluZ1xuICAgKi9cblxuICB0dXJuZG93bjogZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgaWYgKCFjYW5Db252ZXJ0KGlucHV0KSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgaW5wdXQgKyAnIGlzIG5vdCBhIHN0cmluZywgb3IgYW4gZWxlbWVudC9kb2N1bWVudC9mcmFnbWVudCBub2RlLidcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoaW5wdXQgPT09ICcnKSByZXR1cm4gJydcblxuICAgIHZhciBvdXRwdXQgPSBwcm9jZXNzLmNhbGwodGhpcywgbmV3IFJvb3ROb2RlKGlucHV0LCB0aGlzLm9wdGlvbnMpKTtcbiAgICByZXR1cm4gcG9zdFByb2Nlc3MuY2FsbCh0aGlzLCBvdXRwdXQpXG4gIH0sXG5cbiAgLyoqXG4gICAqIEFkZCBvbmUgb3IgbW9yZSBwbHVnaW5zXG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtGdW5jdGlvbnxBcnJheX0gcGx1Z2luIFRoZSBwbHVnaW4gb3IgYXJyYXkgb2YgcGx1Z2lucyB0byBhZGRcbiAgICogQHJldHVybnMgVGhlIFR1cm5kb3duIGluc3RhbmNlIGZvciBjaGFpbmluZ1xuICAgKiBAdHlwZSBPYmplY3RcbiAgICovXG5cbiAgdXNlOiBmdW5jdGlvbiAocGx1Z2luKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkocGx1Z2luKSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwbHVnaW4ubGVuZ3RoOyBpKyspIHRoaXMudXNlKHBsdWdpbltpXSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgcGx1Z2luID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBwbHVnaW4odGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3BsdWdpbiBtdXN0IGJlIGEgRnVuY3Rpb24gb3IgYW4gQXJyYXkgb2YgRnVuY3Rpb25zJylcbiAgICB9XG4gICAgcmV0dXJuIHRoaXNcbiAgfSxcblxuICAvKipcbiAgICogQWRkcyBhIHJ1bGVcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSB1bmlxdWUga2V5IG9mIHRoZSBydWxlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBydWxlIFRoZSBydWxlXG4gICAqIEByZXR1cm5zIFRoZSBUdXJuZG93biBpbnN0YW5jZSBmb3IgY2hhaW5pbmdcbiAgICogQHR5cGUgT2JqZWN0XG4gICAqL1xuXG4gIGFkZFJ1bGU6IGZ1bmN0aW9uIChrZXksIHJ1bGUpIHtcbiAgICB0aGlzLnJ1bGVzLmFkZChrZXksIHJ1bGUpO1xuICAgIHJldHVybiB0aGlzXG4gIH0sXG5cbiAgLyoqXG4gICAqIEtlZXAgYSBub2RlIChhcyBIVE1MKSB0aGF0IG1hdGNoZXMgdGhlIGZpbHRlclxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fEZ1bmN0aW9ufSBmaWx0ZXIgVGhlIHVuaXF1ZSBrZXkgb2YgdGhlIHJ1bGVcbiAgICogQHJldHVybnMgVGhlIFR1cm5kb3duIGluc3RhbmNlIGZvciBjaGFpbmluZ1xuICAgKiBAdHlwZSBPYmplY3RcbiAgICovXG5cbiAga2VlcDogZnVuY3Rpb24gKGZpbHRlcikge1xuICAgIHRoaXMucnVsZXMua2VlcChmaWx0ZXIpO1xuICAgIHJldHVybiB0aGlzXG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhIG5vZGUgdGhhdCBtYXRjaGVzIHRoZSBmaWx0ZXJcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1N0cmluZ3xBcnJheXxGdW5jdGlvbn0gZmlsdGVyIFRoZSB1bmlxdWUga2V5IG9mIHRoZSBydWxlXG4gICAqIEByZXR1cm5zIFRoZSBUdXJuZG93biBpbnN0YW5jZSBmb3IgY2hhaW5pbmdcbiAgICogQHR5cGUgT2JqZWN0XG4gICAqL1xuXG4gIHJlbW92ZTogZnVuY3Rpb24gKGZpbHRlcikge1xuICAgIHRoaXMucnVsZXMucmVtb3ZlKGZpbHRlcik7XG4gICAgcmV0dXJuIHRoaXNcbiAgfSxcblxuICAvKipcbiAgICogRXNjYXBlcyBNYXJrZG93biBzeW50YXhcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gZXNjYXBlXG4gICAqIEByZXR1cm5zIEEgc3RyaW5nIHdpdGggTWFya2Rvd24gc3ludGF4IGVzY2FwZWRcbiAgICogQHR5cGUgU3RyaW5nXG4gICAqL1xuXG4gIGVzY2FwZTogZnVuY3Rpb24gKHN0cmluZykge1xuICAgIHJldHVybiBlc2NhcGVzLnJlZHVjZShmdW5jdGlvbiAoYWNjdW11bGF0b3IsIGVzY2FwZSkge1xuICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yLnJlcGxhY2UoZXNjYXBlWzBdLCBlc2NhcGVbMV0pXG4gICAgfSwgc3RyaW5nKVxuICB9XG59O1xuXG4vKipcbiAqIFJlZHVjZXMgYSBET00gbm9kZSBkb3duIHRvIGl0cyBNYXJrZG93biBzdHJpbmcgZXF1aXZhbGVudFxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHBhcmVudE5vZGUgVGhlIG5vZGUgdG8gY29udmVydFxuICogQHJldHVybnMgQSBNYXJrZG93biByZXByZXNlbnRhdGlvbiBvZiB0aGUgbm9kZVxuICogQHR5cGUgU3RyaW5nXG4gKi9cblxuZnVuY3Rpb24gcHJvY2VzcyAocGFyZW50Tm9kZSkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHJldHVybiByZWR1Y2UuY2FsbChwYXJlbnROb2RlLmNoaWxkTm9kZXMsIGZ1bmN0aW9uIChvdXRwdXQsIG5vZGUpIHtcbiAgICBub2RlID0gbmV3IE5vZGUobm9kZSwgc2VsZi5vcHRpb25zKTtcblxuICAgIHZhciByZXBsYWNlbWVudCA9ICcnO1xuICAgIGlmIChub2RlLm5vZGVUeXBlID09PSAzKSB7XG4gICAgICByZXBsYWNlbWVudCA9IG5vZGUuaXNDb2RlID8gbm9kZS5ub2RlVmFsdWUgOiBzZWxmLmVzY2FwZShub2RlLm5vZGVWYWx1ZSk7XG4gICAgfSBlbHNlIGlmIChub2RlLm5vZGVUeXBlID09PSAxKSB7XG4gICAgICByZXBsYWNlbWVudCA9IHJlcGxhY2VtZW50Rm9yTm9kZS5jYWxsKHNlbGYsIG5vZGUpO1xuICAgIH1cblxuICAgIHJldHVybiBqb2luKG91dHB1dCwgcmVwbGFjZW1lbnQpXG4gIH0sICcnKVxufVxuXG4vKipcbiAqIEFwcGVuZHMgc3RyaW5ncyBhcyBlYWNoIHJ1bGUgcmVxdWlyZXMgYW5kIHRyaW1zIHRoZSBvdXRwdXRcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge1N0cmluZ30gb3V0cHV0IFRoZSBjb252ZXJzaW9uIG91dHB1dFxuICogQHJldHVybnMgQSB0cmltbWVkIHZlcnNpb24gb2YgdGhlIG91cHV0XG4gKiBAdHlwZSBTdHJpbmdcbiAqL1xuXG5mdW5jdGlvbiBwb3N0UHJvY2VzcyAob3V0cHV0KSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5ydWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChydWxlKSB7XG4gICAgaWYgKHR5cGVvZiBydWxlLmFwcGVuZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgb3V0cHV0ID0gam9pbihvdXRwdXQsIHJ1bGUuYXBwZW5kKHNlbGYub3B0aW9ucykpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIG91dHB1dC5yZXBsYWNlKC9eW1xcdFxcclxcbl0rLywgJycpLnJlcGxhY2UoL1tcXHRcXHJcXG5cXHNdKyQvLCAnJylcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBlbGVtZW50IG5vZGUgdG8gaXRzIE1hcmtkb3duIGVxdWl2YWxlbnRcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBub2RlIFRoZSBub2RlIHRvIGNvbnZlcnRcbiAqIEByZXR1cm5zIEEgTWFya2Rvd24gcmVwcmVzZW50YXRpb24gb2YgdGhlIG5vZGVcbiAqIEB0eXBlIFN0cmluZ1xuICovXG5cbmZ1bmN0aW9uIHJlcGxhY2VtZW50Rm9yTm9kZSAobm9kZSkge1xuICB2YXIgcnVsZSA9IHRoaXMucnVsZXMuZm9yTm9kZShub2RlKTtcbiAgdmFyIGNvbnRlbnQgPSBwcm9jZXNzLmNhbGwodGhpcywgbm9kZSk7XG4gIHZhciB3aGl0ZXNwYWNlID0gbm9kZS5mbGFua2luZ1doaXRlc3BhY2U7XG4gIGlmICh3aGl0ZXNwYWNlLmxlYWRpbmcgfHwgd2hpdGVzcGFjZS50cmFpbGluZykgY29udGVudCA9IGNvbnRlbnQudHJpbSgpO1xuICByZXR1cm4gKFxuICAgIHdoaXRlc3BhY2UubGVhZGluZyArXG4gICAgcnVsZS5yZXBsYWNlbWVudChjb250ZW50LCBub2RlLCB0aGlzLm9wdGlvbnMpICtcbiAgICB3aGl0ZXNwYWNlLnRyYWlsaW5nXG4gIClcbn1cblxuLyoqXG4gKiBKb2lucyByZXBsYWNlbWVudCB0byB0aGUgY3VycmVudCBvdXRwdXQgd2l0aCBhcHByb3ByaWF0ZSBudW1iZXIgb2YgbmV3IGxpbmVzXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtTdHJpbmd9IG91dHB1dCBUaGUgY3VycmVudCBjb252ZXJzaW9uIG91dHB1dFxuICogQHBhcmFtIHtTdHJpbmd9IHJlcGxhY2VtZW50IFRoZSBzdHJpbmcgdG8gYXBwZW5kIHRvIHRoZSBvdXRwdXRcbiAqIEByZXR1cm5zIEpvaW5lZCBvdXRwdXRcbiAqIEB0eXBlIFN0cmluZ1xuICovXG5cbmZ1bmN0aW9uIGpvaW4gKG91dHB1dCwgcmVwbGFjZW1lbnQpIHtcbiAgdmFyIHMxID0gdHJpbVRyYWlsaW5nTmV3bGluZXMob3V0cHV0KTtcbiAgdmFyIHMyID0gdHJpbUxlYWRpbmdOZXdsaW5lcyhyZXBsYWNlbWVudCk7XG4gIHZhciBubHMgPSBNYXRoLm1heChvdXRwdXQubGVuZ3RoIC0gczEubGVuZ3RoLCByZXBsYWNlbWVudC5sZW5ndGggLSBzMi5sZW5ndGgpO1xuICB2YXIgc2VwYXJhdG9yID0gJ1xcblxcbicuc3Vic3RyaW5nKDAsIG5scyk7XG5cbiAgcmV0dXJuIHMxICsgc2VwYXJhdG9yICsgczJcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gaW5wdXQgY2FuIGJlIGNvbnZlcnRlZFxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7U3RyaW5nfEhUTUxFbGVtZW50fSBpbnB1dCBEZXNjcmliZSB0aGlzIHBhcmFtZXRlclxuICogQHJldHVybnMgRGVzY3JpYmUgd2hhdCBpdCByZXR1cm5zXG4gKiBAdHlwZSBTdHJpbmd8T2JqZWN0fEFycmF5fEJvb2xlYW58TnVtYmVyXG4gKi9cblxuZnVuY3Rpb24gY2FuQ29udmVydCAoaW5wdXQpIHtcbiAgcmV0dXJuIChcbiAgICBpbnB1dCAhPSBudWxsICYmIChcbiAgICAgIHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHxcbiAgICAgIChpbnB1dC5ub2RlVHlwZSAmJiAoXG4gICAgICAgIGlucHV0Lm5vZGVUeXBlID09PSAxIHx8IGlucHV0Lm5vZGVUeXBlID09PSA5IHx8IGlucHV0Lm5vZGVUeXBlID09PSAxMVxuICAgICAgKSlcbiAgICApXG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgVHVybmRvd25TZXJ2aWNlO1xuIiwgImltcG9ydCB7IE15UGx1Z2luU2V0dGluZ3MgfSBmcm9tIFwiLi90eXBlc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHRlbXBsYXRlUGxhaW4gPSBcIiMge3t0aXRsZX19XFxuXCIgK1xyXG5cdFwiXFxuXCIgK1xyXG5cdFwiIyMgTWV0YWRhdGFcXG5cIiArXHJcblx0XCItICoqQ2l0ZUtleSoqOiB7e2NpdGVrZXl9fVxcbiBcIiArXHJcblx0XCItICoqVHlwZSoqOiB7e2l0ZW1UeXBlfX1cXG4gXCIgK1xyXG5cdFwiLSAqKlRpdGxlKio6IHt7dGl0bGV9fSwgXFxuIFwiICtcclxuXHRcIi0gKipBdXRob3IqKjoge3thdXRob3J9fTsgIFxcblwiICtcclxuXHRcIi0gKipFZGl0b3IqKjoge3tlZGl0b3J9fTsgIFxcblwiICtcclxuXHRcIi0gKipUcmFuc2xhdG9yKio6IHt7dHJhbnNsYXRvcn19XFxuXCIgK1xyXG5cdFwiLSAqKlB1Ymxpc2hlcioqOiB7e3B1Ymxpc2hlcn19LFxcblwiICtcclxuXHRcIi0gKipMb2NhdGlvbioqOiB7e3BsYWNlfX0sXFxuXCIgK1xyXG5cdFwiLSAqKlNlcmllcyoqOiB7e3Nlcmllc319XFxuXCIgK1xyXG5cdFwiLSAqKlNlcmllcyBOdW1iZXIqKjoge3tzZXJpZXNOdW1iZXJ9fVxcblwiICtcclxuXHRcIi0gKipKb3VybmFsKio6IHt7cHVibGljYXRpb25UaXRsZX19LCBcXG5cIiArXHJcblx0XCItICoqVm9sdW1lKio6IHt7dm9sdW1lfX0sXFxuXCIgK1xyXG5cdFwiLSAqKklzc3VlKio6IHt7aXNzdWV9fVxcblwiICtcclxuXHRcIi0gKipQYWdlcyoqOiB7e3BhZ2VzfX1cXG5cIiArXHJcblx0XCItICoqWWVhcioqOiB7e3llYXJ9fSBcXG5cIiArXHJcblx0XCItICoqRE9JKio6IHt7RE9JfX1cXG5cIiArXHJcblx0XCItICoqSVNTTioqOiB7e0lTU059fVxcblwiICtcclxuXHRcIi0gKipJU0JOKio6IHt7SVNCTn19XFxuXCIgK1xyXG5cdFwiXFxuXCIgK1xyXG5cdFwiIyMgQWJzdHJhY3RcXG5cIiArXHJcblx0XCJ7e2Fic3RyYWN0Tm90ZX19XCIgK1xyXG5cdFwiXFxuXCIgK1xyXG5cdFwiIyMgRmlsZXMgYW5kIExpbmtzXFxuXCIgK1xyXG5cdFwiLSAqKlVybCoqOiB7e3VybH19XFxuXCIgK1xyXG5cdFwiLSAqKlVyaSoqOiB7e3VyaX19XFxuXCIgK1xyXG5cdFwiLSAqKkVwcmludCoqOiB7e2VwcmludH19XFxuXCIgK1xyXG5cdFwiLSAqKkZpbGUqKjoge3tmaWxlfX1cXG5cIiArXHJcblx0XCItICoqTG9jYWwgTGlicmFyeSoqOiBbWm90ZXJvXSh7e2xvY2FsTGlicmFyeUxpbmt9fSlcXG5cIiArXHJcblx0XCJcXG5cIiArXHJcblx0XCIjIyBUYWdzIGFuZCBDb2xsZWN0aW9uc1xcblwiICtcclxuXHRcIi0gKipLZXl3b3JkcyoqOiB7e2tleXdvcmRzQWxsfX1cXG5cIiArXHJcblx0XCItICoqQ29sbGVjdGlvbnMqKjoge3tjb2xsZWN0aW9uc1BhcmVudH19XFxuXCIgK1xyXG5cdFwiXFxuXCIgK1xyXG5cdFwiXFxuXCIgK1xyXG5cdFwiLS0tLVwiICtcclxuXHRcIlxcblwiICtcclxuXHRcIlxcblwiICtcclxuXHRcIiMjIENvbW1lbnRzXFxuXCIgK1xyXG5cdFwie3tVc2VyTm90ZXN9fVxcblwiICtcclxuXHRcIlxcblwiICtcclxuXHRcIlxcblwiICtcclxuXHRcIi0tLS1cIiArXHJcblx0XCJcXG5cIiArXHJcblx0XCJcXG5cIiArXHJcblx0XCIjIyBFeHRyYWN0ZWQgQW5ub3RhdGlvbnNcXG5cIiArXHJcblx0XCJ7e1BERk5vdGVzfX1cIlxyXG5cclxuZXhwb3J0IGNvbnN0IHRlbXBsYXRlQWRtb25pdGlvbiA9IFwiIyB7e3RpdGxlfX1cXG5cIiArXHJcblx0XCJcXG5cIiArXHJcblx0XCJgYGAgYWQtaW5mb1xcblwiICtcclxuXHRcInRpdGxlOiBNZXRhZGF0YVxcblwiICtcclxuXHRcIi0gKipDaXRlS2V5Kio6IHt7Y2l0ZWtleX19XFxuXCIgK1xyXG5cdFwiLSAqKlR5cGUqKjoge3tpdGVtVHlwZX19XFxuXCIgK1xyXG5cdFwiLSAqKkF1dGhvcioqOiB7e2F1dGhvcn19XFxuXCIgK1xyXG5cdFwiLSAqKkVkaXRvcioqOiB7e2VkaXRvcn19XFxuXCIgK1xyXG5cdFwiLSAqKlRyYW5zbGF0b3IqKjoge3t0cmFuc2xhdG9yfX1cXG5cIiArXHJcblx0XCItICoqUHVibGlzaGVyKio6IHt7cHVibGlzaGVyfX1cXG5cIiArXHJcblx0XCItICoqTG9jYXRpb24qKjoge3twbGFjZX19XFxuXCIgK1xyXG5cdFwiLSAqKlNlcmllcyoqOiB7e3Nlcmllc319XFxuXCIgK1xyXG5cdFwiLSAqKlNlcmllcyBOdW1iZXIqKjoge3tzZXJpZXNOdW1iZXJ9fVxcblwiICtcclxuXHRcIi0gKipKb3VybmFsKio6IHt7cHVibGljYXRpb25UaXRsZX19XFxuXCIgK1xyXG5cdFwiLSAqKlZvbHVtZSoqOiB7e3ZvbHVtZX19XFxuXCIgK1xyXG5cdFwiLSAqKklzc3VlKio6IHt7aXNzdWV9fVxcblwiICtcclxuXHRcIi0gKipQYWdlcyoqOiB7e3BhZ2VzfX1cXG5cIiArXHJcblx0XCItICoqWWVhcioqOiB7e3llYXJ9fSBcXG5cIiArXHJcblx0XCItICoqRE9JKio6IHt7RE9JfX1cXG5cIiArXHJcblx0XCItICoqSVNTTioqOiB7e0lTU059fVxcblwiICtcclxuXHRcIi0gKipJU0JOKio6IHt7SVNCTn19XFxuXCIgK1xyXG5cdFwiYGBgXFxuXCIgK1xyXG5cdFwiYGBgYWQtcXVvdGVcXG5cIiArXHJcblx0XCJ0aXRsZTogQWJzdHJhY3RcXG5cIiArXHJcblx0XCJ7e2Fic3RyYWN0Tm90ZX19XFxuXCIgK1xyXG5cdFwiYGBgXFxuXCIgK1xyXG5cdFwiYGBgYWQtYWJzdHJhY3RcXG5cIiArXHJcblx0XCJ0aXRsZTogRmlsZXMgYW5kIExpbmtzXFxuXCIgK1xyXG5cdFwiLSAqKlVybCoqOiB7e3VybH19XFxuXCIgK1xyXG5cdFwiLSAqKlVyaSoqOiB7e3VyaX19XFxuXCIgK1xyXG5cdFwiLSAqKkVwcmludCoqOiB7e2VwcmludH19XFxuXCIgK1xyXG5cdFwiLSAqKkZpbGUqKjoge3tmaWxlfX1cXG5cIiArXHJcblx0XCItICoqTG9jYWwgTGlicmFyeSoqOiBbWm90ZXJvXSh7e2xvY2FsTGlicmFyeUxpbmt9fSlcXG5cIiArXHJcblx0XCJgYGBcXG5cIiArXHJcblx0XCJgYGBhZC1ub3RlXFxuXCIgK1xyXG5cdFwidGl0bGU6IFRhZ3MgYW5kIENvbGxlY3Rpb25zXFxuXCIgK1xyXG5cdFwiLSAqKktleXdvcmRzKio6IHt7a2V5d29yZHNBbGx9fVxcblwiICtcclxuXHRcIi0gKipDb2xsZWN0aW9ucyoqOiB7e2NvbGxlY3Rpb25zUGFyZW50fX1cXG5cIiArXHJcblx0XCJgYGBcXG5cIiArXHJcblx0XCJcXG5cIiArXHJcblx0XCItLS0tXCIgK1xyXG5cdFwiXFxuXCIgK1xyXG5cdFwiXFxuXCIgK1xyXG5cdFwiIyMgQ29tbWVudHNcXG5cIiArXHJcblx0XCJ7e1VzZXJOb3Rlc319XFxuXCIgK1xyXG5cdFwiXFxuXCIgK1xyXG5cdFwiXFxuXCIgK1xyXG5cdFwiLS0tLVwiICtcclxuXHRcIlxcblwiICtcclxuXHRcIlxcblwiICtcclxuXHRcIiMjIEV4dHJhY3RlZCBBbm5vdGF0aW9uc1xcblwiICtcclxuXHRcInt7UERGTm90ZXN9fVwiXHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE15UGx1Z2luU2V0dGluZ3MgPSB7XHJcblx0YmliUGF0aDogXCJcIixcclxuXHR0ZW1wbGF0ZUNvbnRlbnQ6IHRlbXBsYXRlUGxhaW4sXHJcblx0dGVtcGxhdGVUeXBlOiBcIkFkbW9uaXRpb25cIixcclxuXHRsYXN0VXBkYXRlRGF0ZTogbmV3IERhdGUoJzE5OTUtMTItMTdUMDM6MjQ6MDAnKSxcclxuXHR1cGRhdGVMaWJyYXJ5OiBcIk9ubHkgdXBkYXRlIGV4aXN0aW5nIG5vdGVzXCIsXHJcblx0ZXhwb3J0UGF0aDogXCJcIixcclxuXHRleHBvcnRUaXRsZTogXCJ7e2NpdGVLZXl9fVwiLFxyXG5cdG1pc3NpbmdmaWVsZDogXCJMZWF2ZSBwbGFjZWhvbGRlclwiLFxyXG5cdHNhdmVNYW51YWxFZGl0czogXCJTYXZlIEVudGlyZSBOb3RlXCIsXHJcblx0c2F2ZU1hbnVhbEVkaXRzU3RhcnQ6IFwiXCIsXHJcblx0c2F2ZU1hbnVhbEVkaXRzRW5kOiBcIlwiLFxyXG5cdGlzRG91YmxlU3BhY2VkOiB0cnVlLFxyXG5cdG11bHRpcGxlRmllbGRzRGl2aWRlcjogXCI7XCIsXHJcblx0bmFtZUZvcm1hdDogXCJ7e2xhc3ROYW1lfX0sIHt7Zmlyc3ROYW1lfX1cIixcclxuXHRkZWJ1Z01vZGU6IGZhbHNlLFxyXG5cdG1pc3NpbmdmaWVsZHJlcGxhY2VtZW50OiBcIk5BXCIsXHJcbn07XHJcblxyXG5leHBvcnQgZW51bSBIZWFkZXJMZXZlbHMge1xyXG5cdFwidHlwZUgxXCIgPSAxLFxyXG5cdFwidHlwZUgyXCIgPSAyLFxyXG5cdFwidHlwZUgzXCIgPSAzLFxyXG5cdFwidHlwZUg0XCIgPSA0LFxyXG5cdFwidHlwZUg1XCIgPSA1LFxyXG5cdFwidHlwZUg2XCIgPSA2LFxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgVEVNUExBVEVfUkVHID0gL1xce1xce1tefV0rXFx9XFx9L2c7XHJcbmV4cG9ydCBjb25zdCBURU1QTEFURV9CUkFDS0VUX1JFRyA9IC9cXFtcXFtcXHtcXHtbXn1dK1xcfVxcfVxcXVxcXS9nOyIsICJpbXBvcnQgTXlQbHVnaW4gZnJvbSBcIi4vbWFpblwiO1xyXG5pbXBvcnQgKiBhcyBmcyBmcm9tIFwiZnNcIjtcclxuaW1wb3J0IHsgQXBwLCBNb2RhbCwgRnV6enlTdWdnZXN0TW9kYWwsIE5vdGljZSwgUGxhdGZvcm0gfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuXHJcbmltcG9ydCB7IFJlZmVyZW5jZSB9IGZyb20gXCIuL3R5cGVzXCI7XHJcblxyXG5pbXBvcnQge1xyXG5cdGNyZWF0ZUF1dGhvcktleSxcclxuXHRjcmVhdGVOb3RlVGl0bGUsXHJcblx0b3BlblNlbGVjdGVkTm90ZSxcclxuXHRvcmRlckJ5RGF0ZU1vZGlmaWVkLFxyXG59IGZyb20gXCIuL3V0aWxzXCI7XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIGZ1enp5U2VsZWN0RW50cnlGcm9tSnNvbiBleHRlbmRzIEZ1enp5U3VnZ2VzdE1vZGFsPFJlZmVyZW5jZT4ge1xyXG5cdHBsdWdpbjogTXlQbHVnaW47XHJcblx0dGVtcGxhdGU6IHN0cmluZztcclxuXHRzZWxlY3RBcnJheTogUmVmZXJlbmNlW107XHJcblx0YWxsQ2l0YXRpb25LZXlzOiBzdHJpbmdbXTtcclxuXHRkYXRhOiB7XHJcblx0XHRjb2xsZWN0aW9uczogUmVjb3JkPHN0cmluZywgbmV2ZXI+O1xyXG5cdFx0Y29uZmlnOiBSZWNvcmQ8c3RyaW5nLCBuZXZlcj47XHJcblx0XHRpdGVtczogUmVmZXJlbmNlW107XHJcblx0XHR2ZXJzaW9uOiBzdHJpbmc7XHJcblx0XHRfX3Byb3RvX186IFJlY29yZDxzdHJpbmcsIG5ldmVyPjtcclxuXHR9O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNeVBsdWdpbikge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHQvLyBGdW5jdGlvbiB1c2VkIHRvIG1vdmUgdGhlIGN1cnNvciBpbiB0aGUgc2VhcmNoIGJhciB3aGVuIHRoZSBtb2RhbCBpcyBsYXVuY2hlZFxyXG5cdGZvY3VzSW5wdXQoKSB7XHJcblx0XHQvL0B0cy1pZ25vcmVcclxuXHRcdGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJwcm9tcHQtaW5wdXRcIilbMF0uZm9jdXMoKTtcclxuXHR9XHJcblx0YXN5bmMgb25PcGVuKCkge1xyXG5cdFx0aWYgKFBsYXRmb3JtLmlzRGVza3RvcEFwcCkge1xyXG5cdFx0XHR0aGlzLmZvY3VzSW5wdXQoKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBJbXBvcnQgJ2JldHRlci1zcWxpdGUzJyAobm90IHdvcmtpbmcpXHJcblx0XHQvL2NvbnN0IGRiID0gbmV3IERhdGFiYXNlKCcvVXNlcnMvc2Jiajk2My9ab3Rlcm8vem90ZXJvLnNxbGl0ZScpO1xyXG5cclxuXHJcblx0XHQvL0xvYWQgdGhlIEpzb24gZmlsZVxyXG5cclxuXHRcdC8vIENoZWNrIGlmIHRoZSBqc29uIGZpbGUgZXhpc3RzXHJcblx0XHRjb25zdCBqc29uUGF0aCA9IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZ2V0QmFzZVBhdGgoKSArIFwiL1wiICsgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYmliUGF0aFxyXG5cdFx0aWYgKCFmcy5leGlzdHNTeW5jKGpzb25QYXRoKSkgeyBuZXcgTm90aWNlKFwiTm8gQmV0dGVyQmliVGV4IEpzb24gZmlsZSBmb3VuZCBhdCBcIiArIGpzb25QYXRoKSB9XHJcblxyXG5cdFx0Ly9DcmVhdGUgdGhlIGZ1bGwgcGF0aFxyXG5cclxuXHRcdC8vY29uc3QgZGF0YSA9IHJlcXVpcmUodGhpcy5hcHAudmF1bHQuYWRhcHRlci5nZXRCYXNlUGF0aCgpICsgXCIvXCIgKyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5iaWJQYXRoKVxyXG5cdFx0Y29uc3QgcmF3ZGF0YSA9IGZzLnJlYWRGaWxlU3luYyhcclxuXHRcdFx0dGhpcy5hcHAudmF1bHQuYWRhcHRlci5nZXRCYXNlUGF0aCgpICtcclxuXHRcdFx0XCIvXCIgK1xyXG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5iaWJQYXRoXHJcblx0XHQpO1xyXG5cdFx0Y29uc3QgZGF0YSA9IEpTT04ucGFyc2UocmF3ZGF0YS50b1N0cmluZygpKTsgLy8gcmF3ZGF0YSBpcyBhIGJ1ZmZlciwgY29udmVydCB0byBzdHJpbmdcclxuXHJcblx0XHQvL2NvbnN0IGNoZWNrQWRtb25pdGlvbiAgPSB0aGlzLmFwcC5wbHVnaW5zLmdldFBsdWdpbihcIm9ic2lkaWFuLWFkbW9uaXRpb25cIikuX2xvYWRlZFxyXG5cclxuXHRcdGNvbnN0IGJpYnRleEFycmF5OiBSZWZlcmVuY2VbXSA9IFtdO1xyXG5cdFx0Zm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGRhdGEuaXRlbXMubGVuZ3RoOyBpbmRleCsrKSB7XHJcblx0XHRcdGNvbnN0IHNlbGVjdGVkRW50cnk6IFJlZmVyZW5jZSA9IGRhdGEuaXRlbXNbaW5kZXhdO1xyXG5cdFx0XHRjb25zdCBiaWJ0ZXhBcnJheUl0ZW0gPSB7fSBhcyBSZWZlcmVuY2U7XHJcblxyXG5cdFx0XHQvL0V4dHJhY3QgdGhlIGNpdGF0aW9uIGtleS4gSWYgdGhlIGNpdGF0aW9ua2V5IGRvZXMgbm90IGV4aXN0IHNraXBcclxuXHJcblx0XHRcdGlmIChzZWxlY3RlZEVudHJ5Lmhhc093blByb3BlcnR5KFwiY2l0YXRpb25LZXlcIikgPT0gZmFsc2UpIGNvbnRpbnVlO1xyXG5cdFx0XHRiaWJ0ZXhBcnJheUl0ZW0uY2l0YXRpb25LZXkgPSBzZWxlY3RlZEVudHJ5LmNpdGF0aW9uS2V5O1xyXG5cclxuXHRcdFx0Ly9FeHRyYWN0IHRoZSB0aXRsZSBrZXlcclxuXHRcdFx0YmlidGV4QXJyYXlJdGVtLnRpdGxlID0gc2VsZWN0ZWRFbnRyeS50aXRsZTtcclxuXHJcblx0XHRcdC8vIEV4dHJhY3QgdGhlIGRhdGVcclxuXHRcdFx0YmlidGV4QXJyYXlJdGVtLmRhdGUgPSBzZWxlY3RlZEVudHJ5LmRhdGVcclxuXHRcdFx0aWYgKHNlbGVjdGVkRW50cnkuaGFzT3duUHJvcGVydHkoXCJkYXRlXCIpKSB7XHJcblx0XHRcdFx0c2VsZWN0ZWRFbnRyeS55ZWFyID0gc2VsZWN0ZWRFbnRyeS5kYXRlLm1hdGNoKC9cXGRcXGRcXGRcXGQvZ20pXHJcblx0XHRcdFx0YmlidGV4QXJyYXlJdGVtLmRhdGUgPSBzZWxlY3RlZEVudHJ5LnllYXJcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly9FeHRyYWN0IHRoZSBhdXRob3JcclxuXHRcdFx0YmlidGV4QXJyYXlJdGVtLmF1dGhvcktleSA9IGNyZWF0ZUF1dGhvcktleShzZWxlY3RlZEVudHJ5LmNyZWF0b3JzKTtcclxuXHJcblx0XHRcdC8vRXh0cmFjdCB0aGUgZGF0ZSB0aGUgZW50cmkgd2FzIG1vZGlmaWVkXHJcblx0XHRcdGJpYnRleEFycmF5SXRlbS5kYXRlTW9kaWZpZWQgPSBzZWxlY3RlZEVudHJ5LmRhdGVNb2RpZmllZDtcclxuXHJcblx0XHRcdC8vQ3JlYXRlIHRoZSByZWZlcmVuY2VcclxuXHRcdFx0YmlidGV4QXJyYXlJdGVtLmlubGluZVJlZmVyZW5jZSA9XHJcblx0XHRcdFx0YmlidGV4QXJyYXlJdGVtLmF1dGhvcktleSArXHJcblx0XHRcdFx0XCIsIChcIiArXHJcblx0XHRcdFx0YmlidGV4QXJyYXlJdGVtLmRhdGUgK1xyXG5cdFx0XHRcdFwiKSwgXCIgK1xyXG5cdFx0XHRcdFwiJ1wiICtcclxuXHRcdFx0XHRiaWJ0ZXhBcnJheUl0ZW0udGl0bGUgK1xyXG5cdFx0XHRcdFwiJ1wiICtcclxuXHRcdFx0XHRcIlxcblwiICtcclxuXHRcdFx0XHRiaWJ0ZXhBcnJheUl0ZW0uY2l0YXRpb25LZXk7XHJcblxyXG5cdFx0XHRiaWJ0ZXhBcnJheS5wdXNoKGJpYnRleEFycmF5SXRlbSk7XHJcblx0XHR9XHJcblx0XHQvLyBPcmRlciB0aGUgc3VnZ2VzdGlvbnMgZnJvbSB0aGUgb25lIG1vZGlmaWVkIG1vc3QgcmVjZW50bHlcclxuXHRcdGJpYnRleEFycmF5LnNvcnQob3JkZXJCeURhdGVNb2RpZmllZCk7XHJcblxyXG5cdFx0Ly9FeHBvcnQgYWxsIGNpdGF0aW9uS2V5c1xyXG5cdFx0dGhpcy5hbGxDaXRhdGlvbktleXMgPSBiaWJ0ZXhBcnJheS5tYXAoKGEpID0+IGEuY2l0YXRpb25LZXkpO1xyXG5cclxuXHRcdC8vQ3JlYXRlIGEgbmV3IGVudHJ5IHRvIGRvd25sb2FkIHRoZSBlbnRpcmUgbGlicmFyeSBhbmQgYWRkIGl0IGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFycmF5XHJcblx0XHRjb25zdCBzZWxlY3RMaWJyYXJ5OiBSZWZlcmVuY2UgPSB7XHJcblx0XHRcdGlubGluZVJlZmVyZW5jZTogXCJFbnRpcmUgTGlicmFyeTogXCIgKyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5iaWJQYXRoLFxyXG5cdFx0XHRjaXRhdGlvbktleTogXCJFbnRpcmUgTGlicmFyeVwiLFxyXG5cdFx0XHRhdXRob3JLZXk6IFwiXCIsXHJcblx0XHRcdGlkOiAwLFxyXG5cdFx0XHR5ZWFyOiBcIlwiLFxyXG5cdFx0XHRpdGVtVHlwZTogXCJcIixcclxuXHRcdFx0ZGF0ZTogXCJcIixcclxuXHRcdFx0ZGF0ZU1vZGlmaWVkOiBcIlwiLFxyXG5cdFx0XHRpdGVtS2V5OiBcIlwiLFxyXG5cdFx0XHR0aXRsZTogXCJcIixcclxuXHRcdFx0Y2l0YXRpb25GdWxsOiBcIlwiLFxyXG5cdFx0XHRjaXRhdGlvbkluTGluZTogXCJcIixcclxuXHRcdFx0Y2l0YXRpb25TaG9ydDogXCJcIixcclxuXHRcdFx0bG9jYWxMaWJyYXJ5TGluazogXCJcIixcclxuXHRcdFx0Y3JlYXRvcnM6IFtdLFxyXG5cdFx0XHQvLyBhZGRlZCB0aGUgbWlzc2luZyBwcm9wZXJ0aWVzXHJcblx0XHRcdGl0ZW1JRDogMCxcclxuXHRcdFx0ZmlsZTogXCJcIixcclxuXHRcdFx0bG9jYWxMaWJyYXJ5OiBcIlwiLFxyXG5cdFx0XHRzZWxlY3Q6IFwiXCIsXHJcblx0XHRcdGF0dGFjaG1lbnRzOiBbXSxcclxuXHRcdFx0bm90ZXM6IFtdLFxyXG5cdFx0XHR0YWdzOiBbXSxcclxuXHRcdFx0em90ZXJvVGFnczogW10sXHJcblx0XHR9O1xyXG5cdFx0YmlidGV4QXJyYXkudW5zaGlmdChzZWxlY3RMaWJyYXJ5KTtcclxuXHRcdC8vIFx0XVxyXG5cclxuXHRcdHRoaXMuc2VsZWN0QXJyYXkgPSBiaWJ0ZXhBcnJheTtcclxuXHRcdGF3YWl0IHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcclxuXHRcdHRoaXMuZGF0YSA9IGRhdGE7XHJcblx0fVxyXG5cdC8vIFJldHVybnMgYWxsIGF2YWlsYWJsZSBzdWdnZXN0aW9ucy5cclxuXHRnZXRJdGVtcygpOiBSZWZlcmVuY2VbXSB7XHJcblx0XHRyZXR1cm4gdGhpcy5zZWxlY3RBcnJheTtcclxuXHR9XHJcblxyXG5cdC8vIFJlbmRlcnMgZWFjaCBzdWdnZXN0aW9uIGl0ZW0uXHJcblx0Z2V0SXRlbVRleHQocmVmZXJlbmNlU2VsZWN0ZWQ6IFJlZmVyZW5jZSkge1xyXG5cdFx0cmV0dXJuIHJlZmVyZW5jZVNlbGVjdGVkLmlubGluZVJlZmVyZW5jZTtcclxuXHR9XHJcblx0YXN5bmMgdXBkYXRlU3VnZ2VzdGlvbnMoKSB7XHJcblx0XHRhd2FpdCBzdXBlci51cGRhdGVTdWdnZXN0aW9ucygpO1xyXG5cdH1cclxuXHQvLyBQZXJmb3JtIGFjdGlvbiBvbiB0aGUgc2VsZWN0ZWQgc3VnZ2VzdGlvbi5cclxuXHRhc3luYyBvbkNob29zZUl0ZW0oXHJcblx0XHRyZWZlcmVuY2VTZWxlY3RlZDogUmVmZXJlbmNlLFxyXG5cdFx0ZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudFxyXG5cdCkge1xyXG5cdFx0Ly9DcmVhdGUgYW4gYXJyYXkgd2hlcmUgeW91IHN0b3JlIHRoZSBjaXRla2V5IHRvIGJlIHByb2Nlc3NlZFxyXG5cdFx0bGV0IGNpdGVLZXlUb0JlUHJvY2Vzc2VkOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuXHJcblx0XHQvL0lmIHRoZSBlbnRpcmUgbGlicmFyeSBoYXMgYmVlbiBzZWxlY3RlZCwgdGhlbiBhZGQgYWxsIHRoZVxyXG5cdFx0aWYgKHJlZmVyZW5jZVNlbGVjdGVkLmNpdGF0aW9uS2V5ID09PSBcIkVudGlyZSBMaWJyYXJ5XCIpIHtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJhbGwgbGlicmFyeSBzZWxlY3RlZFwiKTtcclxuXHRcdFx0Y2l0ZUtleVRvQmVQcm9jZXNzZWQgPSBjaXRlS2V5VG9CZVByb2Nlc3NlZC5jb25jYXQoXHJcblx0XHRcdFx0dGhpcy5hbGxDaXRhdGlvbktleXNcclxuXHRcdFx0KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNpdGVLZXlUb0JlUHJvY2Vzc2VkLnB1c2gocmVmZXJlbmNlU2VsZWN0ZWQuY2l0YXRpb25LZXkpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIExvb3AgdG8gcHJvY2VzcyB0aGUgc2VsZWN0ZWQgbm90ZVxyXG5cdFx0Zm9yIChcclxuXHRcdFx0bGV0IGluZGV4Tm90ZVRvQmVQcm9jZXNzZWQgPSAwO1xyXG5cdFx0XHRpbmRleE5vdGVUb0JlUHJvY2Vzc2VkIDwgY2l0ZUtleVRvQmVQcm9jZXNzZWQubGVuZ3RoO1xyXG5cdFx0XHRpbmRleE5vdGVUb0JlUHJvY2Vzc2VkKytcclxuXHRcdCkge1xyXG5cdFx0XHQvL0ZpbmQgdGhlIGluZGV4IG9mIHRoZSByZWZlcmVuY2Ugc2VsZWN0ZWRcclxuXHRcdFx0Y29uc3QgaW5kZXhTZWxlY3RlZFJlZmVyZW5jZSA9IHRoaXMuZGF0YS5pdGVtcy5maW5kSW5kZXgoXHJcblx0XHRcdFx0KGl0ZW06IHsgY2l0YXRpb25LZXk6IHN0cmluZyB9KSA9PlxyXG5cdFx0XHRcdFx0aXRlbS5jaXRhdGlvbktleSA9PT1cclxuXHRcdFx0XHRcdGNpdGVLZXlUb0JlUHJvY2Vzc2VkW2luZGV4Tm90ZVRvQmVQcm9jZXNzZWRdXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0XHQvL1NlbGVjdGVkIFJlZmVyZW5jZVxyXG5cdFx0XHRjb25zdCBzZWxlY3RlZEVudHJ5OiBSZWZlcmVuY2UgPVxyXG5cdFx0XHRcdHRoaXMuZGF0YS5pdGVtc1tpbmRleFNlbGVjdGVkUmVmZXJlbmNlXTtcclxuXHJcblx0XHRcdC8vQ3JlYXRlIGFuZCBleHBvcnQgTm90ZSBmb3Igc2VsZWN0IHJlZmVyZW5jZVxyXG5cdFx0XHR0aGlzLnBsdWdpbi5jcmVhdGVOb3RlKHNlbGVjdGVkRW50cnksIHRoaXMuZGF0YSk7XHJcblxyXG5cdFx0XHQvL2lmIHRoZSBub3RlIGlzIHRoZSBsYXN0IG9uZSB0byBiZSBwcm9jZXNzZWQsIHRoZW4gb3BlbiBpdFxyXG5cdFx0XHRpZiAoaW5kZXhOb3RlVG9CZVByb2Nlc3NlZCA9PSBjaXRlS2V5VG9CZVByb2Nlc3NlZC5sZW5ndGggLSAxKSB7XHJcblx0XHRcdFx0b3BlblNlbGVjdGVkTm90ZShcclxuXHRcdFx0XHRcdHNlbGVjdGVkRW50cnksXHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBvcnRUaXRsZSxcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmV4cG9ydFBhdGhcclxuXHRcdFx0XHQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgdXBkYXRlTGlicmFyeSBleHRlbmRzIE1vZGFsIHtcclxuXHRwbHVnaW46IE15UGx1Z2luO1xyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE15UGx1Z2luKSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKSB7XHJcblx0XHRjb25zb2xlLmxvZyhcIlVwZGF0aW5nIFpvdGVybyBsaWJyYXJ5XCIpO1xyXG5cdFx0Ly9jb25zdCBkYXRhID0gcmVxdWlyZSh0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmdldEJhc2VQYXRoKCkgKyBcIi9cIiArIHRoaXMucGx1Z2luLnNldHRpbmdzLmJpYlBhdGgpXHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgdGhlIGpzb24gZmlsZSBleGlzdHNcclxuXHRcdGNvbnN0IGpzb25QYXRoID0gdGhpcy5hcHAudmF1bHQuYWRhcHRlci5nZXRCYXNlUGF0aCgpICsgXCIvXCIgKyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5iaWJQYXRoXHJcblx0XHRpZiAoIWZzLmV4aXN0c1N5bmMoanNvblBhdGgpKSB7IG5ldyBOb3RpY2UoXCJObyBCZXR0ZXJCaWJUZXggSnNvbiBmaWxlIGZvdW5kIGF0IFwiICsganNvblBhdGgpIH1cclxuXHJcblx0XHRjb25zdCByYXdkYXRhID0gZnMucmVhZEZpbGVTeW5jKFxyXG5cdFx0XHR0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmdldEJhc2VQYXRoKCkgK1xyXG5cdFx0XHRcIi9cIiArXHJcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJpYlBhdGhcclxuXHRcdCk7XHJcblx0XHRjb25zdCBkYXRhID0gSlNPTi5wYXJzZShyYXdkYXRhLnRvU3RyaW5nKCkpOyAvLyByYXdkYXRhIGlzIGEgYnVmZmVyLCBjb252ZXJ0ZWQgdG8gc3RyaW5nXHJcblxyXG5cdFx0Y29uc3QgYmlidGV4QXJyYXk6IHN0cmluZ1tdID0gW107XHJcblxyXG5cdFx0Ly9DaGVjayB0aGUgbGFzdCB0aW1lIHRoZSBsaWJyYXJ5IHdhcyB1cGRhdGVkXHJcblx0XHRjb25zdCBsYXN0VXBkYXRlID0gbmV3IERhdGUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzdFVwZGF0ZURhdGUpO1xyXG5cdFx0Ly9sb29wIHRocm91Z2ggYWxsIHRoZSBlbnRyaWVzIGluIHRoZSBiaWJsaW9ncmFwaHkgdG8gZmluZCBvdXQgd2hpY2ggb25lcyBoYXZlIGJlZW4gbW9kaWZpZWQgc2luY2UgdGhlIGxhc3QgdGltZSB0aGUgbGlicmFyeSBvbiBvYnNpZGlhbiB3YXMgdXBkYXRlZC5cclxuXHRcdGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBkYXRhLml0ZW1zLmxlbmd0aDsgaW5kZXgrKykge1xyXG5cdFx0XHQvLyBjb25zb2xlLmxvZyhpbmRleClcclxuXHRcdFx0Y29uc3Qgc2VsZWN0ZWRFbnRyeTogUmVmZXJlbmNlID0gZGF0YS5pdGVtc1tpbmRleF07XHJcblx0XHRcdGNvbnN0IGJpYnRleEFycmF5SXRlbSA9IHt9IGFzIFJlZmVyZW5jZTtcclxuXHJcblx0XHRcdC8vRXh0cmFjdCB0aGUgY2l0YXRpb24ga2V5LiBJZiB0aGUgY2l0YXRpb25rZXkgZG9lcyBub3QgZXhpc3Qgc2tpcFxyXG5cdFx0XHRpZiAoc2VsZWN0ZWRFbnRyeS5oYXNPd25Qcm9wZXJ0eShcImNpdGF0aW9uS2V5XCIpID09IGZhbHNlKSBjb250aW51ZTtcclxuXHRcdFx0YmlidGV4QXJyYXlJdGVtLmNpdGF0aW9uS2V5ID0gc2VsZWN0ZWRFbnRyeS5jaXRhdGlvbktleTtcclxuXHRcdFx0Ly8gY29uc29sZS5sb2coYmlidGV4QXJyYXlJdGVtLmNpdGF0aW9uS2V5KVxyXG5cclxuXHRcdFx0Ly9FeHRyYWN0IHRoZSBkYXRlIHRoZSBlbnRyeSB3YXMgbW9kaWZpZWRcclxuXHRcdFx0Y29uc3Qgbm90ZURhdGVNb2RpZmllZEFycmF5ID0gW11cclxuXHRcdFx0bm90ZURhdGVNb2RpZmllZEFycmF5LnB1c2goc2VsZWN0ZWRFbnRyeS5kYXRlTW9kaWZpZWQpXHJcblx0XHRcdGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzZWxlY3RlZEVudHJ5Lm5vdGVzLmxlbmd0aDsgaW5kZXgrKykge1xyXG5cdFx0XHRcdG5vdGVEYXRlTW9kaWZpZWRBcnJheS5wdXNoKHNlbGVjdGVkRW50cnkubm90ZXNbaW5kZXhdLmRhdGVNb2RpZmllZCk7XHJcblx0XHRcdFx0bm90ZURhdGVNb2RpZmllZEFycmF5LnNvcnQoKGZpcnN0RWxlbWVudCwgc2Vjb25kRWxlbWVudCkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKGZpcnN0RWxlbWVudCA+IHNlY29uZEVsZW1lbnQpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIC0xO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKGZpcnN0RWxlbWVudCA8IHNlY29uZEVsZW1lbnQpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIDE7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRyZXR1cm4gMDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y29uc3QgZGF0ZW1vZGlmaWVkID0gbmV3IERhdGUobm90ZURhdGVNb2RpZmllZEFycmF5WzBdKTtcclxuXHJcblx0XHRcdGlmIChkYXRlbW9kaWZpZWQgPCBsYXN0VXBkYXRlKSBjb250aW51ZTsgLy9za2lwIGlmIGl0IHdhcyBtb2RpZmllZCBiZWZvcmUgdGhlIGxhc3QgdXBkYXRlXHJcblxyXG5cdFx0XHQvL3NraXAgaWYgdGhlIHNldHRpbmcgaXMgdG8gdXBkYXRlIG9ubHkgZXhpc3Rpbmcgbm90ZSBhbmQgdGggZW5vdGUgaXMgbm90IGZvdW5kIGF0IHRoZSBnaXZlIGZvbGRlclxyXG5cdFx0XHRpZiAoXHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudXBkYXRlTGlicmFyeSA9PT1cclxuXHRcdFx0XHRcIk9ubHkgdXBkYXRlIGV4aXN0aW5nIG5vdGVzXCIgJiZcclxuXHRcdFx0XHQhZnMuZXhpc3RzU3luYyhcclxuXHRcdFx0XHRcdGNyZWF0ZU5vdGVUaXRsZShcclxuXHRcdFx0XHRcdFx0c2VsZWN0ZWRFbnRyeSxcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhwb3J0VGl0bGUsXHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmV4cG9ydFBhdGhcclxuXHRcdFx0XHRcdClcclxuXHRcdFx0XHQpXHJcblx0XHRcdClcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHJcblx0XHRcdC8vQ3JlYXRlIGFuZCBleHBvcnQgTm90ZSBmb3Igc2VsZWN0IHJlZmVyZW5jZVxyXG5cdFx0XHR0aGlzLnBsdWdpbi5jcmVhdGVOb3RlKHNlbGVjdGVkRW50cnksIGRhdGEpO1xyXG5cclxuXHRcdFx0YmlidGV4QXJyYXkucHVzaChzZWxlY3RlZEVudHJ5LmNpdGF0aW9uS2V5KTtcclxuXHRcdH1cclxuXHJcblx0XHQvL0NvbnNvbGUubG9nIHRoZSBudW1iZXIgb2YgaXRlbXMgdXBkYXRlZFxyXG5cdFx0bmV3IE5vdGljZShcIlVwZGF0ZWQgXCIgKyBiaWJ0ZXhBcnJheS5sZW5ndGggKyBcIiBlbnRyaWVzXCIpO1xyXG5cdFx0Ly9VcGRhdGUgdGhlIGRhdGUgd2hlbiB0aGUgdXBkYXRlIHdhcyBsYXN0IGRvbmVcclxuXHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc3RVcGRhdGVEYXRlID0gbmV3IERhdGUoKTtcclxuXHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKSB7IH1cclxufVxyXG4iLCAiaW1wb3J0IHsgbm9ybWFsaXplUGF0aCB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQge1xyXG5cdENyZWF0b3IsXHJcblx0Q3JlYXRvckFycmF5LFxyXG5cdFJlZmVyZW5jZSxcclxufSBmcm9tIFwiLi90eXBlc1wiO1xyXG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xyXG5cclxuaW1wb3J0IHsgVEVNUExBVEVfQlJBQ0tFVF9SRUcsIFRFTVBMQVRFX1JFRyB9IGZyb20gXCIuL2NvbnN0YW50c1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VBbGxUZW1wbGF0ZXMoXHJcblx0ZW50cmllc0FycmF5OiBzdHJpbmdbXSxcclxuXHRub3RlOiBzdHJpbmcsXHJcblx0c2VsZWN0ZWRFbnRyeTogUmVmZXJlbmNlXHJcbikge1xyXG5cdGxldCBjb3B5ID0gbm90ZS5zbGljZSgpO1xyXG5cdGZvciAobGV0IHogPSAwOyB6IDwgZW50cmllc0FycmF5Lmxlbmd0aDsgeisrKSB7XHJcblx0XHQvLyBcdCBJZGVudGlmeSB0aGUga2V5d29yZCB0byBiZSByZXBsYWNlZFxyXG5cdFx0Y29uc3QgS1cgPSBlbnRyaWVzQXJyYXlbel07XHJcblxyXG5cdFx0Y29uc3QgS1dfQnJhY2tldHMgPSBcInt7XCIgKyBLVyArIFwifX1cIjtcclxuXHRcdC8vIFx0IHJlcGxhY2UgdGhlIGtleXdvcmQgaW4gdGhlIHRlbXBsYXRlXHJcblxyXG5cdFx0Y29weSA9IHJlcGxhY2VUZW1wbGF0ZShcclxuXHRcdFx0Y29weSxcclxuXHRcdFx0S1dfQnJhY2tldHMsXHJcblx0XHRcdGAke3NlbGVjdGVkRW50cnlbS1cgYXMga2V5b2YgUmVmZXJlbmNlXX1gXHJcblx0XHQpO1xyXG5cclxuXHRcdC8vIGZpeGVkIHRoZSB0eXBlXHJcblx0fVxyXG5cdHJldHVybiBjb3B5O1xyXG59XHJcblxyXG5mdW5jdGlvbiBlc2NhcGVSZWdFeHAoc3RyaW5nQWRkOiBzdHJpbmcpIHtcclxuXHRyZXR1cm4gc3RyaW5nQWRkLnJlcGxhY2UoL1suKitcXC0/XiR7fSgpfFtcXF1cXFxcXS9nLCBcIlxcXFwkJlwiKTsgLy8gJCYgbWVhbnMgdGhlIHdob2xlIG1hdGNoZWQgc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlVGVtcGxhdGUoXHJcblx0c3RyaW5nQWRkOiBzdHJpbmcsXHJcblx0ZmluZDogc3RyaW5nLFxyXG5cdHJlcGxhY2U6IHN0cmluZ1xyXG4pIHtcclxuXHRyZXR1cm4gc3RyaW5nQWRkLnJlcGxhY2UobmV3IFJlZ0V4cChlc2NhcGVSZWdFeHAoZmluZCksIFwiZ1wiKSwgcmVwbGFjZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBtYWtlV2lraSA9IChzdHI6IHN0cmluZykgPT4gXCJbW1wiICsgc3RyICsgXCJdXVwiO1xyXG5leHBvcnQgY29uc3QgbWFrZVF1b3RlcyA9IChzdHI6IHN0cmluZykgPT4gJ1wiJyArIHN0ciArICdcIic7XHJcbmV4cG9ydCBjb25zdCBtYWtlVGFncyA9IChzdHI6IHN0cmluZykgPT4gXCIjXCIgKyBzdHI7XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlQXV0aG9yS2V5ID0gKGNyZWF0b3JzOiBDcmVhdG9yQXJyYXkpID0+IHtcclxuXHRjb25zdCBhdXRob3JLZXk6IHN0cmluZ1tdID0gW107XHJcblx0Y29uc3QgZWRpdG9yS2V5OiBzdHJpbmdbXSA9IFtdO1xyXG5cdGxldCBhdXRob3JLZXlGaXhlZCA9IFwiXCI7XHJcblx0bGV0IGVkaXRvcktleUZpeGVkID0gXCJcIjtcclxuXHRmb3IgKGxldCBjcmVhdG9yaW5kZXggPSAwOyBjcmVhdG9yaW5kZXggPCBjcmVhdG9ycy5sZW5ndGg7IGNyZWF0b3JpbmRleCsrKSB7XHJcblx0XHRjb25zdCBjcmVhdG9yOiBDcmVhdG9yID0gY3JlYXRvcnNbY3JlYXRvcmluZGV4XTsgLy9zZWxlY3QgdGhlIGF1dGhvclxyXG5cclxuXHRcdGlmIChjcmVhdG9yLmNyZWF0b3JUeXBlID09PSBcImF1dGhvclwiKSB7XHJcblx0XHRcdGlmIChjcmVhdG9yLmhhc093blByb3BlcnR5KFwibmFtZVwiKSkge1xyXG5cdFx0XHRcdC8vYXV0aG9yTGlzdC5wdXNoKGNyZWF0b3IubmFtZSlcclxuXHRcdFx0XHRhdXRob3JLZXkucHVzaChjcmVhdG9yLm5hbWUpO1xyXG5cdFx0XHR9IGVsc2UgaWYgKFxyXG5cdFx0XHRcdGNyZWF0b3IuaGFzT3duUHJvcGVydHkoXCJsYXN0TmFtZVwiKSAmJlxyXG5cdFx0XHRcdGNyZWF0b3IuaGFzT3duUHJvcGVydHkoXCJmaXJzdE5hbWVcIilcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0Ly9hdXRob3JMaXN0LnB1c2goY3JlYXRvci5sYXN0TmFtZSArIFwiLCBcIiArIGNyZWF0b3IuZmlyc3ROYW1lKVxyXG5cdFx0XHRcdGF1dGhvcktleS5wdXNoKGNyZWF0b3IubGFzdE5hbWUpO1xyXG5cdFx0XHR9IGVsc2UgaWYgKFxyXG5cdFx0XHRcdGNyZWF0b3IuaGFzT3duUHJvcGVydHkoXCJsYXN0TmFtZVwiKSAmJlxyXG5cdFx0XHRcdCFjcmVhdG9yLmhhc093blByb3BlcnR5KFwiZmlyc3ROYW1lXCIpXHJcblx0XHRcdCkge1xyXG5cdFx0XHRcdC8vYXV0aG9yTGlzdC5wdXNoKGNyZWF0b3IubGFzdE5hbWUpXHJcblx0XHRcdFx0YXV0aG9yS2V5LnB1c2goY3JlYXRvci5sYXN0TmFtZSk7XHJcblx0XHRcdH0gZWxzZSBpZiAoXHJcblx0XHRcdFx0IWNyZWF0b3IuaGFzT3duUHJvcGVydHkoXCJsYXN0TmFtZVwiKSAmJlxyXG5cdFx0XHRcdGNyZWF0b3IuaGFzT3duUHJvcGVydHkoXCJmaXJzdE5hbWVcIilcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0Ly9hdXRob3JMaXN0LnB1c2goY3JlYXRvci5maXJzdE5hbWUpXHJcblx0XHRcdFx0YXV0aG9yS2V5LnB1c2goY3JlYXRvci5maXJzdE5hbWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2UgaWYgKGNyZWF0b3IuY3JlYXRvclR5cGUgPT09IFwiZWRpdG9yXCIpIHtcclxuXHRcdFx0aWYgKGNyZWF0b3IuaGFzT3duUHJvcGVydHkoXCJuYW1lXCIpKSB7XHJcblx0XHRcdFx0Ly9lZGl0b3JMaXN0LnB1c2goY3JlYXRvci5uYW1lKVxyXG5cdFx0XHRcdGVkaXRvcktleS5wdXNoKGNyZWF0b3IubmFtZSk7XHJcblx0XHRcdH0gZWxzZSBpZiAoXHJcblx0XHRcdFx0Y3JlYXRvci5oYXNPd25Qcm9wZXJ0eShcImxhc3ROYW1lXCIpICYmXHJcblx0XHRcdFx0Y3JlYXRvci5oYXNPd25Qcm9wZXJ0eShcImZpcnN0TmFtZVwiKVxyXG5cdFx0XHQpIHtcclxuXHRcdFx0XHQvL2VkaXRvckxpc3QucHVzaChjcmVhdG9yLmxhc3ROYW1lICsgXCIsIFwiICsgY3JlYXRvci5maXJzdE5hbWUpXHJcblx0XHRcdFx0ZWRpdG9yS2V5LnB1c2goY3JlYXRvci5sYXN0TmFtZSk7XHJcblx0XHRcdH0gZWxzZSBpZiAoXHJcblx0XHRcdFx0Y3JlYXRvci5oYXNPd25Qcm9wZXJ0eShcImxhc3ROYW1lXCIpICYmXHJcblx0XHRcdFx0IWNyZWF0b3IuaGFzT3duUHJvcGVydHkoXCJmaXJzdE5hbWVcIilcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0Ly9lZGl0b3JMaXN0LnB1c2goY3JlYXRvci5sYXN0TmFtZSlcclxuXHRcdFx0XHRlZGl0b3JLZXkucHVzaChjcmVhdG9yLmxhc3ROYW1lKTtcclxuXHRcdFx0fSBlbHNlIGlmIChcclxuXHRcdFx0XHQhY3JlYXRvci5oYXNPd25Qcm9wZXJ0eShcImxhc3ROYW1lXCIpICYmXHJcblx0XHRcdFx0Y3JlYXRvci5oYXNPd25Qcm9wZXJ0eShcImZpcnN0TmFtZVwiKVxyXG5cdFx0XHQpIHtcclxuXHRcdFx0XHQvL2VkaXRvckxpc3QucHVzaChjcmVhdG9yLmZpcnN0TmFtZSlcclxuXHRcdFx0XHRlZGl0b3JLZXkucHVzaChjcmVhdG9yLmZpcnN0TmFtZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vQWRqdXN0IHRoZSBhdXRob3JLZXkgZGVwZW5kaW5nIG9uIHRoZSBudW1iZXIgb2YgYXV0aG9yc1xyXG5cclxuXHRpZiAoYXV0aG9yS2V5Lmxlbmd0aCA9PSAxKSB7XHJcblx0XHRhdXRob3JLZXlGaXhlZCA9IGF1dGhvcktleVswXTtcclxuXHR9XHJcblx0aWYgKGF1dGhvcktleS5sZW5ndGggPT0gMikge1xyXG5cdFx0YXV0aG9yS2V5Rml4ZWQgPSBhdXRob3JLZXlbMF0gKyBcIiBhbmQgXCIgKyBhdXRob3JLZXlbMV07XHJcblx0fVxyXG5cclxuXHRpZiAoYXV0aG9yS2V5Lmxlbmd0aCA9PSAzKSB7XHJcblx0XHRhdXRob3JLZXlGaXhlZCA9IGF1dGhvcktleVswXSArIFwiLCBcIiArIGF1dGhvcktleVsxXSArIFwiIGFuZCBcIiArIGF1dGhvcktleVsyXTtcclxuXHR9XHJcblxyXG5cdGlmIChhdXRob3JLZXkubGVuZ3RoID4gMykge1xyXG5cdFx0YXV0aG9yS2V5Rml4ZWQgPSBhdXRob3JLZXlbMF0gKyBcIiBldCBhbC5cIjtcclxuXHR9XHJcblx0aWYgKGF1dGhvcktleS5sZW5ndGggPiAwKSB7IHJldHVybiBhdXRob3JLZXlGaXhlZCB9XHJcblxyXG5cdC8vSWYgdGhlcmUgYXJlIG5vIGF1dGhvcnMgKGJlY2F1c2UgaXQgaXMgYW4gZWRpdGVkIGJvb2spLCB0aGVuIHJldHVybnMgdGhlIG5hbWUgb2YgdGhlIGVkaXRvcnNcclxuXHRpZiAoZWRpdG9yS2V5Lmxlbmd0aCA9PSAxKSB7XHJcblx0XHRlZGl0b3JLZXlGaXhlZCA9IGVkaXRvcktleVswXTtcclxuXHR9XHJcblx0aWYgKGVkaXRvcktleS5sZW5ndGggPT0gMikge1xyXG5cdFx0ZWRpdG9yS2V5Rml4ZWQgPSBlZGl0b3JLZXlbMF0gKyBcIiBhbmQgXCIgKyBlZGl0b3JLZXlbMV07XHJcblx0fVxyXG5cclxuXHRpZiAoZWRpdG9yS2V5Lmxlbmd0aCA9PSAzKSB7XHJcblx0XHRlZGl0b3JLZXlGaXhlZCA9IGVkaXRvcktleVswXSArIFwiLCBcIiArIGVkaXRvcktleVsxXSArIFwiIGFuZCBcIiArIGVkaXRvcktleVsyXTtcclxuXHR9XHJcblxyXG5cdGlmIChhdXRob3JLZXkubGVuZ3RoID4gMykge1xyXG5cdFx0ZWRpdG9yS2V5Rml4ZWQgPSBlZGl0b3JLZXlbMF0gKyBcIiBldCBhbC5cIjtcclxuXHR9XHJcblx0aWYgKGVkaXRvcktleS5sZW5ndGggPiAwKSB7IHJldHVybiBlZGl0b3JLZXlGaXhlZCB9XHJcblxyXG5cclxufTtcclxuXHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlQXV0aG9yS2V5RnVsbE5hbWUgPSAoY3JlYXRvcnM6IENyZWF0b3JBcnJheSkgPT4ge1xyXG5cdGNvbnN0IGF1dGhvcktleTogc3RyaW5nW10gPSBbXTtcclxuXHRjb25zdCBhdXRob3JLZXlSZXZlcnNlOiBzdHJpbmdbXSA9IFtdO1xyXG5cdGNvbnN0IGVkaXRvcktleTogc3RyaW5nW10gPSBbXTtcclxuXHRjb25zdCBlZGl0b3JLZXlSZXZlcnNlOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuXHRsZXQgYXV0aG9yS2V5Rml4ZWQgPSBcIlwiO1xyXG5cdGxldCBlZGl0b3JLZXlGaXhlZCA9IFwiXCI7XHJcblx0Zm9yIChsZXQgY3JlYXRvcmluZGV4ID0gMDsgY3JlYXRvcmluZGV4IDwgY3JlYXRvcnMubGVuZ3RoOyBjcmVhdG9yaW5kZXgrKykge1xyXG5cclxuXHRcdGNvbnN0IGNyZWF0b3I6IENyZWF0b3IgPSBjcmVhdG9yc1tjcmVhdG9yaW5kZXhdOyAvL3NlbGVjdCB0aGUgYXV0aG9yXHJcblx0XHRpZiAoY3JlYXRvci5jcmVhdG9yVHlwZSA9PT0gXCJhdXRob3JcIikge1xyXG5cdFx0XHRpZiAoY3JlYXRvci5oYXNPd25Qcm9wZXJ0eShcIm5hbWVcIikpIHtcclxuXHRcdFx0XHQvL2F1dGhvckxpc3QucHVzaChjcmVhdG9yLm5hbWUpXHJcblx0XHRcdFx0YXV0aG9yS2V5LnB1c2goY3JlYXRvci5uYW1lKTtcclxuXHRcdFx0fSBlbHNlIGlmIChcclxuXHRcdFx0XHRjcmVhdG9yLmhhc093blByb3BlcnR5KFwibGFzdE5hbWVcIikgJiZcclxuXHRcdFx0XHRjcmVhdG9yLmhhc093blByb3BlcnR5KFwiZmlyc3ROYW1lXCIpXHJcblx0XHRcdCkge1xyXG5cdFx0XHRcdGF1dGhvcktleS5wdXNoKGNyZWF0b3IubGFzdE5hbWUgKyBcIiwgXCIgKyBjcmVhdG9yLmZpcnN0TmFtZSk7XHJcblx0XHRcdFx0YXV0aG9yS2V5UmV2ZXJzZS5wdXNoKGNyZWF0b3IuZmlyc3ROYW1lICsgXCIgXCIgKyBjcmVhdG9yLmxhc3ROYW1lKTtcclxuXHJcblx0XHRcdH0gZWxzZSBpZiAoXHJcblx0XHRcdFx0Y3JlYXRvci5oYXNPd25Qcm9wZXJ0eShcImxhc3ROYW1lXCIpICYmXHJcblx0XHRcdFx0IWNyZWF0b3IuaGFzT3duUHJvcGVydHkoXCJmaXJzdE5hbWVcIilcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0Ly9hdXRob3JMaXN0LnB1c2goY3JlYXRvci5sYXN0TmFtZSlcclxuXHRcdFx0XHRhdXRob3JLZXkucHVzaChjcmVhdG9yLmxhc3ROYW1lKTtcclxuXHRcdFx0fSBlbHNlIGlmIChcclxuXHRcdFx0XHQhY3JlYXRvci5oYXNPd25Qcm9wZXJ0eShcImxhc3ROYW1lXCIpICYmXHJcblx0XHRcdFx0Y3JlYXRvci5oYXNPd25Qcm9wZXJ0eShcImZpcnN0TmFtZVwiKVxyXG5cdFx0XHQpIHtcclxuXHRcdFx0XHQvL2F1dGhvckxpc3QucHVzaChjcmVhdG9yLmZpcnN0TmFtZSlcclxuXHRcdFx0XHRhdXRob3JLZXkucHVzaChjcmVhdG9yLmZpcnN0TmFtZSk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAoY3JlYXRvci5jcmVhdG9yVHlwZSA9PT0gXCJlZGl0b3JcIikge1xyXG5cdFx0XHRpZiAoY3JlYXRvci5oYXNPd25Qcm9wZXJ0eShcIm5hbWVcIikpIHtcclxuXHRcdFx0XHQvL2VkaXRvckxpc3QucHVzaChjcmVhdG9yLm5hbWUpXHJcblx0XHRcdFx0ZWRpdG9yS2V5LnB1c2goY3JlYXRvci5uYW1lKTtcclxuXHRcdFx0fSBlbHNlIGlmIChcclxuXHRcdFx0XHRjcmVhdG9yLmhhc093blByb3BlcnR5KFwibGFzdE5hbWVcIikgJiZcclxuXHRcdFx0XHRjcmVhdG9yLmhhc093blByb3BlcnR5KFwiZmlyc3ROYW1lXCIpXHJcblx0XHRcdCkge1xyXG5cdFx0XHRcdGVkaXRvcktleS5wdXNoKGNyZWF0b3IubGFzdE5hbWUgKyBcIiwgXCIgKyBjcmVhdG9yLmZpcnN0TmFtZSk7XHJcblx0XHRcdFx0ZWRpdG9yS2V5UmV2ZXJzZS5wdXNoKGNyZWF0b3IuZmlyc3ROYW1lICsgXCIgXCIgKyBjcmVhdG9yLmxhc3ROYW1lKTtcclxuXHJcblx0XHRcdH0gZWxzZSBpZiAoXHJcblx0XHRcdFx0Y3JlYXRvci5oYXNPd25Qcm9wZXJ0eShcImxhc3ROYW1lXCIpICYmXHJcblx0XHRcdFx0IWNyZWF0b3IuaGFzT3duUHJvcGVydHkoXCJmaXJzdE5hbWVcIilcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0Ly9lZGl0b3JMaXN0LnB1c2goY3JlYXRvci5sYXN0TmFtZSlcclxuXHRcdFx0XHRlZGl0b3JLZXkucHVzaChjcmVhdG9yLmxhc3ROYW1lKTtcclxuXHRcdFx0fSBlbHNlIGlmIChcclxuXHRcdFx0XHQhY3JlYXRvci5oYXNPd25Qcm9wZXJ0eShcImxhc3ROYW1lXCIpICYmXHJcblx0XHRcdFx0Y3JlYXRvci5oYXNPd25Qcm9wZXJ0eShcImZpcnN0TmFtZVwiKVxyXG5cdFx0XHQpIHtcclxuXHRcdFx0XHQvL2VkaXRvckxpc3QucHVzaChjcmVhdG9yLmZpcnN0TmFtZSlcclxuXHRcdFx0XHRlZGl0b3JLZXkucHVzaChjcmVhdG9yLmZpcnN0TmFtZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vQWRqdXN0IHRoZSBhdXRob3JLZXkgZGVwZW5kaW5nIG9uIHRoZSBudW1iZXIgb2YgYXV0aG9yc1xyXG5cclxuXHRpZiAoYXV0aG9yS2V5Lmxlbmd0aCA9PSAxKSB7XHJcblx0XHRhdXRob3JLZXlGaXhlZCA9IGF1dGhvcktleVswXTtcclxuXHR9XHJcblx0aWYgKGF1dGhvcktleS5sZW5ndGggPT0gMikge1xyXG5cdFx0YXV0aG9yS2V5Rml4ZWQgPSBhdXRob3JLZXlbMF0gKyBcIiBhbmQgXCIgKyBhdXRob3JLZXlSZXZlcnNlWzFdO1xyXG5cdH1cclxuXHJcblx0aWYgKGF1dGhvcktleS5sZW5ndGggPT0gMykge1xyXG5cdFx0YXV0aG9yS2V5Rml4ZWQgPSBhdXRob3JLZXlbMF0gKyBcIiwgXCIgKyBhdXRob3JLZXlSZXZlcnNlWzFdICsgXCIgYW5kIFwiICsgYXV0aG9yS2V5UmV2ZXJzZVsyXTtcclxuXHR9XHJcblxyXG5cdGlmIChhdXRob3JLZXkubGVuZ3RoID4gMykge1xyXG5cdFx0YXV0aG9yS2V5Rml4ZWQgPSBhdXRob3JLZXlbMF0gKyBcIiBldCBhbC5cIjtcclxuXHR9XHJcblxyXG5cdGlmIChhdXRob3JLZXkubGVuZ3RoID4gMCkgeyByZXR1cm4gYXV0aG9yS2V5Rml4ZWQgfVxyXG5cclxuXHQvL0lmIHRoZXJlIGFyZSBubyBhdXRob3JzIChiZWNhdXNlIGl0IGlzIGFuIGVkaXRlZCBib29rKSwgdGhlbiByZXR1cm5zIHRoZSBuYW1lIG9mIHRoZSBlZGl0b3JzXHJcblx0aWYgKGVkaXRvcktleS5sZW5ndGggPT0gMSkge1xyXG5cdFx0ZWRpdG9yS2V5Rml4ZWQgPSBlZGl0b3JLZXlbMF07XHJcblx0fVxyXG5cdGlmIChlZGl0b3JLZXkubGVuZ3RoID09IDIpIHtcclxuXHRcdGVkaXRvcktleUZpeGVkID0gZWRpdG9yS2V5WzBdICsgXCIgYW5kIFwiICsgZWRpdG9yS2V5UmV2ZXJzZVsxXTtcclxuXHR9XHJcblxyXG5cdGlmIChlZGl0b3JLZXkubGVuZ3RoID09IDMpIHtcclxuXHRcdGVkaXRvcktleUZpeGVkID0gZWRpdG9yS2V5WzBdICsgXCIsIFwiICsgZWRpdG9yS2V5UmV2ZXJzZVsxXSArIFwiIGFuZCBcIiArIGVkaXRvcktleVJldmVyc2VbMl07XHJcblx0fVxyXG5cclxuXHRpZiAoYXV0aG9yS2V5Lmxlbmd0aCA+IDMpIHtcclxuXHRcdGVkaXRvcktleUZpeGVkID0gZWRpdG9yS2V5WzBdICsgXCIgZXQgYWwuXCI7XHJcblx0fVxyXG5cdGlmIChlZGl0b3JLZXkubGVuZ3RoID4gMCkgeyByZXR1cm4gZWRpdG9yS2V5Rml4ZWQgfVxyXG5cclxuXHJcbn07XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUF1dGhvcktleUluaXRpYWxzID0gKGNyZWF0b3JzOiBDcmVhdG9yQXJyYXkpID0+IHtcclxuXHRjb25zdCBhdXRob3JLZXk6IHN0cmluZ1tdID0gW107XHJcblx0Y29uc3QgZWRpdG9yS2V5OiBzdHJpbmdbXSA9IFtdO1xyXG5cdGxldCBhdXRob3JLZXlGaXhlZCA9IFwiXCI7XHJcblx0bGV0IGVkaXRvcktleUZpeGVkID0gXCJcIjtcclxuXHRmb3IgKGxldCBjcmVhdG9yaW5kZXggPSAwOyBjcmVhdG9yaW5kZXggPCBjcmVhdG9ycy5sZW5ndGg7IGNyZWF0b3JpbmRleCsrKSB7XHJcblxyXG5cdFx0Y29uc3QgY3JlYXRvcjogQ3JlYXRvciA9IGNyZWF0b3JzW2NyZWF0b3JpbmRleF07IC8vc2VsZWN0IHRoZSBhdXRob3JcclxuXHRcdGlmIChjcmVhdG9yLmNyZWF0b3JUeXBlID09PSBcImF1dGhvclwiKSB7XHJcblx0XHRcdGlmIChjcmVhdG9yLmhhc093blByb3BlcnR5KFwibmFtZVwiKSkge1xyXG5cdFx0XHRcdC8vYXV0aG9yTGlzdC5wdXNoKGNyZWF0b3IubmFtZSlcclxuXHRcdFx0XHRhdXRob3JLZXkucHVzaChjcmVhdG9yLm5hbWUpO1xyXG5cdFx0XHR9IGVsc2UgaWYgKFxyXG5cdFx0XHRcdGNyZWF0b3IuaGFzT3duUHJvcGVydHkoXCJsYXN0TmFtZVwiKSAmJlxyXG5cdFx0XHRcdGNyZWF0b3IuaGFzT3duUHJvcGVydHkoXCJmaXJzdE5hbWVcIilcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0YXV0aG9yS2V5LnB1c2goY3JlYXRvci5sYXN0TmFtZSArIFwiLCBcIiArIGNyZWF0b3IuZmlyc3ROYW1lLnN1YnN0cmluZygwLCAxKSArIFwiLlwiKTtcclxuXHJcblx0XHRcdH0gZWxzZSBpZiAoXHJcblx0XHRcdFx0Y3JlYXRvci5oYXNPd25Qcm9wZXJ0eShcImxhc3ROYW1lXCIpICYmXHJcblx0XHRcdFx0IWNyZWF0b3IuaGFzT3duUHJvcGVydHkoXCJmaXJzdE5hbWVcIilcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0Ly9hdXRob3JMaXN0LnB1c2goY3JlYXRvci5sYXN0TmFtZSlcclxuXHRcdFx0XHRhdXRob3JLZXkucHVzaChjcmVhdG9yLmxhc3ROYW1lKTtcclxuXHRcdFx0fSBlbHNlIGlmIChcclxuXHRcdFx0XHQhY3JlYXRvci5oYXNPd25Qcm9wZXJ0eShcImxhc3ROYW1lXCIpICYmXHJcblx0XHRcdFx0Y3JlYXRvci5oYXNPd25Qcm9wZXJ0eShcImZpcnN0TmFtZVwiKVxyXG5cdFx0XHQpIHtcclxuXHRcdFx0XHQvL2F1dGhvckxpc3QucHVzaChjcmVhdG9yLmZpcnN0TmFtZSlcclxuXHRcdFx0XHRhdXRob3JLZXkucHVzaChjcmVhdG9yLmZpcnN0TmFtZSk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAoY3JlYXRvci5jcmVhdG9yVHlwZSA9PT0gXCJlZGl0b3JcIikge1xyXG5cdFx0XHRpZiAoY3JlYXRvci5oYXNPd25Qcm9wZXJ0eShcIm5hbWVcIikpIHtcclxuXHRcdFx0XHQvL2VkaXRvckxpc3QucHVzaChjcmVhdG9yLm5hbWUpXHJcblx0XHRcdFx0ZWRpdG9yS2V5LnB1c2goY3JlYXRvci5uYW1lKTtcclxuXHRcdFx0fSBlbHNlIGlmIChcclxuXHRcdFx0XHRjcmVhdG9yLmhhc093blByb3BlcnR5KFwibGFzdE5hbWVcIikgJiZcclxuXHRcdFx0XHRjcmVhdG9yLmhhc093blByb3BlcnR5KFwiZmlyc3ROYW1lXCIpXHJcblx0XHRcdCkge1xyXG5cdFx0XHRcdGVkaXRvcktleS5wdXNoKGNyZWF0b3IubGFzdE5hbWUgKyBcIiwgXCIgKyBjcmVhdG9yLmZpcnN0TmFtZS5zdWJzdHJpbmcoMCwgMSkgKyBcIi5cIik7XHJcblx0XHRcdH0gZWxzZSBpZiAoXHJcblx0XHRcdFx0Y3JlYXRvci5oYXNPd25Qcm9wZXJ0eShcImxhc3ROYW1lXCIpICYmXHJcblx0XHRcdFx0IWNyZWF0b3IuaGFzT3duUHJvcGVydHkoXCJmaXJzdE5hbWVcIilcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0Ly9lZGl0b3JMaXN0LnB1c2goY3JlYXRvci5sYXN0TmFtZSlcclxuXHRcdFx0XHRlZGl0b3JLZXkucHVzaChjcmVhdG9yLmxhc3ROYW1lKTtcclxuXHRcdFx0fSBlbHNlIGlmIChcclxuXHRcdFx0XHQhY3JlYXRvci5oYXNPd25Qcm9wZXJ0eShcImxhc3ROYW1lXCIpICYmXHJcblx0XHRcdFx0Y3JlYXRvci5oYXNPd25Qcm9wZXJ0eShcImZpcnN0TmFtZVwiKVxyXG5cdFx0XHQpIHtcclxuXHRcdFx0XHQvL2VkaXRvckxpc3QucHVzaChjcmVhdG9yLmZpcnN0TmFtZSlcclxuXHRcdFx0XHRlZGl0b3JLZXkucHVzaChjcmVhdG9yLmZpcnN0TmFtZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vQWRqdXN0IHRoZSBhdXRob3JLZXkgZGVwZW5kaW5nIG9uIHRoZSBudW1iZXIgb2YgYXV0aG9yc1xyXG5cclxuXHRpZiAoYXV0aG9yS2V5Lmxlbmd0aCA9PSAxKSB7XHJcblx0XHRhdXRob3JLZXlGaXhlZCA9IGF1dGhvcktleVswXTtcclxuXHR9XHJcblx0aWYgKGF1dGhvcktleS5sZW5ndGggPT0gMikge1xyXG5cdFx0YXV0aG9yS2V5Rml4ZWQgPSBhdXRob3JLZXlbMF0gKyBcIiBhbmQgXCIgKyBhdXRob3JLZXlbMV07XHJcblx0fVxyXG5cclxuXHRpZiAoYXV0aG9yS2V5Lmxlbmd0aCA9PSAzKSB7XHJcblx0XHRhdXRob3JLZXlGaXhlZCA9IGF1dGhvcktleVswXSArIFwiLCBcIiArIGF1dGhvcktleVsxXSArIFwiIGFuZCBcIiArIGF1dGhvcktleVsyXTtcclxuXHR9XHJcblxyXG5cdGlmIChhdXRob3JLZXkubGVuZ3RoID4gMykge1xyXG5cdFx0YXV0aG9yS2V5Rml4ZWQgPSBhdXRob3JLZXlbMF0gKyBcIiBldCBhbC5cIjtcclxuXHR9XHJcblx0aWYgKGF1dGhvcktleS5sZW5ndGggPiAwKSB7IHJldHVybiBhdXRob3JLZXlGaXhlZCB9XHJcblxyXG5cdC8vSWYgdGhlcmUgYXJlIG5vIGF1dGhvcnMgKGJlY2F1c2UgaXQgaXMgYW4gZWRpdGVkIGJvb2spLCB0aGVuIHJldHVybnMgdGhlIG5hbWUgb2YgdGhlIGVkaXRvcnNcclxuXHRpZiAoZWRpdG9yS2V5Lmxlbmd0aCA9PSAxKSB7XHJcblx0XHRlZGl0b3JLZXlGaXhlZCA9IGVkaXRvcktleVswXTtcclxuXHR9XHJcblx0aWYgKGVkaXRvcktleS5sZW5ndGggPT0gMikge1xyXG5cdFx0ZWRpdG9yS2V5Rml4ZWQgPSBlZGl0b3JLZXlbMF0gKyBcIiBhbmQgXCIgKyBlZGl0b3JLZXlbMV07XHJcblx0fVxyXG5cclxuXHRpZiAoZWRpdG9yS2V5Lmxlbmd0aCA9PSAzKSB7XHJcblx0XHRlZGl0b3JLZXlGaXhlZCA9IGVkaXRvcktleVswXSArIFwiLCBcIiArIGVkaXRvcktleVsxXSArIFwiIGFuZCBcIiArIGVkaXRvcktleVsyXTtcclxuXHR9XHJcblxyXG5cdGlmIChhdXRob3JLZXkubGVuZ3RoID4gMykge1xyXG5cdFx0ZWRpdG9yS2V5Rml4ZWQgPSBlZGl0b3JLZXlbMF0gKyBcIiBldCBhbC5cIjtcclxuXHR9XHJcblx0aWYgKGVkaXRvcktleS5sZW5ndGggPiAwKSB7IHJldHVybiBlZGl0b3JLZXlGaXhlZCB9XHJcblxyXG5cclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVRdW90ZUZyb21TdGFydChxdW90ZTogc3RyaW5nLCBhbm5vdGF0aW9uOiBzdHJpbmcpIHtcclxuXHRsZXQgY29weSA9IGFubm90YXRpb24uc2xpY2UoKTtcclxuXHR3aGlsZSAoY29weS5jaGFyQXQoMCkgPT09IHF1b3RlKSBjb3B5ID0gY29weS5zdWJzdHJpbmcoMSk7XHJcblx0cmV0dXJuIGNvcHk7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVF1b3RlRnJvbUVuZChxdW90ZTogc3RyaW5nLCBhbm5vdGF0aW9uOiBzdHJpbmcpIHtcclxuXHRsZXQgY29weSA9IGFubm90YXRpb24uc2xpY2UoKTtcclxuXHR3aGlsZSAoY29weVtjb3B5Lmxlbmd0aCAtIDFdID09PSBxdW90ZSlcclxuXHRcdGNvcHkgPSBjb3B5LnN1YnN0cmluZygwLCBjb3B5Lmxlbmd0aCAtIDEpO1xyXG5cdHJldHVybiBjb3B5O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gb3JkZXJCeURhdGVNb2RpZmllZChhOiBSZWZlcmVuY2UsIGI6IFJlZmVyZW5jZSkge1xyXG5cdGlmIChhLmRhdGVNb2RpZmllZCA+IGIuZGF0ZU1vZGlmaWVkKSB7XHJcblx0XHRyZXR1cm4gLTE7XHJcblx0fVxyXG5cdGlmIChhLmRhdGVNb2RpZmllZCA8IGIuZGF0ZU1vZGlmaWVkKSB7XHJcblx0XHRyZXR1cm4gMTtcclxuXHR9XHJcblx0cmV0dXJuIDA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRDcmVhdG9yc05hbWUoY3JlYXRvcjogQ3JlYXRvciwgbmFtZUN1c3RvbTogc3RyaW5nKSB7XHJcblx0Ly8gd2hlbiB0aGUgY3JlYXRvciBvbmx5IGhhcyBhIG5hbWUgKG5vIGZpcnN0IG9yIGxhc3QgbmFtZSkgdGhpcyB3b3JrcyBqdXN0IGZpbmVcclxuXHRpZiAoY3JlYXRvci5oYXNPd25Qcm9wZXJ0eShcIm5hbWVcIikpIHtcclxuXHRcdG5hbWVDdXN0b20gPSBjcmVhdG9yLm5hbWU7XHJcblx0XHRuYW1lQ3VzdG9tID0gbmFtZUN1c3RvbS50cmltKCk7XHJcblx0XHRyZXR1cm4gbmFtZUN1c3RvbTtcclxuXHR9IGVsc2UgaWYgKFxyXG5cdFx0Y3JlYXRvci5oYXNPd25Qcm9wZXJ0eShcImxhc3ROYW1lXCIpICYmXHJcblx0XHRjcmVhdG9yLmhhc093blByb3BlcnR5KFwiZmlyc3ROYW1lXCIpXHJcblx0KSB7XHJcblx0XHRuYW1lQ3VzdG9tID0gbmFtZUN1c3RvbS5yZXBsYWNlKFwie3tsYXN0TmFtZX19XCIsIGNyZWF0b3IubGFzdE5hbWUpO1xyXG5cdFx0bmFtZUN1c3RvbSA9IG5hbWVDdXN0b20ucmVwbGFjZShcInt7Zmlyc3ROYW1lfX1cIiwgY3JlYXRvci5maXJzdE5hbWUpO1xyXG5cdFx0Y29uc3QgZ2V0SW5pdGlhbHMgPSBmdW5jdGlvbiAoc3RyaW5nOiBzdHJpbmcpIHtcclxuXHRcdFx0bGV0IG5hbWVzID0gc3RyaW5nLnNwbGl0KCcgJyksXHJcblx0XHRcdFx0aW5pdGlhbHMgPSBuYW1lc1swXS5zdWJzdHJpbmcoMCwgMSkudG9VcHBlckNhc2UoKSArIFwiLlwiO1xyXG5cclxuXHRcdFx0aWYgKG5hbWVzLmxlbmd0aCA+IDEpIHtcclxuXHRcdFx0XHRpbml0aWFscyArPSBuYW1lc1tuYW1lcy5sZW5ndGggLSAxXS5zdWJzdHJpbmcoMCwgMSkudG9VcHBlckNhc2UoKSArIFwiLlwiO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBpbml0aWFscztcclxuXHRcdH07XHJcblxyXG5cdFx0bmFtZUN1c3RvbSA9IG5hbWVDdXN0b20ucmVwbGFjZShcInt7Zmlyc3ROYW1lSW5pdGlhbHN9fVwiLCBnZXRJbml0aWFscyhjcmVhdG9yLmZpcnN0TmFtZSkpO1xyXG5cdFx0bmFtZUN1c3RvbSA9IG5hbWVDdXN0b20udHJpbSgpO1xyXG5cdFx0cmV0dXJuIG5hbWVDdXN0b207XHJcblx0fSBlbHNlIGlmIChcclxuXHRcdGNyZWF0b3IuaGFzT3duUHJvcGVydHkoXCJsYXN0TmFtZVwiKSAmJlxyXG5cdFx0IWNyZWF0b3IuaGFzT3duUHJvcGVydHkoXCJmaXJzdE5hbWVcIilcclxuXHQpIHtcclxuXHRcdG5hbWVDdXN0b20gPSBuYW1lQ3VzdG9tLnJlcGxhY2UoXCJ7e2xhc3ROYW1lfX1cIiwgY3JlYXRvci5sYXN0TmFtZSk7XHJcblx0XHRuYW1lQ3VzdG9tID0gbmFtZUN1c3RvbS5yZXBsYWNlKFwiOyB7e2ZpcnN0TmFtZX19XCIsIGNyZWF0b3IuZmlyc3ROYW1lKTtcclxuXHRcdG5hbWVDdXN0b20gPSBuYW1lQ3VzdG9tLnJlcGxhY2UoXCIsIHt7Zmlyc3ROYW1lfX1cIiwgY3JlYXRvci5maXJzdE5hbWUpO1xyXG5cdFx0bmFtZUN1c3RvbSA9IG5hbWVDdXN0b20ucmVwbGFjZShcInt7Zmlyc3ROYW1lfX1cIiwgXCJcIik7XHJcblx0XHRuYW1lQ3VzdG9tID0gbmFtZUN1c3RvbS50cmltKCk7XHJcblx0XHRyZXR1cm4gbmFtZUN1c3RvbTtcclxuXHR9IGVsc2UgaWYgKFxyXG5cdFx0IWNyZWF0b3IuaGFzT3duUHJvcGVydHkoXCJsYXN0TmFtZVwiKSAmJlxyXG5cdFx0Y3JlYXRvci5oYXNPd25Qcm9wZXJ0eShcImZpcnN0TmFtZVwiKVxyXG5cdCkge1xyXG5cdFx0bmFtZUN1c3RvbSA9IG5hbWVDdXN0b20ucmVwbGFjZShcIjsge3tsYXN0TmFtZX19XCIsIGNyZWF0b3IuZmlyc3ROYW1lKTtcclxuXHRcdG5hbWVDdXN0b20gPSBuYW1lQ3VzdG9tLnJlcGxhY2UoXCIsIHt7bGFzdE5hbWV9fVwiLCBjcmVhdG9yLmZpcnN0TmFtZSk7XHJcblx0XHRuYW1lQ3VzdG9tID0gbmFtZUN1c3RvbS5yZXBsYWNlKFwie3tsYXN0TmFtZX19XCIsIFwiXCIpO1xyXG5cdFx0bmFtZUN1c3RvbSA9IG5hbWVDdXN0b20ucmVwbGFjZShcInt7Zmlyc3ROYW1lfX1cIiwgY3JlYXRvci5maXJzdE5hbWUpO1xyXG5cdFx0bmFtZUN1c3RvbSA9IG5hbWVDdXN0b20udHJpbSgpO1xyXG5cdFx0cmV0dXJuIG5hbWVDdXN0b207XHJcblx0fVxyXG59XHJcblxyXG4vL0Z1bmN0aW9uIHRoYXQgY3JlYXRlIGFuIGFycmF5IHdpdGggdGhlIGNyZWF0b3JzIG9mIGEgZ2l2ZW4gdHlwZSAoZS5nLiBhdXRob3IsIGVkaXRvcilcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNyZWF0b3JMaXN0ID0gKFxyXG5cdGNyZWF0b3JzOiBDcmVhdG9yQXJyYXksXHJcblx0dHlwZUNyZWF0b3I6IHN0cmluZyxcclxuXHRub3RlOiBzdHJpbmcsXHJcblx0ZGl2aWRlcjogc3RyaW5nLFxyXG5cdG5hbWVGb3JtYXQ6IHN0cmluZ1xyXG4pID0+IHtcclxuXHRjb25zdCBjcmVhdG9yTGlzdDogc3RyaW5nW10gPSBbXTtcclxuXHRmb3IgKGxldCBjcmVhdG9yaW5kZXggPSAwOyBjcmVhdG9yaW5kZXggPCBjcmVhdG9ycy5sZW5ndGg7IGNyZWF0b3JpbmRleCsrKSB7XHJcblx0XHRjb25zdCBjcmVhdG9yOiBDcmVhdG9yID0gY3JlYXRvcnNbY3JlYXRvcmluZGV4XTsgLy9zZWxlY3QgdGhlIGF1dGhvclxyXG5cdFx0aWYgKGNyZWF0b3IuY3JlYXRvclR5cGUgPT09IHR5cGVDcmVhdG9yKSB7XHJcblx0XHRcdGNyZWF0b3JMaXN0LnB1c2goZm9ybWF0Q3JlYXRvcnNOYW1lKGNyZWF0b3IsIG5hbWVGb3JtYXQpKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGNvbnN0IGNyZWF0b3JMaXN0QnJhY2tldCA9IGNyZWF0b3JMaXN0Lm1hcChtYWtlV2lraSk7XHJcblxyXG5cdGNvbnN0IGNyZWF0b3JMaXN0UXVvdGVzID0gY3JlYXRvckxpc3QubWFwKG1ha2VRdW90ZXMpO1xyXG5cclxuXHQvL2FkZCBhIHNwYWNlIGFmdGVyIHRoZSBkaXZpZGVkIGlmIGl0IGlzIG5vdCBwcmVzZW50XHJcblx0aWYgKGRpdmlkZXIuc2xpY2UoLTEpICE9PSBcIiBcIikge1xyXG5cdFx0ZGl2aWRlciA9IGRpdmlkZXIgKyBcIiBcIjtcclxuXHR9XHJcblxyXG5cdGlmIChjcmVhdG9yTGlzdC5sZW5ndGggPT0gMCkge1xyXG5cdFx0cmV0dXJuIG5vdGU7XHJcblx0fSBlbHNlIHtcclxuXHRcdG5vdGUgPSByZXBsYWNlVGVtcGxhdGUoXHJcblx0XHRcdG5vdGUsXHJcblx0XHRcdGBbW3t7JHt0eXBlQ3JlYXRvcn19fV1dYCxcclxuXHRcdFx0Y3JlYXRvckxpc3RCcmFja2V0LmpvaW4oZGl2aWRlcilcclxuXHRcdCk7XHJcblx0XHRub3RlID0gcmVwbGFjZVRlbXBsYXRlKFxyXG5cdFx0XHRub3RlLFxyXG5cdFx0XHRgXCJ7eyR7dHlwZUNyZWF0b3J9fX1cImAsXHJcblx0XHRcdGNyZWF0b3JMaXN0UXVvdGVzLmpvaW4oZGl2aWRlcilcclxuXHRcdCk7XHJcblx0XHRub3RlID0gcmVwbGFjZVRlbXBsYXRlKFxyXG5cdFx0XHRub3RlLFxyXG5cdFx0XHRge3ske3R5cGVDcmVhdG9yfX19YCxcclxuXHRcdFx0Y3JlYXRvckxpc3Quam9pbihkaXZpZGVyKVxyXG5cdFx0KTtcclxuXHJcblx0XHRyZXR1cm4gbm90ZTtcclxuXHR9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlQ3JlYXRvckFsbExpc3QgPSAoXHJcblx0Y3JlYXRvcnM6IENyZWF0b3JBcnJheSxcclxuXHRub3RlOiBzdHJpbmcsXHJcblx0ZGl2aWRlcjogc3RyaW5nLFxyXG5cdG5hbWVGb3JtYXQ6IHN0cmluZ1xyXG4pID0+IHtcclxuXHRjb25zdCBjcmVhdG9yTGlzdDogc3RyaW5nW10gPSBbXTtcclxuXHRmb3IgKGxldCBjcmVhdG9yaW5kZXggPSAwOyBjcmVhdG9yaW5kZXggPCBjcmVhdG9ycy5sZW5ndGg7IGNyZWF0b3JpbmRleCsrKSB7XHJcblx0XHRjb25zdCBjcmVhdG9yOiBDcmVhdG9yID0gY3JlYXRvcnNbY3JlYXRvcmluZGV4XTsgLy9zZWxlY3QgdGhlIGF1dGhvclxyXG5cdFx0Y3JlYXRvckxpc3QucHVzaChmb3JtYXRDcmVhdG9yc05hbWUoY3JlYXRvciwgbmFtZUZvcm1hdCkpO1xyXG5cdH1cclxuXHJcblx0Y29uc3QgY3JlYXRvckxpc3RCcmFja2V0ID0gY3JlYXRvckxpc3QubWFwKG1ha2VXaWtpKTtcclxuXHRjb25zdCBjcmVhdG9yTGlzdFF1b3RlcyA9IGNyZWF0b3JMaXN0Lm1hcChtYWtlUXVvdGVzKTtcclxuXHJcblx0Ly9hZGQgYSBzcGFjZSBhZnRlciB0aGUgZGl2aWRlZCBpZiBpdCBpcyBub3QgcHJlc2VudFxyXG5cdGlmIChkaXZpZGVyLnNsaWNlKC0xKSAhPT0gXCIgXCIpIHtcclxuXHRcdGRpdmlkZXIgPSBkaXZpZGVyICsgXCIgXCI7XHJcblx0fVxyXG5cclxuXHRpZiAoY3JlYXRvckxpc3QubGVuZ3RoID09IDApIHtcclxuXHRcdHJldHVybiBub3RlO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRub3RlID0gcmVwbGFjZVRlbXBsYXRlKFxyXG5cdFx0XHRub3RlLFxyXG5cdFx0XHRgW1t7e2NyZWF0b3J9fV1dYCxcclxuXHRcdFx0Y3JlYXRvckxpc3RCcmFja2V0LmpvaW4oZGl2aWRlcilcclxuXHRcdCk7XHJcblx0XHRub3RlID0gcmVwbGFjZVRlbXBsYXRlKFxyXG5cdFx0XHRub3RlLFxyXG5cdFx0XHRgXCJ7e2NyZWF0b3J9fVwiYCxcclxuXHRcdFx0Y3JlYXRvckxpc3RRdW90ZXMuam9pbihkaXZpZGVyKVxyXG5cdFx0KTtcclxuXHRcdG5vdGUgPSByZXBsYWNlVGVtcGxhdGUobm90ZSwgYHt7Y3JlYXRvcn19YCwgY3JlYXRvckxpc3Quam9pbihkaXZpZGVyKSk7XHJcblx0XHRub3RlID0gcmVwbGFjZVRlbXBsYXRlKG5vdGUsIGB7e0NyZWF0b3J9fWAsIGNyZWF0b3JMaXN0LmpvaW4oZGl2aWRlcikpO1xyXG5cclxuXHJcblx0XHRyZXR1cm4gbm90ZTtcclxuXHR9XHJcbn07XHJcblxyXG4vL2Z1bmN0aW9uIHRvIHJlcGxhY2UgdGhlIG1pc3NpbmcgZmllbGRzIGluIHRoZSB0ZW1wbGF0ZVxyXG5leHBvcnQgZnVuY3Rpb24gcmVwbGFjZU1pc3NpbmdGaWVsZHMoXHJcblx0bm90ZTogc3RyaW5nLFxyXG5cdG1pc3NpbmdmaWVsZDogc3RyaW5nLFxyXG5cdG1pc3NpbmdmaWVsZHJlcGxhY2VtZW50OiBzdHJpbmdcclxuKSB7XHJcblx0bGV0IGNvcHkgPSBub3RlLnNsaWNlKCk7XHJcblx0aWYgKG1pc3NpbmdmaWVsZCA9PT0gXCJSZXBsYWNlIHdpdGggY3VzdG9tIHRleHRcIikge1xyXG5cdFx0Y29weSA9IGNvcHlcclxuXHRcdFx0LnJlcGxhY2UoVEVNUExBVEVfQlJBQ0tFVF9SRUcsIG1pc3NpbmdmaWVsZHJlcGxhY2VtZW50KVxyXG5cdFx0XHQudHJpbSgpO1xyXG5cdFx0Y29weSA9IGNvcHkucmVwbGFjZShURU1QTEFURV9SRUcsIG1pc3NpbmdmaWVsZHJlcGxhY2VtZW50KS50cmltKCk7XHJcblx0fSBlbHNlIGlmIChtaXNzaW5nZmllbGQgPT09IFwiUmVtb3ZlIChlbnRpcmUgcm93KVwiKSB7XHJcblx0XHRjb25zdCBsaW5lcyA9IGNvcHkuc3BsaXQoL1xccj9cXG4vKTtcclxuXHRcdC8vIFx0cnVuIGZ1bmN0aW9uIHRvIGRldGVybWluZSB3aGVyZSB3ZSBzdGlsbCBoYXZlIGRvdWJsZSBjdXJseSBicmFja2V0c1xyXG5cdFx0Zm9yIChsZXQgaiA9IDA7IGogPCBsaW5lcy5sZW5ndGg7IGorKykge1xyXG5cclxuXHRcdFx0aWYgKGxpbmVzW2pdLm1hdGNoKFRFTVBMQVRFX1JFRykpIHtcclxuXHRcdFx0XHRsaW5lcy5zcGxpY2UoaiwgMSk7XHJcblx0XHRcdFx0ai0tO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRjb3B5ID0gbGluZXMuam9pbihcIlxcblwiKTtcclxuXHR9XHJcblxyXG5cdC8vUmVtb3ZlIGVtcHR5IHNlY3Rpb25zIHdoZW4gdGhlcmUgaXMgbm8gZGF0YVxyXG5cdGNvcHkgPSBjb3B5LnJlcGxhY2UoXCJgYGBhZC1xdW90ZVxcblwiICsgXCJ0aXRsZTogQWJzdHJhY3RcXG5cIiArIFwiYGBgXFxuXCIsIFwiXCIpO1xyXG5cdGNvcHkgPSBjb3B5LnJlcGxhY2UoXHJcblx0XHRcImBgYGFkLWFic3RyYWN0XFxuXCIgKyBcInRpdGxlOiBGaWxlcyBhbmQgTGlua3NcXG5cIiArIFwiYGBgXFxuXCIsXHJcblx0XHRcIlwiXHJcblx0KTtcclxuXHRjb3B5ID0gY29weS5yZXBsYWNlKFxyXG5cdFx0XCJgYGBhZC1ub3RlXFxuXCIgKyBcInRpdGxlOiBUYWdzIGFuZCBDb2xsZWN0aW9uc1xcblwiICsgXCJgYGBcXG5cIixcclxuXHRcdFwiXCJcclxuXHQpO1xyXG5cclxuXHQvL1JlbW92ZSBlbXB0eSBzZWN0aW9ucyB3aGVuIHRoZXJlIGlzIG5vIGRhdGFcclxuXHRjb3B5ID0gY29weS5yZXBsYWNlKFxyXG5cdFx0XCIjIyBBYnN0cmFjdFxcblwiICsgXCJcXG5cIiArIFwiIyMgRmlsZXMgYW5kIExpbmtzXFxuXCIsXHJcblx0XHRcIiMjIEZpbGVzIGFuZCBMaW5rc1xcblwiXHJcblx0KTtcclxuXHRjb3B5ID0gY29weS5yZXBsYWNlKFxyXG5cdFx0XCIjIyBGaWxlcyBhbmQgTGlua3NcXG5cIiArIFwiXFxuXCIgKyBcIiMjIFRhZ3MgYW5kIENvbGxlY3Rpb25zXFxuXCIsXHJcblx0XHRcIiMjIFRhZ3MgYW5kIENvbGxlY3Rpb25zXFxuXCJcclxuXHQpO1xyXG5cdGNvcHkgPSBjb3B5LnJlcGxhY2UoXCIjIyBUYWdzIGFuZCBDb2xsZWN0aW9uc1xcblwiICsgXCJcXG5cIiwgXCJcXG5cIik7XHJcblxyXG5cdHJldHVybiBjb3B5O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTG9jYWxGaWxlTGluayhyZWZlcmVuY2U6IFJlZmVyZW5jZSkge1xyXG5cdC8vaWYgdGhlcmUgaXMgbm8gYXR0YWNobWVudCwgcmV0dXJuIHBsYWNlaG9sZGVyXHJcblx0aWYgKHJlZmVyZW5jZS5hdHRhY2htZW50cy5sZW5ndGggPT0gMCkgcmV0dXJuIFwie3tsb2NhbEZpbGV9fVwiO1xyXG5cdGNvbnN0IGZpbGVzTGlzdDogc3RyaW5nW10gPSBbXTtcclxuXHJcblx0Zm9yIChcclxuXHRcdGxldCBhdHRhY2htZW50aW5kZXggPSAwO1xyXG5cdFx0YXR0YWNobWVudGluZGV4IDwgcmVmZXJlbmNlLmF0dGFjaG1lbnRzLmxlbmd0aDtcclxuXHRcdGF0dGFjaG1lbnRpbmRleCsrXHJcblx0KSB7XHJcblx0XHRpZiAocmVmZXJlbmNlLmF0dGFjaG1lbnRzW2F0dGFjaG1lbnRpbmRleF0uaXRlbVR5cGUgIT09IFwiYXR0YWNobWVudFwiKVxyXG5cdFx0XHRjb250aW51ZTtcclxuXHJcblx0XHQvL3JlbW92ZSB3aGl0ZSBzcGFjZXMgZnJvbSBmaWxlIG5hbWVcclxuXHRcdGlmIChyZWZlcmVuY2UuYXR0YWNobWVudHNbYXR0YWNobWVudGluZGV4XS5wYXRoID09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRyZWZlcmVuY2UuYXR0YWNobWVudHNbYXR0YWNobWVudGluZGV4XS5wYXRoID0gXCJcIjtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBzZWxlY3RlZGZpbGU6IHN0cmluZyA9XHJcblx0XHRcdFwiW1wiICtcclxuXHRcdFx0cmVmZXJlbmNlLmF0dGFjaG1lbnRzW2F0dGFjaG1lbnRpbmRleF0udGl0bGUgK1xyXG5cdFx0XHRcIl0oZmlsZTovLy9cIiArIC8vIGFkZGVkIGFuIGV4dHJhIFwiL1wiIHRvIG1ha2UgaXQgd29yayBvbiBMaW51eFxyXG5cdFx0XHRlbmNvZGVVUkkocmVmZXJlbmNlLmF0dGFjaG1lbnRzW2F0dGFjaG1lbnRpbmRleF0ucGF0aC5yZXBsYWNlQWxsKFwiIFwiLCBcIiBcIikpICtcclxuXHRcdFx0XCIpXCI7IC8vc2VsZWN0IHRoZSBhdXRob3JcclxuXHJcblxyXG5cdFx0ZmlsZXNMaXN0LnB1c2goc2VsZWN0ZWRmaWxlKTtcclxuXHR9XHJcblx0Ly90dXJuIHRoZSBhcnJheSBpbnRvIGEgc3RyaW5nXHJcblx0Y29uc3QgZmlsZXNMaXN0U3RyaW5nID0gZmlsZXNMaXN0LmpvaW4oXCI7IFwiKTtcclxuXHRyZXR1cm4gZmlsZXNMaXN0U3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTG9jYWxGaWxlUGF0aExpbmsocmVmZXJlbmNlOiBSZWZlcmVuY2UpIHtcclxuXHQvL2lmIHRoZXJlIGlzIG5vIGF0dGFjaG1lbnQsIHJldHVybiBwbGFjZWhvbGRlclxyXG5cdGlmIChyZWZlcmVuY2UuYXR0YWNobWVudHMubGVuZ3RoID09IDApIHJldHVybiBcInt7bG9jYWxGaWxlUGF0aExpbmt9fVwiO1xyXG5cdGNvbnN0IGZpbGVzUGF0aExpc3Q6IHN0cmluZ1tdID0gW107XHJcblxyXG5cdGZvciAoXHJcblx0XHRsZXQgYXR0YWNobWVudGluZGV4ID0gMDtcclxuXHRcdGF0dGFjaG1lbnRpbmRleCA8IHJlZmVyZW5jZS5hdHRhY2htZW50cy5sZW5ndGg7XHJcblx0XHRhdHRhY2htZW50aW5kZXgrK1xyXG5cdCkge1xyXG5cdFx0aWYgKHJlZmVyZW5jZS5hdHRhY2htZW50c1thdHRhY2htZW50aW5kZXhdLml0ZW1UeXBlICE9PSBcImF0dGFjaG1lbnRcIilcclxuXHRcdFx0Y29udGludWU7XHJcblxyXG5cdFx0Ly9yZW1vdmUgd2hpdGUgc3BhY2VzIGZyb20gZmlsZSBuYW1lXHJcblx0XHRpZiAocmVmZXJlbmNlLmF0dGFjaG1lbnRzW2F0dGFjaG1lbnRpbmRleF0uc2VsZWN0ID09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRyZWZlcmVuY2UuYXR0YWNobWVudHNbYXR0YWNobWVudGluZGV4XS5zZWxlY3QgPSBcIlwiO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IHNlbGVjdGVkRmlsZVBhdGg6IHN0cmluZyA9XHJcblx0XHRcdFwiW1wiICtcclxuXHRcdFx0cmVmZXJlbmNlLmF0dGFjaG1lbnRzW2F0dGFjaG1lbnRpbmRleF0udGl0bGUgK1xyXG5cdFx0XHRcIl0oXCIgK1xyXG5cdFx0XHRlbmNvZGVVUkkocmVmZXJlbmNlLmF0dGFjaG1lbnRzW2F0dGFjaG1lbnRpbmRleF0uc2VsZWN0KSArXHJcblx0XHRcdFwiKVwiOyAvL3NlbGVjdCB0aGUgYXV0aG9yXHJcblxyXG5cclxuXHRcdGZpbGVzUGF0aExpc3QucHVzaChzZWxlY3RlZEZpbGVQYXRoKTtcclxuXHR9XHJcblx0Ly90dXJuIHRoZSBhcnJheSBpbnRvIGEgc3RyaW5nXHJcblx0Y29uc3QgZmlsZXNQYXRoTGlzdFN0cmluZyA9IGZpbGVzUGF0aExpc3Quam9pbihcIjsgXCIpO1xyXG5cdHJldHVybiBmaWxlc1BhdGhMaXN0U3RyaW5nO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVpvdGVyb1JlYWRlclBhdGhMaW5rKHJlZmVyZW5jZTogUmVmZXJlbmNlKSB7XHJcblx0Ly9pZiB0aGVyZSBpcyBubyBhdHRhY2htZW50LCByZXR1cm4gcGxhY2Vob2xkZXJcclxuXHRpZiAocmVmZXJlbmNlLmF0dGFjaG1lbnRzLmxlbmd0aCA9PSAwKSByZXR1cm4gXCJ7e2xvY2FsRmlsZVBhdGhMaW5rfX1cIjtcclxuXHRjb25zdCBmaWxlc1BhdGhMaXN0OiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuXHRmb3IgKFxyXG5cdFx0bGV0IGF0dGFjaG1lbnRpbmRleCA9IDA7XHJcblx0XHRhdHRhY2htZW50aW5kZXggPCByZWZlcmVuY2UuYXR0YWNobWVudHMubGVuZ3RoO1xyXG5cdFx0YXR0YWNobWVudGluZGV4KytcclxuXHQpIHtcclxuXHRcdGlmIChyZWZlcmVuY2UuYXR0YWNobWVudHNbYXR0YWNobWVudGluZGV4XS5pdGVtVHlwZSAhPT0gXCJhdHRhY2htZW50XCIpXHJcblx0XHRcdGNvbnRpbnVlO1xyXG5cclxuXHRcdC8vcmVtb3ZlIHdoaXRlIHNwYWNlcyBmcm9tIGZpbGUgbmFtZVxyXG5cdFx0aWYgKHJlZmVyZW5jZS5hdHRhY2htZW50c1thdHRhY2htZW50aW5kZXhdLnNlbGVjdCA9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0cmVmZXJlbmNlLmF0dGFjaG1lbnRzW2F0dGFjaG1lbnRpbmRleF0uc2VsZWN0ID0gXCJcIjtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBzZWxlY3RlZEZpbGVQYXRoOiBzdHJpbmcgPVxyXG5cdFx0XHRcIltcIiArXHJcblx0XHRcdHJlZmVyZW5jZS5hdHRhY2htZW50c1thdHRhY2htZW50aW5kZXhdLnRpdGxlICtcclxuXHRcdFx0XCJdKFwiICtcclxuXHRcdFx0ZW5jb2RlVVJJKHJlZmVyZW5jZS5hdHRhY2htZW50c1thdHRhY2htZW50aW5kZXhdLnNlbGVjdCkucmVwbGFjZShcclxuXHRcdFx0XHRcInNlbGVjdFwiLFxyXG5cdFx0XHRcdFwib3Blbi1wZGZcIlxyXG5cdFx0XHQpICsgXCIpXCI7IC8vc2VsZWN0IHRoZSBhdXRob3JcclxuXHJcblxyXG5cdFx0ZmlsZXNQYXRoTGlzdC5wdXNoKHNlbGVjdGVkRmlsZVBhdGgpO1xyXG5cdH1cclxuXHQvL3R1cm4gdGhlIGFycmF5IGludG8gYSBzdHJpbmdcclxuXHRjb25zdCBmaWxlc1BhdGhMaXN0U3RyaW5nID0gZmlsZXNQYXRoTGlzdC5qb2luKFwiOyBcIik7XHJcblx0cmV0dXJuIGZpbGVzUGF0aExpc3RTdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVOb3RlVGl0bGUoXHJcblx0c2VsZWN0ZWRFbnRyeTogUmVmZXJlbmNlLFxyXG5cdGV4cG9ydFRpdGxlOiBzdHJpbmcsXHJcblx0ZXhwb3J0UGF0aDogc3RyaW5nXHJcbikge1xyXG5cdC8vUmVwbGFjZSB0aGUgcGxhY2Vob2xkZXJzXHJcblx0ZXhwb3J0VGl0bGUgPSBleHBvcnRUaXRsZS5yZXBsYWNlKFwie3tjaXRlS2V5fX1cIiwgc2VsZWN0ZWRFbnRyeS5jaXRhdGlvbktleSk7XHJcblx0ZXhwb3J0VGl0bGUgPSBleHBvcnRUaXRsZS5yZXBsYWNlKFwie3tjaXRhdGlvbktleX19XCIsIHNlbGVjdGVkRW50cnkuY2l0YXRpb25LZXkpO1xyXG5cdGV4cG9ydFRpdGxlID0gZXhwb3J0VGl0bGUucmVwbGFjZShcInt7Y2l0YXRpb25rZXl9fVwiLCBzZWxlY3RlZEVudHJ5LmNpdGF0aW9uS2V5KTtcclxuXHRleHBvcnRUaXRsZSA9IGV4cG9ydFRpdGxlLnJlcGxhY2UoXCJ7e2NpdGVrZXl9fVwiLCBzZWxlY3RlZEVudHJ5LmNpdGF0aW9uS2V5KTtcclxuXHRleHBvcnRUaXRsZSA9IGV4cG9ydFRpdGxlLnJlcGxhY2UoXCJ7e2NpdGVrZXl9fVwiLCBzZWxlY3RlZEVudHJ5LmNpdGF0aW9uS2V5KTtcclxuXHJcblxyXG5cdGV4cG9ydFRpdGxlID0gZXhwb3J0VGl0bGUucmVwbGFjZShcInt7dGl0bGV9fVwiLCBzZWxlY3RlZEVudHJ5LnRpdGxlKTtcclxuXHJcblx0ZXhwb3J0VGl0bGUgPSBleHBvcnRUaXRsZS5yZXBsYWNlKFwie3thdXRob3J9fVwiLCBzZWxlY3RlZEVudHJ5LmF1dGhvcktleSk7XHJcblx0ZXhwb3J0VGl0bGUgPSBleHBvcnRUaXRsZS5yZXBsYWNlKFwie3thdXRob3JzfX1cIiwgc2VsZWN0ZWRFbnRyeS5hdXRob3JLZXkpO1xyXG5cdGV4cG9ydFRpdGxlID0gZXhwb3J0VGl0bGUucmVwbGFjZShcInt7YXV0aG9ySW5pdGlhbHN9fVwiLCBzZWxlY3RlZEVudHJ5LmF1dGhvcktleUluaXRpYWxzKTtcclxuXHRleHBvcnRUaXRsZSA9IGV4cG9ydFRpdGxlLnJlcGxhY2UoXCJ7e2F1dGhvcnNJbml0aWFsc319XCIsIHNlbGVjdGVkRW50cnkuYXV0aG9yS2V5SW5pdGlhbHMpO1xyXG5cdGV4cG9ydFRpdGxlID0gZXhwb3J0VGl0bGUucmVwbGFjZShcInt7YXV0aG9yRnVsbE5hbWV9fVwiLCBzZWxlY3RlZEVudHJ5LmF1dGhvcktleUZ1bGxOYW1lKTtcclxuXHRleHBvcnRUaXRsZSA9IGV4cG9ydFRpdGxlLnJlcGxhY2UoXCJ7e2F1dGhvcnNGdWxsTmFtZX19XCIsIHNlbGVjdGVkRW50cnkuYXV0aG9yS2V5RnVsbE5hbWUpO1xyXG5cclxuXHRleHBvcnRUaXRsZSA9IGV4cG9ydFRpdGxlLnJlcGxhY2UoXCJ7e3llYXJ9fVwiLCBzZWxlY3RlZEVudHJ5LnllYXIpO1xyXG5cdGV4cG9ydFRpdGxlID0gZXhwb3J0VGl0bGUucmVwbGFjZShcInt7ZGF0ZX19XCIsIHNlbGVjdGVkRW50cnkueWVhcik7XHJcblxyXG5cdC8vUmVtb3ZlIHNwZWNpYWwgY2hhcmFjdGVycyBmcm9tIHRoZSBuYW1lIG9mIHRoZSBmaWxlXHJcblx0ZXhwb3J0VGl0bGUgPSBleHBvcnRUaXRsZS5yZXBsYWNlKC9bL1xcXFw/JSo6fFwiPD5dL2csIFwiXCIpO1xyXG5cclxuXHQvL0dldCB0aGUgcGF0aCBvZiB0aGUgdmF1bHRcclxuXHRjb25zdCB2YXVsdFBhdGggPSB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmdldEJhc2VQYXRoKCk7XHJcblxyXG5cdGNvbnN0IGV4cG9ydFBhdGhGdWxsID0gcGF0aC5ub3JtYWxpemUoXHJcblx0XHR2YXVsdFBhdGggKyBcIi9cIiArIGV4cG9ydFBhdGggKyBcIi9cIiArIGV4cG9ydFRpdGxlICsgXCIubWRcIlxyXG5cdCk7XHJcblxyXG5cdHJldHVybiBleHBvcnRQYXRoRnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VUYWdMaXN0KFxyXG5cdHNlbGVjdGVkRW50cnk6IFJlZmVyZW5jZSxcclxuXHRhcnJheUV4dHJhY3RlZEtleXdvcmRzOiBzdHJpbmdbXSxcclxuXHRtZXRhZGF0YTogc3RyaW5nLFxyXG5cdGRpdmlkZXI6IHN0cmluZ1xyXG4pIHtcclxuXHQvLyBDb3B5IHRoZSBrZXl3b3JkcyBleHRyYWN0ZWQgYnkgWm90ZXJvIGFuZCBzdG9yZSB0aGVtIGluIGFuIGFycmF5XHJcblx0c2VsZWN0ZWRFbnRyeS56b3Rlcm9UYWdzID0gW107XHJcblx0aWYgKHNlbGVjdGVkRW50cnkudGFncy5sZW5ndGggPiAwKSB7XHJcblx0XHRmb3IgKFxyXG5cdFx0XHRsZXQgaW5kZXhUYWcgPSAwO1xyXG5cdFx0XHRpbmRleFRhZyA8IHNlbGVjdGVkRW50cnkudGFncy5sZW5ndGg7XHJcblx0XHRcdGluZGV4VGFnKytcclxuXHRcdCkge1xyXG5cdFx0XHRzZWxlY3RlZEVudHJ5LnpvdGVyb1RhZ3MucHVzaChzZWxlY3RlZEVudHJ5LnRhZ3NbaW5kZXhUYWddLnRhZyk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvL2FkZCBhIHNwYWNlIGFmdGVyIHRoZSBkaXZpZGVkIGlmIGl0IGlzIG5vdCBwcmVzZW50XHJcblx0aWYgKGRpdmlkZXIuc2xpY2UoLTEpICE9PSBcIiBcIikge1xyXG5cdFx0ZGl2aWRlciA9IGRpdmlkZXIgKyBcIiBcIjtcclxuXHR9XHJcblxyXG5cdC8vQ3JlYXRlIHRocmVlIGFycmF5cyBmb3IgdGhlIHRhZ3MgZnJvbSB0aGUgbWV0YWRhdGEsIHRhZ3MgZXhwb3J0ZWQgZnJvbSB0aGUgdGV4dCBhbmQgdGFncyBjb21iaW5lZFxyXG5cdGNvbnN0IHRhZ3Nab3Rlcm8gPSBzZWxlY3RlZEVudHJ5LnpvdGVyb1RhZ3Muc29ydCgpO1xyXG5cdGNvbnN0IHRhZ3NQREYgPSBhcnJheUV4dHJhY3RlZEtleXdvcmRzLnNvcnQoKTtcclxuXHRjb25zdCB0YWdzQ29tYmluZWQgPSB0YWdzWm90ZXJvLmNvbmNhdCh0YWdzUERGKS5zb3J0KCk7XHJcblxyXG5cdC8vbWV0YWRhdGEgPSBjcmVhdGVUYWdMaXN0KHNlbGVjdGVkRW50cnkuem90ZXJvVGFncywgbWV0YWRhdGEpXHJcblxyXG5cdC8vUmVwbGFjZSBpbiB0aGUgdGV4dCB0aGUgdGFncyBleHRyYWN0ZWQgYnkgWm90ZXJvXHJcblx0aWYgKHRhZ3Nab3Rlcm8ubGVuZ3RoID4gMCkge1xyXG5cdFx0Y29uc3QgdGFnc1pvdGVyb0JyYWNrZXQgPSB0YWdzWm90ZXJvLm1hcChtYWtlV2lraSk7XHJcblx0XHRtZXRhZGF0YSA9IHJlcGxhY2VUZW1wbGF0ZShcclxuXHRcdFx0bWV0YWRhdGEsXHJcblx0XHRcdGBbW3t7a2V5d29yZHNab3Rlcm99fV1dYCxcclxuXHRcdFx0U3RyaW5nKHRhZ3Nab3Rlcm9CcmFja2V0LmpvaW4oZGl2aWRlcikpXHJcblx0XHQpO1xyXG5cdFx0Y29uc3QgdGFnc1pvdGVyb1F1b3RlcyA9IHRhZ3Nab3Rlcm8ubWFwKG1ha2VRdW90ZXMpO1xyXG5cdFx0bWV0YWRhdGEgPSByZXBsYWNlVGVtcGxhdGUoXHJcblx0XHRcdG1ldGFkYXRhLFxyXG5cdFx0XHRgXCJ7e2tleXdvcmRzWm90ZXJvfX1cImAsXHJcblx0XHRcdFN0cmluZyh0YWdzWm90ZXJvUXVvdGVzLmpvaW4oZGl2aWRlcikpXHJcblx0XHQpO1xyXG5cdFx0Y29uc3QgdGFnc1pvdGVyb1RhZ3MgPSB0YWdzWm90ZXJvLm1hcChtYWtlVGFncyk7XHJcblx0XHRtZXRhZGF0YSA9IHJlcGxhY2VUZW1wbGF0ZShcclxuXHRcdFx0bWV0YWRhdGEsXHJcblx0XHRcdGAje3trZXl3b3Jkc1pvdGVyb319YCxcclxuXHRcdFx0U3RyaW5nKHRhZ3Nab3Rlcm9UYWdzLmpvaW4oZGl2aWRlcikpXHJcblx0XHQpO1xyXG5cclxuXHRcdG1ldGFkYXRhID0gcmVwbGFjZVRlbXBsYXRlKFxyXG5cdFx0XHRtZXRhZGF0YSxcclxuXHRcdFx0YHt7a2V5d29yZHNab3Rlcm99fWAsXHJcblx0XHRcdFN0cmluZyh0YWdzWm90ZXJvLmpvaW4oZGl2aWRlcikpXHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblx0Ly9SZXBsYWNlIGluIHRoZSB0ZXh0IHRoZSB0YWdzIGV4dHJhY3RlZCBmcm9tIHRoZSBQREZcclxuXHRpZiAodGFnc1BERi5sZW5ndGggPiAwKSB7XHJcblx0XHRjb25zdCB0YWdzUERGQnJhY2tldCA9IHRhZ3NQREYubWFwKG1ha2VXaWtpKTtcclxuXHRcdG1ldGFkYXRhID0gcmVwbGFjZVRlbXBsYXRlKFxyXG5cdFx0XHRtZXRhZGF0YSxcclxuXHRcdFx0YFtbe3trZXl3b3Jkc1BERn19XV1gLFxyXG5cdFx0XHRTdHJpbmcodGFnc1BERkJyYWNrZXQuam9pbihkaXZpZGVyKSlcclxuXHRcdCk7XHJcblx0XHRjb25zdCB0YWdzUERGUXVvdGVzID0gdGFnc1BERi5tYXAobWFrZVF1b3Rlcyk7XHJcblx0XHRtZXRhZGF0YSA9IHJlcGxhY2VUZW1wbGF0ZShcclxuXHRcdFx0bWV0YWRhdGEsXHJcblx0XHRcdGBcInt7a2V5d29yZHNQREZ9fVwiYCxcclxuXHRcdFx0U3RyaW5nKHRhZ3NQREZRdW90ZXMuam9pbihkaXZpZGVyKSlcclxuXHRcdCk7XHJcblx0XHRjb25zdCB0YWdzUERGVGFncyA9IHRhZ3NQREYubWFwKG1ha2VUYWdzKTtcclxuXHRcdG1ldGFkYXRhID0gcmVwbGFjZVRlbXBsYXRlKFxyXG5cdFx0XHRtZXRhZGF0YSxcclxuXHRcdFx0YCN7e2tleXdvcmRzUERGfX1gLFxyXG5cdFx0XHRTdHJpbmcodGFnc1BERlRhZ3Muam9pbihkaXZpZGVyKSlcclxuXHRcdCk7XHJcblx0XHRtZXRhZGF0YSA9IHJlcGxhY2VUZW1wbGF0ZShcclxuXHRcdFx0bWV0YWRhdGEsXHJcblx0XHRcdGB7e2tleXdvcmRzUERGfX1gLFxyXG5cdFx0XHRTdHJpbmcodGFnc1BERi5qb2luKGRpdmlkZXIpKVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdC8vUmVwbGFjZSBpbiB0aGUgdGV4dCB0aGUgdGFncyBleHRyYWN0ZWQgZnJvbSB0aGUgUERGIGNvbWJpbmVkIHdpdGggdGhvc2UgZXh0cmFjdGVkIGZyb20gdGhlIG1ldGFkYXRhXHJcblx0aWYgKHRhZ3NDb21iaW5lZC5sZW5ndGggPiAwKSB7XHJcblx0XHRjb25zdCB0YWdzQ29tYmluZWRCcmFja2V0ID0gdGFnc0NvbWJpbmVkLm1hcChtYWtlV2lraSk7XHJcblx0XHRtZXRhZGF0YSA9IHJlcGxhY2VUZW1wbGF0ZShcclxuXHRcdFx0bWV0YWRhdGEsXHJcblx0XHRcdGBbW3t7a2V5d29yZHN9fV1dYCxcclxuXHRcdFx0U3RyaW5nKHRhZ3NDb21iaW5lZEJyYWNrZXQuam9pbihkaXZpZGVyKSlcclxuXHRcdCk7XHJcblx0XHRtZXRhZGF0YSA9IHJlcGxhY2VUZW1wbGF0ZShcclxuXHRcdFx0bWV0YWRhdGEsXHJcblx0XHRcdGBbW3t7a2V5d29yZHNBbGx9fV1dYCxcclxuXHRcdFx0U3RyaW5nKHRhZ3NDb21iaW5lZEJyYWNrZXQuam9pbihkaXZpZGVyKSlcclxuXHRcdCk7XHJcblxyXG5cdFx0Y29uc3QgdGFnc0NvbWJpbmVkUXVvdGVzID0gdGFnc0NvbWJpbmVkLm1hcChtYWtlUXVvdGVzKTtcclxuXHRcdG1ldGFkYXRhID0gcmVwbGFjZVRlbXBsYXRlKFxyXG5cdFx0XHRtZXRhZGF0YSxcclxuXHRcdFx0YFwie3trZXl3b3Jkc0FsbH19XCJgLFxyXG5cdFx0XHRTdHJpbmcodGFnc0NvbWJpbmVkUXVvdGVzLmpvaW4oZGl2aWRlcikpXHJcblx0XHQpO1xyXG5cclxuXHRcdG1ldGFkYXRhID0gcmVwbGFjZVRlbXBsYXRlKFxyXG5cdFx0XHRtZXRhZGF0YSxcclxuXHRcdFx0YFwie3trZXl3b3Jkc319XCJgLFxyXG5cdFx0XHRTdHJpbmcodGFnc0NvbWJpbmVkUXVvdGVzLmpvaW4oZGl2aWRlcikpXHJcblx0XHQpO1xyXG5cclxuXHRcdGNvbnN0IHRhZ3NDb21iaW5lZFRhZ3MgPSB0YWdzQ29tYmluZWQubWFwKG1ha2VUYWdzKTtcclxuXHRcdG1ldGFkYXRhID0gcmVwbGFjZVRlbXBsYXRlKFxyXG5cdFx0XHRtZXRhZGF0YSxcclxuXHRcdFx0YCN7e2tleXdvcmRzQWxsfX1gLFxyXG5cdFx0XHRTdHJpbmcodGFnc0NvbWJpbmVkVGFncy5qb2luKGRpdmlkZXIpKVxyXG5cdFx0KTtcclxuXHJcblx0XHRtZXRhZGF0YSA9IHJlcGxhY2VUZW1wbGF0ZShcclxuXHRcdFx0bWV0YWRhdGEsXHJcblx0XHRcdGAje3trZXl3b3Jkc319YCxcclxuXHRcdFx0U3RyaW5nKHRhZ3NDb21iaW5lZFRhZ3Muam9pbihkaXZpZGVyKSlcclxuXHRcdCk7XHJcblx0XHRtZXRhZGF0YSA9IHJlcGxhY2VUZW1wbGF0ZShcclxuXHRcdFx0bWV0YWRhdGEsXHJcblx0XHRcdGB7e2tleXdvcmRzQWxsfX1gLFxyXG5cdFx0XHRTdHJpbmcodGFnc0NvbWJpbmVkLmpvaW4oZGl2aWRlcikpXHJcblx0XHQpO1xyXG5cclxuXHRcdG1ldGFkYXRhID0gcmVwbGFjZVRlbXBsYXRlKFxyXG5cdFx0XHRtZXRhZGF0YSxcclxuXHRcdFx0YHt7a2V5d29yZHN9fWAsXHJcblx0XHRcdFN0cmluZyh0YWdzQ29tYmluZWQuam9pbihkaXZpZGVyKSlcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHRpZiAoc2VsZWN0ZWRFbnRyeS56b3Rlcm9UYWdzLmxlbmd0aCA9PSAwKSB7XHJcblx0XHRtZXRhZGF0YSA9IG1ldGFkYXRhLnJlcGxhY2UoXCIjIFRhZ3NcXG5cIiwgXCJcIik7XHJcblx0XHRtZXRhZGF0YSA9IG1ldGFkYXRhLnJlcGxhY2UoXCIjIyBUYWdzXFxuXCIsIFwiXCIpO1xyXG5cdFx0bWV0YWRhdGEgPSBtZXRhZGF0YS5yZXBsYWNlKFwiIyMjIFRhZ3NcXG5cIiwgXCJcIik7XHJcblx0fVxyXG5cdHJldHVybiBtZXRhZGF0YTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG9wZW5TZWxlY3RlZE5vdGUoXHJcblx0c2VsZWN0ZWRFbnRyeTogUmVmZXJlbmNlLFxyXG5cdGV4cG9ydFRpdGxlOiBzdHJpbmcsXHJcblx0ZXhwb3J0UGF0aDogc3RyaW5nXHJcbikge1xyXG5cdGNvbnN0IG5vdGVUaXRsZUZ1bGwgPSBjcmVhdGVOb3RlVGl0bGUoXHJcblx0XHRzZWxlY3RlZEVudHJ5LFxyXG5cdFx0ZXhwb3J0VGl0bGUsXHJcblx0XHRleHBvcnRQYXRoXHJcblx0XHQvL3RoaXMuem90ZXJvQnVpbGRXaW5kb3dzXHJcblx0KTtcclxuXHJcblx0Ly9yZW1vdmUgZnJvbSB0aGUgcGF0aCBvZiB0aGUgbm90ZSB0byBiZSBleHBvcnRlZCB0aGUgcGF0aCBvZiB0aGUgdmF1bHRcclxuXHRjb25zdCBub3RlVGl0bGVTaG9ydCA9IG5vdGVUaXRsZUZ1bGwucmVwbGFjZShcclxuXHRcdG5vcm1hbGl6ZVBhdGgodGhpcy5hcHAudmF1bHQuYWRhcHRlci5nZXRCYXNlUGF0aCgpKSArIFwiL1wiLFxyXG5cdFx0XCJcIlxyXG5cdCk7XHJcblxyXG5cdC8vRmluZCB0aGUgVEZpbGVcclxuXHRjb25zdCBteUZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobm90ZVRpdGxlU2hvcnQpO1xyXG5cclxuXHQvL09wZW4gdGhlIE5vdGUgaW5hIG5ldyBsZWFmXHJcblx0dGhpcy5hcHAud29ya3NwYWNlLmdldFVucGlubmVkTGVhZigpLm9wZW5GaWxlKG15RmlsZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNpdGVLZXlGcm9tTm90ZU5hbWUobm90ZU5hbWU6c3RyaW5nLCBmb3JtYXQ6c3RyaW5nKSB7XHJcblx0Ly8gZmluZCB7e2NpdGVLZXl9fSBpbiBub3RlIHRpdGxlIGZvcm1hdFxyXG5cdGNvbnN0IG1hdGNoID0gZm9ybWF0Lm1hdGNoKFwie3tjaXRlS2V5fX1cIik7XHJcblx0aWYgKG1hdGNoICE9IG51bGwpIHtcclxuXHRcdC8vIHNlYXJjaCB2YWx1ZSBvZiBjaXRla2V5IGluIG5vdGVOYW1lIHVzaW5nIHBhdHRlcm5zIGFyb3VuZCB7e2NpdGVrZXl9fSBpbiBmb3JtYXQgc3RyaW5nXHJcblx0XHQvLyBpZiBmb3JtYXQgPSAnQHt7Y2l0ZWtleX19Lm1kJ1xyXG5cdFx0Ly8gdGhlbiByZWdFeHAgPSAnQChzKlthLXpBLVowLTldK3MqKS5tZCdcclxuXHRcdC8vIHdvcmtzIGlmIGZvcm1hdCA9ICd7e2NpdGVrZXl9fS5tZCcgb3IgJ0B7e2NpdGVrZXl9fS17e3RpdGxlfX0ubWQnXHJcblx0XHQvLyBmb3JtYXRzIGxpa2UgJ0B7e2NpdGVrZXl9fXt7dGl0bGV9fScgd29uJ3Qgd29ya1xyXG5cdFx0Y29uc3QgcmVnRXhwID0gZm9ybWF0LnN1YnN0cmluZyhcclxuXHRcdFx0bWF0Y2guaW5kZXggIT0gMCA/IG1hdGNoLmluZGV4IC0gMSA6IG1hdGNoLmluZGV4LCBcclxuXHRcdFx0bWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGggKyAxKVxyXG5cdFx0XHQucmVwbGFjZShcInt7Y2l0ZUtleX19XCIsIFwiKHMqW2EtekEtWjAtOV0rcyopXCIpO1xyXG5cdFx0cmV0dXJuIG5vdGVOYW1lLm1hdGNoKHJlZ0V4cClbMV07XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgTXlQbHVnaW4gZnJvbSBcIi4vbWFpblwiO1xyXG5pbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgRm9sZGVyU3VnZ2VzdCB9IGZyb20gXCIuL3N1Z2dlc3RlcnMvRm9sZGVyU3VnZ2VzdGVyXCJcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHBsdWdpbjogTXlQbHVnaW47XHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTXlQbHVnaW4pIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwsIHBsdWdpbiB9ID0gdGhpcztcclxuXHRcdGNvbnN0IHsgc2V0dGluZ3MgfSA9IHBsdWdpbjtcclxuXHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMScsIHsgdGV4dDogJ0JpYk5vdGVzIEZvcm1hdHRlciAoZm9yIFpvdGVybykgJyB9KTtcclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0ltcG9ydCBMaWJyYXJ5JyB9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoXCJCZXR0ZXJCaWJUZXggSnNvbiBGaWxlXCIpXHJcblx0XHRcdC5zZXREZXNjKFwiQWRkIHJlbGF0aXZlIHBhdGggZnJvbSB0aGUgdmF1bHQgZm9sZGVyIHRvIHRoZSAqQmV0dGVyQmliVGV4IEpzb24qIGZpbGUgdG8gYmUgaW1wb3J0ZWQuIEZvciBpbnN0YW5jZSwgYWRkIGBsaWJyYXJ5Lmpzb25gIGlmIHRoZSBmaWxlIChsaWJyYXJ5Lmpzb24pIGlzIGluIHRoZSByb290IGZvbGRlci4gSW5zdGVhZCwgaWYgdGhlIGZpbGUgaXMgaW4gYSBzdWJmb2xkZXIsIHNwZWNpZnkgZmlyc3QgdGhlIHN1YmZvbGRlciBmb2xsb3dlZCBieSB0aGUgbmFtZSBvZiB0aGUgZmlsZSAoZS5nLiAnem90ZXJvL2xpYnJhcnkuanNvbicgaWYgdGhlIGpzb24gZmlsZSBpcyBsb2NhdGVkIGluIGEgc3ViZm9sZGVyIG9mIHlvdXIgdmF1bHQgY2FsbGVkICd6b3Rlcm8nKSBcIilcclxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+XHJcblx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiL3BhdGgvdG8vQmV0dGVyQmliVGV4Lmpzb25cIilcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZShzZXR0aW5ncy5iaWJQYXRoKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIlBhdGggQmliOiBcIiArIHZhbHVlKTtcclxuXHRcdFx0XHRcdFx0c2V0dGluZ3MuYmliUGF0aCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cclxuXHJcblxyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnRXhwb3J0IE5vdGVzJyB9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoXCJFeHBvcnQgUGF0aFwiKVxyXG5cdFx0XHQuc2V0RGVzYyhcIkFkZCB0aGUgcmVsYXRpdmUgcGF0aCB0byB0aGUgZm9sZGVyIGluc2lkZSB5b3VyIHZhdWx0IHdoZXJlIHRoZSBub3RlcyB3aWxsIGJlIGV4cG9ydGVkXCIpXHJcblx0XHRcdC5hZGRTZWFyY2goKGNiKSA9PiB7XHJcblx0XHRcdFx0bmV3IEZvbGRlclN1Z2dlc3QodGhpcy5hcHAsIGNiLmlucHV0RWwpO1xyXG5cdFx0XHRcdGNiLnNldFBsYWNlaG9sZGVyKFwiRXhhbXBsZTogZm9sZGVyMS9mb2xkZXIyXCIpXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhwb3J0UGF0aClcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAobmV3X2ZvbGRlcikgPT4ge1xyXG5cdFx0XHRcdFx0XHRzZXR0aW5ncy5leHBvcnRQYXRoID0gbmV3X2ZvbGRlcjtcclxuXHRcdFx0XHRcdFx0YXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxyXG5cdFx0XHR9KVxyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZShcIk5vdGUgVGl0bGVcIilcclxuXHRcdFx0LnNldERlc2MoXCJTZWxlY3QgdGhlIGZvcm1hdCBvZiB0aGUgdGl0bGUgb2YgdGhlIG5vdGUuIFBvc3NpYmxlIHZhbHVlcyBpbmNsdWRlOiB7e2NpdGVLZXl9fSwge3t0aXRsZX19LCB7e2F1dGhvcn19LHt7YXV0aG9ySW5pdGlhbHN9fSwge3thdXRob3JGdWxsTmFtZX19IHt7eWVhcn19XCIpXHJcblx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxyXG5cdFx0XHRcdHRleHRcclxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcInt7Y2l0ZUtleX19XCIpXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUoc2V0dGluZ3MuZXhwb3J0VGl0bGUpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHNldHRpbmdzLmV4cG9ydFRpdGxlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZShcIlNlbGVjdCBUZW1wbGF0ZVwiKVxyXG5cdFx0XHQuc2V0RGVzYyhcclxuXHRcdFx0XHRcIlNlbGVjdCBvbmUgb2YgdGhlIGRlZmF1bHQgdGVtcGxhdGVzIG9yIHByb3ZpZGUgYSBjdXN0b20gb25lLlwiXHJcblx0XHRcdClcclxuXHRcdFx0LmFkZERyb3Bkb3duKChkKSA9PiB7XHJcblx0XHRcdFx0ZC5hZGRPcHRpb24oXCJQbGFpblwiLCBcIlBsYWluXCIpO1xyXG5cdFx0XHRcdGQuYWRkT3B0aW9uKFwiQWRtb25pdGlvblwiLCBcIkFkbW9uaXRpb25cIik7XHJcblx0XHRcdFx0ZC5hZGRPcHRpb24oXCJDdXN0b21cIiwgXCJDdXN0b20gVGVtcGxhdGVcIik7XHJcblx0XHRcdFx0Ly9kLmFkZE9wdGlvbihcIkltcG9ydCBmcm9tIE5vdGVcIiwgXCJJbXBvcnQgZnJvbSBOb3RlXCIpO1xyXG5cdFx0XHRcdGQuc2V0VmFsdWUoc2V0dGluZ3MudGVtcGxhdGVUeXBlKTtcclxuXHRcdFx0XHRkLm9uQ2hhbmdlKFxyXG5cdFx0XHRcdFx0YXN5bmMgKFxyXG5cdFx0XHRcdFx0XHR2OlxyXG5cdFx0XHRcdFx0XHRcdHwgXCJQbGFpblwiXHJcblx0XHRcdFx0XHRcdFx0fCBcIkFkbW9uaXRpb25cIlxyXG5cdFx0XHRcdFx0XHRcdHwgXCJDdXN0b21cIlxyXG5cdFx0XHRcdFx0XHQvL3wgXCJJbXBvcnQgZnJvbSBOb3RlXCJcclxuXHRcdFx0XHRcdCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRzZXR0aW5ncy50ZW1wbGF0ZVR5cGUgPSB2O1xyXG5cdFx0XHRcdFx0XHRhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xyXG5cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHQpO1xyXG5cdFx0XHR9XHJcblx0XHRcdCk7XHJcblx0XHRpZiAoc2V0dGluZ3MudGVtcGxhdGVUeXBlID09PSBcIkN1c3RvbVwiKSB7XHJcblx0XHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHRcdC5zZXROYW1lKCdDdXN0b20gVGVtcGxhdGUnKVxyXG5cdFx0XHRcdC5hZGRUZXh0QXJlYSgodGV4dCkgPT4ge1xyXG5cdFx0XHRcdFx0dGV4dC5pbnB1dEVsLnJvd3MgPSAxMDtcclxuXHRcdFx0XHRcdC8vIHRoaXMgaXMgbm90IHN0cmljdGx5IG5lY2Vzc2FyeSwgYnV0IGl0IG1ha2VzIGl0IGEgbG90IGVhc2llciB0byByZWFkIGxvbmcgbGluZXNcclxuXHRcdFx0XHRcdHRleHQuaW5wdXRFbC5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xyXG5cdFx0XHRcdFx0dGV4dC5zZXRWYWx1ZShzZXR0aW5ncy50ZW1wbGF0ZUNvbnRlbnQpLm9uQ2hhbmdlKFxyXG5cdFx0XHRcdFx0XHRhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRzZXR0aW5ncy50ZW1wbGF0ZUNvbnRlbnQgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0Ly90aGlzLmRpc3BsYXkoKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKFwiTWlzc2luZyBGaWVsZHNcIilcclxuXHRcdFx0LnNldERlc2MoXHJcblx0XHRcdFx0XCJGaWVsZHMgdGhhdCBhcmUgcHJlc2VudCBpbiB0aGUgdGVtcGxhdGUgYnV0IG1pc3NpbmcgZnJvbSB0aGUgc2VsZWN0ZWQgZmllbGQuXCJcclxuXHRcdFx0KVxyXG5cdFx0XHQuYWRkRHJvcGRvd24oKGQpID0+IHtcclxuXHRcdFx0XHRkLmFkZE9wdGlvbihcIkxlYXZlIHBsYWNlaG9sZGVyXCIsIFwiTGVhdmUgcGxhY2Vob2xkZXJcIik7XHJcblx0XHRcdFx0ZC5hZGRPcHRpb24oXCJSZW1vdmUgKGVudGlyZSByb3cpXCIsIFwiUmVtb3ZlIChlbnRpcmUgcm93KVwiKTtcclxuXHRcdFx0XHRkLmFkZE9wdGlvbihcIlJlcGxhY2Ugd2l0aCBjdXN0b20gdGV4dFwiLCBcIlJlcGxhY2Ugd2l0aCBjdXN0b20gdGV4dFwiKTtcclxuXHRcdFx0XHRkLnNldFZhbHVlKHNldHRpbmdzLm1pc3NpbmdmaWVsZCk7XHJcblx0XHRcdFx0ZC5vbkNoYW5nZShcclxuXHRcdFx0XHRcdGFzeW5jIChcclxuXHRcdFx0XHRcdFx0djpcclxuXHRcdFx0XHRcdFx0XHR8IFwiTGVhdmUgcGxhY2Vob2xkZXJcIlxyXG5cdFx0XHRcdFx0XHRcdHwgXCJSZW1vdmUgKGVudGlyZSByb3cpXCJcclxuXHRcdFx0XHRcdFx0XHR8IFwiUmVwbGFjZSB3aXRoIGN1c3RvbSB0ZXh0XCJcclxuXHRcdFx0XHRcdCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRzZXR0aW5ncy5taXNzaW5nZmllbGQgPSB2O1xyXG5cdFx0XHRcdFx0XHRhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0aWYgKHNldHRpbmdzLm1pc3NpbmdmaWVsZCA9PT0gXCJSZXBsYWNlIHdpdGggY3VzdG9tIHRleHRcIikge1xyXG5cdFx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0XHQuc2V0TmFtZShcIlJlcGxhY2VtZW50IGZvciBtaXNzaW5nIGZpZWxkc1wiKVxyXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxyXG5cdFx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoc2V0dGluZ3MubWlzc2luZ2ZpZWxkcmVwbGFjZW1lbnQpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5taXNzaW5nZmllbGRyZXBsYWNlbWVudCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZShcIk11bHRpcGxlIEVudHJpZXMgRGl2aWRlclwiKVxyXG5cdFx0XHQuc2V0RGVzYygnVHlwZSB0aGUgY2hhcmFjdGVyIG9yIGV4cHJlc3Npb24gdGhhdCBzaG91bGQgc2VwYXJhdGUgbXVsdGlwbGUgdmFsdWVzIHdoZW4gZm91bmQgaW4gdGhlIHNhbWUgZmllbGQgKGUuZy4gYXV0aG9ycywgZWRpdG9ycywgdGFncywgY29sbGVjdGlvbnMpLicpXHJcblx0XHRcdC5hZGRUZXh0QXJlYSgodGV4dCkgPT5cclxuXHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHQuc2V0VmFsdWUoc2V0dGluZ3MubXVsdGlwbGVGaWVsZHNEaXZpZGVyKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRzZXR0aW5ncy5tdWx0aXBsZUZpZWxkc0RpdmlkZXIgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHQvL3RoaXMuZGlzcGxheSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0KVxyXG5cdFx0XHQpXHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKFwiRm9ybWF0IE5hbWVzXCIpXHJcblx0XHRcdC5zZXREZXNjKCdTcGVjaWZ5IGhvdyB0aGUgbmFtZXMgb2YgdGhlIGF1dGhvcnMvZWRpdG9ycyBzaG91bGQgYmUgZXhwb3J0ZWQuIEFjY2VwdGVkIHZhbHVlcyBhcmUge3tmaXJzdE5hbWV9fSwge3tsYXN0TmFtZX19IGFuZCB7e2ZpcnN0TmFtZUluaXRpYWxzfX0nKVxyXG5cdFx0XHQuYWRkVGV4dEFyZWEoKHRleHQpID0+XHJcblx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHNldHRpbmdzLm5hbWVGb3JtYXQpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHNldHRpbmdzLm5hbWVGb3JtYXQgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHQvL3RoaXMuZGlzcGxheSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0KVxyXG5cdFx0XHQpXHJcblxyXG5cclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoXCJTYXZlIE1hbnVhbCBFZGl0c1wiKVxyXG5cdFx0XHQuc2V0RGVzYyhcclxuXHRcdFx0XHQnU2VsZWN0IFwiWWVzXCIgdG8gcHJlc2VydmUgdGhlIG1hbnVhbCBlZGl0cyBtYWRlIHRvIHRoZSBwcmV2aW91c2x5IGV4dHJhY3RlZCBub3RlIChlLmcuIGJsb2NrIHJlZmVyZW5jZXMsIGNvbW1lbnRzIGFkZGVkIG1hbnVhbGx5LCBmaXhlZCB0eXBvcykgd2hlbiB0aGlzIGlzIHVwZGF0ZWQuIFNlbGVjdCBcIk5vXCIgdG8gb3ZlcndyaXRlIGFueSBtYW51YWwgY2hhbmdlIHRvIHRoZSBleHRyYWN0ZWQgYW5ub3RhdGlvbiB3aGVuIHRoaXMgaXMgdXBkYXRlZC4nXHJcblx0XHRcdClcclxuXHRcdFx0LmFkZERyb3Bkb3duKChkKSA9PiB7XHJcblx0XHRcdFx0ZC5hZGRPcHRpb24oXCJTYXZlIEVudGlyZSBOb3RlXCIsIFwiU2F2ZSBFbnRpcmUgTm90ZVwiKTtcclxuXHRcdFx0XHRkLmFkZE9wdGlvbihcIlNlbGVjdCBTZWN0aW9uXCIsIFwiU2VsZWN0IFNlY3Rpb25cIik7XHJcblx0XHRcdFx0ZC5hZGRPcHRpb24oXCJPdmVyd3JpdGUgRW50aXJlIE5vdGVcIiwgXCJPdmVyd3JpdGUgRW50aXJlIE5vdGVcIik7XHJcblx0XHRcdFx0ZC5zZXRWYWx1ZShzZXR0aW5ncy5zYXZlTWFudWFsRWRpdHMpO1xyXG5cdFx0XHRcdGQub25DaGFuZ2UoXHJcblx0XHRcdFx0XHRhc3luYyAoXHJcblx0XHRcdFx0XHRcdHY6XHJcblx0XHRcdFx0XHRcdFx0fCBcIlNhdmUgRW50aXJlIE5vdGVcIlxyXG5cdFx0XHRcdFx0XHRcdHwgXCJTZWxlY3QgU2VjdGlvblwiXHJcblx0XHRcdFx0XHRcdFx0fCBcIk92ZXJ3cml0ZSBFbnRpcmUgTm90ZVwiXHJcblx0XHRcdFx0XHQpID0+IHtcclxuXHRcdFx0XHRcdFx0c2V0dGluZ3Muc2F2ZU1hbnVhbEVkaXRzID0gdjtcclxuXHRcdFx0XHRcdFx0YXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHQpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRpZiAoc2V0dGluZ3Muc2F2ZU1hbnVhbEVkaXRzID09IFwiU2VsZWN0IFNlY3Rpb25cIikge1xyXG5cdFx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0XHQuc2V0TmFtZShcIlN0YXJ0IC0gU2F2ZSBNYW51YWwgRWRpdHNcIilcclxuXHRcdFx0XHQuc2V0RGVzYyhcclxuXHRcdFx0XHRcdFwiRGVmaW5lIHN0cmluZyAoZS5nLiAnIyMgTm90ZXMnKSBpbiB0aGUgdGVtcGxhdGUgc3RhcnRpbmcgZnJvbSB3aGVyZSB1cGRhdGluZyB0aGUgbm90ZSB3aWxsIG5vdCBvdmVyd3JpdGUgdGhlIGV4aXN0aW5nIHRleHQuIElmIGZpZWxkIGlzIGxlZnQgZW1wdHksIHRoZSB2YWx1ZSB3aWxsIGJlIHNldCB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBub3RlXCJcclxuXHRcdFx0XHQpXHJcblx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+XHJcblx0XHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShzZXR0aW5ncy5zYXZlTWFudWFsRWRpdHNTdGFydClcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHNldHRpbmdzLnNhdmVNYW51YWxFZGl0c1N0YXJ0ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdCk7XHJcblxyXG5cclxuXHRcdFx0aWYgKHNldHRpbmdzLnNhdmVNYW51YWxFZGl0cykge1xyXG5cdFx0XHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHRcdFx0LnNldE5hbWUoXCJFbmQgLSBTYXZlIE1hbnVhbCBFZGl0c1wiKVxyXG5cdFx0XHRcdFx0LnNldERlc2MoXHJcblx0XHRcdFx0XHRcdFwiRGVmaW5lIHN0cmluZyAoZS5nLiAnIyMgTm90ZXMnKSBpbiB0aGUgdGVtcGxhdGUgdW50aWwgd2hlcmUgdXBkYXRpbmcgdGhlIG5vdGUgd2lsbCBub3Qgb3ZlcndyaXRlIHRoZSBleGlzdGluZyB0ZXh0LiBJZiBmaWVsZCBpcyBsZWZ0IGVtcHR5LCB0aGUgdmFsdWUgd2lsbCBiZSBzZXQgdG8gdGhlIGVuZCBvZiB0aGUgbm90ZVwiXHJcblx0XHRcdFx0XHQpXHJcblx0XHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cclxuXHRcdFx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZShzZXR0aW5ncy5zYXZlTWFudWFsRWRpdHNFbmQpXHJcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3Muc2F2ZU1hbnVhbEVkaXRzRW5kID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblxyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnVXBkYXRlIExpYnJhcnknIH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZShcIlVwZGF0ZSBFeGlzdGluZy9BbGwgTm90ZXNcIilcclxuXHRcdFx0LnNldERlc2MoXHJcblx0XHRcdFx0XCJTZWxlY3Qgd2hldGhlciB0byBjcmVhdGUgbmV3IG5vdGVzIHRoYXQgYXJlIG1pc3NpbmcgZnJvbSBPYnNpZGlhbiBidXQgcHJlc2VudC9tb2RpZmllZCB3aXRoaW4gWm90ZXJvIHdoZW4gcnVuaW5nIHRoZSBVcGRhdGUgTGlicmFyeSBjb21tYW5kXCJcclxuXHRcdFx0KVxyXG5cdFx0XHQuYWRkRHJvcGRvd24oKGQpID0+IHtcclxuXHRcdFx0XHRkLmFkZE9wdGlvbihcIk9ubHkgdXBkYXRlIGV4aXN0aW5nIG5vdGVzXCIsIFwiT25seSBleGlzdGluZyBub3Rlc1wiKTtcclxuXHRcdFx0XHRkLmFkZE9wdGlvbihcIkNyZWF0ZSBuZXcgbm90ZXMgd2hlbiBtaXNzaW5nXCIsIFwiQ3JlYXRlIG5ldyBub3RlcyB3aGVuIG1pc3NpbmdcIik7XHJcblx0XHRcdFx0ZC5zZXRWYWx1ZShzZXR0aW5ncy51cGRhdGVMaWJyYXJ5KTtcclxuXHRcdFx0XHRkLm9uQ2hhbmdlKFxyXG5cdFx0XHRcdFx0YXN5bmMgKFxyXG5cdFx0XHRcdFx0XHR2OlxyXG5cdFx0XHRcdFx0XHRcdHwgXCJPbmx5IHVwZGF0ZSBleGlzdGluZyBub3Rlc1wiXHJcblx0XHRcdFx0XHRcdFx0fCBcIkNyZWF0ZSBuZXcgbm90ZXMgd2hlbiBtaXNzaW5nXCJcclxuXHRcdFx0XHRcdCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRzZXR0aW5ncy51cGRhdGVMaWJyYXJ5ID0gdjtcclxuXHRcdFx0XHRcdFx0YXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHJcblxyXG5cclxuXHR9XHJcbn1cclxuXHJcblxyXG5cclxuIiwgIi8vIEltcG9ydGVkIGZyb20gdGhlIFRlbXBsYXRlciBQbHVnaW46IGh0dHBzOi8vZ2l0aHViLmNvbS9TaWxlbnRWb2lkMTMvVGVtcGxhdGVyL2Jsb2IvbWFzdGVyL3NyYy9zdWdnZXN0ZXJzL0ZvbGRlclN1Z2dlc3Rlci50c1xyXG4vLyBDcmVkaXRzIGdvIHRvIExpYW0ncyBQZXJpb2RpYyBOb3RlcyBQbHVnaW46IGh0dHBzOi8vZ2l0aHViLmNvbS9saWFtY2Fpbi9vYnNpZGlhbi1wZXJpb2RpYy1ub3Rlc1xyXG5cclxuaW1wb3J0IHsgVEFic3RyYWN0RmlsZSwgVEZvbGRlciB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBUZXh0SW5wdXRTdWdnZXN0IH0gZnJvbSBcIi4vc3VnZ2VzdFwiXHJcblxyXG5leHBvcnQgY2xhc3MgRm9sZGVyU3VnZ2VzdCBleHRlbmRzIFRleHRJbnB1dFN1Z2dlc3Q8VEZvbGRlcj4ge1xyXG4gICAgZ2V0U3VnZ2VzdGlvbnMoaW5wdXRTdHI6IHN0cmluZyk6IFRGb2xkZXJbXSB7XHJcbiAgICAgICAgY29uc3QgYWJzdHJhY3RGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCk7XHJcbiAgICAgICAgY29uc3QgZm9sZGVyczogVEZvbGRlcltdID0gW107XHJcbiAgICAgICAgY29uc3QgbG93ZXJDYXNlSW5wdXRTdHIgPSBpbnB1dFN0ci50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgICAgICBhYnN0cmFjdEZpbGVzLmZvckVhY2goKGZvbGRlcjogVEFic3RyYWN0RmlsZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyICYmXHJcbiAgICAgICAgICAgICAgICBmb2xkZXIucGF0aC50b0xvd2VyQ2FzZSgpLmNvbnRhaW5zKGxvd2VyQ2FzZUlucHV0U3RyKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIGZvbGRlcnMucHVzaChmb2xkZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBmb2xkZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlclN1Z2dlc3Rpb24oZmlsZTogVEZvbGRlciwgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcbiAgICAgICAgZWwuc2V0VGV4dChmaWxlLnBhdGgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbGVjdFN1Z2dlc3Rpb24oZmlsZTogVEZvbGRlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaW5wdXRFbC52YWx1ZSA9IGZpbGUucGF0aDtcclxuICAgICAgICB0aGlzLmlucHV0RWwudHJpZ2dlcihcImlucHV0XCIpO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxufSIsICIvLyBDcmVkaXRzIGdvIHRvIExpYW0ncyBQZXJpb2RpYyBOb3RlcyBQbHVnaW46IGh0dHBzOi8vZ2l0aHViLmNvbS9saWFtY2Fpbi9vYnNpZGlhbi1wZXJpb2RpYy1ub3Rlc1xyXG5cclxuaW1wb3J0IHsgQXBwLCBJU3VnZ2VzdE93bmVyLCBTY29wZSB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBjcmVhdGVQb3BwZXIsIEluc3RhbmNlIGFzIFBvcHBlckluc3RhbmNlIH0gZnJvbSBcIkBwb3BwZXJqcy9jb3JlXCI7XHJcblxyXG5jb25zdCB3cmFwQXJvdW5kID0gKHZhbHVlOiBudW1iZXIsIHNpemU6IG51bWJlcik6IG51bWJlciA9PiB7XHJcbiAgICByZXR1cm4gKCh2YWx1ZSAlIHNpemUpICsgc2l6ZSkgJSBzaXplO1xyXG59O1xyXG5cclxuY2xhc3MgU3VnZ2VzdDxUPiB7XHJcbiAgICBwcml2YXRlIG93bmVyOiBJU3VnZ2VzdE93bmVyPFQ+O1xyXG4gICAgcHJpdmF0ZSB2YWx1ZXM6IFRbXTtcclxuICAgIHByaXZhdGUgc3VnZ2VzdGlvbnM6IEhUTUxEaXZFbGVtZW50W107XHJcbiAgICBwcml2YXRlIHNlbGVjdGVkSXRlbTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBjb250YWluZXJFbDogSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgb3duZXI6IElTdWdnZXN0T3duZXI8VD4sXHJcbiAgICAgICAgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LFxyXG4gICAgICAgIHNjb3BlOiBTY29wZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5vd25lciA9IG93bmVyO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwgPSBjb250YWluZXJFbDtcclxuXHJcbiAgICAgICAgY29udGFpbmVyRWwub24oXHJcbiAgICAgICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICAgICAgXCIuc3VnZ2VzdGlvbi1pdGVtXCIsXHJcbiAgICAgICAgICAgIHRoaXMub25TdWdnZXN0aW9uQ2xpY2suYmluZCh0aGlzKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY29udGFpbmVyRWwub24oXHJcbiAgICAgICAgICAgIFwibW91c2Vtb3ZlXCIsXHJcbiAgICAgICAgICAgIFwiLnN1Z2dlc3Rpb24taXRlbVwiLFxyXG4gICAgICAgICAgICB0aGlzLm9uU3VnZ2VzdGlvbk1vdXNlb3Zlci5iaW5kKHRoaXMpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgc2NvcGUucmVnaXN0ZXIoW10sIFwiQXJyb3dVcFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFldmVudC5pc0NvbXBvc2luZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RlZEl0ZW0odGhpcy5zZWxlY3RlZEl0ZW0gLSAxLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzY29wZS5yZWdpc3RlcihbXSwgXCJBcnJvd0Rvd25cIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghZXZlbnQuaXNDb21wb3NpbmcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRJdGVtKHRoaXMuc2VsZWN0ZWRJdGVtICsgMSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc2NvcGUucmVnaXN0ZXIoW10sIFwiRW50ZXJcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghZXZlbnQuaXNDb21wb3NpbmcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXNlU2VsZWN0ZWRJdGVtKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uU3VnZ2VzdGlvbkNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50LCBlbDogSFRNTERpdkVsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5zdWdnZXN0aW9ucy5pbmRleE9mKGVsKTtcclxuICAgICAgICB0aGlzLnNldFNlbGVjdGVkSXRlbShpdGVtLCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy51c2VTZWxlY3RlZEl0ZW0oZXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uU3VnZ2VzdGlvbk1vdXNlb3ZlcihfZXZlbnQ6IE1vdXNlRXZlbnQsIGVsOiBIVE1MRGl2RWxlbWVudCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLnN1Z2dlc3Rpb25zLmluZGV4T2YoZWwpO1xyXG4gICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRJdGVtKGl0ZW0sIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRTdWdnZXN0aW9ucyh2YWx1ZXM6IFRbXSkge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuZW1wdHkoKTtcclxuICAgICAgICBjb25zdCBzdWdnZXN0aW9uRWxzOiBIVE1MRGl2RWxlbWVudFtdID0gW107XHJcblxyXG4gICAgICAgIHZhbHVlcy5mb3JFYWNoKCh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzdWdnZXN0aW9uRWwgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZURpdihcInN1Z2dlc3Rpb24taXRlbVwiKTtcclxuICAgICAgICAgICAgdGhpcy5vd25lci5yZW5kZXJTdWdnZXN0aW9uKHZhbHVlLCBzdWdnZXN0aW9uRWwpO1xyXG4gICAgICAgICAgICBzdWdnZXN0aW9uRWxzLnB1c2goc3VnZ2VzdGlvbkVsKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXM7XHJcbiAgICAgICAgdGhpcy5zdWdnZXN0aW9ucyA9IHN1Z2dlc3Rpb25FbHM7XHJcbiAgICAgICAgdGhpcy5zZXRTZWxlY3RlZEl0ZW0oMCwgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHVzZVNlbGVjdGVkSXRlbShldmVudDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSB0aGlzLnZhbHVlc1t0aGlzLnNlbGVjdGVkSXRlbV07XHJcbiAgICAgICAgaWYgKGN1cnJlbnRWYWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLm93bmVyLnNlbGVjdFN1Z2dlc3Rpb24oY3VycmVudFZhbHVlLCBldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldFNlbGVjdGVkSXRlbShzZWxlY3RlZEluZGV4OiBudW1iZXIsIHNjcm9sbEludG9WaWV3OiBib29sZWFuKSB7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZEluZGV4ID0gd3JhcEFyb3VuZChcclxuICAgICAgICAgICAgc2VsZWN0ZWRJbmRleCxcclxuICAgICAgICAgICAgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGhcclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbnN0IHByZXZTZWxlY3RlZFN1Z2dlc3Rpb24gPSB0aGlzLnN1Z2dlc3Rpb25zW3RoaXMuc2VsZWN0ZWRJdGVtXTtcclxuICAgICAgICBjb25zdCBzZWxlY3RlZFN1Z2dlc3Rpb24gPSB0aGlzLnN1Z2dlc3Rpb25zW25vcm1hbGl6ZWRJbmRleF07XHJcblxyXG4gICAgICAgIHByZXZTZWxlY3RlZFN1Z2dlc3Rpb24/LnJlbW92ZUNsYXNzKFwiaXMtc2VsZWN0ZWRcIik7XHJcbiAgICAgICAgc2VsZWN0ZWRTdWdnZXN0aW9uPy5hZGRDbGFzcyhcImlzLXNlbGVjdGVkXCIpO1xyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IG5vcm1hbGl6ZWRJbmRleDtcclxuXHJcbiAgICAgICAgaWYgKHNjcm9sbEludG9WaWV3KSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkU3VnZ2VzdGlvbi5zY3JvbGxJbnRvVmlldyhmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVGV4dElucHV0U3VnZ2VzdDxUPiBpbXBsZW1lbnRzIElTdWdnZXN0T3duZXI8VD4ge1xyXG4gICAgcHJvdGVjdGVkIGFwcDogQXBwO1xyXG4gICAgcHJvdGVjdGVkIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQgfCBIVE1MVGV4dEFyZWFFbGVtZW50O1xyXG5cclxuICAgIHByaXZhdGUgcG9wcGVyOiBQb3BwZXJJbnN0YW5jZTtcclxuICAgIHByaXZhdGUgc2NvcGU6IFNjb3BlO1xyXG4gICAgcHJpdmF0ZSBzdWdnZXN0RWw6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBzdWdnZXN0OiBTdWdnZXN0PFQ+O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50IHwgSFRNTFRleHRBcmVhRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIHRoaXMuaW5wdXRFbCA9IGlucHV0RWw7XHJcbiAgICAgICAgdGhpcy5zY29wZSA9IG5ldyBTY29wZSgpO1xyXG5cclxuICAgICAgICB0aGlzLnN1Z2dlc3RFbCA9IGNyZWF0ZURpdihcInN1Z2dlc3Rpb24tY29udGFpbmVyXCIpO1xyXG4gICAgICAgIGNvbnN0IHN1Z2dlc3Rpb24gPSB0aGlzLnN1Z2dlc3RFbC5jcmVhdGVEaXYoXCJzdWdnZXN0aW9uXCIpO1xyXG4gICAgICAgIHRoaXMuc3VnZ2VzdCA9IG5ldyBTdWdnZXN0KHRoaXMsIHN1Z2dlc3Rpb24sIHRoaXMuc2NvcGUpO1xyXG5cclxuICAgICAgICB0aGlzLnNjb3BlLnJlZ2lzdGVyKFtdLCBcIkVzY2FwZVwiLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICB0aGlzLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHRoaXMub25JbnB1dENoYW5nZWQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCB0aGlzLm9uSW5wdXRDaGFuZ2VkLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuc3VnZ2VzdEVsLm9uKFxyXG4gICAgICAgICAgICBcIm1vdXNlZG93blwiLFxyXG4gICAgICAgICAgICBcIi5zdWdnZXN0aW9uLWNvbnRhaW5lclwiLFxyXG4gICAgICAgICAgICAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIG9uSW5wdXRDaGFuZ2VkKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGlucHV0U3RyID0gdGhpcy5pbnB1dEVsLnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IHN1Z2dlc3Rpb25zID0gdGhpcy5nZXRTdWdnZXN0aW9ucyhpbnB1dFN0cik7XHJcblxyXG4gICAgICAgIGlmICghc3VnZ2VzdGlvbnMpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc3VnZ2VzdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnN1Z2dlc3Quc2V0U3VnZ2VzdGlvbnMoc3VnZ2VzdGlvbnMpO1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICB0aGlzLm9wZW4oKDxhbnk+dGhpcy5hcHApLmRvbS5hcHBDb250YWluZXJFbCwgdGhpcy5pbnB1dEVsKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgaW5wdXRFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICg8YW55PnRoaXMuYXBwKS5rZXltYXAucHVzaFNjb3BlKHRoaXMuc2NvcGUpO1xyXG5cclxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5zdWdnZXN0RWwpO1xyXG4gICAgICAgIHRoaXMucG9wcGVyID0gY3JlYXRlUG9wcGVyKGlucHV0RWwsIHRoaXMuc3VnZ2VzdEVsLCB7XHJcbiAgICAgICAgICAgIHBsYWNlbWVudDogXCJib3R0b20tc3RhcnRcIixcclxuICAgICAgICAgICAgbW9kaWZpZXJzOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJzYW1lV2lkdGhcIixcclxuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGZuOiAoeyBzdGF0ZSwgaW5zdGFuY2UgfSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3RlOiBwb3NpdGlvbmluZyBuZWVkcyB0byBiZSBjYWxjdWxhdGVkIHR3aWNlIC1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmlyc3QgcGFzcyAtIHBvc2l0aW9uaW5nIGl0IGFjY29yZGluZyB0byB0aGUgd2lkdGggb2YgdGhlIHBvcHBlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWNvbmQgcGFzcyAtIHBvc2l0aW9uIGl0IHdpdGggdGhlIHdpZHRoIGJvdW5kIHRvIHRoZSByZWZlcmVuY2UgZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBuZWVkIHRvIGVhcmx5IGV4aXQgdG8gYXZvaWQgYW4gaW5maW5pdGUgbG9vcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRXaWR0aCA9IGAke3N0YXRlLnJlY3RzLnJlZmVyZW5jZS53aWR0aH1weGA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5zdHlsZXMucG9wcGVyLndpZHRoID09PSB0YXJnZXRXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnN0eWxlcy5wb3BwZXIud2lkdGggPSB0YXJnZXRXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UudXBkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBwaGFzZTogXCJiZWZvcmVXcml0ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVzOiBbXCJjb21wdXRlU3R5bGVzXCJdLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpOiB2b2lkIHtcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICg8YW55PnRoaXMuYXBwKS5rZXltYXAucG9wU2NvcGUodGhpcy5zY29wZSk7XHJcblxyXG4gICAgICAgIHRoaXMuc3VnZ2VzdC5zZXRTdWdnZXN0aW9ucyhbXSk7XHJcbiAgICAgICAgaWYgKHRoaXMucG9wcGVyKSB0aGlzLnBvcHBlci5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5zdWdnZXN0RWwuZGV0YWNoKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYWJzdHJhY3QgZ2V0U3VnZ2VzdGlvbnMoaW5wdXRTdHI6IHN0cmluZyk6IFRbXTtcclxuICAgIGFic3RyYWN0IHJlbmRlclN1Z2dlc3Rpb24oaXRlbTogVCwgZWw6IEhUTUxFbGVtZW50KTogdm9pZDtcclxuICAgIGFic3RyYWN0IHNlbGVjdFN1Z2dlc3Rpb24oaXRlbTogVCk6IHZvaWQ7XHJcbn0iLCAiZXhwb3J0IHZhciB0b3AgPSAndG9wJztcbmV4cG9ydCB2YXIgYm90dG9tID0gJ2JvdHRvbSc7XG5leHBvcnQgdmFyIHJpZ2h0ID0gJ3JpZ2h0JztcbmV4cG9ydCB2YXIgbGVmdCA9ICdsZWZ0JztcbmV4cG9ydCB2YXIgYXV0byA9ICdhdXRvJztcbmV4cG9ydCB2YXIgYmFzZVBsYWNlbWVudHMgPSBbdG9wLCBib3R0b20sIHJpZ2h0LCBsZWZ0XTtcbmV4cG9ydCB2YXIgc3RhcnQgPSAnc3RhcnQnO1xuZXhwb3J0IHZhciBlbmQgPSAnZW5kJztcbmV4cG9ydCB2YXIgY2xpcHBpbmdQYXJlbnRzID0gJ2NsaXBwaW5nUGFyZW50cyc7XG5leHBvcnQgdmFyIHZpZXdwb3J0ID0gJ3ZpZXdwb3J0JztcbmV4cG9ydCB2YXIgcG9wcGVyID0gJ3BvcHBlcic7XG5leHBvcnQgdmFyIHJlZmVyZW5jZSA9ICdyZWZlcmVuY2UnO1xuZXhwb3J0IHZhciB2YXJpYXRpb25QbGFjZW1lbnRzID0gLyojX19QVVJFX18qL2Jhc2VQbGFjZW1lbnRzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIGFjYy5jb25jYXQoW3BsYWNlbWVudCArIFwiLVwiICsgc3RhcnQsIHBsYWNlbWVudCArIFwiLVwiICsgZW5kXSk7XG59LCBbXSk7XG5leHBvcnQgdmFyIHBsYWNlbWVudHMgPSAvKiNfX1BVUkVfXyovW10uY29uY2F0KGJhc2VQbGFjZW1lbnRzLCBbYXV0b10pLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIGFjYy5jb25jYXQoW3BsYWNlbWVudCwgcGxhY2VtZW50ICsgXCItXCIgKyBzdGFydCwgcGxhY2VtZW50ICsgXCItXCIgKyBlbmRdKTtcbn0sIFtdKTsgLy8gbW9kaWZpZXJzIHRoYXQgbmVlZCB0byByZWFkIHRoZSBET01cblxuZXhwb3J0IHZhciBiZWZvcmVSZWFkID0gJ2JlZm9yZVJlYWQnO1xuZXhwb3J0IHZhciByZWFkID0gJ3JlYWQnO1xuZXhwb3J0IHZhciBhZnRlclJlYWQgPSAnYWZ0ZXJSZWFkJzsgLy8gcHVyZS1sb2dpYyBtb2RpZmllcnNcblxuZXhwb3J0IHZhciBiZWZvcmVNYWluID0gJ2JlZm9yZU1haW4nO1xuZXhwb3J0IHZhciBtYWluID0gJ21haW4nO1xuZXhwb3J0IHZhciBhZnRlck1haW4gPSAnYWZ0ZXJNYWluJzsgLy8gbW9kaWZpZXIgd2l0aCB0aGUgcHVycG9zZSB0byB3cml0ZSB0byB0aGUgRE9NIChvciB3cml0ZSBpbnRvIGEgZnJhbWV3b3JrIHN0YXRlKVxuXG5leHBvcnQgdmFyIGJlZm9yZVdyaXRlID0gJ2JlZm9yZVdyaXRlJztcbmV4cG9ydCB2YXIgd3JpdGUgPSAnd3JpdGUnO1xuZXhwb3J0IHZhciBhZnRlcldyaXRlID0gJ2FmdGVyV3JpdGUnO1xuZXhwb3J0IHZhciBtb2RpZmllclBoYXNlcyA9IFtiZWZvcmVSZWFkLCByZWFkLCBhZnRlclJlYWQsIGJlZm9yZU1haW4sIG1haW4sIGFmdGVyTWFpbiwgYmVmb3JlV3JpdGUsIHdyaXRlLCBhZnRlcldyaXRlXTsiLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Tm9kZU5hbWUoZWxlbWVudCkge1xuICByZXR1cm4gZWxlbWVudCA/IChlbGVtZW50Lm5vZGVOYW1lIHx8ICcnKS50b0xvd2VyQ2FzZSgpIDogbnVsbDtcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0V2luZG93KG5vZGUpIHtcbiAgaWYgKG5vZGUgPT0gbnVsbCkge1xuICAgIHJldHVybiB3aW5kb3c7XG4gIH1cblxuICBpZiAobm9kZS50b1N0cmluZygpICE9PSAnW29iamVjdCBXaW5kb3ddJykge1xuICAgIHZhciBvd25lckRvY3VtZW50ID0gbm9kZS5vd25lckRvY3VtZW50O1xuICAgIHJldHVybiBvd25lckRvY3VtZW50ID8gb3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyB8fCB3aW5kb3cgOiB3aW5kb3c7XG4gIH1cblxuICByZXR1cm4gbm9kZTtcbn0iLCAiaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi9nZXRXaW5kb3cuanNcIjtcblxuZnVuY3Rpb24gaXNFbGVtZW50KG5vZGUpIHtcbiAgdmFyIE93bkVsZW1lbnQgPSBnZXRXaW5kb3cobm9kZSkuRWxlbWVudDtcbiAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBPd25FbGVtZW50IHx8IG5vZGUgaW5zdGFuY2VvZiBFbGVtZW50O1xufVxuXG5mdW5jdGlvbiBpc0hUTUxFbGVtZW50KG5vZGUpIHtcbiAgdmFyIE93bkVsZW1lbnQgPSBnZXRXaW5kb3cobm9kZSkuSFRNTEVsZW1lbnQ7XG4gIHJldHVybiBub2RlIGluc3RhbmNlb2YgT3duRWxlbWVudCB8fCBub2RlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGlzU2hhZG93Um9vdChub2RlKSB7XG4gIC8vIElFIDExIGhhcyBubyBTaGFkb3dSb290XG4gIGlmICh0eXBlb2YgU2hhZG93Um9vdCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgT3duRWxlbWVudCA9IGdldFdpbmRvdyhub2RlKS5TaGFkb3dSb290O1xuICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIE93bkVsZW1lbnQgfHwgbm9kZSBpbnN0YW5jZW9mIFNoYWRvd1Jvb3Q7XG59XG5cbmV4cG9ydCB7IGlzRWxlbWVudCwgaXNIVE1MRWxlbWVudCwgaXNTaGFkb3dSb290IH07IiwgImltcG9ydCBnZXROb2RlTmFtZSBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldE5vZGVOYW1lLmpzXCI7XG5pbXBvcnQgeyBpc0hUTUxFbGVtZW50IH0gZnJvbSBcIi4uL2RvbS11dGlscy9pbnN0YW5jZU9mLmpzXCI7IC8vIFRoaXMgbW9kaWZpZXIgdGFrZXMgdGhlIHN0eWxlcyBwcmVwYXJlZCBieSB0aGUgYGNvbXB1dGVTdHlsZXNgIG1vZGlmaWVyXG4vLyBhbmQgYXBwbGllcyB0aGVtIHRvIHRoZSBIVE1MRWxlbWVudHMgc3VjaCBhcyBwb3BwZXIgYW5kIGFycm93XG5cbmZ1bmN0aW9uIGFwcGx5U3R5bGVzKF9yZWYpIHtcbiAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZTtcbiAgT2JqZWN0LmtleXMoc3RhdGUuZWxlbWVudHMpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB2YXIgc3R5bGUgPSBzdGF0ZS5zdHlsZXNbbmFtZV0gfHwge307XG4gICAgdmFyIGF0dHJpYnV0ZXMgPSBzdGF0ZS5hdHRyaWJ1dGVzW25hbWVdIHx8IHt9O1xuICAgIHZhciBlbGVtZW50ID0gc3RhdGUuZWxlbWVudHNbbmFtZV07IC8vIGFycm93IGlzIG9wdGlvbmFsICsgdmlydHVhbCBlbGVtZW50c1xuXG4gICAgaWYgKCFpc0hUTUxFbGVtZW50KGVsZW1lbnQpIHx8ICFnZXROb2RlTmFtZShlbGVtZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gRmxvdyBkb2Vzbid0IHN1cHBvcnQgdG8gZXh0ZW5kIHRoaXMgcHJvcGVydHksIGJ1dCBpdCdzIHRoZSBtb3N0XG4gICAgLy8gZWZmZWN0aXZlIHdheSB0byBhcHBseSBzdHlsZXMgdG8gYW4gSFRNTEVsZW1lbnRcbiAgICAvLyAkRmxvd0ZpeE1lW2Nhbm5vdC13cml0ZV1cblxuXG4gICAgT2JqZWN0LmFzc2lnbihlbGVtZW50LnN0eWxlLCBzdHlsZSk7XG4gICAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgdmFyIHZhbHVlID0gYXR0cmlidXRlc1tuYW1lXTtcblxuICAgICAgaWYgKHZhbHVlID09PSBmYWxzZSkge1xuICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlID09PSB0cnVlID8gJycgOiB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBlZmZlY3QoX3JlZjIpIHtcbiAgdmFyIHN0YXRlID0gX3JlZjIuc3RhdGU7XG4gIHZhciBpbml0aWFsU3R5bGVzID0ge1xuICAgIHBvcHBlcjoge1xuICAgICAgcG9zaXRpb246IHN0YXRlLm9wdGlvbnMuc3RyYXRlZ3ksXG4gICAgICBsZWZ0OiAnMCcsXG4gICAgICB0b3A6ICcwJyxcbiAgICAgIG1hcmdpbjogJzAnXG4gICAgfSxcbiAgICBhcnJvdzoge1xuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZSdcbiAgICB9LFxuICAgIHJlZmVyZW5jZToge31cbiAgfTtcbiAgT2JqZWN0LmFzc2lnbihzdGF0ZS5lbGVtZW50cy5wb3BwZXIuc3R5bGUsIGluaXRpYWxTdHlsZXMucG9wcGVyKTtcbiAgc3RhdGUuc3R5bGVzID0gaW5pdGlhbFN0eWxlcztcblxuICBpZiAoc3RhdGUuZWxlbWVudHMuYXJyb3cpIHtcbiAgICBPYmplY3QuYXNzaWduKHN0YXRlLmVsZW1lbnRzLmFycm93LnN0eWxlLCBpbml0aWFsU3R5bGVzLmFycm93KTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgT2JqZWN0LmtleXMoc3RhdGUuZWxlbWVudHMpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIHZhciBlbGVtZW50ID0gc3RhdGUuZWxlbWVudHNbbmFtZV07XG4gICAgICB2YXIgYXR0cmlidXRlcyA9IHN0YXRlLmF0dHJpYnV0ZXNbbmFtZV0gfHwge307XG4gICAgICB2YXIgc3R5bGVQcm9wZXJ0aWVzID0gT2JqZWN0LmtleXMoc3RhdGUuc3R5bGVzLmhhc093blByb3BlcnR5KG5hbWUpID8gc3RhdGUuc3R5bGVzW25hbWVdIDogaW5pdGlhbFN0eWxlc1tuYW1lXSk7IC8vIFNldCBhbGwgdmFsdWVzIHRvIGFuIGVtcHR5IHN0cmluZyB0byB1bnNldCB0aGVtXG5cbiAgICAgIHZhciBzdHlsZSA9IHN0eWxlUHJvcGVydGllcy5yZWR1Y2UoZnVuY3Rpb24gKHN0eWxlLCBwcm9wZXJ0eSkge1xuICAgICAgICBzdHlsZVtwcm9wZXJ0eV0gPSAnJztcbiAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgICAgfSwge30pOyAvLyBhcnJvdyBpcyBvcHRpb25hbCArIHZpcnR1YWwgZWxlbWVudHNcblxuICAgICAgaWYgKCFpc0hUTUxFbGVtZW50KGVsZW1lbnQpIHx8ICFnZXROb2RlTmFtZShlbGVtZW50KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIE9iamVjdC5hc3NpZ24oZWxlbWVudC5zdHlsZSwgc3R5bGUpO1xuICAgICAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoYXR0cmlidXRlKSB7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ2FwcGx5U3R5bGVzJyxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcGhhc2U6ICd3cml0ZScsXG4gIGZuOiBhcHBseVN0eWxlcyxcbiAgZWZmZWN0OiBlZmZlY3QsXG4gIHJlcXVpcmVzOiBbJ2NvbXB1dGVTdHlsZXMnXVxufTsiLCAiaW1wb3J0IHsgYXV0byB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0QmFzZVBsYWNlbWVudChwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIHBsYWNlbWVudC5zcGxpdCgnLScpWzBdO1xufSIsICJleHBvcnQgdmFyIG1heCA9IE1hdGgubWF4O1xuZXhwb3J0IHZhciBtaW4gPSBNYXRoLm1pbjtcbmV4cG9ydCB2YXIgcm91bmQgPSBNYXRoLnJvdW5kOyIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRVQVN0cmluZygpIHtcbiAgdmFyIHVhRGF0YSA9IG5hdmlnYXRvci51c2VyQWdlbnREYXRhO1xuXG4gIGlmICh1YURhdGEgIT0gbnVsbCAmJiB1YURhdGEuYnJhbmRzICYmIEFycmF5LmlzQXJyYXkodWFEYXRhLmJyYW5kcykpIHtcbiAgICByZXR1cm4gdWFEYXRhLmJyYW5kcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHJldHVybiBpdGVtLmJyYW5kICsgXCIvXCIgKyBpdGVtLnZlcnNpb247XG4gICAgfSkuam9pbignICcpO1xuICB9XG5cbiAgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQ7XG59IiwgImltcG9ydCBnZXRVQVN0cmluZyBmcm9tIFwiLi4vdXRpbHMvdXNlckFnZW50LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0xheW91dFZpZXdwb3J0KCkge1xuICByZXR1cm4gIS9eKCg/IWNocm9tZXxhbmRyb2lkKS4pKnNhZmFyaS9pLnRlc3QoZ2V0VUFTdHJpbmcoKSk7XG59IiwgImltcG9ydCB7IGlzRWxlbWVudCwgaXNIVE1MRWxlbWVudCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmltcG9ydCB7IHJvdW5kIH0gZnJvbSBcIi4uL3V0aWxzL21hdGguanNcIjtcbmltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4vZ2V0V2luZG93LmpzXCI7XG5pbXBvcnQgaXNMYXlvdXRWaWV3cG9ydCBmcm9tIFwiLi9pc0xheW91dFZpZXdwb3J0LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRCb3VuZGluZ0NsaWVudFJlY3QoZWxlbWVudCwgaW5jbHVkZVNjYWxlLCBpc0ZpeGVkU3RyYXRlZ3kpIHtcbiAgaWYgKGluY2x1ZGVTY2FsZSA9PT0gdm9pZCAwKSB7XG4gICAgaW5jbHVkZVNjYWxlID0gZmFsc2U7XG4gIH1cblxuICBpZiAoaXNGaXhlZFN0cmF0ZWd5ID09PSB2b2lkIDApIHtcbiAgICBpc0ZpeGVkU3RyYXRlZ3kgPSBmYWxzZTtcbiAgfVxuXG4gIHZhciBjbGllbnRSZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgdmFyIHNjYWxlWCA9IDE7XG4gIHZhciBzY2FsZVkgPSAxO1xuXG4gIGlmIChpbmNsdWRlU2NhbGUgJiYgaXNIVE1MRWxlbWVudChlbGVtZW50KSkge1xuICAgIHNjYWxlWCA9IGVsZW1lbnQub2Zmc2V0V2lkdGggPiAwID8gcm91bmQoY2xpZW50UmVjdC53aWR0aCkgLyBlbGVtZW50Lm9mZnNldFdpZHRoIHx8IDEgOiAxO1xuICAgIHNjYWxlWSA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0ID4gMCA/IHJvdW5kKGNsaWVudFJlY3QuaGVpZ2h0KSAvIGVsZW1lbnQub2Zmc2V0SGVpZ2h0IHx8IDEgOiAxO1xuICB9XG5cbiAgdmFyIF9yZWYgPSBpc0VsZW1lbnQoZWxlbWVudCkgPyBnZXRXaW5kb3coZWxlbWVudCkgOiB3aW5kb3csXG4gICAgICB2aXN1YWxWaWV3cG9ydCA9IF9yZWYudmlzdWFsVmlld3BvcnQ7XG5cbiAgdmFyIGFkZFZpc3VhbE9mZnNldHMgPSAhaXNMYXlvdXRWaWV3cG9ydCgpICYmIGlzRml4ZWRTdHJhdGVneTtcbiAgdmFyIHggPSAoY2xpZW50UmVjdC5sZWZ0ICsgKGFkZFZpc3VhbE9mZnNldHMgJiYgdmlzdWFsVmlld3BvcnQgPyB2aXN1YWxWaWV3cG9ydC5vZmZzZXRMZWZ0IDogMCkpIC8gc2NhbGVYO1xuICB2YXIgeSA9IChjbGllbnRSZWN0LnRvcCArIChhZGRWaXN1YWxPZmZzZXRzICYmIHZpc3VhbFZpZXdwb3J0ID8gdmlzdWFsVmlld3BvcnQub2Zmc2V0VG9wIDogMCkpIC8gc2NhbGVZO1xuICB2YXIgd2lkdGggPSBjbGllbnRSZWN0LndpZHRoIC8gc2NhbGVYO1xuICB2YXIgaGVpZ2h0ID0gY2xpZW50UmVjdC5oZWlnaHQgLyBzY2FsZVk7XG4gIHJldHVybiB7XG4gICAgd2lkdGg6IHdpZHRoLFxuICAgIGhlaWdodDogaGVpZ2h0LFxuICAgIHRvcDogeSxcbiAgICByaWdodDogeCArIHdpZHRoLFxuICAgIGJvdHRvbTogeSArIGhlaWdodCxcbiAgICBsZWZ0OiB4LFxuICAgIHg6IHgsXG4gICAgeTogeVxuICB9O1xufSIsICJpbXBvcnQgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGZyb20gXCIuL2dldEJvdW5kaW5nQ2xpZW50UmVjdC5qc1wiOyAvLyBSZXR1cm5zIHRoZSBsYXlvdXQgcmVjdCBvZiBhbiBlbGVtZW50IHJlbGF0aXZlIHRvIGl0cyBvZmZzZXRQYXJlbnQuIExheW91dFxuLy8gbWVhbnMgaXQgZG9lc24ndCB0YWtlIGludG8gYWNjb3VudCB0cmFuc2Zvcm1zLlxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRMYXlvdXRSZWN0KGVsZW1lbnQpIHtcbiAgdmFyIGNsaWVudFJlY3QgPSBnZXRCb3VuZGluZ0NsaWVudFJlY3QoZWxlbWVudCk7IC8vIFVzZSB0aGUgY2xpZW50UmVjdCBzaXplcyBpZiBpdCdzIG5vdCBiZWVuIHRyYW5zZm9ybWVkLlxuICAvLyBGaXhlcyBodHRwczovL2dpdGh1Yi5jb20vcG9wcGVyanMvcG9wcGVyLWNvcmUvaXNzdWVzLzEyMjNcblxuICB2YXIgd2lkdGggPSBlbGVtZW50Lm9mZnNldFdpZHRoO1xuICB2YXIgaGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG5cbiAgaWYgKE1hdGguYWJzKGNsaWVudFJlY3Qud2lkdGggLSB3aWR0aCkgPD0gMSkge1xuICAgIHdpZHRoID0gY2xpZW50UmVjdC53aWR0aDtcbiAgfVxuXG4gIGlmIChNYXRoLmFicyhjbGllbnRSZWN0LmhlaWdodCAtIGhlaWdodCkgPD0gMSkge1xuICAgIGhlaWdodCA9IGNsaWVudFJlY3QuaGVpZ2h0O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB4OiBlbGVtZW50Lm9mZnNldExlZnQsXG4gICAgeTogZWxlbWVudC5vZmZzZXRUb3AsXG4gICAgd2lkdGg6IHdpZHRoLFxuICAgIGhlaWdodDogaGVpZ2h0XG4gIH07XG59IiwgImltcG9ydCB7IGlzU2hhZG93Um9vdCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbnRhaW5zKHBhcmVudCwgY2hpbGQpIHtcbiAgdmFyIHJvb3ROb2RlID0gY2hpbGQuZ2V0Um9vdE5vZGUgJiYgY2hpbGQuZ2V0Um9vdE5vZGUoKTsgLy8gRmlyc3QsIGF0dGVtcHQgd2l0aCBmYXN0ZXIgbmF0aXZlIG1ldGhvZFxuXG4gIGlmIChwYXJlbnQuY29udGFpbnMoY2hpbGQpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gLy8gdGhlbiBmYWxsYmFjayB0byBjdXN0b20gaW1wbGVtZW50YXRpb24gd2l0aCBTaGFkb3cgRE9NIHN1cHBvcnRcbiAgZWxzZSBpZiAocm9vdE5vZGUgJiYgaXNTaGFkb3dSb290KHJvb3ROb2RlKSkge1xuICAgICAgdmFyIG5leHQgPSBjaGlsZDtcblxuICAgICAgZG8ge1xuICAgICAgICBpZiAobmV4dCAmJiBwYXJlbnQuaXNTYW1lTm9kZShuZXh0KSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXTogbmVlZCBhIGJldHRlciB3YXkgdG8gaGFuZGxlIHRoaXMuLi5cblxuXG4gICAgICAgIG5leHQgPSBuZXh0LnBhcmVudE5vZGUgfHwgbmV4dC5ob3N0O1xuICAgICAgfSB3aGlsZSAobmV4dCk7XG4gICAgfSAvLyBHaXZlIHVwLCB0aGUgcmVzdWx0IGlzIGZhbHNlXG5cblxuICByZXR1cm4gZmFsc2U7XG59IiwgImltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4vZ2V0V2luZG93LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpIHtcbiAgcmV0dXJuIGdldFdpbmRvdyhlbGVtZW50KS5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xufSIsICJpbXBvcnQgZ2V0Tm9kZU5hbWUgZnJvbSBcIi4vZ2V0Tm9kZU5hbWUuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVGFibGVFbGVtZW50KGVsZW1lbnQpIHtcbiAgcmV0dXJuIFsndGFibGUnLCAndGQnLCAndGgnXS5pbmRleE9mKGdldE5vZGVOYW1lKGVsZW1lbnQpKSA+PSAwO1xufSIsICJpbXBvcnQgeyBpc0VsZW1lbnQgfSBmcm9tIFwiLi9pbnN0YW5jZU9mLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXREb2N1bWVudEVsZW1lbnQoZWxlbWVudCkge1xuICAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1yZXR1cm5dOiBhc3N1bWUgYm9keSBpcyBhbHdheXMgYXZhaWxhYmxlXG4gIHJldHVybiAoKGlzRWxlbWVudChlbGVtZW50KSA/IGVsZW1lbnQub3duZXJEb2N1bWVudCA6IC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXVxuICBlbGVtZW50LmRvY3VtZW50KSB8fCB3aW5kb3cuZG9jdW1lbnQpLmRvY3VtZW50RWxlbWVudDtcbn0iLCAiaW1wb3J0IGdldE5vZGVOYW1lIGZyb20gXCIuL2dldE5vZGVOYW1lLmpzXCI7XG5pbXBvcnQgZ2V0RG9jdW1lbnRFbGVtZW50IGZyb20gXCIuL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IHsgaXNTaGFkb3dSb290IH0gZnJvbSBcIi4vaW5zdGFuY2VPZi5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0UGFyZW50Tm9kZShlbGVtZW50KSB7XG4gIGlmIChnZXROb2RlTmFtZShlbGVtZW50KSA9PT0gJ2h0bWwnKSB7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cblxuICByZXR1cm4gKC8vIHRoaXMgaXMgYSBxdWlja2VyIChidXQgbGVzcyB0eXBlIHNhZmUpIHdheSB0byBzYXZlIHF1aXRlIHNvbWUgYnl0ZXMgZnJvbSB0aGUgYnVuZGxlXG4gICAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtcmV0dXJuXVxuICAgIC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXVxuICAgIGVsZW1lbnQuYXNzaWduZWRTbG90IHx8IC8vIHN0ZXAgaW50byB0aGUgc2hhZG93IERPTSBvZiB0aGUgcGFyZW50IG9mIGEgc2xvdHRlZCBub2RlXG4gICAgZWxlbWVudC5wYXJlbnROb2RlIHx8ICggLy8gRE9NIEVsZW1lbnQgZGV0ZWN0ZWRcbiAgICBpc1NoYWRvd1Jvb3QoZWxlbWVudCkgPyBlbGVtZW50Lmhvc3QgOiBudWxsKSB8fCAvLyBTaGFkb3dSb290IGRldGVjdGVkXG4gICAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtY2FsbF06IEhUTUxFbGVtZW50IGlzIGEgTm9kZVxuICAgIGdldERvY3VtZW50RWxlbWVudChlbGVtZW50KSAvLyBmYWxsYmFja1xuXG4gICk7XG59IiwgImltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4vZ2V0V2luZG93LmpzXCI7XG5pbXBvcnQgZ2V0Tm9kZU5hbWUgZnJvbSBcIi4vZ2V0Tm9kZU5hbWUuanNcIjtcbmltcG9ydCBnZXRDb21wdXRlZFN0eWxlIGZyb20gXCIuL2dldENvbXB1dGVkU3R5bGUuanNcIjtcbmltcG9ydCB7IGlzSFRNTEVsZW1lbnQsIGlzU2hhZG93Um9vdCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmltcG9ydCBpc1RhYmxlRWxlbWVudCBmcm9tIFwiLi9pc1RhYmxlRWxlbWVudC5qc1wiO1xuaW1wb3J0IGdldFBhcmVudE5vZGUgZnJvbSBcIi4vZ2V0UGFyZW50Tm9kZS5qc1wiO1xuaW1wb3J0IGdldFVBU3RyaW5nIGZyb20gXCIuLi91dGlscy91c2VyQWdlbnQuanNcIjtcblxuZnVuY3Rpb24gZ2V0VHJ1ZU9mZnNldFBhcmVudChlbGVtZW50KSB7XG4gIGlmICghaXNIVE1MRWxlbWVudChlbGVtZW50KSB8fCAvLyBodHRwczovL2dpdGh1Yi5jb20vcG9wcGVyanMvcG9wcGVyLWNvcmUvaXNzdWVzLzgzN1xuICBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLnBvc2l0aW9uID09PSAnZml4ZWQnKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4gZWxlbWVudC5vZmZzZXRQYXJlbnQ7XG59IC8vIGAub2Zmc2V0UGFyZW50YCByZXBvcnRzIGBudWxsYCBmb3IgZml4ZWQgZWxlbWVudHMsIHdoaWxlIGFic29sdXRlIGVsZW1lbnRzXG4vLyByZXR1cm4gdGhlIGNvbnRhaW5pbmcgYmxvY2tcblxuXG5mdW5jdGlvbiBnZXRDb250YWluaW5nQmxvY2soZWxlbWVudCkge1xuICB2YXIgaXNGaXJlZm94ID0gL2ZpcmVmb3gvaS50ZXN0KGdldFVBU3RyaW5nKCkpO1xuICB2YXIgaXNJRSA9IC9UcmlkZW50L2kudGVzdChnZXRVQVN0cmluZygpKTtcblxuICBpZiAoaXNJRSAmJiBpc0hUTUxFbGVtZW50KGVsZW1lbnQpKSB7XG4gICAgLy8gSW4gSUUgOSwgMTAgYW5kIDExIGZpeGVkIGVsZW1lbnRzIGNvbnRhaW5pbmcgYmxvY2sgaXMgYWx3YXlzIGVzdGFibGlzaGVkIGJ5IHRoZSB2aWV3cG9ydFxuICAgIHZhciBlbGVtZW50Q3NzID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcblxuICAgIGlmIChlbGVtZW50Q3NzLnBvc2l0aW9uID09PSAnZml4ZWQnKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICB2YXIgY3VycmVudE5vZGUgPSBnZXRQYXJlbnROb2RlKGVsZW1lbnQpO1xuXG4gIGlmIChpc1NoYWRvd1Jvb3QoY3VycmVudE5vZGUpKSB7XG4gICAgY3VycmVudE5vZGUgPSBjdXJyZW50Tm9kZS5ob3N0O1xuICB9XG5cbiAgd2hpbGUgKGlzSFRNTEVsZW1lbnQoY3VycmVudE5vZGUpICYmIFsnaHRtbCcsICdib2R5J10uaW5kZXhPZihnZXROb2RlTmFtZShjdXJyZW50Tm9kZSkpIDwgMCkge1xuICAgIHZhciBjc3MgPSBnZXRDb21wdXRlZFN0eWxlKGN1cnJlbnROb2RlKTsgLy8gVGhpcyBpcyBub24tZXhoYXVzdGl2ZSBidXQgY292ZXJzIHRoZSBtb3N0IGNvbW1vbiBDU1MgcHJvcGVydGllcyB0aGF0XG4gICAgLy8gY3JlYXRlIGEgY29udGFpbmluZyBibG9jay5cbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvQ29udGFpbmluZ19ibG9jayNpZGVudGlmeWluZ190aGVfY29udGFpbmluZ19ibG9ja1xuXG4gICAgaWYgKGNzcy50cmFuc2Zvcm0gIT09ICdub25lJyB8fCBjc3MucGVyc3BlY3RpdmUgIT09ICdub25lJyB8fCBjc3MuY29udGFpbiA9PT0gJ3BhaW50JyB8fCBbJ3RyYW5zZm9ybScsICdwZXJzcGVjdGl2ZSddLmluZGV4T2YoY3NzLndpbGxDaGFuZ2UpICE9PSAtMSB8fCBpc0ZpcmVmb3ggJiYgY3NzLndpbGxDaGFuZ2UgPT09ICdmaWx0ZXInIHx8IGlzRmlyZWZveCAmJiBjc3MuZmlsdGVyICYmIGNzcy5maWx0ZXIgIT09ICdub25lJykge1xuICAgICAgcmV0dXJuIGN1cnJlbnROb2RlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50Tm9kZSA9IGN1cnJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59IC8vIEdldHMgdGhlIGNsb3Nlc3QgYW5jZXN0b3IgcG9zaXRpb25lZCBlbGVtZW50LiBIYW5kbGVzIHNvbWUgZWRnZSBjYXNlcyxcbi8vIHN1Y2ggYXMgdGFibGUgYW5jZXN0b3JzIGFuZCBjcm9zcyBicm93c2VyIGJ1Z3MuXG5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0T2Zmc2V0UGFyZW50KGVsZW1lbnQpIHtcbiAgdmFyIHdpbmRvdyA9IGdldFdpbmRvdyhlbGVtZW50KTtcbiAgdmFyIG9mZnNldFBhcmVudCA9IGdldFRydWVPZmZzZXRQYXJlbnQoZWxlbWVudCk7XG5cbiAgd2hpbGUgKG9mZnNldFBhcmVudCAmJiBpc1RhYmxlRWxlbWVudChvZmZzZXRQYXJlbnQpICYmIGdldENvbXB1dGVkU3R5bGUob2Zmc2V0UGFyZW50KS5wb3NpdGlvbiA9PT0gJ3N0YXRpYycpIHtcbiAgICBvZmZzZXRQYXJlbnQgPSBnZXRUcnVlT2Zmc2V0UGFyZW50KG9mZnNldFBhcmVudCk7XG4gIH1cblxuICBpZiAob2Zmc2V0UGFyZW50ICYmIChnZXROb2RlTmFtZShvZmZzZXRQYXJlbnQpID09PSAnaHRtbCcgfHwgZ2V0Tm9kZU5hbWUob2Zmc2V0UGFyZW50KSA9PT0gJ2JvZHknICYmIGdldENvbXB1dGVkU3R5bGUob2Zmc2V0UGFyZW50KS5wb3NpdGlvbiA9PT0gJ3N0YXRpYycpKSB7XG4gICAgcmV0dXJuIHdpbmRvdztcbiAgfVxuXG4gIHJldHVybiBvZmZzZXRQYXJlbnQgfHwgZ2V0Q29udGFpbmluZ0Jsb2NrKGVsZW1lbnQpIHx8IHdpbmRvdztcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50KHBsYWNlbWVudCkge1xuICByZXR1cm4gWyd0b3AnLCAnYm90dG9tJ10uaW5kZXhPZihwbGFjZW1lbnQpID49IDAgPyAneCcgOiAneSc7XG59IiwgImltcG9ydCB7IG1heCBhcyBtYXRoTWF4LCBtaW4gYXMgbWF0aE1pbiB9IGZyb20gXCIuL21hdGguanNcIjtcbmV4cG9ydCBmdW5jdGlvbiB3aXRoaW4obWluLCB2YWx1ZSwgbWF4KSB7XG4gIHJldHVybiBtYXRoTWF4KG1pbiwgbWF0aE1pbih2YWx1ZSwgbWF4KSk7XG59XG5leHBvcnQgZnVuY3Rpb24gd2l0aGluTWF4Q2xhbXAobWluLCB2YWx1ZSwgbWF4KSB7XG4gIHZhciB2ID0gd2l0aGluKG1pbiwgdmFsdWUsIG1heCk7XG4gIHJldHVybiB2ID4gbWF4ID8gbWF4IDogdjtcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0RnJlc2hTaWRlT2JqZWN0KCkge1xuICByZXR1cm4ge1xuICAgIHRvcDogMCxcbiAgICByaWdodDogMCxcbiAgICBib3R0b206IDAsXG4gICAgbGVmdDogMFxuICB9O1xufSIsICJpbXBvcnQgZ2V0RnJlc2hTaWRlT2JqZWN0IGZyb20gXCIuL2dldEZyZXNoU2lkZU9iamVjdC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWVyZ2VQYWRkaW5nT2JqZWN0KHBhZGRpbmdPYmplY3QpIHtcbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGdldEZyZXNoU2lkZU9iamVjdCgpLCBwYWRkaW5nT2JqZWN0KTtcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZXhwYW5kVG9IYXNoTWFwKHZhbHVlLCBrZXlzKSB7XG4gIHJldHVybiBrZXlzLnJlZHVjZShmdW5jdGlvbiAoaGFzaE1hcCwga2V5KSB7XG4gICAgaGFzaE1hcFtrZXldID0gdmFsdWU7XG4gICAgcmV0dXJuIGhhc2hNYXA7XG4gIH0sIHt9KTtcbn0iLCAiaW1wb3J0IGdldEJhc2VQbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldEJhc2VQbGFjZW1lbnQuanNcIjtcbmltcG9ydCBnZXRMYXlvdXRSZWN0IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0TGF5b3V0UmVjdC5qc1wiO1xuaW1wb3J0IGNvbnRhaW5zIGZyb20gXCIuLi9kb20tdXRpbHMvY29udGFpbnMuanNcIjtcbmltcG9ydCBnZXRPZmZzZXRQYXJlbnQgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRPZmZzZXRQYXJlbnQuanNcIjtcbmltcG9ydCBnZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldE1haW5BeGlzRnJvbVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IHsgd2l0aGluIH0gZnJvbSBcIi4uL3V0aWxzL3dpdGhpbi5qc1wiO1xuaW1wb3J0IG1lcmdlUGFkZGluZ09iamVjdCBmcm9tIFwiLi4vdXRpbHMvbWVyZ2VQYWRkaW5nT2JqZWN0LmpzXCI7XG5pbXBvcnQgZXhwYW5kVG9IYXNoTWFwIGZyb20gXCIuLi91dGlscy9leHBhbmRUb0hhc2hNYXAuanNcIjtcbmltcG9ydCB7IGxlZnQsIHJpZ2h0LCBiYXNlUGxhY2VtZW50cywgdG9wLCBib3R0b20gfSBmcm9tIFwiLi4vZW51bXMuanNcIjsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG52YXIgdG9QYWRkaW5nT2JqZWN0ID0gZnVuY3Rpb24gdG9QYWRkaW5nT2JqZWN0KHBhZGRpbmcsIHN0YXRlKSB7XG4gIHBhZGRpbmcgPSB0eXBlb2YgcGFkZGluZyA9PT0gJ2Z1bmN0aW9uJyA/IHBhZGRpbmcoT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUucmVjdHMsIHtcbiAgICBwbGFjZW1lbnQ6IHN0YXRlLnBsYWNlbWVudFxuICB9KSkgOiBwYWRkaW5nO1xuICByZXR1cm4gbWVyZ2VQYWRkaW5nT2JqZWN0KHR5cGVvZiBwYWRkaW5nICE9PSAnbnVtYmVyJyA/IHBhZGRpbmcgOiBleHBhbmRUb0hhc2hNYXAocGFkZGluZywgYmFzZVBsYWNlbWVudHMpKTtcbn07XG5cbmZ1bmN0aW9uIGFycm93KF9yZWYpIHtcbiAgdmFyIF9zdGF0ZSRtb2RpZmllcnNEYXRhJDtcblxuICB2YXIgc3RhdGUgPSBfcmVmLnN0YXRlLFxuICAgICAgbmFtZSA9IF9yZWYubmFtZSxcbiAgICAgIG9wdGlvbnMgPSBfcmVmLm9wdGlvbnM7XG4gIHZhciBhcnJvd0VsZW1lbnQgPSBzdGF0ZS5lbGVtZW50cy5hcnJvdztcbiAgdmFyIHBvcHBlck9mZnNldHMgPSBzdGF0ZS5tb2RpZmllcnNEYXRhLnBvcHBlck9mZnNldHM7XG4gIHZhciBiYXNlUGxhY2VtZW50ID0gZ2V0QmFzZVBsYWNlbWVudChzdGF0ZS5wbGFjZW1lbnQpO1xuICB2YXIgYXhpcyA9IGdldE1haW5BeGlzRnJvbVBsYWNlbWVudChiYXNlUGxhY2VtZW50KTtcbiAgdmFyIGlzVmVydGljYWwgPSBbbGVmdCwgcmlnaHRdLmluZGV4T2YoYmFzZVBsYWNlbWVudCkgPj0gMDtcbiAgdmFyIGxlbiA9IGlzVmVydGljYWwgPyAnaGVpZ2h0JyA6ICd3aWR0aCc7XG5cbiAgaWYgKCFhcnJvd0VsZW1lbnQgfHwgIXBvcHBlck9mZnNldHMpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgcGFkZGluZ09iamVjdCA9IHRvUGFkZGluZ09iamVjdChvcHRpb25zLnBhZGRpbmcsIHN0YXRlKTtcbiAgdmFyIGFycm93UmVjdCA9IGdldExheW91dFJlY3QoYXJyb3dFbGVtZW50KTtcbiAgdmFyIG1pblByb3AgPSBheGlzID09PSAneScgPyB0b3AgOiBsZWZ0O1xuICB2YXIgbWF4UHJvcCA9IGF4aXMgPT09ICd5JyA/IGJvdHRvbSA6IHJpZ2h0O1xuICB2YXIgZW5kRGlmZiA9IHN0YXRlLnJlY3RzLnJlZmVyZW5jZVtsZW5dICsgc3RhdGUucmVjdHMucmVmZXJlbmNlW2F4aXNdIC0gcG9wcGVyT2Zmc2V0c1theGlzXSAtIHN0YXRlLnJlY3RzLnBvcHBlcltsZW5dO1xuICB2YXIgc3RhcnREaWZmID0gcG9wcGVyT2Zmc2V0c1theGlzXSAtIHN0YXRlLnJlY3RzLnJlZmVyZW5jZVtheGlzXTtcbiAgdmFyIGFycm93T2Zmc2V0UGFyZW50ID0gZ2V0T2Zmc2V0UGFyZW50KGFycm93RWxlbWVudCk7XG4gIHZhciBjbGllbnRTaXplID0gYXJyb3dPZmZzZXRQYXJlbnQgPyBheGlzID09PSAneScgPyBhcnJvd09mZnNldFBhcmVudC5jbGllbnRIZWlnaHQgfHwgMCA6IGFycm93T2Zmc2V0UGFyZW50LmNsaWVudFdpZHRoIHx8IDAgOiAwO1xuICB2YXIgY2VudGVyVG9SZWZlcmVuY2UgPSBlbmREaWZmIC8gMiAtIHN0YXJ0RGlmZiAvIDI7IC8vIE1ha2Ugc3VyZSB0aGUgYXJyb3cgZG9lc24ndCBvdmVyZmxvdyB0aGUgcG9wcGVyIGlmIHRoZSBjZW50ZXIgcG9pbnQgaXNcbiAgLy8gb3V0c2lkZSBvZiB0aGUgcG9wcGVyIGJvdW5kc1xuXG4gIHZhciBtaW4gPSBwYWRkaW5nT2JqZWN0W21pblByb3BdO1xuICB2YXIgbWF4ID0gY2xpZW50U2l6ZSAtIGFycm93UmVjdFtsZW5dIC0gcGFkZGluZ09iamVjdFttYXhQcm9wXTtcbiAgdmFyIGNlbnRlciA9IGNsaWVudFNpemUgLyAyIC0gYXJyb3dSZWN0W2xlbl0gLyAyICsgY2VudGVyVG9SZWZlcmVuY2U7XG4gIHZhciBvZmZzZXQgPSB3aXRoaW4obWluLCBjZW50ZXIsIG1heCk7IC8vIFByZXZlbnRzIGJyZWFraW5nIHN5bnRheCBoaWdobGlnaHRpbmcuLi5cblxuICB2YXIgYXhpc1Byb3AgPSBheGlzO1xuICBzdGF0ZS5tb2RpZmllcnNEYXRhW25hbWVdID0gKF9zdGF0ZSRtb2RpZmllcnNEYXRhJCA9IHt9LCBfc3RhdGUkbW9kaWZpZXJzRGF0YSRbYXhpc1Byb3BdID0gb2Zmc2V0LCBfc3RhdGUkbW9kaWZpZXJzRGF0YSQuY2VudGVyT2Zmc2V0ID0gb2Zmc2V0IC0gY2VudGVyLCBfc3RhdGUkbW9kaWZpZXJzRGF0YSQpO1xufVxuXG5mdW5jdGlvbiBlZmZlY3QoX3JlZjIpIHtcbiAgdmFyIHN0YXRlID0gX3JlZjIuc3RhdGUsXG4gICAgICBvcHRpb25zID0gX3JlZjIub3B0aW9ucztcbiAgdmFyIF9vcHRpb25zJGVsZW1lbnQgPSBvcHRpb25zLmVsZW1lbnQsXG4gICAgICBhcnJvd0VsZW1lbnQgPSBfb3B0aW9ucyRlbGVtZW50ID09PSB2b2lkIDAgPyAnW2RhdGEtcG9wcGVyLWFycm93XScgOiBfb3B0aW9ucyRlbGVtZW50O1xuXG4gIGlmIChhcnJvd0VsZW1lbnQgPT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfSAvLyBDU1Mgc2VsZWN0b3JcblxuXG4gIGlmICh0eXBlb2YgYXJyb3dFbGVtZW50ID09PSAnc3RyaW5nJykge1xuICAgIGFycm93RWxlbWVudCA9IHN0YXRlLmVsZW1lbnRzLnBvcHBlci5xdWVyeVNlbGVjdG9yKGFycm93RWxlbWVudCk7XG5cbiAgICBpZiAoIWFycm93RWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGlmICghY29udGFpbnMoc3RhdGUuZWxlbWVudHMucG9wcGVyLCBhcnJvd0VsZW1lbnQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgc3RhdGUuZWxlbWVudHMuYXJyb3cgPSBhcnJvd0VsZW1lbnQ7XG59IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdhcnJvdycsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAnbWFpbicsXG4gIGZuOiBhcnJvdyxcbiAgZWZmZWN0OiBlZmZlY3QsXG4gIHJlcXVpcmVzOiBbJ3BvcHBlck9mZnNldHMnXSxcbiAgcmVxdWlyZXNJZkV4aXN0czogWydwcmV2ZW50T3ZlcmZsb3cnXVxufTsiLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0VmFyaWF0aW9uKHBsYWNlbWVudCkge1xuICByZXR1cm4gcGxhY2VtZW50LnNwbGl0KCctJylbMV07XG59IiwgImltcG9ydCB7IHRvcCwgbGVmdCwgcmlnaHQsIGJvdHRvbSwgZW5kIH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7XG5pbXBvcnQgZ2V0T2Zmc2V0UGFyZW50IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0T2Zmc2V0UGFyZW50LmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0V2luZG93LmpzXCI7XG5pbXBvcnQgZ2V0RG9jdW1lbnRFbGVtZW50IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0RG9jdW1lbnRFbGVtZW50LmpzXCI7XG5pbXBvcnQgZ2V0Q29tcHV0ZWRTdHlsZSBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldENvbXB1dGVkU3R5bGUuanNcIjtcbmltcG9ydCBnZXRCYXNlUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9nZXRCYXNlUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgZ2V0VmFyaWF0aW9uIGZyb20gXCIuLi91dGlscy9nZXRWYXJpYXRpb24uanNcIjtcbmltcG9ydCB7IHJvdW5kIH0gZnJvbSBcIi4uL3V0aWxzL21hdGguanNcIjsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG52YXIgdW5zZXRTaWRlcyA9IHtcbiAgdG9wOiAnYXV0bycsXG4gIHJpZ2h0OiAnYXV0bycsXG4gIGJvdHRvbTogJ2F1dG8nLFxuICBsZWZ0OiAnYXV0bydcbn07IC8vIFJvdW5kIHRoZSBvZmZzZXRzIHRvIHRoZSBuZWFyZXN0IHN1aXRhYmxlIHN1YnBpeGVsIGJhc2VkIG9uIHRoZSBEUFIuXG4vLyBab29taW5nIGNhbiBjaGFuZ2UgdGhlIERQUiwgYnV0IGl0IHNlZW1zIHRvIHJlcG9ydCBhIHZhbHVlIHRoYXQgd2lsbFxuLy8gY2xlYW5seSBkaXZpZGUgdGhlIHZhbHVlcyBpbnRvIHRoZSBhcHByb3ByaWF0ZSBzdWJwaXhlbHMuXG5cbmZ1bmN0aW9uIHJvdW5kT2Zmc2V0c0J5RFBSKF9yZWYsIHdpbikge1xuICB2YXIgeCA9IF9yZWYueCxcbiAgICAgIHkgPSBfcmVmLnk7XG4gIHZhciBkcHIgPSB3aW4uZGV2aWNlUGl4ZWxSYXRpbyB8fCAxO1xuICByZXR1cm4ge1xuICAgIHg6IHJvdW5kKHggKiBkcHIpIC8gZHByIHx8IDAsXG4gICAgeTogcm91bmQoeSAqIGRwcikgLyBkcHIgfHwgMFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFwVG9TdHlsZXMoX3JlZjIpIHtcbiAgdmFyIF9PYmplY3QkYXNzaWduMjtcblxuICB2YXIgcG9wcGVyID0gX3JlZjIucG9wcGVyLFxuICAgICAgcG9wcGVyUmVjdCA9IF9yZWYyLnBvcHBlclJlY3QsXG4gICAgICBwbGFjZW1lbnQgPSBfcmVmMi5wbGFjZW1lbnQsXG4gICAgICB2YXJpYXRpb24gPSBfcmVmMi52YXJpYXRpb24sXG4gICAgICBvZmZzZXRzID0gX3JlZjIub2Zmc2V0cyxcbiAgICAgIHBvc2l0aW9uID0gX3JlZjIucG9zaXRpb24sXG4gICAgICBncHVBY2NlbGVyYXRpb24gPSBfcmVmMi5ncHVBY2NlbGVyYXRpb24sXG4gICAgICBhZGFwdGl2ZSA9IF9yZWYyLmFkYXB0aXZlLFxuICAgICAgcm91bmRPZmZzZXRzID0gX3JlZjIucm91bmRPZmZzZXRzLFxuICAgICAgaXNGaXhlZCA9IF9yZWYyLmlzRml4ZWQ7XG4gIHZhciBfb2Zmc2V0cyR4ID0gb2Zmc2V0cy54LFxuICAgICAgeCA9IF9vZmZzZXRzJHggPT09IHZvaWQgMCA/IDAgOiBfb2Zmc2V0cyR4LFxuICAgICAgX29mZnNldHMkeSA9IG9mZnNldHMueSxcbiAgICAgIHkgPSBfb2Zmc2V0cyR5ID09PSB2b2lkIDAgPyAwIDogX29mZnNldHMkeTtcblxuICB2YXIgX3JlZjMgPSB0eXBlb2Ygcm91bmRPZmZzZXRzID09PSAnZnVuY3Rpb24nID8gcm91bmRPZmZzZXRzKHtcbiAgICB4OiB4LFxuICAgIHk6IHlcbiAgfSkgOiB7XG4gICAgeDogeCxcbiAgICB5OiB5XG4gIH07XG5cbiAgeCA9IF9yZWYzLng7XG4gIHkgPSBfcmVmMy55O1xuICB2YXIgaGFzWCA9IG9mZnNldHMuaGFzT3duUHJvcGVydHkoJ3gnKTtcbiAgdmFyIGhhc1kgPSBvZmZzZXRzLmhhc093blByb3BlcnR5KCd5Jyk7XG4gIHZhciBzaWRlWCA9IGxlZnQ7XG4gIHZhciBzaWRlWSA9IHRvcDtcbiAgdmFyIHdpbiA9IHdpbmRvdztcblxuICBpZiAoYWRhcHRpdmUpIHtcbiAgICB2YXIgb2Zmc2V0UGFyZW50ID0gZ2V0T2Zmc2V0UGFyZW50KHBvcHBlcik7XG4gICAgdmFyIGhlaWdodFByb3AgPSAnY2xpZW50SGVpZ2h0JztcbiAgICB2YXIgd2lkdGhQcm9wID0gJ2NsaWVudFdpZHRoJztcblxuICAgIGlmIChvZmZzZXRQYXJlbnQgPT09IGdldFdpbmRvdyhwb3BwZXIpKSB7XG4gICAgICBvZmZzZXRQYXJlbnQgPSBnZXREb2N1bWVudEVsZW1lbnQocG9wcGVyKTtcblxuICAgICAgaWYgKGdldENvbXB1dGVkU3R5bGUob2Zmc2V0UGFyZW50KS5wb3NpdGlvbiAhPT0gJ3N0YXRpYycgJiYgcG9zaXRpb24gPT09ICdhYnNvbHV0ZScpIHtcbiAgICAgICAgaGVpZ2h0UHJvcCA9ICdzY3JvbGxIZWlnaHQnO1xuICAgICAgICB3aWR0aFByb3AgPSAnc2Nyb2xsV2lkdGgnO1xuICAgICAgfVxuICAgIH0gLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtY2FzdF06IGZvcmNlIHR5cGUgcmVmaW5lbWVudCwgd2UgY29tcGFyZSBvZmZzZXRQYXJlbnQgd2l0aCB3aW5kb3cgYWJvdmUsIGJ1dCBGbG93IGRvZXNuJ3QgZGV0ZWN0IGl0XG5cblxuICAgIG9mZnNldFBhcmVudCA9IG9mZnNldFBhcmVudDtcblxuICAgIGlmIChwbGFjZW1lbnQgPT09IHRvcCB8fCAocGxhY2VtZW50ID09PSBsZWZ0IHx8IHBsYWNlbWVudCA9PT0gcmlnaHQpICYmIHZhcmlhdGlvbiA9PT0gZW5kKSB7XG4gICAgICBzaWRlWSA9IGJvdHRvbTtcbiAgICAgIHZhciBvZmZzZXRZID0gaXNGaXhlZCAmJiBvZmZzZXRQYXJlbnQgPT09IHdpbiAmJiB3aW4udmlzdWFsVmlld3BvcnQgPyB3aW4udmlzdWFsVmlld3BvcnQuaGVpZ2h0IDogLy8gJEZsb3dGaXhNZVtwcm9wLW1pc3NpbmddXG4gICAgICBvZmZzZXRQYXJlbnRbaGVpZ2h0UHJvcF07XG4gICAgICB5IC09IG9mZnNldFkgLSBwb3BwZXJSZWN0LmhlaWdodDtcbiAgICAgIHkgKj0gZ3B1QWNjZWxlcmF0aW9uID8gMSA6IC0xO1xuICAgIH1cblxuICAgIGlmIChwbGFjZW1lbnQgPT09IGxlZnQgfHwgKHBsYWNlbWVudCA9PT0gdG9wIHx8IHBsYWNlbWVudCA9PT0gYm90dG9tKSAmJiB2YXJpYXRpb24gPT09IGVuZCkge1xuICAgICAgc2lkZVggPSByaWdodDtcbiAgICAgIHZhciBvZmZzZXRYID0gaXNGaXhlZCAmJiBvZmZzZXRQYXJlbnQgPT09IHdpbiAmJiB3aW4udmlzdWFsVmlld3BvcnQgPyB3aW4udmlzdWFsVmlld3BvcnQud2lkdGggOiAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ11cbiAgICAgIG9mZnNldFBhcmVudFt3aWR0aFByb3BdO1xuICAgICAgeCAtPSBvZmZzZXRYIC0gcG9wcGVyUmVjdC53aWR0aDtcbiAgICAgIHggKj0gZ3B1QWNjZWxlcmF0aW9uID8gMSA6IC0xO1xuICAgIH1cbiAgfVxuXG4gIHZhciBjb21tb25TdHlsZXMgPSBPYmplY3QuYXNzaWduKHtcbiAgICBwb3NpdGlvbjogcG9zaXRpb25cbiAgfSwgYWRhcHRpdmUgJiYgdW5zZXRTaWRlcyk7XG5cbiAgdmFyIF9yZWY0ID0gcm91bmRPZmZzZXRzID09PSB0cnVlID8gcm91bmRPZmZzZXRzQnlEUFIoe1xuICAgIHg6IHgsXG4gICAgeTogeVxuICB9LCBnZXRXaW5kb3cocG9wcGVyKSkgOiB7XG4gICAgeDogeCxcbiAgICB5OiB5XG4gIH07XG5cbiAgeCA9IF9yZWY0Lng7XG4gIHkgPSBfcmVmNC55O1xuXG4gIGlmIChncHVBY2NlbGVyYXRpb24pIHtcbiAgICB2YXIgX09iamVjdCRhc3NpZ247XG5cbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgY29tbW9uU3R5bGVzLCAoX09iamVjdCRhc3NpZ24gPSB7fSwgX09iamVjdCRhc3NpZ25bc2lkZVldID0gaGFzWSA/ICcwJyA6ICcnLCBfT2JqZWN0JGFzc2lnbltzaWRlWF0gPSBoYXNYID8gJzAnIDogJycsIF9PYmplY3QkYXNzaWduLnRyYW5zZm9ybSA9ICh3aW4uZGV2aWNlUGl4ZWxSYXRpbyB8fCAxKSA8PSAxID8gXCJ0cmFuc2xhdGUoXCIgKyB4ICsgXCJweCwgXCIgKyB5ICsgXCJweClcIiA6IFwidHJhbnNsYXRlM2QoXCIgKyB4ICsgXCJweCwgXCIgKyB5ICsgXCJweCwgMClcIiwgX09iamVjdCRhc3NpZ24pKTtcbiAgfVxuXG4gIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBjb21tb25TdHlsZXMsIChfT2JqZWN0JGFzc2lnbjIgPSB7fSwgX09iamVjdCRhc3NpZ24yW3NpZGVZXSA9IGhhc1kgPyB5ICsgXCJweFwiIDogJycsIF9PYmplY3QkYXNzaWduMltzaWRlWF0gPSBoYXNYID8geCArIFwicHhcIiA6ICcnLCBfT2JqZWN0JGFzc2lnbjIudHJhbnNmb3JtID0gJycsIF9PYmplY3QkYXNzaWduMikpO1xufVxuXG5mdW5jdGlvbiBjb21wdXRlU3R5bGVzKF9yZWY1KSB7XG4gIHZhciBzdGF0ZSA9IF9yZWY1LnN0YXRlLFxuICAgICAgb3B0aW9ucyA9IF9yZWY1Lm9wdGlvbnM7XG4gIHZhciBfb3B0aW9ucyRncHVBY2NlbGVyYXQgPSBvcHRpb25zLmdwdUFjY2VsZXJhdGlvbixcbiAgICAgIGdwdUFjY2VsZXJhdGlvbiA9IF9vcHRpb25zJGdwdUFjY2VsZXJhdCA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJGdwdUFjY2VsZXJhdCxcbiAgICAgIF9vcHRpb25zJGFkYXB0aXZlID0gb3B0aW9ucy5hZGFwdGl2ZSxcbiAgICAgIGFkYXB0aXZlID0gX29wdGlvbnMkYWRhcHRpdmUgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRhZGFwdGl2ZSxcbiAgICAgIF9vcHRpb25zJHJvdW5kT2Zmc2V0cyA9IG9wdGlvbnMucm91bmRPZmZzZXRzLFxuICAgICAgcm91bmRPZmZzZXRzID0gX29wdGlvbnMkcm91bmRPZmZzZXRzID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkcm91bmRPZmZzZXRzO1xuICB2YXIgY29tbW9uU3R5bGVzID0ge1xuICAgIHBsYWNlbWVudDogZ2V0QmFzZVBsYWNlbWVudChzdGF0ZS5wbGFjZW1lbnQpLFxuICAgIHZhcmlhdGlvbjogZ2V0VmFyaWF0aW9uKHN0YXRlLnBsYWNlbWVudCksXG4gICAgcG9wcGVyOiBzdGF0ZS5lbGVtZW50cy5wb3BwZXIsXG4gICAgcG9wcGVyUmVjdDogc3RhdGUucmVjdHMucG9wcGVyLFxuICAgIGdwdUFjY2VsZXJhdGlvbjogZ3B1QWNjZWxlcmF0aW9uLFxuICAgIGlzRml4ZWQ6IHN0YXRlLm9wdGlvbnMuc3RyYXRlZ3kgPT09ICdmaXhlZCdcbiAgfTtcblxuICBpZiAoc3RhdGUubW9kaWZpZXJzRGF0YS5wb3BwZXJPZmZzZXRzICE9IG51bGwpIHtcbiAgICBzdGF0ZS5zdHlsZXMucG9wcGVyID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUuc3R5bGVzLnBvcHBlciwgbWFwVG9TdHlsZXMoT2JqZWN0LmFzc2lnbih7fSwgY29tbW9uU3R5bGVzLCB7XG4gICAgICBvZmZzZXRzOiBzdGF0ZS5tb2RpZmllcnNEYXRhLnBvcHBlck9mZnNldHMsXG4gICAgICBwb3NpdGlvbjogc3RhdGUub3B0aW9ucy5zdHJhdGVneSxcbiAgICAgIGFkYXB0aXZlOiBhZGFwdGl2ZSxcbiAgICAgIHJvdW5kT2Zmc2V0czogcm91bmRPZmZzZXRzXG4gICAgfSkpKTtcbiAgfVxuXG4gIGlmIChzdGF0ZS5tb2RpZmllcnNEYXRhLmFycm93ICE9IG51bGwpIHtcbiAgICBzdGF0ZS5zdHlsZXMuYXJyb3cgPSBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZS5zdHlsZXMuYXJyb3csIG1hcFRvU3R5bGVzKE9iamVjdC5hc3NpZ24oe30sIGNvbW1vblN0eWxlcywge1xuICAgICAgb2Zmc2V0czogc3RhdGUubW9kaWZpZXJzRGF0YS5hcnJvdyxcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgYWRhcHRpdmU6IGZhbHNlLFxuICAgICAgcm91bmRPZmZzZXRzOiByb3VuZE9mZnNldHNcbiAgICB9KSkpO1xuICB9XG5cbiAgc3RhdGUuYXR0cmlidXRlcy5wb3BwZXIgPSBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZS5hdHRyaWJ1dGVzLnBvcHBlciwge1xuICAgICdkYXRhLXBvcHBlci1wbGFjZW1lbnQnOiBzdGF0ZS5wbGFjZW1lbnRcbiAgfSk7XG59IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdjb21wdXRlU3R5bGVzJyxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcGhhc2U6ICdiZWZvcmVXcml0ZScsXG4gIGZuOiBjb21wdXRlU3R5bGVzLFxuICBkYXRhOiB7fVxufTsiLCAiaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldFdpbmRvdy5qc1wiOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbnZhciBwYXNzaXZlID0ge1xuICBwYXNzaXZlOiB0cnVlXG59O1xuXG5mdW5jdGlvbiBlZmZlY3QoX3JlZikge1xuICB2YXIgc3RhdGUgPSBfcmVmLnN0YXRlLFxuICAgICAgaW5zdGFuY2UgPSBfcmVmLmluc3RhbmNlLFxuICAgICAgb3B0aW9ucyA9IF9yZWYub3B0aW9ucztcbiAgdmFyIF9vcHRpb25zJHNjcm9sbCA9IG9wdGlvbnMuc2Nyb2xsLFxuICAgICAgc2Nyb2xsID0gX29wdGlvbnMkc2Nyb2xsID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkc2Nyb2xsLFxuICAgICAgX29wdGlvbnMkcmVzaXplID0gb3B0aW9ucy5yZXNpemUsXG4gICAgICByZXNpemUgPSBfb3B0aW9ucyRyZXNpemUgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRyZXNpemU7XG4gIHZhciB3aW5kb3cgPSBnZXRXaW5kb3coc3RhdGUuZWxlbWVudHMucG9wcGVyKTtcbiAgdmFyIHNjcm9sbFBhcmVudHMgPSBbXS5jb25jYXQoc3RhdGUuc2Nyb2xsUGFyZW50cy5yZWZlcmVuY2UsIHN0YXRlLnNjcm9sbFBhcmVudHMucG9wcGVyKTtcblxuICBpZiAoc2Nyb2xsKSB7XG4gICAgc2Nyb2xsUGFyZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChzY3JvbGxQYXJlbnQpIHtcbiAgICAgIHNjcm9sbFBhcmVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBpbnN0YW5jZS51cGRhdGUsIHBhc3NpdmUpO1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKHJlc2l6ZSkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBpbnN0YW5jZS51cGRhdGUsIHBhc3NpdmUpO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc2Nyb2xsKSB7XG4gICAgICBzY3JvbGxQYXJlbnRzLmZvckVhY2goZnVuY3Rpb24gKHNjcm9sbFBhcmVudCkge1xuICAgICAgICBzY3JvbGxQYXJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgaW5zdGFuY2UudXBkYXRlLCBwYXNzaXZlKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChyZXNpemUpIHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBpbnN0YW5jZS51cGRhdGUsIHBhc3NpdmUpO1xuICAgIH1cbiAgfTtcbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ2V2ZW50TGlzdGVuZXJzJyxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcGhhc2U6ICd3cml0ZScsXG4gIGZuOiBmdW5jdGlvbiBmbigpIHt9LFxuICBlZmZlY3Q6IGVmZmVjdCxcbiAgZGF0YToge31cbn07IiwgInZhciBoYXNoID0ge1xuICBsZWZ0OiAncmlnaHQnLFxuICByaWdodDogJ2xlZnQnLFxuICBib3R0b206ICd0b3AnLFxuICB0b3A6ICdib3R0b20nXG59O1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0T3Bwb3NpdGVQbGFjZW1lbnQocGxhY2VtZW50KSB7XG4gIHJldHVybiBwbGFjZW1lbnQucmVwbGFjZSgvbGVmdHxyaWdodHxib3R0b218dG9wL2csIGZ1bmN0aW9uIChtYXRjaGVkKSB7XG4gICAgcmV0dXJuIGhhc2hbbWF0Y2hlZF07XG4gIH0pO1xufSIsICJ2YXIgaGFzaCA9IHtcbiAgc3RhcnQ6ICdlbmQnLFxuICBlbmQ6ICdzdGFydCdcbn07XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRPcHBvc2l0ZVZhcmlhdGlvblBsYWNlbWVudChwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIHBsYWNlbWVudC5yZXBsYWNlKC9zdGFydHxlbmQvZywgZnVuY3Rpb24gKG1hdGNoZWQpIHtcbiAgICByZXR1cm4gaGFzaFttYXRjaGVkXTtcbiAgfSk7XG59IiwgImltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4vZ2V0V2luZG93LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRXaW5kb3dTY3JvbGwobm9kZSkge1xuICB2YXIgd2luID0gZ2V0V2luZG93KG5vZGUpO1xuICB2YXIgc2Nyb2xsTGVmdCA9IHdpbi5wYWdlWE9mZnNldDtcbiAgdmFyIHNjcm9sbFRvcCA9IHdpbi5wYWdlWU9mZnNldDtcbiAgcmV0dXJuIHtcbiAgICBzY3JvbGxMZWZ0OiBzY3JvbGxMZWZ0LFxuICAgIHNjcm9sbFRvcDogc2Nyb2xsVG9wXG4gIH07XG59IiwgImltcG9ydCBnZXRCb3VuZGluZ0NsaWVudFJlY3QgZnJvbSBcIi4vZ2V0Qm91bmRpbmdDbGllbnRSZWN0LmpzXCI7XG5pbXBvcnQgZ2V0RG9jdW1lbnRFbGVtZW50IGZyb20gXCIuL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IGdldFdpbmRvd1Njcm9sbCBmcm9tIFwiLi9nZXRXaW5kb3dTY3JvbGwuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFdpbmRvd1Njcm9sbEJhclgoZWxlbWVudCkge1xuICAvLyBJZiA8aHRtbD4gaGFzIGEgQ1NTIHdpZHRoIGdyZWF0ZXIgdGhhbiB0aGUgdmlld3BvcnQsIHRoZW4gdGhpcyB3aWxsIGJlXG4gIC8vIGluY29ycmVjdCBmb3IgUlRMLlxuICAvLyBQb3BwZXIgMSBpcyBicm9rZW4gaW4gdGhpcyBjYXNlIGFuZCBuZXZlciBoYWQgYSBidWcgcmVwb3J0IHNvIGxldCdzIGFzc3VtZVxuICAvLyBpdCdzIG5vdCBhbiBpc3N1ZS4gSSBkb24ndCB0aGluayBhbnlvbmUgZXZlciBzcGVjaWZpZXMgd2lkdGggb24gPGh0bWw+XG4gIC8vIGFueXdheS5cbiAgLy8gQnJvd3NlcnMgd2hlcmUgdGhlIGxlZnQgc2Nyb2xsYmFyIGRvZXNuJ3QgY2F1c2UgYW4gaXNzdWUgcmVwb3J0IGAwYCBmb3JcbiAgLy8gdGhpcyAoZS5nLiBFZGdlIDIwMTksIElFMTEsIFNhZmFyaSlcbiAgcmV0dXJuIGdldEJvdW5kaW5nQ2xpZW50UmVjdChnZXREb2N1bWVudEVsZW1lbnQoZWxlbWVudCkpLmxlZnQgKyBnZXRXaW5kb3dTY3JvbGwoZWxlbWVudCkuc2Nyb2xsTGVmdDtcbn0iLCAiaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi9nZXRXaW5kb3cuanNcIjtcbmltcG9ydCBnZXREb2N1bWVudEVsZW1lbnQgZnJvbSBcIi4vZ2V0RG9jdW1lbnRFbGVtZW50LmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93U2Nyb2xsQmFyWCBmcm9tIFwiLi9nZXRXaW5kb3dTY3JvbGxCYXJYLmpzXCI7XG5pbXBvcnQgaXNMYXlvdXRWaWV3cG9ydCBmcm9tIFwiLi9pc0xheW91dFZpZXdwb3J0LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRWaWV3cG9ydFJlY3QoZWxlbWVudCwgc3RyYXRlZ3kpIHtcbiAgdmFyIHdpbiA9IGdldFdpbmRvdyhlbGVtZW50KTtcbiAgdmFyIGh0bWwgPSBnZXREb2N1bWVudEVsZW1lbnQoZWxlbWVudCk7XG4gIHZhciB2aXN1YWxWaWV3cG9ydCA9IHdpbi52aXN1YWxWaWV3cG9ydDtcbiAgdmFyIHdpZHRoID0gaHRtbC5jbGllbnRXaWR0aDtcbiAgdmFyIGhlaWdodCA9IGh0bWwuY2xpZW50SGVpZ2h0O1xuICB2YXIgeCA9IDA7XG4gIHZhciB5ID0gMDtcblxuICBpZiAodmlzdWFsVmlld3BvcnQpIHtcbiAgICB3aWR0aCA9IHZpc3VhbFZpZXdwb3J0LndpZHRoO1xuICAgIGhlaWdodCA9IHZpc3VhbFZpZXdwb3J0LmhlaWdodDtcbiAgICB2YXIgbGF5b3V0Vmlld3BvcnQgPSBpc0xheW91dFZpZXdwb3J0KCk7XG5cbiAgICBpZiAobGF5b3V0Vmlld3BvcnQgfHwgIWxheW91dFZpZXdwb3J0ICYmIHN0cmF0ZWd5ID09PSAnZml4ZWQnKSB7XG4gICAgICB4ID0gdmlzdWFsVmlld3BvcnQub2Zmc2V0TGVmdDtcbiAgICAgIHkgPSB2aXN1YWxWaWV3cG9ydC5vZmZzZXRUb3A7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogd2lkdGgsXG4gICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgeDogeCArIGdldFdpbmRvd1Njcm9sbEJhclgoZWxlbWVudCksXG4gICAgeTogeVxuICB9O1xufSIsICJpbXBvcnQgZ2V0RG9jdW1lbnRFbGVtZW50IGZyb20gXCIuL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IGdldENvbXB1dGVkU3R5bGUgZnJvbSBcIi4vZ2V0Q29tcHV0ZWRTdHlsZS5qc1wiO1xuaW1wb3J0IGdldFdpbmRvd1Njcm9sbEJhclggZnJvbSBcIi4vZ2V0V2luZG93U2Nyb2xsQmFyWC5qc1wiO1xuaW1wb3J0IGdldFdpbmRvd1Njcm9sbCBmcm9tIFwiLi9nZXRXaW5kb3dTY3JvbGwuanNcIjtcbmltcG9ydCB7IG1heCB9IGZyb20gXCIuLi91dGlscy9tYXRoLmpzXCI7IC8vIEdldHMgdGhlIGVudGlyZSBzaXplIG9mIHRoZSBzY3JvbGxhYmxlIGRvY3VtZW50IGFyZWEsIGV2ZW4gZXh0ZW5kaW5nIG91dHNpZGVcbi8vIG9mIHRoZSBgPGh0bWw+YCBhbmQgYDxib2R5PmAgcmVjdCBib3VuZHMgaWYgaG9yaXpvbnRhbGx5IHNjcm9sbGFibGVcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0RG9jdW1lbnRSZWN0KGVsZW1lbnQpIHtcbiAgdmFyIF9lbGVtZW50JG93bmVyRG9jdW1lbjtcblxuICB2YXIgaHRtbCA9IGdldERvY3VtZW50RWxlbWVudChlbGVtZW50KTtcbiAgdmFyIHdpblNjcm9sbCA9IGdldFdpbmRvd1Njcm9sbChlbGVtZW50KTtcbiAgdmFyIGJvZHkgPSAoX2VsZW1lbnQkb3duZXJEb2N1bWVuID0gZWxlbWVudC5vd25lckRvY3VtZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2VsZW1lbnQkb3duZXJEb2N1bWVuLmJvZHk7XG4gIHZhciB3aWR0aCA9IG1heChodG1sLnNjcm9sbFdpZHRoLCBodG1sLmNsaWVudFdpZHRoLCBib2R5ID8gYm9keS5zY3JvbGxXaWR0aCA6IDAsIGJvZHkgPyBib2R5LmNsaWVudFdpZHRoIDogMCk7XG4gIHZhciBoZWlnaHQgPSBtYXgoaHRtbC5zY3JvbGxIZWlnaHQsIGh0bWwuY2xpZW50SGVpZ2h0LCBib2R5ID8gYm9keS5zY3JvbGxIZWlnaHQgOiAwLCBib2R5ID8gYm9keS5jbGllbnRIZWlnaHQgOiAwKTtcbiAgdmFyIHggPSAtd2luU2Nyb2xsLnNjcm9sbExlZnQgKyBnZXRXaW5kb3dTY3JvbGxCYXJYKGVsZW1lbnQpO1xuICB2YXIgeSA9IC13aW5TY3JvbGwuc2Nyb2xsVG9wO1xuXG4gIGlmIChnZXRDb21wdXRlZFN0eWxlKGJvZHkgfHwgaHRtbCkuZGlyZWN0aW9uID09PSAncnRsJykge1xuICAgIHggKz0gbWF4KGh0bWwuY2xpZW50V2lkdGgsIGJvZHkgPyBib2R5LmNsaWVudFdpZHRoIDogMCkgLSB3aWR0aDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgd2lkdGg6IHdpZHRoLFxuICAgIGhlaWdodDogaGVpZ2h0LFxuICAgIHg6IHgsXG4gICAgeTogeVxuICB9O1xufSIsICJpbXBvcnQgZ2V0Q29tcHV0ZWRTdHlsZSBmcm9tIFwiLi9nZXRDb21wdXRlZFN0eWxlLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1Njcm9sbFBhcmVudChlbGVtZW50KSB7XG4gIC8vIEZpcmVmb3ggd2FudHMgdXMgdG8gY2hlY2sgYC14YCBhbmQgYC15YCB2YXJpYXRpb25zIGFzIHdlbGxcbiAgdmFyIF9nZXRDb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KSxcbiAgICAgIG92ZXJmbG93ID0gX2dldENvbXB1dGVkU3R5bGUub3ZlcmZsb3csXG4gICAgICBvdmVyZmxvd1ggPSBfZ2V0Q29tcHV0ZWRTdHlsZS5vdmVyZmxvd1gsXG4gICAgICBvdmVyZmxvd1kgPSBfZ2V0Q29tcHV0ZWRTdHlsZS5vdmVyZmxvd1k7XG5cbiAgcmV0dXJuIC9hdXRvfHNjcm9sbHxvdmVybGF5fGhpZGRlbi8udGVzdChvdmVyZmxvdyArIG92ZXJmbG93WSArIG92ZXJmbG93WCk7XG59IiwgImltcG9ydCBnZXRQYXJlbnROb2RlIGZyb20gXCIuL2dldFBhcmVudE5vZGUuanNcIjtcbmltcG9ydCBpc1Njcm9sbFBhcmVudCBmcm9tIFwiLi9pc1Njcm9sbFBhcmVudC5qc1wiO1xuaW1wb3J0IGdldE5vZGVOYW1lIGZyb20gXCIuL2dldE5vZGVOYW1lLmpzXCI7XG5pbXBvcnQgeyBpc0hUTUxFbGVtZW50IH0gZnJvbSBcIi4vaW5zdGFuY2VPZi5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0U2Nyb2xsUGFyZW50KG5vZGUpIHtcbiAgaWYgKFsnaHRtbCcsICdib2R5JywgJyNkb2N1bWVudCddLmluZGV4T2YoZ2V0Tm9kZU5hbWUobm9kZSkpID49IDApIHtcbiAgICAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1yZXR1cm5dOiBhc3N1bWUgYm9keSBpcyBhbHdheXMgYXZhaWxhYmxlXG4gICAgcmV0dXJuIG5vZGUub3duZXJEb2N1bWVudC5ib2R5O1xuICB9XG5cbiAgaWYgKGlzSFRNTEVsZW1lbnQobm9kZSkgJiYgaXNTY3JvbGxQYXJlbnQobm9kZSkpIHtcbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuXG4gIHJldHVybiBnZXRTY3JvbGxQYXJlbnQoZ2V0UGFyZW50Tm9kZShub2RlKSk7XG59IiwgImltcG9ydCBnZXRTY3JvbGxQYXJlbnQgZnJvbSBcIi4vZ2V0U2Nyb2xsUGFyZW50LmpzXCI7XG5pbXBvcnQgZ2V0UGFyZW50Tm9kZSBmcm9tIFwiLi9nZXRQYXJlbnROb2RlLmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuL2dldFdpbmRvdy5qc1wiO1xuaW1wb3J0IGlzU2Nyb2xsUGFyZW50IGZyb20gXCIuL2lzU2Nyb2xsUGFyZW50LmpzXCI7XG4vKlxuZ2l2ZW4gYSBET00gZWxlbWVudCwgcmV0dXJuIHRoZSBsaXN0IG9mIGFsbCBzY3JvbGwgcGFyZW50cywgdXAgdGhlIGxpc3Qgb2YgYW5jZXNvcnNcbnVudGlsIHdlIGdldCB0byB0aGUgdG9wIHdpbmRvdyBvYmplY3QuIFRoaXMgbGlzdCBpcyB3aGF0IHdlIGF0dGFjaCBzY3JvbGwgbGlzdGVuZXJzXG50bywgYmVjYXVzZSBpZiBhbnkgb2YgdGhlc2UgcGFyZW50IGVsZW1lbnRzIHNjcm9sbCwgd2UnbGwgbmVlZCB0byByZS1jYWxjdWxhdGUgdGhlXG5yZWZlcmVuY2UgZWxlbWVudCdzIHBvc2l0aW9uLlxuKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbGlzdFNjcm9sbFBhcmVudHMoZWxlbWVudCwgbGlzdCkge1xuICB2YXIgX2VsZW1lbnQkb3duZXJEb2N1bWVuO1xuXG4gIGlmIChsaXN0ID09PSB2b2lkIDApIHtcbiAgICBsaXN0ID0gW107XG4gIH1cblxuICB2YXIgc2Nyb2xsUGFyZW50ID0gZ2V0U2Nyb2xsUGFyZW50KGVsZW1lbnQpO1xuICB2YXIgaXNCb2R5ID0gc2Nyb2xsUGFyZW50ID09PSAoKF9lbGVtZW50JG93bmVyRG9jdW1lbiA9IGVsZW1lbnQub3duZXJEb2N1bWVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lbGVtZW50JG93bmVyRG9jdW1lbi5ib2R5KTtcbiAgdmFyIHdpbiA9IGdldFdpbmRvdyhzY3JvbGxQYXJlbnQpO1xuICB2YXIgdGFyZ2V0ID0gaXNCb2R5ID8gW3dpbl0uY29uY2F0KHdpbi52aXN1YWxWaWV3cG9ydCB8fCBbXSwgaXNTY3JvbGxQYXJlbnQoc2Nyb2xsUGFyZW50KSA/IHNjcm9sbFBhcmVudCA6IFtdKSA6IHNjcm9sbFBhcmVudDtcbiAgdmFyIHVwZGF0ZWRMaXN0ID0gbGlzdC5jb25jYXQodGFyZ2V0KTtcbiAgcmV0dXJuIGlzQm9keSA/IHVwZGF0ZWRMaXN0IDogLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtY2FsbF06IGlzQm9keSB0ZWxscyB1cyB0YXJnZXQgd2lsbCBiZSBhbiBIVE1MRWxlbWVudCBoZXJlXG4gIHVwZGF0ZWRMaXN0LmNvbmNhdChsaXN0U2Nyb2xsUGFyZW50cyhnZXRQYXJlbnROb2RlKHRhcmdldCkpKTtcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVjdFRvQ2xpZW50UmVjdChyZWN0KSB7XG4gIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCByZWN0LCB7XG4gICAgbGVmdDogcmVjdC54LFxuICAgIHRvcDogcmVjdC55LFxuICAgIHJpZ2h0OiByZWN0LnggKyByZWN0LndpZHRoLFxuICAgIGJvdHRvbTogcmVjdC55ICsgcmVjdC5oZWlnaHRcbiAgfSk7XG59IiwgImltcG9ydCB7IHZpZXdwb3J0IH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7XG5pbXBvcnQgZ2V0Vmlld3BvcnRSZWN0IGZyb20gXCIuL2dldFZpZXdwb3J0UmVjdC5qc1wiO1xuaW1wb3J0IGdldERvY3VtZW50UmVjdCBmcm9tIFwiLi9nZXREb2N1bWVudFJlY3QuanNcIjtcbmltcG9ydCBsaXN0U2Nyb2xsUGFyZW50cyBmcm9tIFwiLi9saXN0U2Nyb2xsUGFyZW50cy5qc1wiO1xuaW1wb3J0IGdldE9mZnNldFBhcmVudCBmcm9tIFwiLi9nZXRPZmZzZXRQYXJlbnQuanNcIjtcbmltcG9ydCBnZXREb2N1bWVudEVsZW1lbnQgZnJvbSBcIi4vZ2V0RG9jdW1lbnRFbGVtZW50LmpzXCI7XG5pbXBvcnQgZ2V0Q29tcHV0ZWRTdHlsZSBmcm9tIFwiLi9nZXRDb21wdXRlZFN0eWxlLmpzXCI7XG5pbXBvcnQgeyBpc0VsZW1lbnQsIGlzSFRNTEVsZW1lbnQgfSBmcm9tIFwiLi9pbnN0YW5jZU9mLmpzXCI7XG5pbXBvcnQgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGZyb20gXCIuL2dldEJvdW5kaW5nQ2xpZW50UmVjdC5qc1wiO1xuaW1wb3J0IGdldFBhcmVudE5vZGUgZnJvbSBcIi4vZ2V0UGFyZW50Tm9kZS5qc1wiO1xuaW1wb3J0IGNvbnRhaW5zIGZyb20gXCIuL2NvbnRhaW5zLmpzXCI7XG5pbXBvcnQgZ2V0Tm9kZU5hbWUgZnJvbSBcIi4vZ2V0Tm9kZU5hbWUuanNcIjtcbmltcG9ydCByZWN0VG9DbGllbnRSZWN0IGZyb20gXCIuLi91dGlscy9yZWN0VG9DbGllbnRSZWN0LmpzXCI7XG5pbXBvcnQgeyBtYXgsIG1pbiB9IGZyb20gXCIuLi91dGlscy9tYXRoLmpzXCI7XG5cbmZ1bmN0aW9uIGdldElubmVyQm91bmRpbmdDbGllbnRSZWN0KGVsZW1lbnQsIHN0cmF0ZWd5KSB7XG4gIHZhciByZWN0ID0gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KGVsZW1lbnQsIGZhbHNlLCBzdHJhdGVneSA9PT0gJ2ZpeGVkJyk7XG4gIHJlY3QudG9wID0gcmVjdC50b3AgKyBlbGVtZW50LmNsaWVudFRvcDtcbiAgcmVjdC5sZWZ0ID0gcmVjdC5sZWZ0ICsgZWxlbWVudC5jbGllbnRMZWZ0O1xuICByZWN0LmJvdHRvbSA9IHJlY3QudG9wICsgZWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gIHJlY3QucmlnaHQgPSByZWN0LmxlZnQgKyBlbGVtZW50LmNsaWVudFdpZHRoO1xuICByZWN0LndpZHRoID0gZWxlbWVudC5jbGllbnRXaWR0aDtcbiAgcmVjdC5oZWlnaHQgPSBlbGVtZW50LmNsaWVudEhlaWdodDtcbiAgcmVjdC54ID0gcmVjdC5sZWZ0O1xuICByZWN0LnkgPSByZWN0LnRvcDtcbiAgcmV0dXJuIHJlY3Q7XG59XG5cbmZ1bmN0aW9uIGdldENsaWVudFJlY3RGcm9tTWl4ZWRUeXBlKGVsZW1lbnQsIGNsaXBwaW5nUGFyZW50LCBzdHJhdGVneSkge1xuICByZXR1cm4gY2xpcHBpbmdQYXJlbnQgPT09IHZpZXdwb3J0ID8gcmVjdFRvQ2xpZW50UmVjdChnZXRWaWV3cG9ydFJlY3QoZWxlbWVudCwgc3RyYXRlZ3kpKSA6IGlzRWxlbWVudChjbGlwcGluZ1BhcmVudCkgPyBnZXRJbm5lckJvdW5kaW5nQ2xpZW50UmVjdChjbGlwcGluZ1BhcmVudCwgc3RyYXRlZ3kpIDogcmVjdFRvQ2xpZW50UmVjdChnZXREb2N1bWVudFJlY3QoZ2V0RG9jdW1lbnRFbGVtZW50KGVsZW1lbnQpKSk7XG59IC8vIEEgXCJjbGlwcGluZyBwYXJlbnRcIiBpcyBhbiBvdmVyZmxvd2FibGUgY29udGFpbmVyIHdpdGggdGhlIGNoYXJhY3RlcmlzdGljIG9mXG4vLyBjbGlwcGluZyAob3IgaGlkaW5nKSBvdmVyZmxvd2luZyBlbGVtZW50cyB3aXRoIGEgcG9zaXRpb24gZGlmZmVyZW50IGZyb21cbi8vIGBpbml0aWFsYFxuXG5cbmZ1bmN0aW9uIGdldENsaXBwaW5nUGFyZW50cyhlbGVtZW50KSB7XG4gIHZhciBjbGlwcGluZ1BhcmVudHMgPSBsaXN0U2Nyb2xsUGFyZW50cyhnZXRQYXJlbnROb2RlKGVsZW1lbnQpKTtcbiAgdmFyIGNhbkVzY2FwZUNsaXBwaW5nID0gWydhYnNvbHV0ZScsICdmaXhlZCddLmluZGV4T2YoZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KS5wb3NpdGlvbikgPj0gMDtcbiAgdmFyIGNsaXBwZXJFbGVtZW50ID0gY2FuRXNjYXBlQ2xpcHBpbmcgJiYgaXNIVE1MRWxlbWVudChlbGVtZW50KSA/IGdldE9mZnNldFBhcmVudChlbGVtZW50KSA6IGVsZW1lbnQ7XG5cbiAgaWYgKCFpc0VsZW1lbnQoY2xpcHBlckVsZW1lbnQpKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9IC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXJldHVybl06IGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9mbG93L2lzc3Vlcy8xNDE0XG5cblxuICByZXR1cm4gY2xpcHBpbmdQYXJlbnRzLmZpbHRlcihmdW5jdGlvbiAoY2xpcHBpbmdQYXJlbnQpIHtcbiAgICByZXR1cm4gaXNFbGVtZW50KGNsaXBwaW5nUGFyZW50KSAmJiBjb250YWlucyhjbGlwcGluZ1BhcmVudCwgY2xpcHBlckVsZW1lbnQpICYmIGdldE5vZGVOYW1lKGNsaXBwaW5nUGFyZW50KSAhPT0gJ2JvZHknO1xuICB9KTtcbn0gLy8gR2V0cyB0aGUgbWF4aW11bSBhcmVhIHRoYXQgdGhlIGVsZW1lbnQgaXMgdmlzaWJsZSBpbiBkdWUgdG8gYW55IG51bWJlciBvZlxuLy8gY2xpcHBpbmcgcGFyZW50c1xuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldENsaXBwaW5nUmVjdChlbGVtZW50LCBib3VuZGFyeSwgcm9vdEJvdW5kYXJ5LCBzdHJhdGVneSkge1xuICB2YXIgbWFpbkNsaXBwaW5nUGFyZW50cyA9IGJvdW5kYXJ5ID09PSAnY2xpcHBpbmdQYXJlbnRzJyA/IGdldENsaXBwaW5nUGFyZW50cyhlbGVtZW50KSA6IFtdLmNvbmNhdChib3VuZGFyeSk7XG4gIHZhciBjbGlwcGluZ1BhcmVudHMgPSBbXS5jb25jYXQobWFpbkNsaXBwaW5nUGFyZW50cywgW3Jvb3RCb3VuZGFyeV0pO1xuICB2YXIgZmlyc3RDbGlwcGluZ1BhcmVudCA9IGNsaXBwaW5nUGFyZW50c1swXTtcbiAgdmFyIGNsaXBwaW5nUmVjdCA9IGNsaXBwaW5nUGFyZW50cy5yZWR1Y2UoZnVuY3Rpb24gKGFjY1JlY3QsIGNsaXBwaW5nUGFyZW50KSB7XG4gICAgdmFyIHJlY3QgPSBnZXRDbGllbnRSZWN0RnJvbU1peGVkVHlwZShlbGVtZW50LCBjbGlwcGluZ1BhcmVudCwgc3RyYXRlZ3kpO1xuICAgIGFjY1JlY3QudG9wID0gbWF4KHJlY3QudG9wLCBhY2NSZWN0LnRvcCk7XG4gICAgYWNjUmVjdC5yaWdodCA9IG1pbihyZWN0LnJpZ2h0LCBhY2NSZWN0LnJpZ2h0KTtcbiAgICBhY2NSZWN0LmJvdHRvbSA9IG1pbihyZWN0LmJvdHRvbSwgYWNjUmVjdC5ib3R0b20pO1xuICAgIGFjY1JlY3QubGVmdCA9IG1heChyZWN0LmxlZnQsIGFjY1JlY3QubGVmdCk7XG4gICAgcmV0dXJuIGFjY1JlY3Q7XG4gIH0sIGdldENsaWVudFJlY3RGcm9tTWl4ZWRUeXBlKGVsZW1lbnQsIGZpcnN0Q2xpcHBpbmdQYXJlbnQsIHN0cmF0ZWd5KSk7XG4gIGNsaXBwaW5nUmVjdC53aWR0aCA9IGNsaXBwaW5nUmVjdC5yaWdodCAtIGNsaXBwaW5nUmVjdC5sZWZ0O1xuICBjbGlwcGluZ1JlY3QuaGVpZ2h0ID0gY2xpcHBpbmdSZWN0LmJvdHRvbSAtIGNsaXBwaW5nUmVjdC50b3A7XG4gIGNsaXBwaW5nUmVjdC54ID0gY2xpcHBpbmdSZWN0LmxlZnQ7XG4gIGNsaXBwaW5nUmVjdC55ID0gY2xpcHBpbmdSZWN0LnRvcDtcbiAgcmV0dXJuIGNsaXBwaW5nUmVjdDtcbn0iLCAiaW1wb3J0IGdldEJhc2VQbGFjZW1lbnQgZnJvbSBcIi4vZ2V0QmFzZVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IGdldFZhcmlhdGlvbiBmcm9tIFwiLi9nZXRWYXJpYXRpb24uanNcIjtcbmltcG9ydCBnZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQgZnJvbSBcIi4vZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgeyB0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQsIHN0YXJ0LCBlbmQgfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbXB1dGVPZmZzZXRzKF9yZWYpIHtcbiAgdmFyIHJlZmVyZW5jZSA9IF9yZWYucmVmZXJlbmNlLFxuICAgICAgZWxlbWVudCA9IF9yZWYuZWxlbWVudCxcbiAgICAgIHBsYWNlbWVudCA9IF9yZWYucGxhY2VtZW50O1xuICB2YXIgYmFzZVBsYWNlbWVudCA9IHBsYWNlbWVudCA/IGdldEJhc2VQbGFjZW1lbnQocGxhY2VtZW50KSA6IG51bGw7XG4gIHZhciB2YXJpYXRpb24gPSBwbGFjZW1lbnQgPyBnZXRWYXJpYXRpb24ocGxhY2VtZW50KSA6IG51bGw7XG4gIHZhciBjb21tb25YID0gcmVmZXJlbmNlLnggKyByZWZlcmVuY2Uud2lkdGggLyAyIC0gZWxlbWVudC53aWR0aCAvIDI7XG4gIHZhciBjb21tb25ZID0gcmVmZXJlbmNlLnkgKyByZWZlcmVuY2UuaGVpZ2h0IC8gMiAtIGVsZW1lbnQuaGVpZ2h0IC8gMjtcbiAgdmFyIG9mZnNldHM7XG5cbiAgc3dpdGNoIChiYXNlUGxhY2VtZW50KSB7XG4gICAgY2FzZSB0b3A6XG4gICAgICBvZmZzZXRzID0ge1xuICAgICAgICB4OiBjb21tb25YLFxuICAgICAgICB5OiByZWZlcmVuY2UueSAtIGVsZW1lbnQuaGVpZ2h0XG4gICAgICB9O1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIGJvdHRvbTpcbiAgICAgIG9mZnNldHMgPSB7XG4gICAgICAgIHg6IGNvbW1vblgsXG4gICAgICAgIHk6IHJlZmVyZW5jZS55ICsgcmVmZXJlbmNlLmhlaWdodFxuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSByaWdodDpcbiAgICAgIG9mZnNldHMgPSB7XG4gICAgICAgIHg6IHJlZmVyZW5jZS54ICsgcmVmZXJlbmNlLndpZHRoLFxuICAgICAgICB5OiBjb21tb25ZXG4gICAgICB9O1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIGxlZnQ6XG4gICAgICBvZmZzZXRzID0ge1xuICAgICAgICB4OiByZWZlcmVuY2UueCAtIGVsZW1lbnQud2lkdGgsXG4gICAgICAgIHk6IGNvbW1vbllcbiAgICAgIH07XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICBvZmZzZXRzID0ge1xuICAgICAgICB4OiByZWZlcmVuY2UueCxcbiAgICAgICAgeTogcmVmZXJlbmNlLnlcbiAgICAgIH07XG4gIH1cblxuICB2YXIgbWFpbkF4aXMgPSBiYXNlUGxhY2VtZW50ID8gZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50KGJhc2VQbGFjZW1lbnQpIDogbnVsbDtcblxuICBpZiAobWFpbkF4aXMgIT0gbnVsbCkge1xuICAgIHZhciBsZW4gPSBtYWluQXhpcyA9PT0gJ3knID8gJ2hlaWdodCcgOiAnd2lkdGgnO1xuXG4gICAgc3dpdGNoICh2YXJpYXRpb24pIHtcbiAgICAgIGNhc2Ugc3RhcnQ6XG4gICAgICAgIG9mZnNldHNbbWFpbkF4aXNdID0gb2Zmc2V0c1ttYWluQXhpc10gLSAocmVmZXJlbmNlW2xlbl0gLyAyIC0gZWxlbWVudFtsZW5dIC8gMik7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIGVuZDpcbiAgICAgICAgb2Zmc2V0c1ttYWluQXhpc10gPSBvZmZzZXRzW21haW5BeGlzXSArIChyZWZlcmVuY2VbbGVuXSAvIDIgLSBlbGVtZW50W2xlbl0gLyAyKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9mZnNldHM7XG59IiwgImltcG9ydCBnZXRDbGlwcGluZ1JlY3QgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRDbGlwcGluZ1JlY3QuanNcIjtcbmltcG9ydCBnZXREb2N1bWVudEVsZW1lbnQgZnJvbSBcIi4uL2RvbS11dGlscy9nZXREb2N1bWVudEVsZW1lbnQuanNcIjtcbmltcG9ydCBnZXRCb3VuZGluZ0NsaWVudFJlY3QgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRCb3VuZGluZ0NsaWVudFJlY3QuanNcIjtcbmltcG9ydCBjb21wdXRlT2Zmc2V0cyBmcm9tIFwiLi9jb21wdXRlT2Zmc2V0cy5qc1wiO1xuaW1wb3J0IHJlY3RUb0NsaWVudFJlY3QgZnJvbSBcIi4vcmVjdFRvQ2xpZW50UmVjdC5qc1wiO1xuaW1wb3J0IHsgY2xpcHBpbmdQYXJlbnRzLCByZWZlcmVuY2UsIHBvcHBlciwgYm90dG9tLCB0b3AsIHJpZ2h0LCBiYXNlUGxhY2VtZW50cywgdmlld3BvcnQgfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmltcG9ydCB7IGlzRWxlbWVudCB9IGZyb20gXCIuLi9kb20tdXRpbHMvaW5zdGFuY2VPZi5qc1wiO1xuaW1wb3J0IG1lcmdlUGFkZGluZ09iamVjdCBmcm9tIFwiLi9tZXJnZVBhZGRpbmdPYmplY3QuanNcIjtcbmltcG9ydCBleHBhbmRUb0hhc2hNYXAgZnJvbSBcIi4vZXhwYW5kVG9IYXNoTWFwLmpzXCI7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZGV0ZWN0T3ZlcmZsb3coc3RhdGUsIG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuXG4gIHZhciBfb3B0aW9ucyA9IG9wdGlvbnMsXG4gICAgICBfb3B0aW9ucyRwbGFjZW1lbnQgPSBfb3B0aW9ucy5wbGFjZW1lbnQsXG4gICAgICBwbGFjZW1lbnQgPSBfb3B0aW9ucyRwbGFjZW1lbnQgPT09IHZvaWQgMCA/IHN0YXRlLnBsYWNlbWVudCA6IF9vcHRpb25zJHBsYWNlbWVudCxcbiAgICAgIF9vcHRpb25zJHN0cmF0ZWd5ID0gX29wdGlvbnMuc3RyYXRlZ3ksXG4gICAgICBzdHJhdGVneSA9IF9vcHRpb25zJHN0cmF0ZWd5ID09PSB2b2lkIDAgPyBzdGF0ZS5zdHJhdGVneSA6IF9vcHRpb25zJHN0cmF0ZWd5LFxuICAgICAgX29wdGlvbnMkYm91bmRhcnkgPSBfb3B0aW9ucy5ib3VuZGFyeSxcbiAgICAgIGJvdW5kYXJ5ID0gX29wdGlvbnMkYm91bmRhcnkgPT09IHZvaWQgMCA/IGNsaXBwaW5nUGFyZW50cyA6IF9vcHRpb25zJGJvdW5kYXJ5LFxuICAgICAgX29wdGlvbnMkcm9vdEJvdW5kYXJ5ID0gX29wdGlvbnMucm9vdEJvdW5kYXJ5LFxuICAgICAgcm9vdEJvdW5kYXJ5ID0gX29wdGlvbnMkcm9vdEJvdW5kYXJ5ID09PSB2b2lkIDAgPyB2aWV3cG9ydCA6IF9vcHRpb25zJHJvb3RCb3VuZGFyeSxcbiAgICAgIF9vcHRpb25zJGVsZW1lbnRDb250ZSA9IF9vcHRpb25zLmVsZW1lbnRDb250ZXh0LFxuICAgICAgZWxlbWVudENvbnRleHQgPSBfb3B0aW9ucyRlbGVtZW50Q29udGUgPT09IHZvaWQgMCA/IHBvcHBlciA6IF9vcHRpb25zJGVsZW1lbnRDb250ZSxcbiAgICAgIF9vcHRpb25zJGFsdEJvdW5kYXJ5ID0gX29wdGlvbnMuYWx0Qm91bmRhcnksXG4gICAgICBhbHRCb3VuZGFyeSA9IF9vcHRpb25zJGFsdEJvdW5kYXJ5ID09PSB2b2lkIDAgPyBmYWxzZSA6IF9vcHRpb25zJGFsdEJvdW5kYXJ5LFxuICAgICAgX29wdGlvbnMkcGFkZGluZyA9IF9vcHRpb25zLnBhZGRpbmcsXG4gICAgICBwYWRkaW5nID0gX29wdGlvbnMkcGFkZGluZyA9PT0gdm9pZCAwID8gMCA6IF9vcHRpb25zJHBhZGRpbmc7XG4gIHZhciBwYWRkaW5nT2JqZWN0ID0gbWVyZ2VQYWRkaW5nT2JqZWN0KHR5cGVvZiBwYWRkaW5nICE9PSAnbnVtYmVyJyA/IHBhZGRpbmcgOiBleHBhbmRUb0hhc2hNYXAocGFkZGluZywgYmFzZVBsYWNlbWVudHMpKTtcbiAgdmFyIGFsdENvbnRleHQgPSBlbGVtZW50Q29udGV4dCA9PT0gcG9wcGVyID8gcmVmZXJlbmNlIDogcG9wcGVyO1xuICB2YXIgcG9wcGVyUmVjdCA9IHN0YXRlLnJlY3RzLnBvcHBlcjtcbiAgdmFyIGVsZW1lbnQgPSBzdGF0ZS5lbGVtZW50c1thbHRCb3VuZGFyeSA/IGFsdENvbnRleHQgOiBlbGVtZW50Q29udGV4dF07XG4gIHZhciBjbGlwcGluZ0NsaWVudFJlY3QgPSBnZXRDbGlwcGluZ1JlY3QoaXNFbGVtZW50KGVsZW1lbnQpID8gZWxlbWVudCA6IGVsZW1lbnQuY29udGV4dEVsZW1lbnQgfHwgZ2V0RG9jdW1lbnRFbGVtZW50KHN0YXRlLmVsZW1lbnRzLnBvcHBlciksIGJvdW5kYXJ5LCByb290Qm91bmRhcnksIHN0cmF0ZWd5KTtcbiAgdmFyIHJlZmVyZW5jZUNsaWVudFJlY3QgPSBnZXRCb3VuZGluZ0NsaWVudFJlY3Qoc3RhdGUuZWxlbWVudHMucmVmZXJlbmNlKTtcbiAgdmFyIHBvcHBlck9mZnNldHMgPSBjb21wdXRlT2Zmc2V0cyh7XG4gICAgcmVmZXJlbmNlOiByZWZlcmVuY2VDbGllbnRSZWN0LFxuICAgIGVsZW1lbnQ6IHBvcHBlclJlY3QsXG4gICAgc3RyYXRlZ3k6ICdhYnNvbHV0ZScsXG4gICAgcGxhY2VtZW50OiBwbGFjZW1lbnRcbiAgfSk7XG4gIHZhciBwb3BwZXJDbGllbnRSZWN0ID0gcmVjdFRvQ2xpZW50UmVjdChPYmplY3QuYXNzaWduKHt9LCBwb3BwZXJSZWN0LCBwb3BwZXJPZmZzZXRzKSk7XG4gIHZhciBlbGVtZW50Q2xpZW50UmVjdCA9IGVsZW1lbnRDb250ZXh0ID09PSBwb3BwZXIgPyBwb3BwZXJDbGllbnRSZWN0IDogcmVmZXJlbmNlQ2xpZW50UmVjdDsgLy8gcG9zaXRpdmUgPSBvdmVyZmxvd2luZyB0aGUgY2xpcHBpbmcgcmVjdFxuICAvLyAwIG9yIG5lZ2F0aXZlID0gd2l0aGluIHRoZSBjbGlwcGluZyByZWN0XG5cbiAgdmFyIG92ZXJmbG93T2Zmc2V0cyA9IHtcbiAgICB0b3A6IGNsaXBwaW5nQ2xpZW50UmVjdC50b3AgLSBlbGVtZW50Q2xpZW50UmVjdC50b3AgKyBwYWRkaW5nT2JqZWN0LnRvcCxcbiAgICBib3R0b206IGVsZW1lbnRDbGllbnRSZWN0LmJvdHRvbSAtIGNsaXBwaW5nQ2xpZW50UmVjdC5ib3R0b20gKyBwYWRkaW5nT2JqZWN0LmJvdHRvbSxcbiAgICBsZWZ0OiBjbGlwcGluZ0NsaWVudFJlY3QubGVmdCAtIGVsZW1lbnRDbGllbnRSZWN0LmxlZnQgKyBwYWRkaW5nT2JqZWN0LmxlZnQsXG4gICAgcmlnaHQ6IGVsZW1lbnRDbGllbnRSZWN0LnJpZ2h0IC0gY2xpcHBpbmdDbGllbnRSZWN0LnJpZ2h0ICsgcGFkZGluZ09iamVjdC5yaWdodFxuICB9O1xuICB2YXIgb2Zmc2V0RGF0YSA9IHN0YXRlLm1vZGlmaWVyc0RhdGEub2Zmc2V0OyAvLyBPZmZzZXRzIGNhbiBiZSBhcHBsaWVkIG9ubHkgdG8gdGhlIHBvcHBlciBlbGVtZW50XG5cbiAgaWYgKGVsZW1lbnRDb250ZXh0ID09PSBwb3BwZXIgJiYgb2Zmc2V0RGF0YSkge1xuICAgIHZhciBvZmZzZXQgPSBvZmZzZXREYXRhW3BsYWNlbWVudF07XG4gICAgT2JqZWN0LmtleXMob3ZlcmZsb3dPZmZzZXRzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHZhciBtdWx0aXBseSA9IFtyaWdodCwgYm90dG9tXS5pbmRleE9mKGtleSkgPj0gMCA/IDEgOiAtMTtcbiAgICAgIHZhciBheGlzID0gW3RvcCwgYm90dG9tXS5pbmRleE9mKGtleSkgPj0gMCA/ICd5JyA6ICd4JztcbiAgICAgIG92ZXJmbG93T2Zmc2V0c1trZXldICs9IG9mZnNldFtheGlzXSAqIG11bHRpcGx5O1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIG92ZXJmbG93T2Zmc2V0cztcbn0iLCAiaW1wb3J0IGdldFZhcmlhdGlvbiBmcm9tIFwiLi9nZXRWYXJpYXRpb24uanNcIjtcbmltcG9ydCB7IHZhcmlhdGlvblBsYWNlbWVudHMsIGJhc2VQbGFjZW1lbnRzLCBwbGFjZW1lbnRzIGFzIGFsbFBsYWNlbWVudHMgfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmltcG9ydCBkZXRlY3RPdmVyZmxvdyBmcm9tIFwiLi9kZXRlY3RPdmVyZmxvdy5qc1wiO1xuaW1wb3J0IGdldEJhc2VQbGFjZW1lbnQgZnJvbSBcIi4vZ2V0QmFzZVBsYWNlbWVudC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29tcHV0ZUF1dG9QbGFjZW1lbnQoc3RhdGUsIG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuXG4gIHZhciBfb3B0aW9ucyA9IG9wdGlvbnMsXG4gICAgICBwbGFjZW1lbnQgPSBfb3B0aW9ucy5wbGFjZW1lbnQsXG4gICAgICBib3VuZGFyeSA9IF9vcHRpb25zLmJvdW5kYXJ5LFxuICAgICAgcm9vdEJvdW5kYXJ5ID0gX29wdGlvbnMucm9vdEJvdW5kYXJ5LFxuICAgICAgcGFkZGluZyA9IF9vcHRpb25zLnBhZGRpbmcsXG4gICAgICBmbGlwVmFyaWF0aW9ucyA9IF9vcHRpb25zLmZsaXBWYXJpYXRpb25zLFxuICAgICAgX29wdGlvbnMkYWxsb3dlZEF1dG9QID0gX29wdGlvbnMuYWxsb3dlZEF1dG9QbGFjZW1lbnRzLFxuICAgICAgYWxsb3dlZEF1dG9QbGFjZW1lbnRzID0gX29wdGlvbnMkYWxsb3dlZEF1dG9QID09PSB2b2lkIDAgPyBhbGxQbGFjZW1lbnRzIDogX29wdGlvbnMkYWxsb3dlZEF1dG9QO1xuICB2YXIgdmFyaWF0aW9uID0gZ2V0VmFyaWF0aW9uKHBsYWNlbWVudCk7XG4gIHZhciBwbGFjZW1lbnRzID0gdmFyaWF0aW9uID8gZmxpcFZhcmlhdGlvbnMgPyB2YXJpYXRpb25QbGFjZW1lbnRzIDogdmFyaWF0aW9uUGxhY2VtZW50cy5maWx0ZXIoZnVuY3Rpb24gKHBsYWNlbWVudCkge1xuICAgIHJldHVybiBnZXRWYXJpYXRpb24ocGxhY2VtZW50KSA9PT0gdmFyaWF0aW9uO1xuICB9KSA6IGJhc2VQbGFjZW1lbnRzO1xuICB2YXIgYWxsb3dlZFBsYWNlbWVudHMgPSBwbGFjZW1lbnRzLmZpbHRlcihmdW5jdGlvbiAocGxhY2VtZW50KSB7XG4gICAgcmV0dXJuIGFsbG93ZWRBdXRvUGxhY2VtZW50cy5pbmRleE9mKHBsYWNlbWVudCkgPj0gMDtcbiAgfSk7XG5cbiAgaWYgKGFsbG93ZWRQbGFjZW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgIGFsbG93ZWRQbGFjZW1lbnRzID0gcGxhY2VtZW50cztcbiAgfSAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS10eXBlXTogRmxvdyBzZWVtcyB0byBoYXZlIHByb2JsZW1zIHdpdGggdHdvIGFycmF5IHVuaW9ucy4uLlxuXG5cbiAgdmFyIG92ZXJmbG93cyA9IGFsbG93ZWRQbGFjZW1lbnRzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwbGFjZW1lbnQpIHtcbiAgICBhY2NbcGxhY2VtZW50XSA9IGRldGVjdE92ZXJmbG93KHN0YXRlLCB7XG4gICAgICBwbGFjZW1lbnQ6IHBsYWNlbWVudCxcbiAgICAgIGJvdW5kYXJ5OiBib3VuZGFyeSxcbiAgICAgIHJvb3RCb3VuZGFyeTogcm9vdEJvdW5kYXJ5LFxuICAgICAgcGFkZGluZzogcGFkZGluZ1xuICAgIH0pW2dldEJhc2VQbGFjZW1lbnQocGxhY2VtZW50KV07XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xuICByZXR1cm4gT2JqZWN0LmtleXMob3ZlcmZsb3dzKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgcmV0dXJuIG92ZXJmbG93c1thXSAtIG92ZXJmbG93c1tiXTtcbiAgfSk7XG59IiwgImltcG9ydCBnZXRPcHBvc2l0ZVBsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvZ2V0T3Bwb3NpdGVQbGFjZW1lbnQuanNcIjtcbmltcG9ydCBnZXRCYXNlUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9nZXRCYXNlUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgZ2V0T3Bwb3NpdGVWYXJpYXRpb25QbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldE9wcG9zaXRlVmFyaWF0aW9uUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgZGV0ZWN0T3ZlcmZsb3cgZnJvbSBcIi4uL3V0aWxzL2RldGVjdE92ZXJmbG93LmpzXCI7XG5pbXBvcnQgY29tcHV0ZUF1dG9QbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2NvbXB1dGVBdXRvUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgeyBib3R0b20sIHRvcCwgc3RhcnQsIHJpZ2h0LCBsZWZ0LCBhdXRvIH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7XG5pbXBvcnQgZ2V0VmFyaWF0aW9uIGZyb20gXCIuLi91dGlscy9nZXRWYXJpYXRpb24uanNcIjsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5mdW5jdGlvbiBnZXRFeHBhbmRlZEZhbGxiYWNrUGxhY2VtZW50cyhwbGFjZW1lbnQpIHtcbiAgaWYgKGdldEJhc2VQbGFjZW1lbnQocGxhY2VtZW50KSA9PT0gYXV0bykge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIHZhciBvcHBvc2l0ZVBsYWNlbWVudCA9IGdldE9wcG9zaXRlUGxhY2VtZW50KHBsYWNlbWVudCk7XG4gIHJldHVybiBbZ2V0T3Bwb3NpdGVWYXJpYXRpb25QbGFjZW1lbnQocGxhY2VtZW50KSwgb3Bwb3NpdGVQbGFjZW1lbnQsIGdldE9wcG9zaXRlVmFyaWF0aW9uUGxhY2VtZW50KG9wcG9zaXRlUGxhY2VtZW50KV07XG59XG5cbmZ1bmN0aW9uIGZsaXAoX3JlZikge1xuICB2YXIgc3RhdGUgPSBfcmVmLnN0YXRlLFxuICAgICAgb3B0aW9ucyA9IF9yZWYub3B0aW9ucyxcbiAgICAgIG5hbWUgPSBfcmVmLm5hbWU7XG5cbiAgaWYgKHN0YXRlLm1vZGlmaWVyc0RhdGFbbmFtZV0uX3NraXApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgX29wdGlvbnMkbWFpbkF4aXMgPSBvcHRpb25zLm1haW5BeGlzLFxuICAgICAgY2hlY2tNYWluQXhpcyA9IF9vcHRpb25zJG1haW5BeGlzID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkbWFpbkF4aXMsXG4gICAgICBfb3B0aW9ucyRhbHRBeGlzID0gb3B0aW9ucy5hbHRBeGlzLFxuICAgICAgY2hlY2tBbHRBeGlzID0gX29wdGlvbnMkYWx0QXhpcyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJGFsdEF4aXMsXG4gICAgICBzcGVjaWZpZWRGYWxsYmFja1BsYWNlbWVudHMgPSBvcHRpb25zLmZhbGxiYWNrUGxhY2VtZW50cyxcbiAgICAgIHBhZGRpbmcgPSBvcHRpb25zLnBhZGRpbmcsXG4gICAgICBib3VuZGFyeSA9IG9wdGlvbnMuYm91bmRhcnksXG4gICAgICByb290Qm91bmRhcnkgPSBvcHRpb25zLnJvb3RCb3VuZGFyeSxcbiAgICAgIGFsdEJvdW5kYXJ5ID0gb3B0aW9ucy5hbHRCb3VuZGFyeSxcbiAgICAgIF9vcHRpb25zJGZsaXBWYXJpYXRpbyA9IG9wdGlvbnMuZmxpcFZhcmlhdGlvbnMsXG4gICAgICBmbGlwVmFyaWF0aW9ucyA9IF9vcHRpb25zJGZsaXBWYXJpYXRpbyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJGZsaXBWYXJpYXRpbyxcbiAgICAgIGFsbG93ZWRBdXRvUGxhY2VtZW50cyA9IG9wdGlvbnMuYWxsb3dlZEF1dG9QbGFjZW1lbnRzO1xuICB2YXIgcHJlZmVycmVkUGxhY2VtZW50ID0gc3RhdGUub3B0aW9ucy5wbGFjZW1lbnQ7XG4gIHZhciBiYXNlUGxhY2VtZW50ID0gZ2V0QmFzZVBsYWNlbWVudChwcmVmZXJyZWRQbGFjZW1lbnQpO1xuICB2YXIgaXNCYXNlUGxhY2VtZW50ID0gYmFzZVBsYWNlbWVudCA9PT0gcHJlZmVycmVkUGxhY2VtZW50O1xuICB2YXIgZmFsbGJhY2tQbGFjZW1lbnRzID0gc3BlY2lmaWVkRmFsbGJhY2tQbGFjZW1lbnRzIHx8IChpc0Jhc2VQbGFjZW1lbnQgfHwgIWZsaXBWYXJpYXRpb25zID8gW2dldE9wcG9zaXRlUGxhY2VtZW50KHByZWZlcnJlZFBsYWNlbWVudCldIDogZ2V0RXhwYW5kZWRGYWxsYmFja1BsYWNlbWVudHMocHJlZmVycmVkUGxhY2VtZW50KSk7XG4gIHZhciBwbGFjZW1lbnRzID0gW3ByZWZlcnJlZFBsYWNlbWVudF0uY29uY2F0KGZhbGxiYWNrUGxhY2VtZW50cykucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHBsYWNlbWVudCkge1xuICAgIHJldHVybiBhY2MuY29uY2F0KGdldEJhc2VQbGFjZW1lbnQocGxhY2VtZW50KSA9PT0gYXV0byA/IGNvbXB1dGVBdXRvUGxhY2VtZW50KHN0YXRlLCB7XG4gICAgICBwbGFjZW1lbnQ6IHBsYWNlbWVudCxcbiAgICAgIGJvdW5kYXJ5OiBib3VuZGFyeSxcbiAgICAgIHJvb3RCb3VuZGFyeTogcm9vdEJvdW5kYXJ5LFxuICAgICAgcGFkZGluZzogcGFkZGluZyxcbiAgICAgIGZsaXBWYXJpYXRpb25zOiBmbGlwVmFyaWF0aW9ucyxcbiAgICAgIGFsbG93ZWRBdXRvUGxhY2VtZW50czogYWxsb3dlZEF1dG9QbGFjZW1lbnRzXG4gICAgfSkgOiBwbGFjZW1lbnQpO1xuICB9LCBbXSk7XG4gIHZhciByZWZlcmVuY2VSZWN0ID0gc3RhdGUucmVjdHMucmVmZXJlbmNlO1xuICB2YXIgcG9wcGVyUmVjdCA9IHN0YXRlLnJlY3RzLnBvcHBlcjtcbiAgdmFyIGNoZWNrc01hcCA9IG5ldyBNYXAoKTtcbiAgdmFyIG1ha2VGYWxsYmFja0NoZWNrcyA9IHRydWU7XG4gIHZhciBmaXJzdEZpdHRpbmdQbGFjZW1lbnQgPSBwbGFjZW1lbnRzWzBdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcGxhY2VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBwbGFjZW1lbnQgPSBwbGFjZW1lbnRzW2ldO1xuXG4gICAgdmFyIF9iYXNlUGxhY2VtZW50ID0gZ2V0QmFzZVBsYWNlbWVudChwbGFjZW1lbnQpO1xuXG4gICAgdmFyIGlzU3RhcnRWYXJpYXRpb24gPSBnZXRWYXJpYXRpb24ocGxhY2VtZW50KSA9PT0gc3RhcnQ7XG4gICAgdmFyIGlzVmVydGljYWwgPSBbdG9wLCBib3R0b21dLmluZGV4T2YoX2Jhc2VQbGFjZW1lbnQpID49IDA7XG4gICAgdmFyIGxlbiA9IGlzVmVydGljYWwgPyAnd2lkdGgnIDogJ2hlaWdodCc7XG4gICAgdmFyIG92ZXJmbG93ID0gZGV0ZWN0T3ZlcmZsb3coc3RhdGUsIHtcbiAgICAgIHBsYWNlbWVudDogcGxhY2VtZW50LFxuICAgICAgYm91bmRhcnk6IGJvdW5kYXJ5LFxuICAgICAgcm9vdEJvdW5kYXJ5OiByb290Qm91bmRhcnksXG4gICAgICBhbHRCb3VuZGFyeTogYWx0Qm91bmRhcnksXG4gICAgICBwYWRkaW5nOiBwYWRkaW5nXG4gICAgfSk7XG4gICAgdmFyIG1haW5WYXJpYXRpb25TaWRlID0gaXNWZXJ0aWNhbCA/IGlzU3RhcnRWYXJpYXRpb24gPyByaWdodCA6IGxlZnQgOiBpc1N0YXJ0VmFyaWF0aW9uID8gYm90dG9tIDogdG9wO1xuXG4gICAgaWYgKHJlZmVyZW5jZVJlY3RbbGVuXSA+IHBvcHBlclJlY3RbbGVuXSkge1xuICAgICAgbWFpblZhcmlhdGlvblNpZGUgPSBnZXRPcHBvc2l0ZVBsYWNlbWVudChtYWluVmFyaWF0aW9uU2lkZSk7XG4gICAgfVxuXG4gICAgdmFyIGFsdFZhcmlhdGlvblNpZGUgPSBnZXRPcHBvc2l0ZVBsYWNlbWVudChtYWluVmFyaWF0aW9uU2lkZSk7XG4gICAgdmFyIGNoZWNrcyA9IFtdO1xuXG4gICAgaWYgKGNoZWNrTWFpbkF4aXMpIHtcbiAgICAgIGNoZWNrcy5wdXNoKG92ZXJmbG93W19iYXNlUGxhY2VtZW50XSA8PSAwKTtcbiAgICB9XG5cbiAgICBpZiAoY2hlY2tBbHRBeGlzKSB7XG4gICAgICBjaGVja3MucHVzaChvdmVyZmxvd1ttYWluVmFyaWF0aW9uU2lkZV0gPD0gMCwgb3ZlcmZsb3dbYWx0VmFyaWF0aW9uU2lkZV0gPD0gMCk7XG4gICAgfVxuXG4gICAgaWYgKGNoZWNrcy5ldmVyeShmdW5jdGlvbiAoY2hlY2spIHtcbiAgICAgIHJldHVybiBjaGVjaztcbiAgICB9KSkge1xuICAgICAgZmlyc3RGaXR0aW5nUGxhY2VtZW50ID0gcGxhY2VtZW50O1xuICAgICAgbWFrZUZhbGxiYWNrQ2hlY2tzID0gZmFsc2U7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjaGVja3NNYXAuc2V0KHBsYWNlbWVudCwgY2hlY2tzKTtcbiAgfVxuXG4gIGlmIChtYWtlRmFsbGJhY2tDaGVja3MpIHtcbiAgICAvLyBgMmAgbWF5IGJlIGRlc2lyZWQgaW4gc29tZSBjYXNlcyBcdTIwMTMgcmVzZWFyY2ggbGF0ZXJcbiAgICB2YXIgbnVtYmVyT2ZDaGVja3MgPSBmbGlwVmFyaWF0aW9ucyA/IDMgOiAxO1xuXG4gICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoX2kpIHtcbiAgICAgIHZhciBmaXR0aW5nUGxhY2VtZW50ID0gcGxhY2VtZW50cy5maW5kKGZ1bmN0aW9uIChwbGFjZW1lbnQpIHtcbiAgICAgICAgdmFyIGNoZWNrcyA9IGNoZWNrc01hcC5nZXQocGxhY2VtZW50KTtcblxuICAgICAgICBpZiAoY2hlY2tzKSB7XG4gICAgICAgICAgcmV0dXJuIGNoZWNrcy5zbGljZSgwLCBfaSkuZXZlcnkoZnVuY3Rpb24gKGNoZWNrKSB7XG4gICAgICAgICAgICByZXR1cm4gY2hlY2s7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoZml0dGluZ1BsYWNlbWVudCkge1xuICAgICAgICBmaXJzdEZpdHRpbmdQbGFjZW1lbnQgPSBmaXR0aW5nUGxhY2VtZW50O1xuICAgICAgICByZXR1cm4gXCJicmVha1wiO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBmb3IgKHZhciBfaSA9IG51bWJlck9mQ2hlY2tzOyBfaSA+IDA7IF9pLS0pIHtcbiAgICAgIHZhciBfcmV0ID0gX2xvb3AoX2kpO1xuXG4gICAgICBpZiAoX3JldCA9PT0gXCJicmVha1wiKSBicmVhaztcbiAgICB9XG4gIH1cblxuICBpZiAoc3RhdGUucGxhY2VtZW50ICE9PSBmaXJzdEZpdHRpbmdQbGFjZW1lbnQpIHtcbiAgICBzdGF0ZS5tb2RpZmllcnNEYXRhW25hbWVdLl9za2lwID0gdHJ1ZTtcbiAgICBzdGF0ZS5wbGFjZW1lbnQgPSBmaXJzdEZpdHRpbmdQbGFjZW1lbnQ7XG4gICAgc3RhdGUucmVzZXQgPSB0cnVlO1xuICB9XG59IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdmbGlwJyxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcGhhc2U6ICdtYWluJyxcbiAgZm46IGZsaXAsXG4gIHJlcXVpcmVzSWZFeGlzdHM6IFsnb2Zmc2V0J10sXG4gIGRhdGE6IHtcbiAgICBfc2tpcDogZmFsc2VcbiAgfVxufTsiLCAiaW1wb3J0IHsgdG9wLCBib3R0b20sIGxlZnQsIHJpZ2h0IH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7XG5pbXBvcnQgZGV0ZWN0T3ZlcmZsb3cgZnJvbSBcIi4uL3V0aWxzL2RldGVjdE92ZXJmbG93LmpzXCI7XG5cbmZ1bmN0aW9uIGdldFNpZGVPZmZzZXRzKG92ZXJmbG93LCByZWN0LCBwcmV2ZW50ZWRPZmZzZXRzKSB7XG4gIGlmIChwcmV2ZW50ZWRPZmZzZXRzID09PSB2b2lkIDApIHtcbiAgICBwcmV2ZW50ZWRPZmZzZXRzID0ge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDBcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB0b3A6IG92ZXJmbG93LnRvcCAtIHJlY3QuaGVpZ2h0IC0gcHJldmVudGVkT2Zmc2V0cy55LFxuICAgIHJpZ2h0OiBvdmVyZmxvdy5yaWdodCAtIHJlY3Qud2lkdGggKyBwcmV2ZW50ZWRPZmZzZXRzLngsXG4gICAgYm90dG9tOiBvdmVyZmxvdy5ib3R0b20gLSByZWN0LmhlaWdodCArIHByZXZlbnRlZE9mZnNldHMueSxcbiAgICBsZWZ0OiBvdmVyZmxvdy5sZWZ0IC0gcmVjdC53aWR0aCAtIHByZXZlbnRlZE9mZnNldHMueFxuICB9O1xufVxuXG5mdW5jdGlvbiBpc0FueVNpZGVGdWxseUNsaXBwZWQob3ZlcmZsb3cpIHtcbiAgcmV0dXJuIFt0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnRdLnNvbWUoZnVuY3Rpb24gKHNpZGUpIHtcbiAgICByZXR1cm4gb3ZlcmZsb3dbc2lkZV0gPj0gMDtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGhpZGUoX3JlZikge1xuICB2YXIgc3RhdGUgPSBfcmVmLnN0YXRlLFxuICAgICAgbmFtZSA9IF9yZWYubmFtZTtcbiAgdmFyIHJlZmVyZW5jZVJlY3QgPSBzdGF0ZS5yZWN0cy5yZWZlcmVuY2U7XG4gIHZhciBwb3BwZXJSZWN0ID0gc3RhdGUucmVjdHMucG9wcGVyO1xuICB2YXIgcHJldmVudGVkT2Zmc2V0cyA9IHN0YXRlLm1vZGlmaWVyc0RhdGEucHJldmVudE92ZXJmbG93O1xuICB2YXIgcmVmZXJlbmNlT3ZlcmZsb3cgPSBkZXRlY3RPdmVyZmxvdyhzdGF0ZSwge1xuICAgIGVsZW1lbnRDb250ZXh0OiAncmVmZXJlbmNlJ1xuICB9KTtcbiAgdmFyIHBvcHBlckFsdE92ZXJmbG93ID0gZGV0ZWN0T3ZlcmZsb3coc3RhdGUsIHtcbiAgICBhbHRCb3VuZGFyeTogdHJ1ZVxuICB9KTtcbiAgdmFyIHJlZmVyZW5jZUNsaXBwaW5nT2Zmc2V0cyA9IGdldFNpZGVPZmZzZXRzKHJlZmVyZW5jZU92ZXJmbG93LCByZWZlcmVuY2VSZWN0KTtcbiAgdmFyIHBvcHBlckVzY2FwZU9mZnNldHMgPSBnZXRTaWRlT2Zmc2V0cyhwb3BwZXJBbHRPdmVyZmxvdywgcG9wcGVyUmVjdCwgcHJldmVudGVkT2Zmc2V0cyk7XG4gIHZhciBpc1JlZmVyZW5jZUhpZGRlbiA9IGlzQW55U2lkZUZ1bGx5Q2xpcHBlZChyZWZlcmVuY2VDbGlwcGluZ09mZnNldHMpO1xuICB2YXIgaGFzUG9wcGVyRXNjYXBlZCA9IGlzQW55U2lkZUZ1bGx5Q2xpcHBlZChwb3BwZXJFc2NhcGVPZmZzZXRzKTtcbiAgc3RhdGUubW9kaWZpZXJzRGF0YVtuYW1lXSA9IHtcbiAgICByZWZlcmVuY2VDbGlwcGluZ09mZnNldHM6IHJlZmVyZW5jZUNsaXBwaW5nT2Zmc2V0cyxcbiAgICBwb3BwZXJFc2NhcGVPZmZzZXRzOiBwb3BwZXJFc2NhcGVPZmZzZXRzLFxuICAgIGlzUmVmZXJlbmNlSGlkZGVuOiBpc1JlZmVyZW5jZUhpZGRlbixcbiAgICBoYXNQb3BwZXJFc2NhcGVkOiBoYXNQb3BwZXJFc2NhcGVkXG4gIH07XG4gIHN0YXRlLmF0dHJpYnV0ZXMucG9wcGVyID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUuYXR0cmlidXRlcy5wb3BwZXIsIHtcbiAgICAnZGF0YS1wb3BwZXItcmVmZXJlbmNlLWhpZGRlbic6IGlzUmVmZXJlbmNlSGlkZGVuLFxuICAgICdkYXRhLXBvcHBlci1lc2NhcGVkJzogaGFzUG9wcGVyRXNjYXBlZFxuICB9KTtcbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ2hpZGUnLFxuICBlbmFibGVkOiB0cnVlLFxuICBwaGFzZTogJ21haW4nLFxuICByZXF1aXJlc0lmRXhpc3RzOiBbJ3ByZXZlbnRPdmVyZmxvdyddLFxuICBmbjogaGlkZVxufTsiLCAiaW1wb3J0IGdldEJhc2VQbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldEJhc2VQbGFjZW1lbnQuanNcIjtcbmltcG9ydCB7IHRvcCwgbGVmdCwgcmlnaHQsIHBsYWNlbWVudHMgfSBmcm9tIFwiLi4vZW51bXMuanNcIjsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5leHBvcnQgZnVuY3Rpb24gZGlzdGFuY2VBbmRTa2lkZGluZ1RvWFkocGxhY2VtZW50LCByZWN0cywgb2Zmc2V0KSB7XG4gIHZhciBiYXNlUGxhY2VtZW50ID0gZ2V0QmFzZVBsYWNlbWVudChwbGFjZW1lbnQpO1xuICB2YXIgaW52ZXJ0RGlzdGFuY2UgPSBbbGVmdCwgdG9wXS5pbmRleE9mKGJhc2VQbGFjZW1lbnQpID49IDAgPyAtMSA6IDE7XG5cbiAgdmFyIF9yZWYgPSB0eXBlb2Ygb2Zmc2V0ID09PSAnZnVuY3Rpb24nID8gb2Zmc2V0KE9iamVjdC5hc3NpZ24oe30sIHJlY3RzLCB7XG4gICAgcGxhY2VtZW50OiBwbGFjZW1lbnRcbiAgfSkpIDogb2Zmc2V0LFxuICAgICAgc2tpZGRpbmcgPSBfcmVmWzBdLFxuICAgICAgZGlzdGFuY2UgPSBfcmVmWzFdO1xuXG4gIHNraWRkaW5nID0gc2tpZGRpbmcgfHwgMDtcbiAgZGlzdGFuY2UgPSAoZGlzdGFuY2UgfHwgMCkgKiBpbnZlcnREaXN0YW5jZTtcbiAgcmV0dXJuIFtsZWZ0LCByaWdodF0uaW5kZXhPZihiYXNlUGxhY2VtZW50KSA+PSAwID8ge1xuICAgIHg6IGRpc3RhbmNlLFxuICAgIHk6IHNraWRkaW5nXG4gIH0gOiB7XG4gICAgeDogc2tpZGRpbmcsXG4gICAgeTogZGlzdGFuY2VcbiAgfTtcbn1cblxuZnVuY3Rpb24gb2Zmc2V0KF9yZWYyKSB7XG4gIHZhciBzdGF0ZSA9IF9yZWYyLnN0YXRlLFxuICAgICAgb3B0aW9ucyA9IF9yZWYyLm9wdGlvbnMsXG4gICAgICBuYW1lID0gX3JlZjIubmFtZTtcbiAgdmFyIF9vcHRpb25zJG9mZnNldCA9IG9wdGlvbnMub2Zmc2V0LFxuICAgICAgb2Zmc2V0ID0gX29wdGlvbnMkb2Zmc2V0ID09PSB2b2lkIDAgPyBbMCwgMF0gOiBfb3B0aW9ucyRvZmZzZXQ7XG4gIHZhciBkYXRhID0gcGxhY2VtZW50cy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgcGxhY2VtZW50KSB7XG4gICAgYWNjW3BsYWNlbWVudF0gPSBkaXN0YW5jZUFuZFNraWRkaW5nVG9YWShwbGFjZW1lbnQsIHN0YXRlLnJlY3RzLCBvZmZzZXQpO1xuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9KTtcbiAgdmFyIF9kYXRhJHN0YXRlJHBsYWNlbWVudCA9IGRhdGFbc3RhdGUucGxhY2VtZW50XSxcbiAgICAgIHggPSBfZGF0YSRzdGF0ZSRwbGFjZW1lbnQueCxcbiAgICAgIHkgPSBfZGF0YSRzdGF0ZSRwbGFjZW1lbnQueTtcblxuICBpZiAoc3RhdGUubW9kaWZpZXJzRGF0YS5wb3BwZXJPZmZzZXRzICE9IG51bGwpIHtcbiAgICBzdGF0ZS5tb2RpZmllcnNEYXRhLnBvcHBlck9mZnNldHMueCArPSB4O1xuICAgIHN0YXRlLm1vZGlmaWVyc0RhdGEucG9wcGVyT2Zmc2V0cy55ICs9IHk7XG4gIH1cblxuICBzdGF0ZS5tb2RpZmllcnNEYXRhW25hbWVdID0gZGF0YTtcbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ29mZnNldCcsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAnbWFpbicsXG4gIHJlcXVpcmVzOiBbJ3BvcHBlck9mZnNldHMnXSxcbiAgZm46IG9mZnNldFxufTsiLCAiaW1wb3J0IGNvbXB1dGVPZmZzZXRzIGZyb20gXCIuLi91dGlscy9jb21wdXRlT2Zmc2V0cy5qc1wiO1xuXG5mdW5jdGlvbiBwb3BwZXJPZmZzZXRzKF9yZWYpIHtcbiAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZSxcbiAgICAgIG5hbWUgPSBfcmVmLm5hbWU7XG4gIC8vIE9mZnNldHMgYXJlIHRoZSBhY3R1YWwgcG9zaXRpb24gdGhlIHBvcHBlciBuZWVkcyB0byBoYXZlIHRvIGJlXG4gIC8vIHByb3Blcmx5IHBvc2l0aW9uZWQgbmVhciBpdHMgcmVmZXJlbmNlIGVsZW1lbnRcbiAgLy8gVGhpcyBpcyB0aGUgbW9zdCBiYXNpYyBwbGFjZW1lbnQsIGFuZCB3aWxsIGJlIGFkanVzdGVkIGJ5XG4gIC8vIHRoZSBtb2RpZmllcnMgaW4gdGhlIG5leHQgc3RlcFxuICBzdGF0ZS5tb2RpZmllcnNEYXRhW25hbWVdID0gY29tcHV0ZU9mZnNldHMoe1xuICAgIHJlZmVyZW5jZTogc3RhdGUucmVjdHMucmVmZXJlbmNlLFxuICAgIGVsZW1lbnQ6IHN0YXRlLnJlY3RzLnBvcHBlcixcbiAgICBzdHJhdGVneTogJ2Fic29sdXRlJyxcbiAgICBwbGFjZW1lbnQ6IHN0YXRlLnBsYWNlbWVudFxuICB9KTtcbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ3BvcHBlck9mZnNldHMnLFxuICBlbmFibGVkOiB0cnVlLFxuICBwaGFzZTogJ3JlYWQnLFxuICBmbjogcG9wcGVyT2Zmc2V0cyxcbiAgZGF0YToge31cbn07IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldEFsdEF4aXMoYXhpcykge1xuICByZXR1cm4gYXhpcyA9PT0gJ3gnID8gJ3knIDogJ3gnO1xufSIsICJpbXBvcnQgeyB0b3AsIGxlZnQsIHJpZ2h0LCBib3R0b20sIHN0YXJ0IH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7XG5pbXBvcnQgZ2V0QmFzZVBsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvZ2V0QmFzZVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IGdldE1haW5BeGlzRnJvbVBsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgZ2V0QWx0QXhpcyBmcm9tIFwiLi4vdXRpbHMvZ2V0QWx0QXhpcy5qc1wiO1xuaW1wb3J0IHsgd2l0aGluLCB3aXRoaW5NYXhDbGFtcCB9IGZyb20gXCIuLi91dGlscy93aXRoaW4uanNcIjtcbmltcG9ydCBnZXRMYXlvdXRSZWN0IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0TGF5b3V0UmVjdC5qc1wiO1xuaW1wb3J0IGdldE9mZnNldFBhcmVudCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldE9mZnNldFBhcmVudC5qc1wiO1xuaW1wb3J0IGRldGVjdE92ZXJmbG93IGZyb20gXCIuLi91dGlscy9kZXRlY3RPdmVyZmxvdy5qc1wiO1xuaW1wb3J0IGdldFZhcmlhdGlvbiBmcm9tIFwiLi4vdXRpbHMvZ2V0VmFyaWF0aW9uLmpzXCI7XG5pbXBvcnQgZ2V0RnJlc2hTaWRlT2JqZWN0IGZyb20gXCIuLi91dGlscy9nZXRGcmVzaFNpZGVPYmplY3QuanNcIjtcbmltcG9ydCB7IG1pbiBhcyBtYXRoTWluLCBtYXggYXMgbWF0aE1heCB9IGZyb20gXCIuLi91dGlscy9tYXRoLmpzXCI7XG5cbmZ1bmN0aW9uIHByZXZlbnRPdmVyZmxvdyhfcmVmKSB7XG4gIHZhciBzdGF0ZSA9IF9yZWYuc3RhdGUsXG4gICAgICBvcHRpb25zID0gX3JlZi5vcHRpb25zLFxuICAgICAgbmFtZSA9IF9yZWYubmFtZTtcbiAgdmFyIF9vcHRpb25zJG1haW5BeGlzID0gb3B0aW9ucy5tYWluQXhpcyxcbiAgICAgIGNoZWNrTWFpbkF4aXMgPSBfb3B0aW9ucyRtYWluQXhpcyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJG1haW5BeGlzLFxuICAgICAgX29wdGlvbnMkYWx0QXhpcyA9IG9wdGlvbnMuYWx0QXhpcyxcbiAgICAgIGNoZWNrQWx0QXhpcyA9IF9vcHRpb25zJGFsdEF4aXMgPT09IHZvaWQgMCA/IGZhbHNlIDogX29wdGlvbnMkYWx0QXhpcyxcbiAgICAgIGJvdW5kYXJ5ID0gb3B0aW9ucy5ib3VuZGFyeSxcbiAgICAgIHJvb3RCb3VuZGFyeSA9IG9wdGlvbnMucm9vdEJvdW5kYXJ5LFxuICAgICAgYWx0Qm91bmRhcnkgPSBvcHRpb25zLmFsdEJvdW5kYXJ5LFxuICAgICAgcGFkZGluZyA9IG9wdGlvbnMucGFkZGluZyxcbiAgICAgIF9vcHRpb25zJHRldGhlciA9IG9wdGlvbnMudGV0aGVyLFxuICAgICAgdGV0aGVyID0gX29wdGlvbnMkdGV0aGVyID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkdGV0aGVyLFxuICAgICAgX29wdGlvbnMkdGV0aGVyT2Zmc2V0ID0gb3B0aW9ucy50ZXRoZXJPZmZzZXQsXG4gICAgICB0ZXRoZXJPZmZzZXQgPSBfb3B0aW9ucyR0ZXRoZXJPZmZzZXQgPT09IHZvaWQgMCA/IDAgOiBfb3B0aW9ucyR0ZXRoZXJPZmZzZXQ7XG4gIHZhciBvdmVyZmxvdyA9IGRldGVjdE92ZXJmbG93KHN0YXRlLCB7XG4gICAgYm91bmRhcnk6IGJvdW5kYXJ5LFxuICAgIHJvb3RCb3VuZGFyeTogcm9vdEJvdW5kYXJ5LFxuICAgIHBhZGRpbmc6IHBhZGRpbmcsXG4gICAgYWx0Qm91bmRhcnk6IGFsdEJvdW5kYXJ5XG4gIH0pO1xuICB2YXIgYmFzZVBsYWNlbWVudCA9IGdldEJhc2VQbGFjZW1lbnQoc3RhdGUucGxhY2VtZW50KTtcbiAgdmFyIHZhcmlhdGlvbiA9IGdldFZhcmlhdGlvbihzdGF0ZS5wbGFjZW1lbnQpO1xuICB2YXIgaXNCYXNlUGxhY2VtZW50ID0gIXZhcmlhdGlvbjtcbiAgdmFyIG1haW5BeGlzID0gZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50KGJhc2VQbGFjZW1lbnQpO1xuICB2YXIgYWx0QXhpcyA9IGdldEFsdEF4aXMobWFpbkF4aXMpO1xuICB2YXIgcG9wcGVyT2Zmc2V0cyA9IHN0YXRlLm1vZGlmaWVyc0RhdGEucG9wcGVyT2Zmc2V0cztcbiAgdmFyIHJlZmVyZW5jZVJlY3QgPSBzdGF0ZS5yZWN0cy5yZWZlcmVuY2U7XG4gIHZhciBwb3BwZXJSZWN0ID0gc3RhdGUucmVjdHMucG9wcGVyO1xuICB2YXIgdGV0aGVyT2Zmc2V0VmFsdWUgPSB0eXBlb2YgdGV0aGVyT2Zmc2V0ID09PSAnZnVuY3Rpb24nID8gdGV0aGVyT2Zmc2V0KE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLnJlY3RzLCB7XG4gICAgcGxhY2VtZW50OiBzdGF0ZS5wbGFjZW1lbnRcbiAgfSkpIDogdGV0aGVyT2Zmc2V0O1xuICB2YXIgbm9ybWFsaXplZFRldGhlck9mZnNldFZhbHVlID0gdHlwZW9mIHRldGhlck9mZnNldFZhbHVlID09PSAnbnVtYmVyJyA/IHtcbiAgICBtYWluQXhpczogdGV0aGVyT2Zmc2V0VmFsdWUsXG4gICAgYWx0QXhpczogdGV0aGVyT2Zmc2V0VmFsdWVcbiAgfSA6IE9iamVjdC5hc3NpZ24oe1xuICAgIG1haW5BeGlzOiAwLFxuICAgIGFsdEF4aXM6IDBcbiAgfSwgdGV0aGVyT2Zmc2V0VmFsdWUpO1xuICB2YXIgb2Zmc2V0TW9kaWZpZXJTdGF0ZSA9IHN0YXRlLm1vZGlmaWVyc0RhdGEub2Zmc2V0ID8gc3RhdGUubW9kaWZpZXJzRGF0YS5vZmZzZXRbc3RhdGUucGxhY2VtZW50XSA6IG51bGw7XG4gIHZhciBkYXRhID0ge1xuICAgIHg6IDAsXG4gICAgeTogMFxuICB9O1xuXG4gIGlmICghcG9wcGVyT2Zmc2V0cykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChjaGVja01haW5BeGlzKSB7XG4gICAgdmFyIF9vZmZzZXRNb2RpZmllclN0YXRlJDtcblxuICAgIHZhciBtYWluU2lkZSA9IG1haW5BeGlzID09PSAneScgPyB0b3AgOiBsZWZ0O1xuICAgIHZhciBhbHRTaWRlID0gbWFpbkF4aXMgPT09ICd5JyA/IGJvdHRvbSA6IHJpZ2h0O1xuICAgIHZhciBsZW4gPSBtYWluQXhpcyA9PT0gJ3knID8gJ2hlaWdodCcgOiAnd2lkdGgnO1xuICAgIHZhciBvZmZzZXQgPSBwb3BwZXJPZmZzZXRzW21haW5BeGlzXTtcbiAgICB2YXIgbWluID0gb2Zmc2V0ICsgb3ZlcmZsb3dbbWFpblNpZGVdO1xuICAgIHZhciBtYXggPSBvZmZzZXQgLSBvdmVyZmxvd1thbHRTaWRlXTtcbiAgICB2YXIgYWRkaXRpdmUgPSB0ZXRoZXIgPyAtcG9wcGVyUmVjdFtsZW5dIC8gMiA6IDA7XG4gICAgdmFyIG1pbkxlbiA9IHZhcmlhdGlvbiA9PT0gc3RhcnQgPyByZWZlcmVuY2VSZWN0W2xlbl0gOiBwb3BwZXJSZWN0W2xlbl07XG4gICAgdmFyIG1heExlbiA9IHZhcmlhdGlvbiA9PT0gc3RhcnQgPyAtcG9wcGVyUmVjdFtsZW5dIDogLXJlZmVyZW5jZVJlY3RbbGVuXTsgLy8gV2UgbmVlZCB0byBpbmNsdWRlIHRoZSBhcnJvdyBpbiB0aGUgY2FsY3VsYXRpb24gc28gdGhlIGFycm93IGRvZXNuJ3QgZ29cbiAgICAvLyBvdXRzaWRlIHRoZSByZWZlcmVuY2UgYm91bmRzXG5cbiAgICB2YXIgYXJyb3dFbGVtZW50ID0gc3RhdGUuZWxlbWVudHMuYXJyb3c7XG4gICAgdmFyIGFycm93UmVjdCA9IHRldGhlciAmJiBhcnJvd0VsZW1lbnQgPyBnZXRMYXlvdXRSZWN0KGFycm93RWxlbWVudCkgOiB7XG4gICAgICB3aWR0aDogMCxcbiAgICAgIGhlaWdodDogMFxuICAgIH07XG4gICAgdmFyIGFycm93UGFkZGluZ09iamVjdCA9IHN0YXRlLm1vZGlmaWVyc0RhdGFbJ2Fycm93I3BlcnNpc3RlbnQnXSA/IHN0YXRlLm1vZGlmaWVyc0RhdGFbJ2Fycm93I3BlcnNpc3RlbnQnXS5wYWRkaW5nIDogZ2V0RnJlc2hTaWRlT2JqZWN0KCk7XG4gICAgdmFyIGFycm93UGFkZGluZ01pbiA9IGFycm93UGFkZGluZ09iamVjdFttYWluU2lkZV07XG4gICAgdmFyIGFycm93UGFkZGluZ01heCA9IGFycm93UGFkZGluZ09iamVjdFthbHRTaWRlXTsgLy8gSWYgdGhlIHJlZmVyZW5jZSBsZW5ndGggaXMgc21hbGxlciB0aGFuIHRoZSBhcnJvdyBsZW5ndGgsIHdlIGRvbid0IHdhbnRcbiAgICAvLyB0byBpbmNsdWRlIGl0cyBmdWxsIHNpemUgaW4gdGhlIGNhbGN1bGF0aW9uLiBJZiB0aGUgcmVmZXJlbmNlIGlzIHNtYWxsXG4gICAgLy8gYW5kIG5lYXIgdGhlIGVkZ2Ugb2YgYSBib3VuZGFyeSwgdGhlIHBvcHBlciBjYW4gb3ZlcmZsb3cgZXZlbiBpZiB0aGVcbiAgICAvLyByZWZlcmVuY2UgaXMgbm90IG92ZXJmbG93aW5nIGFzIHdlbGwgKGUuZy4gdmlydHVhbCBlbGVtZW50cyB3aXRoIG5vXG4gICAgLy8gd2lkdGggb3IgaGVpZ2h0KVxuXG4gICAgdmFyIGFycm93TGVuID0gd2l0aGluKDAsIHJlZmVyZW5jZVJlY3RbbGVuXSwgYXJyb3dSZWN0W2xlbl0pO1xuICAgIHZhciBtaW5PZmZzZXQgPSBpc0Jhc2VQbGFjZW1lbnQgPyByZWZlcmVuY2VSZWN0W2xlbl0gLyAyIC0gYWRkaXRpdmUgLSBhcnJvd0xlbiAtIGFycm93UGFkZGluZ01pbiAtIG5vcm1hbGl6ZWRUZXRoZXJPZmZzZXRWYWx1ZS5tYWluQXhpcyA6IG1pbkxlbiAtIGFycm93TGVuIC0gYXJyb3dQYWRkaW5nTWluIC0gbm9ybWFsaXplZFRldGhlck9mZnNldFZhbHVlLm1haW5BeGlzO1xuICAgIHZhciBtYXhPZmZzZXQgPSBpc0Jhc2VQbGFjZW1lbnQgPyAtcmVmZXJlbmNlUmVjdFtsZW5dIC8gMiArIGFkZGl0aXZlICsgYXJyb3dMZW4gKyBhcnJvd1BhZGRpbmdNYXggKyBub3JtYWxpemVkVGV0aGVyT2Zmc2V0VmFsdWUubWFpbkF4aXMgOiBtYXhMZW4gKyBhcnJvd0xlbiArIGFycm93UGFkZGluZ01heCArIG5vcm1hbGl6ZWRUZXRoZXJPZmZzZXRWYWx1ZS5tYWluQXhpcztcbiAgICB2YXIgYXJyb3dPZmZzZXRQYXJlbnQgPSBzdGF0ZS5lbGVtZW50cy5hcnJvdyAmJiBnZXRPZmZzZXRQYXJlbnQoc3RhdGUuZWxlbWVudHMuYXJyb3cpO1xuICAgIHZhciBjbGllbnRPZmZzZXQgPSBhcnJvd09mZnNldFBhcmVudCA/IG1haW5BeGlzID09PSAneScgPyBhcnJvd09mZnNldFBhcmVudC5jbGllbnRUb3AgfHwgMCA6IGFycm93T2Zmc2V0UGFyZW50LmNsaWVudExlZnQgfHwgMCA6IDA7XG4gICAgdmFyIG9mZnNldE1vZGlmaWVyVmFsdWUgPSAoX29mZnNldE1vZGlmaWVyU3RhdGUkID0gb2Zmc2V0TW9kaWZpZXJTdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogb2Zmc2V0TW9kaWZpZXJTdGF0ZVttYWluQXhpc10pICE9IG51bGwgPyBfb2Zmc2V0TW9kaWZpZXJTdGF0ZSQgOiAwO1xuICAgIHZhciB0ZXRoZXJNaW4gPSBvZmZzZXQgKyBtaW5PZmZzZXQgLSBvZmZzZXRNb2RpZmllclZhbHVlIC0gY2xpZW50T2Zmc2V0O1xuICAgIHZhciB0ZXRoZXJNYXggPSBvZmZzZXQgKyBtYXhPZmZzZXQgLSBvZmZzZXRNb2RpZmllclZhbHVlO1xuICAgIHZhciBwcmV2ZW50ZWRPZmZzZXQgPSB3aXRoaW4odGV0aGVyID8gbWF0aE1pbihtaW4sIHRldGhlck1pbikgOiBtaW4sIG9mZnNldCwgdGV0aGVyID8gbWF0aE1heChtYXgsIHRldGhlck1heCkgOiBtYXgpO1xuICAgIHBvcHBlck9mZnNldHNbbWFpbkF4aXNdID0gcHJldmVudGVkT2Zmc2V0O1xuICAgIGRhdGFbbWFpbkF4aXNdID0gcHJldmVudGVkT2Zmc2V0IC0gb2Zmc2V0O1xuICB9XG5cbiAgaWYgKGNoZWNrQWx0QXhpcykge1xuICAgIHZhciBfb2Zmc2V0TW9kaWZpZXJTdGF0ZSQyO1xuXG4gICAgdmFyIF9tYWluU2lkZSA9IG1haW5BeGlzID09PSAneCcgPyB0b3AgOiBsZWZ0O1xuXG4gICAgdmFyIF9hbHRTaWRlID0gbWFpbkF4aXMgPT09ICd4JyA/IGJvdHRvbSA6IHJpZ2h0O1xuXG4gICAgdmFyIF9vZmZzZXQgPSBwb3BwZXJPZmZzZXRzW2FsdEF4aXNdO1xuXG4gICAgdmFyIF9sZW4gPSBhbHRBeGlzID09PSAneScgPyAnaGVpZ2h0JyA6ICd3aWR0aCc7XG5cbiAgICB2YXIgX21pbiA9IF9vZmZzZXQgKyBvdmVyZmxvd1tfbWFpblNpZGVdO1xuXG4gICAgdmFyIF9tYXggPSBfb2Zmc2V0IC0gb3ZlcmZsb3dbX2FsdFNpZGVdO1xuXG4gICAgdmFyIGlzT3JpZ2luU2lkZSA9IFt0b3AsIGxlZnRdLmluZGV4T2YoYmFzZVBsYWNlbWVudCkgIT09IC0xO1xuXG4gICAgdmFyIF9vZmZzZXRNb2RpZmllclZhbHVlID0gKF9vZmZzZXRNb2RpZmllclN0YXRlJDIgPSBvZmZzZXRNb2RpZmllclN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBvZmZzZXRNb2RpZmllclN0YXRlW2FsdEF4aXNdKSAhPSBudWxsID8gX29mZnNldE1vZGlmaWVyU3RhdGUkMiA6IDA7XG5cbiAgICB2YXIgX3RldGhlck1pbiA9IGlzT3JpZ2luU2lkZSA/IF9taW4gOiBfb2Zmc2V0IC0gcmVmZXJlbmNlUmVjdFtfbGVuXSAtIHBvcHBlclJlY3RbX2xlbl0gLSBfb2Zmc2V0TW9kaWZpZXJWYWx1ZSArIG5vcm1hbGl6ZWRUZXRoZXJPZmZzZXRWYWx1ZS5hbHRBeGlzO1xuXG4gICAgdmFyIF90ZXRoZXJNYXggPSBpc09yaWdpblNpZGUgPyBfb2Zmc2V0ICsgcmVmZXJlbmNlUmVjdFtfbGVuXSArIHBvcHBlclJlY3RbX2xlbl0gLSBfb2Zmc2V0TW9kaWZpZXJWYWx1ZSAtIG5vcm1hbGl6ZWRUZXRoZXJPZmZzZXRWYWx1ZS5hbHRBeGlzIDogX21heDtcblxuICAgIHZhciBfcHJldmVudGVkT2Zmc2V0ID0gdGV0aGVyICYmIGlzT3JpZ2luU2lkZSA/IHdpdGhpbk1heENsYW1wKF90ZXRoZXJNaW4sIF9vZmZzZXQsIF90ZXRoZXJNYXgpIDogd2l0aGluKHRldGhlciA/IF90ZXRoZXJNaW4gOiBfbWluLCBfb2Zmc2V0LCB0ZXRoZXIgPyBfdGV0aGVyTWF4IDogX21heCk7XG5cbiAgICBwb3BwZXJPZmZzZXRzW2FsdEF4aXNdID0gX3ByZXZlbnRlZE9mZnNldDtcbiAgICBkYXRhW2FsdEF4aXNdID0gX3ByZXZlbnRlZE9mZnNldCAtIF9vZmZzZXQ7XG4gIH1cblxuICBzdGF0ZS5tb2RpZmllcnNEYXRhW25hbWVdID0gZGF0YTtcbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ3ByZXZlbnRPdmVyZmxvdycsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAnbWFpbicsXG4gIGZuOiBwcmV2ZW50T3ZlcmZsb3csXG4gIHJlcXVpcmVzSWZFeGlzdHM6IFsnb2Zmc2V0J11cbn07IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldEhUTUxFbGVtZW50U2Nyb2xsKGVsZW1lbnQpIHtcbiAgcmV0dXJuIHtcbiAgICBzY3JvbGxMZWZ0OiBlbGVtZW50LnNjcm9sbExlZnQsXG4gICAgc2Nyb2xsVG9wOiBlbGVtZW50LnNjcm9sbFRvcFxuICB9O1xufSIsICJpbXBvcnQgZ2V0V2luZG93U2Nyb2xsIGZyb20gXCIuL2dldFdpbmRvd1Njcm9sbC5qc1wiO1xuaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi9nZXRXaW5kb3cuanNcIjtcbmltcG9ydCB7IGlzSFRNTEVsZW1lbnQgfSBmcm9tIFwiLi9pbnN0YW5jZU9mLmpzXCI7XG5pbXBvcnQgZ2V0SFRNTEVsZW1lbnRTY3JvbGwgZnJvbSBcIi4vZ2V0SFRNTEVsZW1lbnRTY3JvbGwuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldE5vZGVTY3JvbGwobm9kZSkge1xuICBpZiAobm9kZSA9PT0gZ2V0V2luZG93KG5vZGUpIHx8ICFpc0hUTUxFbGVtZW50KG5vZGUpKSB7XG4gICAgcmV0dXJuIGdldFdpbmRvd1Njcm9sbChub2RlKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZ2V0SFRNTEVsZW1lbnRTY3JvbGwobm9kZSk7XG4gIH1cbn0iLCAiaW1wb3J0IGdldEJvdW5kaW5nQ2xpZW50UmVjdCBmcm9tIFwiLi9nZXRCb3VuZGluZ0NsaWVudFJlY3QuanNcIjtcbmltcG9ydCBnZXROb2RlU2Nyb2xsIGZyb20gXCIuL2dldE5vZGVTY3JvbGwuanNcIjtcbmltcG9ydCBnZXROb2RlTmFtZSBmcm9tIFwiLi9nZXROb2RlTmFtZS5qc1wiO1xuaW1wb3J0IHsgaXNIVE1MRWxlbWVudCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmltcG9ydCBnZXRXaW5kb3dTY3JvbGxCYXJYIGZyb20gXCIuL2dldFdpbmRvd1Njcm9sbEJhclguanNcIjtcbmltcG9ydCBnZXREb2N1bWVudEVsZW1lbnQgZnJvbSBcIi4vZ2V0RG9jdW1lbnRFbGVtZW50LmpzXCI7XG5pbXBvcnQgaXNTY3JvbGxQYXJlbnQgZnJvbSBcIi4vaXNTY3JvbGxQYXJlbnQuanNcIjtcbmltcG9ydCB7IHJvdW5kIH0gZnJvbSBcIi4uL3V0aWxzL21hdGguanNcIjtcblxuZnVuY3Rpb24gaXNFbGVtZW50U2NhbGVkKGVsZW1lbnQpIHtcbiAgdmFyIHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICB2YXIgc2NhbGVYID0gcm91bmQocmVjdC53aWR0aCkgLyBlbGVtZW50Lm9mZnNldFdpZHRoIHx8IDE7XG4gIHZhciBzY2FsZVkgPSByb3VuZChyZWN0LmhlaWdodCkgLyBlbGVtZW50Lm9mZnNldEhlaWdodCB8fCAxO1xuICByZXR1cm4gc2NhbGVYICE9PSAxIHx8IHNjYWxlWSAhPT0gMTtcbn0gLy8gUmV0dXJucyB0aGUgY29tcG9zaXRlIHJlY3Qgb2YgYW4gZWxlbWVudCByZWxhdGl2ZSB0byBpdHMgb2Zmc2V0UGFyZW50LlxuLy8gQ29tcG9zaXRlIG1lYW5zIGl0IHRha2VzIGludG8gYWNjb3VudCB0cmFuc2Zvcm1zIGFzIHdlbGwgYXMgbGF5b3V0LlxuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldENvbXBvc2l0ZVJlY3QoZWxlbWVudE9yVmlydHVhbEVsZW1lbnQsIG9mZnNldFBhcmVudCwgaXNGaXhlZCkge1xuICBpZiAoaXNGaXhlZCA9PT0gdm9pZCAwKSB7XG4gICAgaXNGaXhlZCA9IGZhbHNlO1xuICB9XG5cbiAgdmFyIGlzT2Zmc2V0UGFyZW50QW5FbGVtZW50ID0gaXNIVE1MRWxlbWVudChvZmZzZXRQYXJlbnQpO1xuICB2YXIgb2Zmc2V0UGFyZW50SXNTY2FsZWQgPSBpc0hUTUxFbGVtZW50KG9mZnNldFBhcmVudCkgJiYgaXNFbGVtZW50U2NhbGVkKG9mZnNldFBhcmVudCk7XG4gIHZhciBkb2N1bWVudEVsZW1lbnQgPSBnZXREb2N1bWVudEVsZW1lbnQob2Zmc2V0UGFyZW50KTtcbiAgdmFyIHJlY3QgPSBnZXRCb3VuZGluZ0NsaWVudFJlY3QoZWxlbWVudE9yVmlydHVhbEVsZW1lbnQsIG9mZnNldFBhcmVudElzU2NhbGVkLCBpc0ZpeGVkKTtcbiAgdmFyIHNjcm9sbCA9IHtcbiAgICBzY3JvbGxMZWZ0OiAwLFxuICAgIHNjcm9sbFRvcDogMFxuICB9O1xuICB2YXIgb2Zmc2V0cyA9IHtcbiAgICB4OiAwLFxuICAgIHk6IDBcbiAgfTtcblxuICBpZiAoaXNPZmZzZXRQYXJlbnRBbkVsZW1lbnQgfHwgIWlzT2Zmc2V0UGFyZW50QW5FbGVtZW50ICYmICFpc0ZpeGVkKSB7XG4gICAgaWYgKGdldE5vZGVOYW1lKG9mZnNldFBhcmVudCkgIT09ICdib2R5JyB8fCAvLyBodHRwczovL2dpdGh1Yi5jb20vcG9wcGVyanMvcG9wcGVyLWNvcmUvaXNzdWVzLzEwNzhcbiAgICBpc1Njcm9sbFBhcmVudChkb2N1bWVudEVsZW1lbnQpKSB7XG4gICAgICBzY3JvbGwgPSBnZXROb2RlU2Nyb2xsKG9mZnNldFBhcmVudCk7XG4gICAgfVxuXG4gICAgaWYgKGlzSFRNTEVsZW1lbnQob2Zmc2V0UGFyZW50KSkge1xuICAgICAgb2Zmc2V0cyA9IGdldEJvdW5kaW5nQ2xpZW50UmVjdChvZmZzZXRQYXJlbnQsIHRydWUpO1xuICAgICAgb2Zmc2V0cy54ICs9IG9mZnNldFBhcmVudC5jbGllbnRMZWZ0O1xuICAgICAgb2Zmc2V0cy55ICs9IG9mZnNldFBhcmVudC5jbGllbnRUb3A7XG4gICAgfSBlbHNlIGlmIChkb2N1bWVudEVsZW1lbnQpIHtcbiAgICAgIG9mZnNldHMueCA9IGdldFdpbmRvd1Njcm9sbEJhclgoZG9jdW1lbnRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHg6IHJlY3QubGVmdCArIHNjcm9sbC5zY3JvbGxMZWZ0IC0gb2Zmc2V0cy54LFxuICAgIHk6IHJlY3QudG9wICsgc2Nyb2xsLnNjcm9sbFRvcCAtIG9mZnNldHMueSxcbiAgICB3aWR0aDogcmVjdC53aWR0aCxcbiAgICBoZWlnaHQ6IHJlY3QuaGVpZ2h0XG4gIH07XG59IiwgImltcG9ydCB7IG1vZGlmaWVyUGhhc2VzIH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7IC8vIHNvdXJjZTogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNDk4NzUyNTVcblxuZnVuY3Rpb24gb3JkZXIobW9kaWZpZXJzKSB7XG4gIHZhciBtYXAgPSBuZXcgTWFwKCk7XG4gIHZhciB2aXNpdGVkID0gbmV3IFNldCgpO1xuICB2YXIgcmVzdWx0ID0gW107XG4gIG1vZGlmaWVycy5mb3JFYWNoKGZ1bmN0aW9uIChtb2RpZmllcikge1xuICAgIG1hcC5zZXQobW9kaWZpZXIubmFtZSwgbW9kaWZpZXIpO1xuICB9KTsgLy8gT24gdmlzaXRpbmcgb2JqZWN0LCBjaGVjayBmb3IgaXRzIGRlcGVuZGVuY2llcyBhbmQgdmlzaXQgdGhlbSByZWN1cnNpdmVseVxuXG4gIGZ1bmN0aW9uIHNvcnQobW9kaWZpZXIpIHtcbiAgICB2aXNpdGVkLmFkZChtb2RpZmllci5uYW1lKTtcbiAgICB2YXIgcmVxdWlyZXMgPSBbXS5jb25jYXQobW9kaWZpZXIucmVxdWlyZXMgfHwgW10sIG1vZGlmaWVyLnJlcXVpcmVzSWZFeGlzdHMgfHwgW10pO1xuICAgIHJlcXVpcmVzLmZvckVhY2goZnVuY3Rpb24gKGRlcCkge1xuICAgICAgaWYgKCF2aXNpdGVkLmhhcyhkZXApKSB7XG4gICAgICAgIHZhciBkZXBNb2RpZmllciA9IG1hcC5nZXQoZGVwKTtcblxuICAgICAgICBpZiAoZGVwTW9kaWZpZXIpIHtcbiAgICAgICAgICBzb3J0KGRlcE1vZGlmaWVyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHJlc3VsdC5wdXNoKG1vZGlmaWVyKTtcbiAgfVxuXG4gIG1vZGlmaWVycy5mb3JFYWNoKGZ1bmN0aW9uIChtb2RpZmllcikge1xuICAgIGlmICghdmlzaXRlZC5oYXMobW9kaWZpZXIubmFtZSkpIHtcbiAgICAgIC8vIGNoZWNrIGZvciB2aXNpdGVkIG9iamVjdFxuICAgICAgc29ydChtb2RpZmllcik7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gb3JkZXJNb2RpZmllcnMobW9kaWZpZXJzKSB7XG4gIC8vIG9yZGVyIGJhc2VkIG9uIGRlcGVuZGVuY2llc1xuICB2YXIgb3JkZXJlZE1vZGlmaWVycyA9IG9yZGVyKG1vZGlmaWVycyk7IC8vIG9yZGVyIGJhc2VkIG9uIHBoYXNlXG5cbiAgcmV0dXJuIG1vZGlmaWVyUGhhc2VzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwaGFzZSkge1xuICAgIHJldHVybiBhY2MuY29uY2F0KG9yZGVyZWRNb2RpZmllcnMuZmlsdGVyKGZ1bmN0aW9uIChtb2RpZmllcikge1xuICAgICAgcmV0dXJuIG1vZGlmaWVyLnBoYXNlID09PSBwaGFzZTtcbiAgICB9KSk7XG4gIH0sIFtdKTtcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZGVib3VuY2UoZm4pIHtcbiAgdmFyIHBlbmRpbmc7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFwZW5kaW5nKSB7XG4gICAgICBwZW5kaW5nID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcGVuZGluZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICByZXNvbHZlKGZuKCkpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBwZW5kaW5nO1xuICB9O1xufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtZXJnZUJ5TmFtZShtb2RpZmllcnMpIHtcbiAgdmFyIG1lcmdlZCA9IG1vZGlmaWVycy5yZWR1Y2UoZnVuY3Rpb24gKG1lcmdlZCwgY3VycmVudCkge1xuICAgIHZhciBleGlzdGluZyA9IG1lcmdlZFtjdXJyZW50Lm5hbWVdO1xuICAgIG1lcmdlZFtjdXJyZW50Lm5hbWVdID0gZXhpc3RpbmcgPyBPYmplY3QuYXNzaWduKHt9LCBleGlzdGluZywgY3VycmVudCwge1xuICAgICAgb3B0aW9uczogT2JqZWN0LmFzc2lnbih7fSwgZXhpc3Rpbmcub3B0aW9ucywgY3VycmVudC5vcHRpb25zKSxcbiAgICAgIGRhdGE6IE9iamVjdC5hc3NpZ24oe30sIGV4aXN0aW5nLmRhdGEsIGN1cnJlbnQuZGF0YSlcbiAgICB9KSA6IGN1cnJlbnQ7XG4gICAgcmV0dXJuIG1lcmdlZDtcbiAgfSwge30pOyAvLyBJRTExIGRvZXMgbm90IHN1cHBvcnQgT2JqZWN0LnZhbHVlc1xuXG4gIHJldHVybiBPYmplY3Qua2V5cyhtZXJnZWQpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIG1lcmdlZFtrZXldO1xuICB9KTtcbn0iLCAiaW1wb3J0IGdldENvbXBvc2l0ZVJlY3QgZnJvbSBcIi4vZG9tLXV0aWxzL2dldENvbXBvc2l0ZVJlY3QuanNcIjtcbmltcG9ydCBnZXRMYXlvdXRSZWN0IGZyb20gXCIuL2RvbS11dGlscy9nZXRMYXlvdXRSZWN0LmpzXCI7XG5pbXBvcnQgbGlzdFNjcm9sbFBhcmVudHMgZnJvbSBcIi4vZG9tLXV0aWxzL2xpc3RTY3JvbGxQYXJlbnRzLmpzXCI7XG5pbXBvcnQgZ2V0T2Zmc2V0UGFyZW50IGZyb20gXCIuL2RvbS11dGlscy9nZXRPZmZzZXRQYXJlbnQuanNcIjtcbmltcG9ydCBvcmRlck1vZGlmaWVycyBmcm9tIFwiLi91dGlscy9vcmRlck1vZGlmaWVycy5qc1wiO1xuaW1wb3J0IGRlYm91bmNlIGZyb20gXCIuL3V0aWxzL2RlYm91bmNlLmpzXCI7XG5pbXBvcnQgbWVyZ2VCeU5hbWUgZnJvbSBcIi4vdXRpbHMvbWVyZ2VCeU5hbWUuanNcIjtcbmltcG9ydCBkZXRlY3RPdmVyZmxvdyBmcm9tIFwiLi91dGlscy9kZXRlY3RPdmVyZmxvdy5qc1wiO1xuaW1wb3J0IHsgaXNFbGVtZW50IH0gZnJvbSBcIi4vZG9tLXV0aWxzL2luc3RhbmNlT2YuanNcIjtcbnZhciBERUZBVUxUX09QVElPTlMgPSB7XG4gIHBsYWNlbWVudDogJ2JvdHRvbScsXG4gIG1vZGlmaWVyczogW10sXG4gIHN0cmF0ZWd5OiAnYWJzb2x1dGUnXG59O1xuXG5mdW5jdGlvbiBhcmVWYWxpZEVsZW1lbnRzKCkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuICFhcmdzLnNvbWUoZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gIShlbGVtZW50ICYmIHR5cGVvZiBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCA9PT0gJ2Z1bmN0aW9uJyk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcG9wcGVyR2VuZXJhdG9yKGdlbmVyYXRvck9wdGlvbnMpIHtcbiAgaWYgKGdlbmVyYXRvck9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgIGdlbmVyYXRvck9wdGlvbnMgPSB7fTtcbiAgfVxuXG4gIHZhciBfZ2VuZXJhdG9yT3B0aW9ucyA9IGdlbmVyYXRvck9wdGlvbnMsXG4gICAgICBfZ2VuZXJhdG9yT3B0aW9ucyRkZWYgPSBfZ2VuZXJhdG9yT3B0aW9ucy5kZWZhdWx0TW9kaWZpZXJzLFxuICAgICAgZGVmYXVsdE1vZGlmaWVycyA9IF9nZW5lcmF0b3JPcHRpb25zJGRlZiA9PT0gdm9pZCAwID8gW10gOiBfZ2VuZXJhdG9yT3B0aW9ucyRkZWYsXG4gICAgICBfZ2VuZXJhdG9yT3B0aW9ucyRkZWYyID0gX2dlbmVyYXRvck9wdGlvbnMuZGVmYXVsdE9wdGlvbnMsXG4gICAgICBkZWZhdWx0T3B0aW9ucyA9IF9nZW5lcmF0b3JPcHRpb25zJGRlZjIgPT09IHZvaWQgMCA/IERFRkFVTFRfT1BUSU9OUyA6IF9nZW5lcmF0b3JPcHRpb25zJGRlZjI7XG4gIHJldHVybiBmdW5jdGlvbiBjcmVhdGVQb3BwZXIocmVmZXJlbmNlLCBwb3BwZXIsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0gZGVmYXVsdE9wdGlvbnM7XG4gICAgfVxuXG4gICAgdmFyIHN0YXRlID0ge1xuICAgICAgcGxhY2VtZW50OiAnYm90dG9tJyxcbiAgICAgIG9yZGVyZWRNb2RpZmllcnM6IFtdLFxuICAgICAgb3B0aW9uczogT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9PUFRJT05TLCBkZWZhdWx0T3B0aW9ucyksXG4gICAgICBtb2RpZmllcnNEYXRhOiB7fSxcbiAgICAgIGVsZW1lbnRzOiB7XG4gICAgICAgIHJlZmVyZW5jZTogcmVmZXJlbmNlLFxuICAgICAgICBwb3BwZXI6IHBvcHBlclxuICAgICAgfSxcbiAgICAgIGF0dHJpYnV0ZXM6IHt9LFxuICAgICAgc3R5bGVzOiB7fVxuICAgIH07XG4gICAgdmFyIGVmZmVjdENsZWFudXBGbnMgPSBbXTtcbiAgICB2YXIgaXNEZXN0cm95ZWQgPSBmYWxzZTtcbiAgICB2YXIgaW5zdGFuY2UgPSB7XG4gICAgICBzdGF0ZTogc3RhdGUsXG4gICAgICBzZXRPcHRpb25zOiBmdW5jdGlvbiBzZXRPcHRpb25zKHNldE9wdGlvbnNBY3Rpb24pIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB0eXBlb2Ygc2V0T3B0aW9uc0FjdGlvbiA9PT0gJ2Z1bmN0aW9uJyA/IHNldE9wdGlvbnNBY3Rpb24oc3RhdGUub3B0aW9ucykgOiBzZXRPcHRpb25zQWN0aW9uO1xuICAgICAgICBjbGVhbnVwTW9kaWZpZXJFZmZlY3RzKCk7XG4gICAgICAgIHN0YXRlLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucywgc3RhdGUub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICAgIHN0YXRlLnNjcm9sbFBhcmVudHMgPSB7XG4gICAgICAgICAgcmVmZXJlbmNlOiBpc0VsZW1lbnQocmVmZXJlbmNlKSA/IGxpc3RTY3JvbGxQYXJlbnRzKHJlZmVyZW5jZSkgOiByZWZlcmVuY2UuY29udGV4dEVsZW1lbnQgPyBsaXN0U2Nyb2xsUGFyZW50cyhyZWZlcmVuY2UuY29udGV4dEVsZW1lbnQpIDogW10sXG4gICAgICAgICAgcG9wcGVyOiBsaXN0U2Nyb2xsUGFyZW50cyhwb3BwZXIpXG4gICAgICAgIH07IC8vIE9yZGVycyB0aGUgbW9kaWZpZXJzIGJhc2VkIG9uIHRoZWlyIGRlcGVuZGVuY2llcyBhbmQgYHBoYXNlYFxuICAgICAgICAvLyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgdmFyIG9yZGVyZWRNb2RpZmllcnMgPSBvcmRlck1vZGlmaWVycyhtZXJnZUJ5TmFtZShbXS5jb25jYXQoZGVmYXVsdE1vZGlmaWVycywgc3RhdGUub3B0aW9ucy5tb2RpZmllcnMpKSk7IC8vIFN0cmlwIG91dCBkaXNhYmxlZCBtb2RpZmllcnNcblxuICAgICAgICBzdGF0ZS5vcmRlcmVkTW9kaWZpZXJzID0gb3JkZXJlZE1vZGlmaWVycy5maWx0ZXIoZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgICByZXR1cm4gbS5lbmFibGVkO1xuICAgICAgICB9KTtcbiAgICAgICAgcnVuTW9kaWZpZXJFZmZlY3RzKCk7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZS51cGRhdGUoKTtcbiAgICAgIH0sXG4gICAgICAvLyBTeW5jIHVwZGF0ZSBcdTIwMTMgaXQgd2lsbCBhbHdheXMgYmUgZXhlY3V0ZWQsIGV2ZW4gaWYgbm90IG5lY2Vzc2FyeS4gVGhpc1xuICAgICAgLy8gaXMgdXNlZnVsIGZvciBsb3cgZnJlcXVlbmN5IHVwZGF0ZXMgd2hlcmUgc3luYyBiZWhhdmlvciBzaW1wbGlmaWVzIHRoZVxuICAgICAgLy8gbG9naWMuXG4gICAgICAvLyBGb3IgaGlnaCBmcmVxdWVuY3kgdXBkYXRlcyAoZS5nLiBgcmVzaXplYCBhbmQgYHNjcm9sbGAgZXZlbnRzKSwgYWx3YXlzXG4gICAgICAvLyBwcmVmZXIgdGhlIGFzeW5jIFBvcHBlciN1cGRhdGUgbWV0aG9kXG4gICAgICBmb3JjZVVwZGF0ZTogZnVuY3Rpb24gZm9yY2VVcGRhdGUoKSB7XG4gICAgICAgIGlmIChpc0Rlc3Ryb3llZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBfc3RhdGUkZWxlbWVudHMgPSBzdGF0ZS5lbGVtZW50cyxcbiAgICAgICAgICAgIHJlZmVyZW5jZSA9IF9zdGF0ZSRlbGVtZW50cy5yZWZlcmVuY2UsXG4gICAgICAgICAgICBwb3BwZXIgPSBfc3RhdGUkZWxlbWVudHMucG9wcGVyOyAvLyBEb24ndCBwcm9jZWVkIGlmIGByZWZlcmVuY2VgIG9yIGBwb3BwZXJgIGFyZSBub3QgdmFsaWQgZWxlbWVudHNcbiAgICAgICAgLy8gYW55bW9yZVxuXG4gICAgICAgIGlmICghYXJlVmFsaWRFbGVtZW50cyhyZWZlcmVuY2UsIHBvcHBlcikpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gLy8gU3RvcmUgdGhlIHJlZmVyZW5jZSBhbmQgcG9wcGVyIHJlY3RzIHRvIGJlIHJlYWQgYnkgbW9kaWZpZXJzXG5cblxuICAgICAgICBzdGF0ZS5yZWN0cyA9IHtcbiAgICAgICAgICByZWZlcmVuY2U6IGdldENvbXBvc2l0ZVJlY3QocmVmZXJlbmNlLCBnZXRPZmZzZXRQYXJlbnQocG9wcGVyKSwgc3RhdGUub3B0aW9ucy5zdHJhdGVneSA9PT0gJ2ZpeGVkJyksXG4gICAgICAgICAgcG9wcGVyOiBnZXRMYXlvdXRSZWN0KHBvcHBlcilcbiAgICAgICAgfTsgLy8gTW9kaWZpZXJzIGhhdmUgdGhlIGFiaWxpdHkgdG8gcmVzZXQgdGhlIGN1cnJlbnQgdXBkYXRlIGN5Y2xlLiBUaGVcbiAgICAgICAgLy8gbW9zdCBjb21tb24gdXNlIGNhc2UgZm9yIHRoaXMgaXMgdGhlIGBmbGlwYCBtb2RpZmllciBjaGFuZ2luZyB0aGVcbiAgICAgICAgLy8gcGxhY2VtZW50LCB3aGljaCB0aGVuIG5lZWRzIHRvIHJlLXJ1biBhbGwgdGhlIG1vZGlmaWVycywgYmVjYXVzZSB0aGVcbiAgICAgICAgLy8gbG9naWMgd2FzIHByZXZpb3VzbHkgcmFuIGZvciB0aGUgcHJldmlvdXMgcGxhY2VtZW50IGFuZCBpcyB0aGVyZWZvcmVcbiAgICAgICAgLy8gc3RhbGUvaW5jb3JyZWN0XG5cbiAgICAgICAgc3RhdGUucmVzZXQgPSBmYWxzZTtcbiAgICAgICAgc3RhdGUucGxhY2VtZW50ID0gc3RhdGUub3B0aW9ucy5wbGFjZW1lbnQ7IC8vIE9uIGVhY2ggdXBkYXRlIGN5Y2xlLCB0aGUgYG1vZGlmaWVyc0RhdGFgIHByb3BlcnR5IGZvciBlYWNoIG1vZGlmaWVyXG4gICAgICAgIC8vIGlzIGZpbGxlZCB3aXRoIHRoZSBpbml0aWFsIGRhdGEgc3BlY2lmaWVkIGJ5IHRoZSBtb2RpZmllci4gVGhpcyBtZWFuc1xuICAgICAgICAvLyBpdCBkb2Vzbid0IHBlcnNpc3QgYW5kIGlzIGZyZXNoIG9uIGVhY2ggdXBkYXRlLlxuICAgICAgICAvLyBUbyBlbnN1cmUgcGVyc2lzdGVudCBkYXRhLCB1c2UgYCR7bmFtZX0jcGVyc2lzdGVudGBcblxuICAgICAgICBzdGF0ZS5vcmRlcmVkTW9kaWZpZXJzLmZvckVhY2goZnVuY3Rpb24gKG1vZGlmaWVyKSB7XG4gICAgICAgICAgcmV0dXJuIHN0YXRlLm1vZGlmaWVyc0RhdGFbbW9kaWZpZXIubmFtZV0gPSBPYmplY3QuYXNzaWduKHt9LCBtb2RpZmllci5kYXRhKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHN0YXRlLm9yZGVyZWRNb2RpZmllcnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgaWYgKHN0YXRlLnJlc2V0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICBzdGF0ZS5yZXNldCA9IGZhbHNlO1xuICAgICAgICAgICAgaW5kZXggPSAtMTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBfc3RhdGUkb3JkZXJlZE1vZGlmaWUgPSBzdGF0ZS5vcmRlcmVkTW9kaWZpZXJzW2luZGV4XSxcbiAgICAgICAgICAgICAgZm4gPSBfc3RhdGUkb3JkZXJlZE1vZGlmaWUuZm4sXG4gICAgICAgICAgICAgIF9zdGF0ZSRvcmRlcmVkTW9kaWZpZTIgPSBfc3RhdGUkb3JkZXJlZE1vZGlmaWUub3B0aW9ucyxcbiAgICAgICAgICAgICAgX29wdGlvbnMgPSBfc3RhdGUkb3JkZXJlZE1vZGlmaWUyID09PSB2b2lkIDAgPyB7fSA6IF9zdGF0ZSRvcmRlcmVkTW9kaWZpZTIsXG4gICAgICAgICAgICAgIG5hbWUgPSBfc3RhdGUkb3JkZXJlZE1vZGlmaWUubmFtZTtcblxuICAgICAgICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHN0YXRlID0gZm4oe1xuICAgICAgICAgICAgICBzdGF0ZTogc3RhdGUsXG4gICAgICAgICAgICAgIG9wdGlvbnM6IF9vcHRpb25zLFxuICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICBpbnN0YW5jZTogaW5zdGFuY2VcbiAgICAgICAgICAgIH0pIHx8IHN0YXRlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8vIEFzeW5jIGFuZCBvcHRpbWlzdGljYWxseSBvcHRpbWl6ZWQgdXBkYXRlIFx1MjAxMyBpdCB3aWxsIG5vdCBiZSBleGVjdXRlZCBpZlxuICAgICAgLy8gbm90IG5lY2Vzc2FyeSAoZGVib3VuY2VkIHRvIHJ1biBhdCBtb3N0IG9uY2UtcGVyLXRpY2spXG4gICAgICB1cGRhdGU6IGRlYm91bmNlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgaW5zdGFuY2UuZm9yY2VVcGRhdGUoKTtcbiAgICAgICAgICByZXNvbHZlKHN0YXRlKTtcbiAgICAgICAgfSk7XG4gICAgICB9KSxcbiAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIGNsZWFudXBNb2RpZmllckVmZmVjdHMoKTtcbiAgICAgICAgaXNEZXN0cm95ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoIWFyZVZhbGlkRWxlbWVudHMocmVmZXJlbmNlLCBwb3BwZXIpKSB7XG4gICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgfVxuXG4gICAgaW5zdGFuY2Uuc2V0T3B0aW9ucyhvcHRpb25zKS50aGVuKGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgaWYgKCFpc0Rlc3Ryb3llZCAmJiBvcHRpb25zLm9uRmlyc3RVcGRhdGUpIHtcbiAgICAgICAgb3B0aW9ucy5vbkZpcnN0VXBkYXRlKHN0YXRlKTtcbiAgICAgIH1cbiAgICB9KTsgLy8gTW9kaWZpZXJzIGhhdmUgdGhlIGFiaWxpdHkgdG8gZXhlY3V0ZSBhcmJpdHJhcnkgY29kZSBiZWZvcmUgdGhlIGZpcnN0XG4gICAgLy8gdXBkYXRlIGN5Y2xlIHJ1bnMuIFRoZXkgd2lsbCBiZSBleGVjdXRlZCBpbiB0aGUgc2FtZSBvcmRlciBhcyB0aGUgdXBkYXRlXG4gICAgLy8gY3ljbGUuIFRoaXMgaXMgdXNlZnVsIHdoZW4gYSBtb2RpZmllciBhZGRzIHNvbWUgcGVyc2lzdGVudCBkYXRhIHRoYXRcbiAgICAvLyBvdGhlciBtb2RpZmllcnMgbmVlZCB0byB1c2UsIGJ1dCB0aGUgbW9kaWZpZXIgaXMgcnVuIGFmdGVyIHRoZSBkZXBlbmRlbnRcbiAgICAvLyBvbmUuXG5cbiAgICBmdW5jdGlvbiBydW5Nb2RpZmllckVmZmVjdHMoKSB7XG4gICAgICBzdGF0ZS5vcmRlcmVkTW9kaWZpZXJzLmZvckVhY2goZnVuY3Rpb24gKF9yZWYpIHtcbiAgICAgICAgdmFyIG5hbWUgPSBfcmVmLm5hbWUsXG4gICAgICAgICAgICBfcmVmJG9wdGlvbnMgPSBfcmVmLm9wdGlvbnMsXG4gICAgICAgICAgICBvcHRpb25zID0gX3JlZiRvcHRpb25zID09PSB2b2lkIDAgPyB7fSA6IF9yZWYkb3B0aW9ucyxcbiAgICAgICAgICAgIGVmZmVjdCA9IF9yZWYuZWZmZWN0O1xuXG4gICAgICAgIGlmICh0eXBlb2YgZWZmZWN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdmFyIGNsZWFudXBGbiA9IGVmZmVjdCh7XG4gICAgICAgICAgICBzdGF0ZTogc3RhdGUsXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgaW5zdGFuY2U6IGluc3RhbmNlLFxuICAgICAgICAgICAgb3B0aW9uczogb3B0aW9uc1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgdmFyIG5vb3BGbiA9IGZ1bmN0aW9uIG5vb3BGbigpIHt9O1xuXG4gICAgICAgICAgZWZmZWN0Q2xlYW51cEZucy5wdXNoKGNsZWFudXBGbiB8fCBub29wRm4pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhbnVwTW9kaWZpZXJFZmZlY3RzKCkge1xuICAgICAgZWZmZWN0Q2xlYW51cEZucy5mb3JFYWNoKGZ1bmN0aW9uIChmbikge1xuICAgICAgICByZXR1cm4gZm4oKTtcbiAgICAgIH0pO1xuICAgICAgZWZmZWN0Q2xlYW51cEZucyA9IFtdO1xuICAgIH1cblxuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfTtcbn1cbmV4cG9ydCB2YXIgY3JlYXRlUG9wcGVyID0gLyojX19QVVJFX18qL3BvcHBlckdlbmVyYXRvcigpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbmV4cG9ydCB7IGRldGVjdE92ZXJmbG93IH07IiwgImltcG9ydCB7IHBvcHBlckdlbmVyYXRvciwgZGV0ZWN0T3ZlcmZsb3cgfSBmcm9tIFwiLi9jcmVhdGVQb3BwZXIuanNcIjtcbmltcG9ydCBldmVudExpc3RlbmVycyBmcm9tIFwiLi9tb2RpZmllcnMvZXZlbnRMaXN0ZW5lcnMuanNcIjtcbmltcG9ydCBwb3BwZXJPZmZzZXRzIGZyb20gXCIuL21vZGlmaWVycy9wb3BwZXJPZmZzZXRzLmpzXCI7XG5pbXBvcnQgY29tcHV0ZVN0eWxlcyBmcm9tIFwiLi9tb2RpZmllcnMvY29tcHV0ZVN0eWxlcy5qc1wiO1xuaW1wb3J0IGFwcGx5U3R5bGVzIGZyb20gXCIuL21vZGlmaWVycy9hcHBseVN0eWxlcy5qc1wiO1xuaW1wb3J0IG9mZnNldCBmcm9tIFwiLi9tb2RpZmllcnMvb2Zmc2V0LmpzXCI7XG5pbXBvcnQgZmxpcCBmcm9tIFwiLi9tb2RpZmllcnMvZmxpcC5qc1wiO1xuaW1wb3J0IHByZXZlbnRPdmVyZmxvdyBmcm9tIFwiLi9tb2RpZmllcnMvcHJldmVudE92ZXJmbG93LmpzXCI7XG5pbXBvcnQgYXJyb3cgZnJvbSBcIi4vbW9kaWZpZXJzL2Fycm93LmpzXCI7XG5pbXBvcnQgaGlkZSBmcm9tIFwiLi9tb2RpZmllcnMvaGlkZS5qc1wiO1xudmFyIGRlZmF1bHRNb2RpZmllcnMgPSBbZXZlbnRMaXN0ZW5lcnMsIHBvcHBlck9mZnNldHMsIGNvbXB1dGVTdHlsZXMsIGFwcGx5U3R5bGVzLCBvZmZzZXQsIGZsaXAsIHByZXZlbnRPdmVyZmxvdywgYXJyb3csIGhpZGVdO1xudmFyIGNyZWF0ZVBvcHBlciA9IC8qI19fUFVSRV9fKi9wb3BwZXJHZW5lcmF0b3Ioe1xuICBkZWZhdWx0TW9kaWZpZXJzOiBkZWZhdWx0TW9kaWZpZXJzXG59KTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5leHBvcnQgeyBjcmVhdGVQb3BwZXIsIHBvcHBlckdlbmVyYXRvciwgZGVmYXVsdE1vZGlmaWVycywgZGV0ZWN0T3ZlcmZsb3cgfTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5leHBvcnQgeyBjcmVhdGVQb3BwZXIgYXMgY3JlYXRlUG9wcGVyTGl0ZSB9IGZyb20gXCIuL3BvcHBlci1saXRlLmpzXCI7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuZXhwb3J0ICogZnJvbSBcIi4vbW9kaWZpZXJzL2luZGV4LmpzXCI7Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0EsSUFBQUEsTUFBb0I7OztBQ0RwQixJQUFJLFdBQThCLFdBQVU7QUFBQyxVQUFPLFdBQVMsT0FBTyxVQUFRLFNBQVMsR0FBRTtBQUFDLGFBQVEsR0FBRSxJQUFFLEdBQUUsSUFBRSxVQUFVLFFBQU8sSUFBRSxHQUFFLElBQUksVUFBUSxLQUFLLElBQUUsVUFBVSxDQUFDLEVBQUUsUUFBTyxVQUFVLGVBQWUsS0FBSyxHQUFFLENBQUMsTUFBSSxFQUFFLENBQUMsSUFBRSxFQUFFLENBQUM7QUFBRyxXQUFPO0FBQUEsRUFBQyxHQUFHLE1BQU0sTUFBSyxTQUFTO0FBQUM7QUFBcFAsSUFBc1AsbUJBQWlCLEVBQUMsbUJBQWtCLE1BQUcsZUFBYyxPQUFHLHdCQUF1QixNQUFHLGlCQUFnQixPQUFHLFlBQVcsTUFBRyxVQUFTLE1BQUcsVUFBUyxL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QztBQUcxQyxVQUFNLGtCQUFrQixLQUFLLElBQUksVUFBVSxjQUFjLEVBQUU7QUFDM0QsVUFBTSxrQkFBa0IsS0FBSyxTQUFTLGNBQVk7QUFFbEQsVUFBTSxVQUFVLHlCQUF5QixpQkFBaUIsZUFBZTtBQUV6RSxRQUFJLFdBQVcsTUFBSztBQUVuQixZQUFNLGFBQWEsS0FBSyxNQUFNO0FBQUEsUUFDN0IsQ0FBQyxTQUNBLEtBQUssZ0JBQ0w7QUFBQSxNQUNGO0FBQ0EsVUFBSSxjQUFZLElBQUc7QUFFbEIsY0FBTSxlQUF5QixLQUFLLE1BQU0sVUFBVTtBQUNwRCxhQUFLLFdBQVcsY0FBYyxJQUFJO0FBQ2xDLFlBQUksd0JBQU8sa0JBQWtCLGtCQUFrQixVQUFVO0FBQUEsTUFDMUQsT0FDSTtBQUNILFlBQUksd0JBQU8sa0JBQWtCLGtCQUFrQiwyQkFBMkI7QUFBQSxNQUMzRTtBQUFBLElBQ0QsT0FBSztBQUNKLFVBQUksd0JBQU8sMkNBQTJDLGVBQWU7QUFBQSxJQUN0RTtBQUFBLEVBQ0Q7QUFDRDsiLAogICJuYW1lcyI6IFsiZnMiLCAidCIsICJlIiwgImltcG9ydF9vYnNpZGlhbiIsICJzdGFydCIsICJyZWZlcmVuY2UiLCAiZm4iLCAicnVsZXMiLCAiaXNCbG9jayIsICJpc1ZvaWQiLCAibm9kZSIsICJuZXh0IiwgInJvb3QiLCAiaW1wb3J0X29ic2lkaWFuIiwgInJlZmVyZW5jZSIsICJwYXRoIiwgImluZGV4IiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIm5hbWUiLCAic3R5bGUiLCAibmV4dCIsICJ3aW5kb3ciLCAibWluIiwgIm1heCIsICJ0b1BhZGRpbmdPYmplY3QiLCAicG9wcGVyT2Zmc2V0cyIsICJtaW4iLCAibWF4IiwgIm9mZnNldCIsICJlZmZlY3QiLCAicG9wcGVyIiwgImVmZmVjdCIsICJ3aW5kb3ciLCAiaGFzaCIsICJjbGlwcGluZ1BhcmVudHMiLCAicmVmZXJlbmNlIiwgInBvcHBlck9mZnNldHMiLCAib2Zmc2V0IiwgInBsYWNlbWVudHMiLCAicGxhY2VtZW50IiwgInBsYWNlbWVudHMiLCAicGxhY2VtZW50IiwgIl9sb29wIiwgIl9pIiwgImNoZWNrcyIsICJvZmZzZXQiLCAicG9wcGVyT2Zmc2V0cyIsICJvZmZzZXQiLCAibWluIiwgIm1heCIsICJmbiIsICJtZXJnZWQiLCAiZGVmYXVsdE1vZGlmaWVycyIsICJjcmVhdGVQb3BwZXIiLCAicmVmZXJlbmNlIiwgInBvcHBlciIsICJvcHRpb25zIiwgImZuIiwgInN0YXRlIiwgImVmZmVjdCIsICJub29wRm4iXQp9Cg==
